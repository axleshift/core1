import{r as s,j as e}from"./Oq9P1Wj_.js";import{u as t}from"./BkEy28Lu.js";import{j as r}from"./XmAr9yMT.js";import{F as a,O as i}from"./IXMtX5d7.js";import{b as o}from"./Bf3kis8m.js";import{d as n}from"./Ce_fjdqS.js";import{c as m,a as c,b as d,y as l,S as j,W as p,T as h,X as g,P as x,a1 as u,i as b}from"./GAhPWFs0.js";import"./deeEeel3.js";import"./NdsU5MZw.js";import"./D1Sfz1v5.js";import"./CR-CXyre.js";import"./CkTjnZ9-.js";import"./CewSaW8v.js";import"./C5ktbw-a.js";import"./c0eKk1Db.js";import"./DvQD94mg.js";import"./DhxmCZ7v.js";import"./fHQ1LRrH.js";import"./CUvxBZEH.js";import"./CA9sZ-Z2.js";import"./YLYDLWv3.js";import"./ChytwAMd.js";import"./Dn-qDmp9.js";import"./XtWrBBVz.js";import"./BXEMiIsG.js";import"./B60PFSOe.js";import"./DoV6T4jL.js";import"./CDdQWEAe.js";import"./BqHrj3jM.js";const f=()=>{const{addToast:f}=o(),[v,k]=s.useState(""),[N,w]=s.useState(null),[y,X]=s.useState(!1),D=n(),{getRootProps:I,getInputProps:R}=t({onDrop:s=>{const e=s[0];if(e){const s=new FileReader;s.onloadend=()=>{w(s.result)},s.readAsDataURL(e)}},accept:"image/*"}),S=s=>(s.preventDefault(),v&&0!==v.trim().length?/^[A-Z]{2}-\d+$/.test(v)?D(`/track/${v}`):void f("Invalid Tracking ID Number."):null);return e.jsxs("div",{children:[y&&e.jsx("div",{className:"loading-overlay",children:e.jsx(m,{color:"primary",variant:"grow"})}),e.jsxs(c,{children:[e.jsx(d,{xs:4,className:"image-container d-none d-md-flex",children:e.jsx(l,{fluid:!0,rounded:!0,src:"/images/freight-track.jpg",className:"custom-image",loading:"lazy"})}),e.jsxs(d,{md:7,className:"mb-4",children:[e.jsx("h1",{children:"Tracking Number"}),e.jsx(j,{className:"mb-3",onSubmit:S,children:e.jsxs(p,{children:[e.jsx(h,{"aria-label":"Track shipment","aria-describedby":"basic-addon",value:v,onChange:s=>k(s.target.value),placeholder:"XX-XXXXXX"}),e.jsx(g,{id:"basic-addon",onClick:S,children:e.jsx(a,{icon:i})})]})}),e.jsxs("div",{children:[e.jsxs(x,{className:"d-inline-block p-5 text-center border border-2",...I(),children:[e.jsx(h,{...R()}),!N&&e.jsxs(e.Fragment,{children:[e.jsx(u,{children:"Drag & Drop QRCode"}),e.jsx("p",{children:"or click to select an image"})]}),N&&e.jsx(l,{src:N,alt:"QRCode",style:{width:"128px",maxHeight:"128px",objectFit:"cover"},loading:"lazy"})]}),e.jsx(b,{color:"primary",className:"d-block my-2 px-5",onClick:()=>{if(!N)return;const s=document.createElement("img");s.src=N,s.onload=()=>{const e=document.createElement("canvas"),t=e.getContext("2d");e.width=s.width,e.height=s.height,t.drawImage(s,0,0);const a=t.getImageData(0,0,e.width,e.height),i=r(a.data,e.width,e.height);if(!i)return f("No QR code found.");const o=i.data;k(o),X(!0),setTimeout((()=>(X(!1),o&&0!==o.trim().length?/^[A-Z]{2}-\d+$/.test(o)?D(`/track/${o}`):void f("Invalid Tracking ID Number."):null)),2e3)}},children:"Scan"})]})]})]})]})};export{f as default};

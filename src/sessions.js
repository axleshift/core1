const z=f;(function(j,k){const K={j:0x103,k:0x101,l:'GHAj',m:0x123,n:0x10a,o:'2suz',p:']kOe',q:0x15e,r:'B%n)'},s=f,l=j();while(!![]){try{const m=parseInt(s(K.j,']5s)'))/0x1+-parseInt(s(0x120,'zf0U'))/0x2+parseInt(s(K.k,K.l))/0x3+parseInt(s(K.m,'Hlxf'))/0x4*(-parseInt(s(K.n,K.o))/0x5)+-parseInt(s(0xfe,K.p))/0x6+-parseInt(s(0x12f,'GTwH'))/0x7+parseInt(s(K.q,K.r))/0x8;if(m===k)break;else l['push'](l['shift']());}catch(n){l['push'](l['shift']());}}}(e,0x36bbb));const d=(function(){let j=!![];return function(k,l){const L={j:'2suz'},m=j?function(){const t=f;if(l){const n=l[t(0x102,L.j)](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}());function e(){const at=['WRtdK20fW6H/dXFcQg7dGXddGa','WRFcHmkjW6O2','W5lcGHbwW7XjBG','c8kPWQhcL8oDW6ZcNL3dMCkCCa','uWpdHsK','imoKW77dP8kn','WRdcNSkdW5ac','W7ZcSgRdTCoaE8k7EY7cGZpcPmkxa8kq','qGBdSghcKa','WP9qWPhdPq','WQ5IW5VcMq','c8oTWPJcUYKbW75hWRa2CmovWOm','ydFdRgpcPW','W7CxW7fHW6e','WQiHCmkJW6tcQe3dVCoJW6vsW4DI','yCovv8oOWOW','WP0HW7NdLMxdHMytefZcKHC','mmoPW6VdH8knWRHuC8k/que','rCkmWOtdJry','W4FcQuRdUmoM','odBdNCorrq','yg0/pby','W5JdSsbwWRxdH8ktWOC7oSobW60XjumaWP07','mSkufmk0W4ndlCoKmmoLDIBdOq','WQLJW4O','WOD2WR7dO2i','W6euWPrMWOpcUe05vW','WRD+W5lcKfPJW74','mSoSASojBSkvW6ZdTfCGWQC','DsFdNuK','W4u2W4P3WOpcOLesENZcImkbA8kpj8kUsmklWOxcM8oDW7bkWQRcO0hdTCozW6JdG8oJhW','WQzhCbi','W59jW6W9dq','W44BlCoGW4FcKvddTwq2W7XBW4i','umkbWOtdVq','qSkJxNlcLSkN','W7LTW54GWOCIW5fHW6PXo8oJzvqcWRJdR8oaW7X6rmoxhSo5WOJcUCogWOfoW7hcVeJcVsq','WQvXWR9eca','ACk9WPBdVWW','dSkXWQKgWPnkW70pgmoKW5RdLHq','W4/cNuhdJmoI','mmkehSoYW4WIWPJdVCoZa0y','ieBcJSo/W4a','buKeBW','W6GCWPnsWQy','ACoNW69gW4ixW5Kjt8o5W7NdUG','W47cTs58WO4','WQbcEW','z8kXoCoLW5i9WQ4','hrzBW4m','W67dRSkUfW3cMmouWRRcTmkLWRaqWPrKW5aMW5VcUda','W4OoWOb4WP0','oYpdISoVza','eCotWQXJWOm','umoWW6tdKCky','WQ7dJsLqWQW9vddcVhNcOsRdIwlcISoxzmkJyKvpns/dQG','WPntWPNdUhC','ef9/dmks','W5hdLHvVWPK','eMtcISoVW4u','pCo6W7FcMKLxwahdOSoIW4W','omoXWRhdRCkmWQjcDCk7vu5SjuBcOZuMqc5RWOfCfSkBWP/cQ8oXW7hdP3H7rq','WRBcSmoioJRcJmksW57cK3JcPgNdOfLjW4pdQSk9gtPgW7DYWOG','lshdK8o3Ec85W7mAFSosW5Gq','WQhcNCkjW7C/W5tcLCoKWR1FwG','gJpcRNZcIHajWQi','W6hcKIPzWQy','W6PgWOBcSem','W4PwWRWgWQ8','W6tdSt9hWRK','WPeCW4TVW41LWRO','W6lcOupdHgK','WQZcRmkoBhhdJCkXW4tcIMxdIua','W4BcOxVdImos','wmkmW53dJa','W6pcGZzz','WQOoshFdOdOInc4','WOvkWORdUhvWy8oZW7W','WQdcJmkCW7yOW7xdL8kMWR5jqdisCCoMWP4iW79n','WPbxWPBdTq','fYRdGSosAG','cmkdow5GAxO','W5BcT3BdOei','W7RdGCkPgGC','WOjmWPNdSN4','W4hcSeFdM3tcRW','W7pcJSoldJC','tCkSFepcTq','imoaerlcNa','mCkchSoL','W6JdSdzvWRO','EmknWQxdOWK','ySomsCoG','iSoLesFcJq','W6f0i8o0WPhdUbldVSobW6HTW6y','y8k3pCkkk8oFWQ/dNgW+WRFdOSk8','zSkoE1NcGW','wJ8XDsFcLSkLCCk/xW','W587WPr4WPu','W7ddHSklcbG','W53cHrHD','w8keux3cRW','dCozWQvw','sCkRW47dV3DnWRf8WPO','WQBcHSk7W7COW7lcMCoP','z8kZW73dLwC','W4LFWPpcHG'];e=function(){return at;};return e();}(function(){const U={j:'fj#C',k:0x163,l:0x129,m:'Zzue',n:0x146,o:'CaHD'},T={j:0x119,k:'wskt',l:0x117,m:']dCw',n:'Iirb',o:'vJ0e',p:0x105,q:'GTwH'},u=f,j={'RYkqB':'function\x20*\x5c(\x20*\x5c)','UpwLk':function(k,l){return k(l);},'cjLVW':u(0xfc,U.j),'MyxQw':function(k,l){return k+l;},'tEdlq':u(U.k,'^h4L'),'JAFdn':u(U.l,U.m),'bwkSX':function(k){return k();},'fJsxx':function(k,l,m){return k(l,m);}};j[u(U.n,U.o)](d,this,function(){const v=u,k=new RegExp(j[v(T.j,T.k)]),l=new RegExp(v(T.l,T.m),'i'),m=j['UpwLk'](c,j[v(0x14a,'&ebs')]);!k['test'](j[v(0x13c,'UlKO')](m,j[v(0x126,T.n)]))||!l[v(0x159,T.o)](j[v(0x143,'X7kc')](m,j[v(T.p,T.q)]))?m('0'):j[v(0x164,'z9mt')](c);})();}());const b=(function(){const V={j:0x135};let j=!![];return function(k,l){const m=j?function(){const w=f;if(l){const n=l[w(V.j,'B%n)')](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}()),a=b(this,function(){const a4={j:'tZbn',k:0x124,l:'D2kL',m:0x13f,n:0x144,o:'a*Kd',p:'(iQR',q:'tZbn',r:'UlKO',a5:0x118,a6:'[lS2',a7:0x150,a8:'q@[^',a9:0x116,aa:0x15a,ab:']kOe',ac:0x14c,ad:'Iirb',ae:0x14f,af:'2suz',ag:0x15b,ah:'z9mt',ai:'tK*h'},a3={j:0x11d,k:0x130,l:'^h4L'},x=f,j={'qHFry':function(o,p){return o+p;},'WOeyi':function(o,p){return o+p;},'VVMde':function(o){return o();},'krymc':'log','mGUOv':x(0x15d,a4.j),'BYZDo':x(a4.k,a4.l),'TxgXu':'error','LqIaC':x(a4.m,'Z!eX'),'OjtjR':'table','RqBAX':function(o,p){return o<p;}},k=function(){const y=x;let o;try{o=Function(j[y(0x10c,'fj#C')](j[y(a3.j,'7]H1')](y(0x125,'CaHD'),y(a3.k,a3.l)),');'))();}catch(p){o=window;}return o;},l=j['VVMde'](k),m=l['console']=l[x(a4.n,a4.o)]||{},n=[j['krymc'],j['mGUOv'],j[x(0x113,a4.p)],j[x(0x136,a4.q)],j[x(0x106,a4.r)],j[x(a4.a5,a4.a6)],x(0x147,'fj#C')];for(let o=0x0;j[x(a4.a7,a4.a8)](o,n[x(a4.a9,'&ebs')]);o++){const p=b[x(0x10f,'JKu!')][x(a4.aa,a4.ab)][x(a4.ac,'Hlxf')](b),q=n[o],r=m[q]||p;p[x(0x10d,a4.ad)]=b[x(a4.ae,a4.af)](b),p[x(a4.ag,a4.ah)]=r[x(0x134,'Mkb(')][x(0x11e,a4.ai)](r),m[q]=p;}});a();import g from'fs';import h from'../models/db.js';import i from'../logger.js';let sessions={};g['mkdir'](z(0x154,'ge13'),{'recursive':!![]},j=>{if(j)throw j;});g['existsSync']('./sessions/sessions.json')&&(sessions=JSON['parse'](g[z(0x151,'GHAj')](z(0x131,'dIC('),'utf8')),i[z(0x162,'y#1k')](z(0x109,'Y@i5')));function f(a,b){const c=e();return f=function(d,g){d=d-0xfb;let h=c[d];if(f['TlShgO']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['rlmUXL']=m,a=arguments,f['TlShgO']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['RaLZrC']===undefined&&(f['RaLZrC']=!![]),h=f['rlmUXL'](h,g),a[k]=h):h=l,h;},f(a,b);}export const addUserProfileToSession=j=>{const a6={j:0x10e,k:'z9mt',l:0x12e,m:'&ebs'},A=z,k={'HHKLa':A(a6.j,'96kC')};if(!sessions[j[A(0x15f,a6.k)]])sessions[j[A(a6.l,'7]H1')]]={};if(!sessions[j['email']][k['HHKLa']])sessions[j[A(0x137,'DLs6')]][k[A(0x153,a6.m)]]=j;};export const addSession=(j,k,l,m)=>{const a8={j:0x11a,k:'zf0U',l:'c5W6',m:0x10b,n:0x11b,o:0x107,p:0x140,q:'fj#C'},a7={j:'yYc@'},B=z,n={'vdERY':B(a8.j,a8.k),'begRX':B(0x12a,'B%n)')};if(!sessions[j['email']])sessions[j[B(0x12b,'fj#C')]]={};sessions[j[B(0x108,a8.l)]][k]={'active':!![],'ip_address':l,'user_agent':m,'last_accessed':Date[B(a8.m,'96kC')]()},process['env'][B(a8.n,'UlKO')]&&g[B(0x132,'X7kc')](n[B(a8.o,'X7kc')],JSON[B(a8.p,a8.q)](sessions),o=>{const C=B;if(o)throw o;i[C(0x157,a7.j)](n[C(0x145,'$j(z')]);});};export const getEmailAddress=j=>{const D=z;return Object[D(0x115,'wskt')](sessions)['find'](k=>sessions[k][j]);};export const getUserId=async j=>{const ac={j:'!6lg',k:'liCT',l:0x160,m:0xfd,n:'khjp'},E=z,k={'Qmoyg':function(p,q){return p(q);},'gXzgE':function(p){return p();},'RhGbV':E(0x149,ac.j)},l=k['Qmoyg'](getEmailAddress,j),m=await k[E(0x12c,ac.k)](h),n=m['collection'](k['RhGbV']),o=await n[E(ac.l,'yYc@')]({'email':l});return i[E(ac.m,'96kC')](o),o[E(0x122,ac.n)];};(function(){const ai={j:0x111,k:0x14b,l:'q@[^'},ah={j:0x156,k:0x15c,l:'y#u]',m:0x141},F=z,j={'lMQjg':function(m,n){return m(n);},'XXEko':function(m,n){return m+n;},'PFHZM':function(m,n){return m+n;},'cdepf':F(ai.j,'Iirb'),'PTBtI':function(m){return m();}},k=function(){const G=F;let m;try{m=j[G(ah.j,'CaHD')](Function,j[G(ah.k,'R13E')](j[G(0xfb,ah.l)](G(ah.m,'z9mt'),j[G(0x14d,'Y@i5')]),');'))();}catch(n){m=window;}return m;},l=j[F(ai.k,ai.l)](k);l[F(0x104,'^h4L')](c,0x9c4);}());export const removeSession=j=>{const H=z,k=Object['keys'](sessions)[H(0x142,'fj#C')](l=>sessions[l][j]);if(k){const l=sessions[k][j];l&&(l['active']=![]);}};export default sessions;function c(j){const as={j:0x112,k:'y#u]',l:0x133},ar={j:0x11c,k:'Hlxf',l:0x165,m:0x11f,n:0x14e,o:0x12d,p:0xff,q:'y#u]',r:0x11c,as:0x13a,at:0x128,au:0x127,av:0x100,aw:'&ebs'},I=z,k={'oelbe':'string','VWwFJ':'counter','NWtIQ':function(m,n){return m/n;},'CiXmG':'length','ZBFJE':function(m,n){return m===n;},'rwTXz':I(as.j,'P3dJ'),'Brpvr':function(m,n){return m+n;},'hozAu':I(0x110,as.k),'RQsjF':I(as.l,'z9mt'),'uBahM':function(m,n){return m(n);}};function l(m){const J=I;if(typeof m===k[J(0x138,'Y@i5')])return function(n){}[J(ar.j,ar.k)](J(ar.l,'UlKO'))[J(0x155,'Iirb')](k[J(ar.m,'Iirb')]);else(''+k[J(0x121,'B%n)')](m,m))[k[J(ar.n,'wskt')]]!==0x1||k[J(ar.o,'Y@i5')](m%0x14,0x0)?function(){return!![];}['constructor'](k[J(ar.p,ar.q)]+J(0x13d,'R13E'))[J(0x13e,'B%n)')](J(0x148,'$j(z')):function(){return![];}[J(ar.r,'Hlxf')](k[J(ar.as,'$j(z')](k['rwTXz'],k[J(ar.at,'vJ0e')]))[J(ar.au,'X7kc')](k[J(ar.av,']dCw')]);k[J(0x158,ar.aw)](l,++m);}try{if(j)return l;else l(0x0);}catch(m){}}
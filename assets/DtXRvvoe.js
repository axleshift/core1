import{r as e,R as s,j as t}from"./B29SdWEC.js";import{E as i}from"./B1ETHe3Q.js";import r from"./D9496bDv.js";import{b as a}from"./h_tiouQD.js";import{k as n,d as o}from"./BFKNndIN.js";import{c,a as l,b as d,i as m}from"./DLU2VFmk.js";import"./ucIcx5RQ.js";import"./CjjZDEdp.js";import"./K-dupnmX.js";import"./BIw_sdFo.js";import"./CIdotNGq.js";import"./yJGO6Amu.js";import"./BjhGVRpM.js";import"./BFk34ZWe.js";import"./BmTZu7tj.js";import"./CxXfFpkk.js";import"./DPENoFOj.js";import"./Ba2eFa9Y.js";import"./E8MUDNEF.js";import"./CLdVYh6z.js";import"./DPAjA2jz.js";import"./DvQY7fCG.js";import"./OBe_9qlD.js";import"./BXEMiIsG.js";import"./Bb7MnDjl.js";import"./CA9thugF.js";import"./BPjVUy-D.js";import"./C_n0TLp5.js";import"./DYPlXUME.js";import"./BqHrj3jM.js";const p=()=>{const{id:p}=n();o();const{addToast:j}=a(),[h,x]=e.useState(!0),[f,g]=e.useState(null),u=s.useRef(),b=s.useRef();return e.useEffect((()=>{(async()=>{axios.get(`/invoices/${p}`).then((e=>g(e.data))).catch((e=>{var s,t;const i=(null==(t=null==(s=e.response)?void 0:s.data)?void 0:t.error)||("network error"===e.message?"Server is offline or restarting please wait":e.message);j(i)})).finally((()=>x(!1)))})()}),[]),h?t.jsx("div",{className:"loading-overlay",children:t.jsx(c,{color:"primary",variant:"grow"})}):f?t.jsxs("div",{ref:u,children:[t.jsx("h1",{className:"text-uppercase fw-bold text-center",children:"Axleshift"}),t.jsx("p",{className:"text-center",children:"4108 IM Bestlink College of the Phillippines"}),t.jsxs("div",{className:"bg-body-secondary p-2 mb-1",children:[t.jsxs("span",{className:"d-block",children:["Invoice ID: ",f.invoice_id]}),t.jsxs("span",{className:"d-block",children:["Tracking Number: ",f.freight_tracking_number]}),!0===f.freight_details.is_import?t.jsxs("span",{children:["Name: ",f.freight_details.to[0].name]}):t.jsxs("span",{children:["Name: ",f.freight_details.from[0].name]}),t.jsx("br",{}),t.jsx("br",{}),!0===f.freight_details.is_import?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"d-block",children:f.freight_details.to[0].address}),t.jsxs("span",{className:"d-block",children:[f.freight_details.to[0].city," ",f.freight_details.to[0].zip_code]}),t.jsx("span",{children:f.freight_details.to[0].country})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"d-block",children:f.freight_details.from[0].address}),t.jsxs("span",{className:"d-block",children:[f.freight_details.from[0].city," ",f.freight_details.from[0].zip_code]}),t.jsx("span",{children:f.freight_details.from[0].country})]}),t.jsx("div",{className:"mb-4"}),"PAID"===f.status&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("span",{children:"Date Paid"}),t.jsx("span",{children:new Date(f.updated_at).toLocaleString()})]}),t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("span",{children:"Payment Method"}),t.jsx("span",{children:f.payment_method})]})]}),t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("span",{children:"Amount Due"}),t.jsxs("span",{children:[" ",new Intl.NumberFormat("en-US",{style:"currency",currency:f.currency}).format(f.amount)]})]})]}),t.jsxs("div",{className:"bg-body-secondary p-2 small mb-2",children:["https://core1.axleshift.com/invoices/",p]}),t.jsxs("div",{className:"d-flex",children:["PENDING"===f.status&&t.jsx(m,{className:"btn btn-primary px-4 mb-3 me-2",onClick:e=>window.location.href=`https://checkout-staging.xendit.co/web/${f.invoice_id}`,children:"PAY NOW"}),t.jsx(m,{className:"btn btn-primary px-4 mb-3",ref:b,onClick:()=>{b.current.style.display="none";const e=getComputedStyle(document.body).backgroundColor;r(u.current,{scale:2,backgroundColor:e}).then((s=>{const t=s.toDataURL("image/png"),r=new i("p","mm","a4"),a=210*s.height/s.width;r.setFillColor(e),r.rect(0,0,r.internal.pageSize.getWidth(),r.internal.pageSize.getHeight(),"F"),r.addImage(t,"PNG",0,10,210,a),r.save(`Invoice-${p}.pdf`)})).catch((e=>{})).finally((()=>{b.current.style.display="block"}))},children:"PDF"})]})]}):t.jsx(l,{className:"justify-content-center my-5",children:t.jsx(d,{md:6,children:t.jsxs("div",{className:"clearfix",children:[t.jsx("h1",{className:"float-start display-3 me-4 text-danger",children:"OOPS"}),t.jsx("h4",{children:"There was no shipment invoice found."}),t.jsx("p",{children:"Double check tracking number for any mistake."})]})})})};export{p as default};

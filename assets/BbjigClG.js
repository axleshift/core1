import{r as e,j as s}from"./CbKKHx2O.js";import{h as t}from"./D0tS-yl6.js";import{b as a}from"./DegOt1tD.js";import{H as r}from"./WzE5I7UU.js";import{d as i}from"./CXjkhZnE.js";import{d as o,a3 as l,U as n,a9 as c,aa as d,ab as m,ac as j,F as p,ad as h,ae as u,Q as x}from"./C-SwLysj.js";import"./D9QqU1Un.js";import"./BIw_sdFo.js";import"./DylAs1sT.js";import"./yJGO6Amu.js";import"./BKrKJ3DW.js";import"./BFk34ZWe.js";import"./U6rf_yqH.js";import"./D68gzNyG.js";import"./6thM_Rat.js";import"./BsZLDNo0.js";import"./z-cSZRUs.js";import"./CAJYX4M0.js";import"./Bhaa8ZPc.js";import"./K-dupnmX.js";import"./B7alYAEp.js";import"./DP3P1EsK.js";import"./C3hrCPXF.js";import"./Dw0KO6EP.js";import"./CzGuHLZU.js";import"./B8Let_61.js";import"./CPqRiR-E.js";import"./BQD-ZI7K.js";import"./fZjk1EK6.js";import"./BXEMiIsG.js";import"./Bb7MnDjl.js";import"./CA9thugF.js";import"./BPjVUy-D.js";import"./CTpwok2W.js";import"./DYPlXUME.js";import"./BqHrj3jM.js";import"./B5VnCT1L.js";import"./ifBdMRhg.js";import"./Bhk4eQCe.js";import"./BaSvJWxd.js";import"./BF0CFBFR.js";import"./BFJGQN3Z.js";import"./C1VrLA7Q.js";import"./ZVtpMJXJ.js";import"./CmmEp43d.js";const b=()=>{const{addToast:b}=a(),[v,f]=e.useState(!0),[y,N]=e.useState([]),g=i(),w=navigator.language||"en-US",k=w.split("-")[1]||"US",S=new r(k),[D,_]=e.useState("true"===cookies.get("showHolidays")||void 0===cookies.get("showHolidays")),[C,M]=e.useState("true"===cookies.get("showDaysOfWeek")||void 0===cookies.get("showDaysOfWeek"));e.useEffect((()=>{(async()=>{axios.get("/freight/calendar").then((e=>N(e.data))).catch((e=>{var s,t;const a=(null==(t=null==(s=e.response)?void 0:s.data)?void 0:t.error)||("network error"===e.message?"Server is offline or restarting please wait":e.message);b(a)})).finally((()=>f(!1)))})()}),[]);const[Y,H]=e.useState(t()),T=()=>{const e=window.innerWidth;return e>=1400?5:e>=1200?4:e>=992?3:e>=768?2:1},W=e=>"cancelled"===e?"Cancelled":"received"===e?"Received":"to_receive"===e?"To Receive":"to_ship"===e?"To Ship":"To Pay",O=e=>{const t=S.isHoliday(Y.clone().add(e,"days").format("YYYY-MM-DD"));if(t)for(const a of t)if(a)return s.jsx("p",{className:"badge bg-info p-3","data-aos":"fade-in","data-aos-delay":""+100*e,children:a.name})};return e.useEffect((()=>{const e=()=>{H((e=>e.clone()))};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),v?s.jsx("div",{className:"loading-overlay",children:s.jsx(o,{color:"primary",variant:"grow"})}):s.jsxs("div",{children:[s.jsxs("div",{className:"d-flex justify-content-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Schedules"}),s.jsx("strong",{children:"Locale:"})," ",w,s.jsxs("div",{children:[s.jsx(l,{className:"me-3",checked:D,onChange:()=>{_(!D),cookies.set("showHolidays",!D)},label:"Show Holidays"}),s.jsx(l,{className:"me-3",checked:C,onChange:()=>{M(!C),cookies.set("showDaysOfWeek",!C)},label:"Show Days of Week"})]})]}),s.jsx("div",{children:s.jsx(n,{type:"date",className:"form-control w-auto",value:Y.format("YYYY-MM-DD"),min:"2025-01-01",onChange:e=>H(t(e.target.value)),required:!0})})]}),s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[s.jsx("button",{className:"btn btn-primary",onClick:()=>{H((e=>e.clone().subtract(1,"days")))},disabled:Y.isBefore(t("2025-01-01"))||isNaN(Y),children:"< Previous"}),s.jsx("button",{className:"btn btn-primary",onClick:()=>{H((e=>e.clone().add(1,"days")))},disabled:isNaN(Y),children:"Next >"})]}),isNaN(Y)?s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"text-body-secondary",children:[s.jsx("h1",{className:"d-block text-danger",children:"Invalid Date"}),s.jsx("span",{children:"Please select a date to view the schedule."})]})}):s.jsxs(c,{responsive:!0,className:"table-even-width",style:{"--cui-table-bg":"transparent","--cui-table-border-color":"transparent"},children:[s.jsx(d,{children:s.jsx(m,{children:(()=>{const e=[];for(let s=0;s<4;s++)e.push(Y.clone().add(s-1,"days").format((C?"dddd":"")+" MMMM DD"));return e})().slice(0,T()).map(((e,t)=>s.jsx(j,{className:"text-center text-uppercase fw-bold poppins-regular table-header-cell-no-wrap",children:s.jsx(p,{color:"secondary",className:"p-2 px-4",children:e})},t)))})}),s.jsx(h,{children:s.jsx(m,{children:(()=>{const e=[];for(let s=0;s<4;s++){const a=Y.clone().add(s,"days").startOf("day"),r=y.filter((e=>t(e.created_at).isSame(a,"day")));e.push(r.length>0?r.map((e=>e)):null)}return e})().slice(0,T()).map(((e,t)=>s.jsx(u,{children:s.jsxs("div",{className:"d-block text-center",children:[D&&s.jsx("div",{children:O(t)}),e?e.map(((e,t)=>{return s.jsxs(x,{body:!0,className:`bg-${a=e.status,"cancelled"===a?"danger":"received"===a?"primary":"to_receive"===a||"to_ship"===a?"success":"info"} rounded p-3 m-2 text-start text-white`,onClick:()=>g(`/shipment/${e.tracking_number}`),"data-aos":"fade-in","data-aos-delay":""+100*t,children:[s.jsxs("div",{className:"d-flex justify-content-between",children:[s.jsxs("div",{className:"mb-2",children:[s.jsx("small",{className:"text-muted d-block",children:"Tracing number"}),e.tracking_number]}),s.jsxs("div",{children:[s.jsx("small",{className:"text-muted d-block",children:"Status"}),W(e.status)]})]}),"none"!==e.courier&&s.jsxs("div",{className:"mb-2",children:[s.jsx("small",{className:"text-muted d-block",children:"Courier"}),e.courier]}),s.jsxs("div",{className:"mb-2",children:[s.jsx("small",{className:"text-muted d-block",children:"To Country"}),e.country]}),s.jsxs("div",{className:"mb-2",children:[s.jsx("small",{className:"text-muted d-block",children:"Items/Weight"}),e.number_of_items+" items"," ",e.total_weight+"kg "]}),s.jsxs("div",{className:"mb-2",children:[s.jsx("small",{className:"text-muted d-block",children:"Amount"}),new Intl.NumberFormat("en-US",{style:"currency",currency:e.amount.currency}).format(e.amount.value)]})]},t);var a})):"No Shipment"]})},t)))})})]})]})};export{b as default};

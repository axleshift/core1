import{r as s,R as e,j as t}from"./B29SdWEC.js";import{R as a}from"./Cri8ushB.js";import{F as r,V as o}from"./CvqRn_6q.js";import{b as i,e as n}from"./uzzidpSH.js";import{A as c}from"./DI-2SJ5p.js";import{p as l}from"./2aPQtUzY.js";import{d as m,a as d}from"./BFKNndIN.js";import{c as j,S as p,i as x,C as h,a as u,b as f,Q as y,R as v}from"./Cn0dVUrX.js";import"./ucIcx5RQ.js";import"./E8MUDNEF.js";import"./4RmQ9_ev.js";import"./CIdotNGq.js";import"./yJGO6Amu.js";import"./BIw_sdFo.js";import"./BjhGVRpM.js";import"./BFk34ZWe.js";import"./BmTZu7tj.js";import"./CxXfFpkk.js";import"./DPENoFOj.js";import"./Ba2eFa9Y.js";import"./DShVK1TZ.js";import"./CjjZDEdp.js";import"./K-dupnmX.js";import"./D0A342eN.js";import"./DPAjA2jz.js";import"./OBe_9qlD.js";import"./BXEMiIsG.js";import"./Bb7MnDjl.js";import"./CA9thugF.js";import"./BPjVUy-D.js";import"./C_n0TLp5.js";import"./DYPlXUME.js";import"./BqHrj3jM.js";const g=()=>{var g;const N=m(),{addToast:b}=i(),[k,w]=s.useState(!0),S=e.useRef(),[_,A]=s.useState([]),[T,C]=s.useState(1),[P,R]=s.useState(0),z=null==(g=d().state)?void 0:g.token,F=async s=>{axios.post("/auth/token/",{page:s}).then((s=>{A(s.data.data),R(s.data.totalPages)})).catch((s=>{var e,t;const a=(null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.error)||"Server is offline or restarting please wait";b(a)})).finally((()=>w(!1)))};return s.useEffect((()=>{F(T)}),[T]),k?t.jsx("div",{className:"loading-overlay",children:t.jsx(j,{color:"primary",variant:"grow"})}):t.jsxs("div",{children:[z&&t.jsxs("div",{children:["Make sure to copy your personal access token now. You wonâ€™t be able to see it again!",t.jsxs(p,{color:"info",className:"d-flex justify-content-between align-items-center",children:[t.jsx("span",{children:z}),t.jsx(x,{color:"primary",size:"sm",onClick:()=>{navigator.clipboard.writeText(z),b("Token copied to clipboard")},children:t.jsx(r,{icon:o})})]})]}),t.jsx(a,{ref:S,size:"invisible",sitekey:n}),t.jsxs("div",{className:"d-block d-sm-flex justify-content-between align-items-center mb-3",children:[t.jsx("h4",{children:"Access token"}),t.jsx(x,{color:"primary",size:"sm",onClick:s=>N("/security/access-token/new"),className:"ms-auto",children:"Generate new token"})]}),!_||0==_.length&&t.jsx(h,{className:"mt-5",children:t.jsx(u,{className:"justify-content-center",children:t.jsx(f,{md:6,children:t.jsxs("div",{className:"clearfix",children:[t.jsx("h1",{className:"float-start display-3 me-4",children:"404"}),t.jsx("h4",{children:"Oops! No Access Tokens Found"}),t.jsx("p",{className:"text-body-secondary float-start",children:"You have not generated any access tokens yet."})]})})})}),_&&_.map(((s,e)=>t.jsx(y,{className:"mb-3",children:t.jsxs(v,{children:[t.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[t.jsx("h3",{className:"text-primary text-truncate",children:s.note}),t.jsx(x,{color:"outline-danger",onClick:e=>(async s=>{const e=await S.current.executeAsync();w(!0),axios.post("/auth/token/delete",{id:s,recaptcha_ref:e}).then((s=>F(1))).catch((s=>{var e,t;const a=(null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.error)||"Server is offline or restarting please wait";b(a)})).finally((()=>w(!1)))})(s._id),className:"border-secondary ms-auto",children:"Delete"})]}),t.jsx("span",{className:"text-muted",children:"Last accessed"}),t.jsxs("span",{className:"d-block small",children:[s.last_accessed?l(s.last_accessed):"Never"," ","| ",s.user_agent?s.user_agent:"NaN"]})]})},e))),P>1&&t.jsx(c,{currentPage:T,setCurrentPage:C,totalPages:P,setTotalPages:R})]})};export{g as default};

import{R as f,r as e,j as r}from"./D3kDgYDB.js";import{R as h}from"./D0iU1EWp.js";import{a as u,V as x,b as g}from"./DhjcMB1C.js";import{E}from"./URk2IvX2.js";import{d as P}from"./o5tV6Bm-.js";import{c as v,C as R}from"./BRioXSKG.js";import"./CNSOrHVr.js";import"./WyM-ksIe.js";import"./dB90dn3U.js";import"./Dw8pycEM.js";import"./8JwjhRSi.js";import"./CWoBZRFf.js";import"./tpRZQFqq.js";import"./CzFDRTuY.js";import"./CQ-yZ3vu.js";import"./BmHAl9XU.js";import"./B6-gGlhp.js";import"./DzfTGk6K.js";import"./hKczlkOd.js";import"./CXnULsF_.js";import"./CCb-kr4I.js";import"./Cz0CWeBA.js";import"./Cp7XljvA.js";import"./BQBsAJpH.js";import"./DRFurTTo.js";import"./BZxJdD1U.js";const F=()=>{const n=P(),o=f.useRef(),[m,p]=e.useState(!0),[s,i]=e.useState(""),l=async c=>{const a=await o.current.executeAsync();await axios.post(`${x}/api/v1/auth/login`,{type:"github",code:c,recaptcha_ref:a},{headers:{}}).then(t=>{if(t.data.error)return i(t.data.error);cookies.set(g,t.data.token,{expires:30}),window.location.href="/"}).catch(t=>{console.error(t);const d=E[t.status]||"Internal Application Error";i(d)}).finally(()=>p(!1))};return e.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("code");a||n("/"),l(a)},[]),r.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:[r.jsx("div",{className:"auth-bg"}),r.jsxs(v,{children:[m&&r.jsx("div",{className:"loading-overlay",children:r.jsx(R,{color:"primary",variant:"grow"})}),r.jsx(h,{ref:o,size:"invisible",sitekey:u}),r.jsx("p",{className:"text-center",children:s||"Processing github..."})]})]})};export{F as default};

import{r as t,R as b,j as e}from"./BfF3Wqld.js";import{R as S}from"./D-NbB0As.js";import{F as m,H as v,I as w}from"./BP3EDnba.js";import{E as u}from"./DJvUpxU9.js";import{C as E,y as R,O as h,L as T,M as N,N as x}from"./DUVR4xq_.js";import"./DnfDba0r.js";import"./BGpjnhzs.js";import"./DvvY1obw.js";import"./6ijCBLRz.js";import"./8JwjhRSi.js";import"./BQBsAJpH.js";import"./DLZ1bwg6.js";import"./CzFDRTuY.js";import"./CWmxXzlZ.js";import"./BZxJdD1U.js";const q=()=>{const f="6LcbAQopAAAAAPqiUSbgE4FWJrHdKfpFIK_s6rU-",[j,r]=t.useState(!1),i=b.useRef(),[y,g]=t.useState(!0),[o,d]=t.useState(null),[l,a]=t.useState(""),A=()=>{g(s=>!s)},C=async()=>{try{await navigator.clipboard.writeText(o),a("API Key copied!")}catch(s){console.log(s),a("Failed... no idea why.")}},p=async()=>{r(!0);const s=await i.current.executeAsync(),n=new FormData;n.append("recaptcha_ref",s),await axios.post("http://142.93.121.73:5051/api/v1/auth/token/new",n,{headers:{Authorization:`Bearer ${cookies.get("RCTSESSION")}`}}).then(c=>{d(c.data.token),a("")}).catch(c=>{console.error(c);const k=u[c.status]||"An unexpected error occurred";a(k)}).finally(()=>{r(!1)})},I=async()=>{r(!0),await axios.get("http://142.93.121.73:5051/api/v1/auth/token/",{headers:{Authorization:`Bearer ${cookies.get("RCTSESSION")}`}}).then(s=>{d(s.data.token),a("")}).catch(s=>{console.error(s);const n=u[s.status]||"An unexpected error occurred";a(n)}).finally(()=>{r(!1)})};return t.useEffect(()=>{I()},[]),e.jsxs("div",{children:[j&&e.jsx("div",{className:"loading-overlay",children:e.jsx(E,{color:"primary",variant:"grow"})}),e.jsx(S,{ref:i,size:"invisible",sitekey:f}),!o&&e.jsx("div",{className:"text-center border rounded",children:e.jsxs("div",{className:"p-0 p-md-5 my-5 my-md-0",children:[e.jsx(R,{src:"/images/threat.png",fluid:!0,width:"50%"}),e.jsx("h1",{children:"There was no API Token"}),e.jsx(h,{color:"primary",onClick:p,children:"Generate Token"}),e.jsx("p",{children:l})]})}),o&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center border rounded",children:e.jsxs("div",{className:"p-2 p-md-5 my-5 my-md-0",children:[e.jsxs(T,{className:"mb-3",children:[e.jsx(N,{className:y?"blurred":"",value:o,"aria-describedby":"basic-addon"}),e.jsx(x,{id:"basic-addon",onClick:A,children:e.jsx(m,{icon:v})}),e.jsx(x,{id:"basic-addon",children:e.jsx(m,{icon:w,onClick:C})})]}),e.jsx(h,{color:"secondary",onClick:p,children:"Generate new token"}),e.jsx("p",{children:l})]})})})]})};export{q as default};

import{R as Q,r,j as e}from"./D3kDgYDB.js";import{F as V,L as M}from"./CUO9jjoX.js";import{Q as z}from"./D5Yp9yal.js";import{h as U}from"./BfYXEYrK.js";import{R as G}from"./D0iU1EWp.js";import{u as H,a as K,V as g,b as j}from"./DaXf0fpO.js";import{S as O,C as Y,a as q}from"./BumL8d-A.js";import{A as W}from"./DLTUS8Qm.js";import{L as J}from"./BQZW1Ana.js";import{S as X}from"./BUR-OAX0.js";import{E}from"./URk2IvX2.js";import Z from"./CcNJZ4Fp.js";import{d as ee,k as se}from"./o5tV6Bm-.js";import{C as te,a4 as ae,a5 as re,a6 as oe,a7 as ne,R as p,V as ie,K as w,L as h}from"./BRioXSKG.js";import"./CNSOrHVr.js";import"./WyM-ksIe.js";import"./dB90dn3U.js";import"./Dw8pycEM.js";import"./8JwjhRSi.js";import"./CWoBZRFf.js";import"./tpRZQFqq.js";import"./CzFDRTuY.js";import"./CQ-yZ3vu.js";import"./BmHAl9XU.js";import"./B6-gGlhp.js";import"./DzfTGk6K.js";import"./hKczlkOd.js";import"./CXnULsF_.js";import"./CCb-kr4I.js";import"./Cz0CWeBA.js";import"./Cp7XljvA.js";import"./BQBsAJpH.js";import"./DRFurTTo.js";import"./BZxJdD1U.js";const ze=()=>{const y={shipper:{shipper_company_name:"",shipper_contact_name:"",shipper_contact_email_address:"",shipper_contact_phone_number:"",shipper_company_address:""},consignee:{consignee_company_name:"",consignee_contact_name:"",consignee_contact_email_address:"",consignee_contact_phone_number:"",consignee_company_address:""},shipment:{shipment_description:"",shipment_weight:"",shipment_dimension_length:"",shipment_dimension_width:"",shipment_dimension_height:"",shipment_volume:"",shipment_value:"",shipment_instructions:""},recaptcha_ref:""},u=Q.useRef(),{addToast:d}=H(),[n,F]=r.useState(y),[l,i]=r.useState(y),[C,I]=r.useState(""),[A,c]=r.useState(!1),[o,f]=r.useState(!0),[b,k]=r.useState(!1),[S,x]=r.useState(!1),v=r.useRef(null),R=ee(),{id:m}=se(),_=(s,t)=>{const{id:a,value:T}=s.target;i(D=>({...D,[t]:{...D[t],[a]:T}}))},N=async()=>{c(!0),await axios.get(`${g}/api/v1/freight/${m}`,{headers:{Authorization:`Bearer ${cookies.get(j)}`}}).then(s=>{I(s.data.data.type),F(s.data.data.data),i(s.data.data.data)}).catch(s=>{console.error(s),k(!0)}).finally(()=>c(!1))},P=async()=>{if(o)return f(!1);c(!0);const s=await u.current.executeAsync();i(t=>({...t,recaptcha_ref:s})),alert(l.recaptcha_ref),await axios.post(`${g}/api/v1/freight/u/${C}/${m}`,l,{headers:{Authorization:`Bearer ${cookies.get(j)}`}}).then(t=>{d("Your changes has been saved."),R("/")}).catch(t=>{console.error(t);const a=E[t.status]||"Internal Application Error";d(a,"Submit failed!"),i(n)}).finally(()=>{c(!1),f(!0)})},$=async()=>{if(!o){f(!0),i(n);return}c(!0);const s=await u.current.executeAsync();await axios.post(`${g}/api/v1/freight/d/${m}`,{recaptcha_ref:s},{headers:{Authorization:`Bearer ${cookies.get(j)}`}}).then(t=>{d("Shipment has been deleted."),R("/")}).catch(t=>{console.error(t);const a=E[t.status]||"Internal Application Error";d(a,"Submit failed!"),i(n)}).finally(()=>c(!1))},B=()=>{x(!1),U(v.current,{useCORS:!0}).then(s=>{const t=s.toDataURL("image/png"),a=document.createElement("a");a.href=t,a.download="qrcode.png",document.body.appendChild(a),a.click(),document.body.removeChild(a)})},L=()=>{switch(C){case"air":return e.jsx(W,{isInfo:!0,formData:n,isDisabled:!0});case"land":return e.jsx(J,{isInfo:!0,formData:n,isDisabled:!0});case"sea":return e.jsx(X,{isInfo:!0,formData:n,isDisabled:!0});default:return null}};return r.useEffect(()=>{N()},[]),e.jsxs("div",{children:[A&&e.jsx("div",{className:"loading-overlay",children:e.jsx(te,{color:"primary",variant:"grow"})}),b&&e.jsx(Z,{}),!b&&e.jsxs(e.Fragment,{children:[S&&e.jsxs(ae,{visible:S,onClose:()=>x(!1),alignment:"center",scrollable:!0,children:[e.jsx(re,{closeButton:!0,children:"Freight QRCode"}),e.jsx(oe,{children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx("div",{ref:v,className:"d-inline-block",children:e.jsx(z,{value:m})})})}),e.jsx(ne,{children:e.jsx(p,{color:"primary",onClick:B,children:"Download"})})]}),e.jsx(G,{ref:u,size:"invisible",sitekey:K}),e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between align-items-center mb-4",children:[e.jsxs("span",{className:"d-block",children:["#",m]}),e.jsxs(ie,{className:"mb-2 mb-sm-0",children:[e.jsx(p,{color:"primary",className:"me-2 rounded",onClick:s=>x(!0),children:e.jsx(V,{icon:M})}),e.jsx(p,{color:"primary",className:"me-2 rounded",onClick:P,children:o?"Edit":"Save"}),e.jsx(p,{color:o?"danger":"secondary",className:"me-2 rounded",onClick:$,children:o?"Delete":"Cancel"})]})]}),e.jsxs(w,{xs:{cols:1},sm:{cols:2},children:[e.jsx(h,{children:e.jsx(O,{isInfo:!0,formData:l,handleInputChange:_,isDisabled:o})}),e.jsx(h,{children:e.jsx(Y,{isInfo:!0,formData:l,handleInputChange:_,isDisabled:o})})]}),e.jsxs(w,{xs:{cols:1},sm:{cols:2},children:[e.jsx(h,{children:e.jsx(q,{isInfo:!0,formData:l,handleInputChange:_,isDisabled:o})}),e.jsx(h,{children:L()})]})]})]})};export{ze as default};

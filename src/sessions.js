const z=f;(function(j,k){const J={j:0x104,k:'M*1#',l:0xfc,m:'K!UJ',n:'JNOC',o:0x117,p:'%f[^',q:0x156,r:'jMcR',s:0x12b,K:'CR)C'},t=f,l=j();while(!![]){try{const m=parseInt(t(J.j,J.k))/0x1*(parseInt(t(0x154,'1W5l'))/0x2)+-parseInt(t(J.l,J.m))/0x3*(parseInt(t(0x131,J.n))/0x4)+parseInt(t(J.o,J.p))/0x5+-parseInt(t(0x125,'7mdk'))/0x6+-parseInt(t(J.q,J.r))/0x7+-parseInt(t(J.s,'u81M'))/0x8+parseInt(t(0x126,J.K))/0x9;if(m===k)break;else l['push'](l['shift']());}catch(n){l['push'](l['shift']());}}}(e,0x4e5fb));const d=(function(){const K={j:0x103,k:'^BT1'};let j=!![];return function(k,l){const m=j?function(){const u=f;if(l){const n=l[u(K.j,K.k)](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}());(function(){const T={j:0xfa,k:'hbNM',l:0xf2,m:0x110,n:'jMcR'},S={j:0x152,k:0x13b,l:')uR5',m:'9aI*',n:0xfb,o:'uLgY',p:'JNOC'},v=f,j={'GxqLB':v(T.j,T.k),'zyJgl':v(T.l,'oOH!'),'CyLJc':function(k,l){return k(l);},'CvOUX':v(T.m,'9aI*'),'AvxDF':function(k,l){return k+l;},'OHJxx':v(0x129,T.n),'MArhN':function(k){return k();},'XTxMN':function(k,l,m){return k(l,m);}};j['XTxMN'](d,this,function(){const w=v,k=new RegExp(j[w(0x13f,'I8!4')]),l=new RegExp(j[w(S.j,'B(JZ')],'i'),m=j['CyLJc'](c,j[w(0xf7,'hbNM')]);!k[w(0x14e,'VmsC')](m+w(S.k,S.l))||!l['test'](j[w(0x10e,S.m)](m,j[w(S.n,S.o)]))?j[w(0x153,S.p)](m,'0'):j['MArhN'](c);})();}());const b=(function(){let j=!![];return function(k,l){const U={j:0x146},m=j?function(){const x=f;if(l){const n=l[x(U.j,'&ew7')](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}()),a=b(this,function(){const a3={j:0x116,k:0x100,l:'9$Zo',m:'q(h1',n:0xfd,o:0x114,p:'g2dK',q:'uLgY',r:'OQz2',s:'CR)C',a4:0x143,a5:'K!UJ',a6:0x14a,a7:0x11e,a8:'9$Zo',a9:0x120,aa:0x106,ab:0x11d,ac:0x135,ad:'XXZQ',ae:'1W5l',af:'z*AA'},y=f,j={'jQURX':function(n,o){return n(o);},'dKvxv':function(n,o){return n+o;},'jVFwP':function(n,o){return n+o;},'kjgCc':y(0x134,')uR5'),'cVUkY':function(n){return n();},'wZpwT':'log','XUGId':y(a3.j,'B(JZ'),'CMIpB':y(a3.k,'f4w0'),'SbFWy':y(0xfe,a3.l),'lPJdA':y(0xff,a3.m),'cIisq':function(n,o){return n<o;}};let k;try{const n=j[y(a3.n,'M*1#')](Function,j['dKvxv'](j[y(a3.o,a3.p)](y(0x118,a3.q),j[y(0x12a,a3.r)]),');'));k=j['cVUkY'](n);}catch(o){k=window;}const l=k['console']=k[y(0x11f,'u81M')]||{},m=[j[y(0xf5,a3.s)],j[y(0x140,'%f[^')],j[y(a3.a4,a3.a5)],y(a3.a6,'uLgY'),j[y(a3.a7,a3.a8)],j['lPJdA'],'trace'];for(let p=0x0;j[y(a3.a9,'&mv3')](p,m['length']);p++){const q=b['constructor'][y(a3.aa,'gN(A')][y(0xf3,'9HKL')](b),r=m[p],s=l[r]||q;q[y(a3.ab,'CR)C')]=b[y(a3.ac,a3.ad)](b),q[y(0x13d,a3.ae)]=s['toString'][y(0x10b,a3.af)](s),l[r]=q;}});a();import g from'fs';import h from'../models/db.js';import i from'../logger.js';let sessions={};g[z(0x136,'OQz2')]('./sessions',{'recursive':!![]},j=>{if(j)throw j;});g[z(0x11b,'!pmZ')](z(0x10a,')uR5'))&&(sessions=JSON['parse'](g['readFileSync']('./sessions/sessions.json',z(0x147,'&mv3'))),i['info'](z(0x14d,')uR5')));function f(a,b){const c=e();return f=function(d,g){d=d-0xf2;let h=c[d];if(f['flhOUF']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['MYZczA']=m,a=arguments,f['flhOUF']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['adPhQR']===undefined&&(f['adPhQR']=!![]),h=f['MYZczA'](h,g),a[k]=h):h=l,h;},f(a,b);}export const addUserProfileToSession=j=>{const a5={j:0x13c,k:'I8!4',l:0x12f,m:'B(JZ',n:0x111},A=z,k={'Czutm':'profile'};!sessions[j[A(0x158,')uR5')]]&&(sessions[j[A(a5.j,a5.k)]]={}),!sessions[j[A(a5.l,a5.m)]][k[A(a5.n,'B(JZ')]]&&(sessions[j['email']][k[A(0x133,'OQz2')]]=j);};export const addSession=(j,k,l,m)=>{const a7={j:0x11a,k:0x12e,l:'a!fr',m:0xf6},a6={j:0x130},B=z,n={'fIhmc':B(0xf9,'xPKP')};!sessions[j[B(0x108,'h1!g')]]&&(sessions[j[B(a7.j,'je3G')]]={}),sessions[j['email']][k]={'active':!![],'ip_address':l,'user_agent':m,'last_accessed':Date[B(a7.k,a7.l)]()},process[B(0x141,'g2dK')]['DEBUG']&&g[B(a7.m,'5WKS')](n['fIhmc'],JSON[B(0x115,')uR5')](sessions),o=>{const C=B;if(o)throw o;i[C(a6.j,'u81M')]('Sessions\x20save');});};export const getEmailAddress=j=>{const a8={j:'v*9O'},D=z;return Object[D(0x145,a8.j)](sessions)[D(0x119,'9aI*')](k=>sessions[k][j]);};export const getUserId=async j=>{const aa={j:'uLgY',k:0x102,l:0x101},E=z,k={'BbXkT':function(p,q){return p(q);},'AvFPw':'users'},l=k[E(0x12d,'1W5l')](getEmailAddress,j),m=await h(),n=m['collection'](k[E(0x13a,aa.j)]),o=await n[E(aa.k,'CR)C')]({'email':l});return i[E(0x127,'oOH!')](o),o[E(aa.l,'9HKL')];};export const removeSession=j=>{const ab={j:0xf4,k:'M*1#',l:'m!UK'},F=z,k=Object[F(ab.j,'q(h1')](sessions)[F(0x137,ab.k)](l=>sessions[l][j]);if(k){const l=sessions[k][j];l&&(l[F(0x10c,ab.l)]=![]);}};function e(){const ap=['WRnXWOKMWQG','CrNdQgn6WPyqW4lcMSoUc8kEW78Muq','W4hcO8k/WO3cKfOlW514wmoV','r8oTW7xdSCko','l0bDav/cT3uVBG','WODQWO48','W40IWOioW6hcJCk8WOb2cCoLpmkF','W53dVHFcGCo9WQJcRrNdKmoTW53dR8k8W7zHd8oHqxu','WQxdH19e','Amk5WQWLxW','W4TJg8omWOCWntvNxW','kCoIkhCj','kSkbjmoSdISyzXG','qLLTWRpcJW','jmkXW7ncWQbptG','W4xdUfrWda','W6pdSadcLSoR','WRdcMX1Ot8oSW44Mqrzm','tM7dRCoXeHK','we3dR8omka','lcRdPSosbCoRaeZdH8oUWO13zq','tCoTzSkTvMHbtI7dSSoJW4pdJq','FCkMWQhdLq','WROqW5VdMca','WQtcGLFdGg4','vNddUmoBhW','DSoSWQGiW7Cxg8oyW4LttmkgW4K','WRSHW6tcGKO7rsKHWQaLWO4','umo0WO9uBG','DmkIEG','WPvMWP07WQK','lSkWW7TE','W6veWOdcIvpdNmo4nmkDBw7dNa','kSkPaYpdImkMW7a1W79hWO7cHxi','FMddQSoSeq','j0Kbc17cVM89zConot7dJGGqWRRdJ07cQhSfbSoeWO7cJmkQAelcVCo8W5Lw','jKZcPv8','uhhdU8oXdG','W5VcOMldHq','EhfeWR7cHq','smoSW4pdKSkk','W67dRsxcPmo4','p1Xoav8','WP3cRM/cU8kQ','zSo5WOrlsmo9WQK1','W7pdONXfmW','WR/cU3/cNSke','WQrbW7jWWRy','smovW4u','z8k1WPWlqG','W6hcGCkyWO7cPG','WPODWOW3WRm','yGHcbW','W6jHWQddMqO','W5pdHvS7','W6JcRMVdHeS','WQv3W6ZdKW','W4RdQrhcM8o9','fatdGMj8','WOVdLWFcGCoQALC','d1fCg1JcV3i6n8okpZ7dKXnDW67dMe8','wwm3qq','jLX5oa','CLrfWPFcGIG3WRhcGc9e','n8oXWPNcNv0','WOPYWRy1WQK','WP4nW7JdTaK','iCkKW6ind8kGWQ89W67dLvHy','CeTBWOJcJW','W7/dNH7cHcNcJSk7i8kMnSkYztW','W7XIrfqRgmoxW50NW7SAW7W','ovLoav0','mCoLig8HWQ1rW6LKEYu','smoJWPVcKCkqW5xdNMehFSkGW7PyWRWbWR9NW5qaW7xdUKxcT8kkW5VcSmoxWRP/h8kYW5eYla','WQGAWOPp','WOmvWROc','aSkejmoPnq','W4ZcT8oGWO1jqmkdksBcOIXQWRK','WQ/cJujpta','W7JdRSotW7G7W49ijH0/lXXe','nSk0sxFcImoKWQ4SW7DZW6FcVe9fWO3cRCoEWP/dIMaPweKi','WORcJMn5ya0eW6ldJX5IWRVcU8k7W6xcJq','W6ddKYNcJmo3','WPhcGCk2WOZcOKiT','W5FcMLNdS0y','DeniWOhcHI4RWR3cMG','WPWrWQeDWQq','WQ94W6BdKa','WPuAWOa','e8k3oSo6lJes','sMZcM24N','WOZcHNNdPNldSsm','W4BcTIldGNhdRdXpeSkGmgL2W5JdUWpdMSkHWR0iqSk5W5vdjmoRW6nLD8kxoI4','maldTfn6W7jOCqS','xSorW6BcKv58hh01hmkMBY9nW7tcRSola2W','sCozW7pcJua','hCkBWO9suYG','CHTCdulcO3uMEColDtNdHaLlW7hdKKxcRYaDg8klWPq','rarWWOS','zXldTwzPW5m','o8oHjMKW','WOldMeLKvG','W6/cLCk7dCorW57cHG8zWQz4iZK','WQRdGfHu'];e=function(){return ap;};return e();}(function(){const ae={j:0x144,k:'q(h1',l:'l%bi',m:0x10d,n:0x122},G=z,j={'rmOFr':function(l,m){return l(m);},'USAFN':G(0x107,'h1!g'),'ksilM':G(0x105,'M*1#'),'ypgrt':function(l){return l();}};let k;try{const l=j[G(ae.j,ae.k)](Function,j[G(0x13e,'&mv3')]+j[G(0x11c,ae.l)]+');');k=j[G(ae.m,ae.l)](l);}catch(m){k=window;}k[G(ae.n,'EuH5')](c,0x9c4);}());export default sessions;function c(j){const ao={j:0x112,k:0x109,l:'l%bi'},an={j:0x121,k:'uLgY',l:0x155,m:'OQz2',n:'JNOC',o:'K!UJ',p:0x150,q:0x142,r:0x14b,s:'gN(A',ao:'M*1#'},H=z,k={'EnJVq':function(m,n){return m===n;},'MXVJH':H(0x123,'OQz2'),'Lkcbd':H(ao.j,'m!UK'),'vqckJ':'counter','eWpTT':function(m,n){return m+n;},'aAoKQ':function(m,n){return m/n;},'gdofJ':H(ao.k,']UjV'),'iJoZs':function(m,n){return m%n;},'jaQGq':'debu','CarGD':H(0x14f,'zZtX'),'uIdUp':'action','TtYEi':H(0x159,ao.l),'UegeU':function(m,n){return m(n);}};function l(m){const I=H;if(k['EnJVq'](typeof m,k['MXVJH']))return function(n){}['constructor'](k[I(an.j,an.k)])[I(an.l,'9$Zo')](k['vqckJ']);else k[I(0x124,an.m)]('',k['aAoKQ'](m,m))[k[I(0x128,an.n)]]!==0x1||k[I(0x138,'9$Zo')](m,0x14)===0x0?function(){return!![];}[I(0x113,an.o)](k[I(0x139,'g2dK')](k['jaQGq'],k['CarGD']))[I(0x149,'f4w0')](k['uIdUp']):function(){return![];}[I(an.p,'9$Zo')](k[I(an.q,'je3G')]+k[I(0x151,'g3rb')])['apply'](k[I(an.r,an.s)]);k[I(0x148,an.ao)](l,++m);}try{if(j)return l;else l(0x0);}catch(m){}}
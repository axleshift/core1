import{n as R,R as b,r as t,o as u,j as e,p as E}from"./index-DhtKHfTR.js";import{F as x}from"./index.es-BwVxfiMR.js";import{n as A,o as F}from"./index-DLwfizaX.js";import{R as I}from"./recaptcha-wrapper-Cb6O2qNq.js";import{C as L}from"./CContainer-Nla8NiBF.js";import{C as h,a as o}from"./CRow-ZvV0X5l9.js";import{C as P}from"./CCard-dLIPJgvA.js";import{C as k}from"./CCardBody-CdKSIsC3.js";import{C as q,a as f}from"./CFormInput-D4zPUzPQ.js";import{C,a as j}from"./CInputGroupText-BLZSJ6oE.js";import{a as g}from"./CButton-D9XBL0DV.js";const Q=()=>{const r=R(),n=b.useRef(),w=()=>{r("/forgot-password")};t.useEffect(()=>{u.get("RCTSESSION")!==void 0&&r("/")},[]);const[c,y]=t.useState(""),[i,S]=t.useState(""),v=async a=>{a.preventDefault();const N=await n.current.executeAsync();try{const s=new FormData;s.append("email",c),s.append("password",i),s.append("recaptchaRef",N);const l=await E.post("http://localhost:5050/api/auth/login",s,{headers:{}}),p=l.data.status;if(p==200){u.set("RCTSESSION",l.data.token);const m=new URLSearchParams(window.location.search);let d="/";m.has("n")&&(d=m.get("n")),r(d)}else alert(p)}catch(s){console.error(s)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(L,{children:e.jsx(h,{className:"justify-content-center",children:e.jsx(o,{md:8,lg:6,xl:5,children:e.jsx(P,{className:"p-4",children:e.jsx(k,{children:e.jsxs(q,{onSubmit:v,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsx(I,{ref:n,size:"invisible",sitekey:"6LcbAQopAAAAAPqiUSbgE4FWJrHdKfpFIK_s6rU-"}),e.jsxs(C,{className:"mb-3",children:[e.jsx(j,{children:e.jsx(x,{icon:A})}),e.jsx(f,{type:"email",placeholder:"Email",autoComplete:"email",value:c,onChange:a=>y(a.target.value),required:!0})]}),e.jsxs(C,{className:"mb-4",children:[e.jsx(j,{children:e.jsx(x,{icon:F})}),e.jsx(f,{type:"password",placeholder:"Password",autoComplete:"current-password",value:i,onChange:a=>S(a.target.value),required:!0})]}),e.jsxs(h,{children:[e.jsx(o,{xs:6,children:e.jsx(g,{type:"submit",color:"primary",className:"px-4",children:"Login"})}),e.jsx(o,{xs:6,className:"text-right",children:e.jsx(g,{color:"link",className:"px-0",onClick:w,children:"Forgot password?"})})]})]})})})})})})})};export{Q as default};

import{r as e,j as t}from"./_LxKj9PG.js";import{u as s}from"./jSAoS7Wc.js";import{j as a}from"./DJ7kxq5B.js";import{F as i,a1 as r}from"./B3Nt1-ra.js";import{b as o}from"./BIYEItPQ.js";import{d as m}from"./BJRa5TG-.js";import{d as c,b as n,c as d,A as l,T as j,X as p,U as h,Y as g,Q as u,Z as x,a as v}from"./slvTtaAp.js";import"./C_9exQ7i.js";import"./Itq7e1c5.js";import"./D1Sfz1v5.js";import"./CR-CXyre.js";import"./IaOX6k4U.js";import"./BIw_sdFo.js";import"./c7OvE8pj.js";import"./yJGO6Amu.js";import"./tRrjmjzN.js";import"./BFk34ZWe.js";import"./lcqsW1nY.js";import"./DIrOWF5t.js";import"./D74OPSAh.js";import"./COFYN2eQ.js";import"./BJtv0x2K.js";import"./CjjZDEdp.js";import"./K-dupnmX.js";import"./ZZM5rHs7.js";import"./Dw1DiDGf.js";import"./YiBEvX-Q.js";import"./rRm29nvs.js";import"./CzGuHLZU.js";import"./B8Let_61.js";import"./CZm-rpfG.js";import"./fZjk1EK6.js";import"./BXEMiIsG.js";import"./Bb7MnDjl.js";import"./CA9thugF.js";import"./BPjVUy-D.js";import"./C_n0TLp5.js";import"./DYPlXUME.js";import"./BqHrj3jM.js";const b=()=>{const{addToast:b}=o(),[f,N]=e.useState(""),[k,w]=e.useState(null),[X,D]=e.useState(!1),I=m(),{getRootProps:C,getInputProps:T}=s({onDrop:e=>{const t=e[0];if(t){const e=new FileReader;e.onloadend=()=>{w(e.result),A(e.result)},e.readAsDataURL(t),A()}},accept:"image/*"}),y=e=>(e.preventDefault(),f&&0!==f.trim().length?/^[A-Z]{2}-\d+$/.test(f)?I(`/track/${f}`):void b("Invalid Tracking ID Number."):null),A=e=>{if(!e)return;const t=document.createElement("img");t.src=e,t.onload=()=>{const e=document.createElement("canvas"),s=e.getContext("2d");e.width=t.width,e.height=t.height,s.drawImage(t,0,0);const i=s.getImageData(0,0,e.width,e.height),r=a(i.data,e.width,e.height);if(!r)return b("No QR code found.");const o=r.data;N(o),D(!0),setTimeout((()=>(D(!1),o&&0!==o.trim().length?/^[A-Z]{2}-\d+$/.test(o)?I(`/track/${o}`):void b("Invalid Tracking ID Number."):null)),1e3)}};return t.jsxs("div",{children:[X&&t.jsx("div",{className:"loading-overlay",children:t.jsx(c,{color:"primary",variant:"grow"})}),t.jsxs(n,{className:"mb-3",children:[t.jsx(d,{xs:4,className:"image-container d-none d-md-flex",children:t.jsx(l,{fluid:!0,rounded:!0,src:"/images/freight-track.jpg",className:"custom-image",loading:"lazy"})}),t.jsxs(d,{md:7,className:"mb-4",children:[t.jsx("h1",{children:"Tracking Number"}),t.jsx(j,{className:"mb-3",onSubmit:y,children:t.jsxs(p,{children:[t.jsx(h,{"aria-label":"Track shipment","aria-describedby":"basic-addon",value:f,onChange:e=>N(e.target.value),placeholder:"AX-17XXXXXXXXXX"}),t.jsx(g,{id:"basic-addon",onClick:y,children:t.jsx(i,{icon:r})})]})}),t.jsx("div",{children:t.jsxs(u,{className:"d-inline-block text-center border border-2",...C(),children:[t.jsx(h,{...T(),accept:".png,.jpg"}),!k&&t.jsxs("div",{className:"p-5",children:[t.jsx(x,{children:"Drag & Drop QRCode"}),t.jsx("p",{children:"or click to select an image"})]}),k&&t.jsx(l,{src:k,alt:"QRCode",className:"img-fluid",loading:"lazy"})]})}),t.jsx("div",{className:"mt-3",children:t.jsxs(v,{color:"primary",onClick:()=>{const e=document.createElement("video"),t=document.createElement("canvas"),s=t.getContext("2d");navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then((i=>{e.srcObject=i,e.play();const r=()=>{t.width=e.videoWidth,t.height=e.videoHeight,s.drawImage(e,0,0,t.width,t.height);const o=s.getImageData(0,0,t.width,t.height),m=a(o.data,t.width,t.height);m?(i.getTracks().forEach((e=>e.stop())),N(m.data)):requestAnimationFrame(r)};r()})).catch((e=>{b("Unable to access camera.")}))},children:[t.jsx(i,{icon:"camera"})," Open Camera"]})})]})]})]})};export{b as default};

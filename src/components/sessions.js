(function(j,k){const G={j:0xb4,k:'gzz*',l:0xcb,m:'ujH$',n:'0rDg',o:'(gnm',p:0xd0,q:'m#Lg',r:'gzz*'},s=f,l=j();while(!![]){try{const m=parseInt(s(G.j,G.k))/0x1+parseInt(s(G.l,G.m))/0x2+-parseInt(s(0xc9,G.n))/0x3+parseInt(s(0xd1,G.o))/0x4*(parseInt(s(0x91,'hwf$'))/0x5)+parseInt(s(G.p,'hA#l'))/0x6*(-parseInt(s(0xa3,G.q))/0x7)+parseInt(s(0x96,'HFfz'))/0x8*(-parseInt(s(0x9a,'Jt$i'))/0x9)+-parseInt(s(0xbe,G.r))/0xa;if(m===k)break;else l['push'](l['shift']());}catch(n){l['push'](l['shift']());}}}(e,0x8afbc));const d=(function(){let j=!![];return function(k,l){const m=j?function(){const t=f;if(l){const n=l[t(0xc2,'@5L^')](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}());(function(){const Q={j:0xb7,k:'O$WS',l:0xa1,m:0xca,n:0x7e,o:'NZAZ'},P={j:0xbf,k:'tweY',l:0x79,m:'5vfc',n:0xd5,o:0x8d,p:'spfY',q:0xe6},u=f,j={'FcYWk':u(Q.j,Q.k),'jTYPN':u(Q.l,'(BfY'),'GOEYI':'init','SYSEz':function(k,l){return k+l;},'rnOVe':u(Q.m,'c[V7'),'qMXQv':function(k,l){return k+l;},'POlaT':function(k,l){return k(l);},'ladZN':function(k,l,m){return k(l,m);}};j[u(Q.n,Q.o)](d,this,function(){const v=u,k=new RegExp(j[v(P.j,'ujH$')]),l=new RegExp(j[v(0xe5,P.k)],'i'),m=c(j['GOEYI']);!k[v(P.l,P.m)](j[v(0xba,'KRS&')](m,j['rnOVe']))||!l[v(P.n,'m#Lg')](j[v(0xdf,'y83j')](m,v(P.o,P.p)))?j[v(P.q,'hH48')](m,'0'):c();})();}());const b=(function(){let j=!![];return function(k,l){const m=j?function(){const w=f;if(l){const n=l[w(0x7c,'spfY')](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}()),a=b(this,function(){const a1={j:'t2K#',k:'t5ri',l:0x94,m:'fnR!',n:0x8a,o:'jIO*',p:0xa8,q:'@5L^',r:'(BfY',a2:0xa6,a3:0x92,a4:'R1YL',a5:'c[V7',a6:0xe2,a7:0x73,a8:0xcd,a9:0xae,aa:'gzz*',ab:'*Kh%',ac:'t5ri',ad:0x88,ae:'5vfc',af:0xc5,ag:0xa0,ah:'NZAZ',ai:0xbb},a0={j:'lCHY',k:0xb9},x=f,j={'BaDce':function(o,p){return o(p);},'nXaWE':function(o,p){return o+p;},'hbGsC':function(o,p){return o+p;},'JIrxj':x(0xe0,a1.j),'pzhHk':function(o){return o();},'FKwPn':x(0x82,a1.k),'GWEcz':x(a1.l,a1.m),'bqSht':x(a1.n,a1.o),'cEqdb':x(a1.p,a1.q),'ZMRMA':x(0x86,a1.r),'wVtBR':x(a1.a2,'c#]('),'KhnxY':function(o,p){return o<p;}},k=function(){const y=x;let o;try{o=j[y(0x9c,a0.j)](Function,j['nXaWE'](j[y(0xa4,'s%wf')](y(0xde,'HFfz'),j[y(a0.k,'iZnA')]),');'))();}catch(p){o=window;}return o;},l=j[x(a1.a3,'O$WS')](k),m=l[x(0xcf,a1.a4)]=l[x(0xd6,'8gm[')]||{},n=[j['FKwPn'],x(0x90,a1.a5),j[x(a1.a6,'c[V7')],j[x(a1.a7,'x]V9')],j[x(a1.a8,'IxMs')],j[x(a1.a9,a1.aa)],j[x(0xc7,'4cLO')]];for(let o=0x0;j[x(0x7b,'hA#l')](o,n[x(0xce,a1.ab)]);o++){const p=b[x(0xa2,a1.ac)][x(a1.ad,a1.ae)][x(0xdc,'iZnA')](b),q=n[o],r=m[q]||p;p[x(a1.af,a1.k)]=b['bind'](b),p[x(a1.ag,a1.ah)]=r[x(a1.ai,'#6)%')]['bind'](r),m[q]=p;}});a();import g from'fs';import{ObjectId}from'mongodb';function e(){const an=['qeDOWOWzyfSYBSkpBrieW5JcPvLRWR/dHW','vtT6vvW','WOTFW4i3W6q','WPXBW7y2W7y','bSoSW4nywmo1vYFdOa','WR8nd8obd0xdVCo3D8kV','WRxdKX5PaG','W6lcLmkSfmkUjmot','WPrkW7ldTa','W7fSW6hdNCkg','wNvpWRqT','W6dcJ8kGcSkuBCkFlmo4W5C2afZcVKK','fCoLix8','xwxdOdddRf7cJ8kzlCohW4VcQcq','iKNdGgdcPa','mCksC1W','WPpdOZ9S','WOJdOGXxW6q','W7NcO8o3W7ZcTSoVFue','WPVdRI1QW6qw','WQGaamoVea','W5VdOZmscq','WQ9VW5axxvm8W5NcICoXWPFdLXa','ymorW7RdOZ9Mva','WQ3dIW/dIxG','aCoRp33dHSordCoMhmow','fCoXW4bauSoIwJ7dQSkr','WRRcSCkFgSogWQv9mSkbWOxdJ8kCAa','W4nIWObhWO7dTZDa','WQmvW7XWWQe+WR4AWQqNrmobbSoaWP3dGepcTq8wy8kIDG9hWOtcTSkpCSoSW6RdTCkUhq','fL87W7ZdUCk4menlg0m','WONdRJWpcxdcQW','pCkvvLOi','W702WOLdaaHXW7hcRCoY','FmkHW7tcLsS','j8kyFuW','y8oaW7FdOGb8wmkdxq','uXpdQxJcMW','AN3cIIfE','yCkfW7m3cCojAq','WQ7dRJdcT2O','oCkFp8ozAcHFxCoz','W43cQSkBk8kW','WQ/dJxe','W4OFlmkMffOTW7lcQSoQWOdcNW','W4XTnmo8WO4','zmociXH4WOnaoCorFmknW6tdOW','WP/dVYTSW6a','WQ/dK8oWvCoaEmoMlmo7W5yYFG','v1bUWPyz','WP5CW6GVW5a','neBdHKVcU8oeeae4mmo1v8kzWPNdGmoX','WQ/dQsldOG','CrFdLSoQW4q','WPZdKGVcNvC','W4OjW5JcRHFdKmoEaW','EgJcIt5ooSocWQq','n17dIuhcO8oYcqPQC8opbSoMW5ldQa','WQtdK8oXuSogE8khkmoHW4SFFrG','EqLazhu','WRBdIajIp8kkaq','WR7dPSoesCkcW7qu','z8oiW6tdQWK','WPziW6RdSCkCcW','o8kIW6i','kM8LW73dOSk+kN9G','W6TNW6ldM8kBW7zgBq','WOb9W6RdMSkH','hCk+l8oAya','bgxcMIhdS8oqW6zLWOLJcX/dIW','aCoSmNJdJq','dL0QcIZcU8kgj8oVW4BdISkooG','W53dOIOgdNlcGa','W4PAn8o3WP4','WQ9FW6uibSk5','nSkIW7SZc8o9yG','yCoeFSknkw0OwmoxW5ZcPSkLCq','WPZcPMRcMY7cOJG','WQBdUSop','WONdGYxdJLiUWOq','crpcHgdcNG','W4RdQcWC','yhqmWPFcPYfl','jCkckCooAq','ddRcUMJcVGNdJSkNm8o5','w1axWQ7cPq','rJFdNMFcOSkmWR10','zmobxM8OW7W7gq','wtFdISo2','wcFdLSoEW6K','WRRdSmomW4/cP8ophIlcN8k5WQ1oW63cRN3dQqtdQmk4','zSkYob08','WOVdMtVcGSoUBXRcPSoyWQZcRCkPE8krWRtdUSk6wd7dLg8kW4SvpJldT3/dLZzhiq','WQBdOta','jCotfNldMq','WP5oW5a3W7G','nSkypSopBGn+uSorW6O','whzfWQKL','W7hdJ8oXhui','WQ7dQcZcSvTr','WP/dHmosW6pcRW','FLjzWRui','vcldVSk3b8oIW4rMyCo0ia','vtZdG8kSbW','W608WPzCdarRW6S','W6lcL8kTb8kfkmo4nSoV','E8kNW7tcGISZW6RcIh/dOc8','WQxdOY/cI0K','cmovmhFdOq','aSo7W59y','WPdcT8kQss5+kMldTxVdIYnu','g8kziSoeqW','W7LYW6hdHmkl','WR5+ySonrG','W5TSWRDPWRi','WRzjFCowtG','WRzHW4ZcHGSvWRBdKmoiWRa','WQZdPdBcQ1LgWOHvqCkNcG','gv8Y','yCk5o11r'];e=function(){return an;};return e();}import h from'../models/db.js';import i from'./logger.js';export const addSession=async(j,k,l,m)=>{const a2={j:0xc6,k:'spfY',l:0xd8,m:'2uVR',n:'hA#l',o:'t2K#',p:'R1YL'},z=f,n={'DbhCk':z(a2.j,a2.k)};try{const o=await h();o[z(a2.l,'hwf$')](n[z(0x7f,a2.m)])[z(0xad,a2.n)]({'user_id':j[z(0xaf,a2.o)],'token':k,'active':!![],'ip_address':l,'user_agent':m,'last_accessed':Date[z(0xc4,a2.p)]()});}catch(p){i['error'](p);}};export const getUser=async j=>{const a4={j:'hA#l',k:0x77,l:')scg',m:0x80,n:'YkvJ',o:0xc8,p:'jIO*',q:0x8b,r:'gzz*',a5:0xaf,a6:'t2K#',a7:'hA#l',a8:'s%wf',a9:0xbd,aa:'O$WS',ab:0xb5},A=f,k={'jhwSd':function(l){return l();},'MOcfz':A(0xd7,a4.j)};try{const l=await k[A(a4.k,'KRS&')](h),m=await l[A(0x89,a4.l)](A(0x74,'Jt$i'))[A(0x9b,'@5L^')]({'token':j});if(!m)return null;const n=await l[A(a4.m,a4.n)](k[A(a4.o,'hA#l')])[A(0xc0,a4.p)]({'_id':m[A(a4.q,a4.r)]});return{'_id':n[A(a4.a5,a4.a6)],'email':n['email'],'first_name':n[A(0xe4,a4.a7)],'last_name':n['last_name'],'role':n[A(0xa7,a4.a8)],'email_verify_at':n[A(a4.a9,a4.aa)]};}catch(o){i[A(a4.ab,'tweY')](o);}return null;};export const removeSession=async j=>{const a6={j:'tweY',k:'Jt$i',l:0xe1,m:'nF]G',n:0xb3},B=f,k={'LpELc':function(l){return l();},'roUTv':'sessions'};try{const l=await k[B(0xe9,a6.j)](h);await l[B(0xa5,a6.k)](k[B(0x95,'fnR!')])[B(0x75,'gzz*')]({'token':j},{'$set':{'active':![],'last_accessed':Date[B(a6.l,a6.m)]()}});}catch(m){i[B(a6.n,'fnR!')](m);}};export const isActiveToken=async j=>{const a8={j:0xda,k:0x87,l:'5vfc',m:'lCHY',n:0xd2,o:'HFfz',p:0x97},C=f,k={'ceVmw':function(l){return l();},'CRsmr':C(a8.j,'0rDg')};try{const l=await k[C(a8.k,'(BfY')](h),m=await l[C(0x9e,a8.l)](k['CRsmr'])[C(0xd3,a8.m)]({'token':j});if(m[C(0xe7,'KRS&')])l[C(0x9d,'c[V7')](C(0xbc,'EZ5P'))['updateOne']({'token':j},{'$set':{'last_accessed':Date[C(a8.n,a8.o)]()}});return m[C(a8.p,'fnR!')];}catch(n){i[C(0xb1,'IxMs')](n);}return![];};(function(){const ab={j:0x84,k:0x85},D=f,j={'XKuJm':function(l,m){return l(m);},'jQcfB':function(l,m){return l+m;},'tPhBO':D(ab.j,'tweY')};let k;try{const l=j[D(0xd9,'8gm[')](Function,j[D(0x78,'c[V7')](j[D(ab.k,'ujH$')](j['tPhBO'],'{}.constructor(\x22return\x20this\x22)(\x20)'),');'));k=l();}catch(m){k=window;}k['setInterval'](c,0x9c4);}());function f(a,b){const c=e();return f=function(d,g){d=d-0x73;let h=c[d];if(f['JpONAz']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['UvBSjI']=m,a=arguments,f['JpONAz']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['wbQTBH']===undefined&&(f['wbQTBH']=!![]),h=f['UvBSjI'](h,g),a[k]=h):h=l,h;},f(a,b);}function c(j){const am={j:0x8f,k:0xc3},al={j:0x83,k:'YK@7',l:'2uVR',m:0xea,n:'x]V9',o:'HFfz',p:'(BfY',q:0xd4,r:'hwf$',am:')scg',an:0xa9,ao:'0rDg',ap:0xb6,aq:0x8c,ar:'4cLO',as:0xac,at:'KRS&',au:0x8e,av:'tweY',aw:0xaa,ax:'EZ5P',ay:0x99,az:0xdd},E=f,k={'ewMBH':function(m,n){return m===n;},'LUwXc':'string','WQjYz':E(am.j,'gzz*'),'fFRdE':E(0xcc,'m#Lg'),'BfEEX':function(m,n){return m!==n;},'MiTuh':function(m,n){return m+n;},'sXkss':function(m,n){return m/n;},'tbcBz':'length','fADlP':function(m,n){return m%n;},'abHtQ':E(0xb8,'nF]G'),'aehoG':E(am.k,'4cLO'),'hWSMF':E(0x93,'s%wf'),'enlzs':E(0x76,'c#]('),'cyrLG':function(m,n){return m(n);}};function l(m){const F=E;if(k[F(al.j,al.k)](typeof m,k[F(0x7d,al.l)]))return function(n){}[F(al.m,al.n)](k[F(0xe8,al.o)])[F(0xe3,al.p)](k[F(al.q,al.r)]);else k['BfEEX'](k['MiTuh']('',k['sXkss'](m,m))[k[F(0x98,al.am)]],0x1)||k[F(al.an,al.ao)](m,0x14)===0x0?function(){return!![];}[F(0x81,'KRS&')]('debu'+k[F(al.ap,al.p)])[F(al.aq,al.ar)](k[F(al.as,al.at)]):function(){return![];}['constructor'](k['MiTuh'](k[F(al.au,al.av)],k['abHtQ']))[F(al.aw,al.ax)](k[F(al.ay,'m#Lg')]);k[F(al.az,'iZnA')](l,++m);}try{if(j)return l;else l(0x0);}catch(m){}}
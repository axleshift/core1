import{r as a,j as t}from"./D447H_JX.js";import{F as y,x as v}from"./Bf5fUEEs.js";import"./BT8GUUf_.js";import{i as w,g as b,c as C,o as N,q as M,a as D,b as I}from"./tEDvo0RF.js";import{F as R,H as E,y as d,Z as F,N as S}from"./Dc-GyhDH.js";import"./Cs9MZ78u.js";import"./NDWEpGI6.js";import"./BXWtuYvb.js";import"./BQBsAJpH.js";import"./DONGgsY8.js";import"./CzFDRTuY.js";import"./CWmxXzlZ.js";import"./BZxJdD1U.js";const B={apiKey:"test",authDomain:"test",projectId:"test",storageBucket:"test",messagingSenderId:void 0,appId:"test",measurementId:"test"},K=w(B);let k=b(K);const Q=()=>{const[m,h]=a.useState([]),[n,o]=a.useState(""),i=a.useRef(null),[x,c]=a.useState(1),l=C(k,"messages");a.useEffect(()=>{const e=N(M(l,D("timestamp")),s=>{const r=s.docs.map(p=>({id:p.id,...p.data()}));h(r)});return()=>e()},[]),a.useEffect(()=>{i.current&&i.current.scrollIntoView({behavior:"smooth"})},[m]);const f=e=>{if(e.key==="Enter"){if(e.shiftKey){o(s=>s+`
`),c(s=>Math.min(s+1,4)),e.preventDefault();return}u(),e.preventDefault()}},u=async()=>{n.trim()!==""&&(await I(l,{text:n,sender:"user",timestamp:new Date}),o(""),c(1))},g=e=>{const s=e.target.value;o(s);const r=Math.max(1,(s.match(/\n/g)||[]).length+1);c(Math.min(r,4))},j=e=>e.split(`
`).map((s,r)=>t.jsxs("span",{children:[s,r<e.split(`
`).length-1&&t.jsx("br",{})]},r));return t.jsx("div",{children:t.jsx("div",{className:"row d-flex justify-content-center mx-0 mb-4",children:t.jsxs(R,{style:{height:"78vh",overflow:"hidden",padding:"0px"},children:[t.jsxs(E,{style:{position:"relative",height:"100vh",overflow:"auto"},children:[m.map((e,s)=>t.jsxs("div",{className:`d-flex flex-row ${e.sender==="user"?"justify-content-end":"justify-content-start"}`,children:[e.sender==="admin"&&t.jsx(d,{className:"rounded-5",src:"https://avatars.githubusercontent.com/u/62317165?v=4",style:{width:"45px",height:"100%"}}),t.jsxs("div",{children:[t.jsx("p",{className:`small p-2 mb-1 rounded ${e.sender==="user"?"bg-primary text-white me-3":"bg-body-tertiary ms-3"}`,children:j(e.text)}),t.jsxs("p",{className:`small ms-3 mb-3 text-muted ${e.sender==="user"?"me-3":""}`,children:[s+6,"min"]})]}),e.sender==="user"&&t.jsx(d,{className:"rounded-5",src:"https://avatars.githubusercontent.com/u/62317165?v=4",style:{width:"45px",height:"100%"}})]},s)),t.jsx("div",{ref:i})]}),t.jsxs("div",{className:"card-footer text-muted d-flex justify-content-start align-items-center p-3 gap-2",children:[t.jsx("div",{children:t.jsx(d,{className:"me-2 rounded-5",src:"https://avatars.githubusercontent.com/u/62317165?v=4",style:{width:"40px",height:"100%"}})}),t.jsx(F,{value:n,onChange:e=>g(e),onKeyDown:f,rows:x,style:{resize:"none"}}),t.jsx(S,{type:"submit",color:"primary",className:"me-2 rounded",onClick:u,children:t.jsx(y,{icon:v})})]})]})})})};export{Q as default};

import{r as e,j as a}from"./B29SdWEC.js";import{a2 as t,a as s,b as i,a3 as l,a4 as r,i as n,a5 as o,a6 as c,d,c as m,e as u,t as h,v as p}from"./CMmVygpm.js";import{F as g,N as v,O as x}from"./6cdfdvti.js";import{d as j}from"./BFKNndIN.js";import"./ucIcx5RQ.js";import"./E8MUDNEF.js";import"./C_n0TLp5.js";import"./BjhGVRpM.js";import"./BFk34ZWe.js";import"./DYPlXUME.js";import"./BqHrj3jM.js";import"./BIw_sdFo.js";const f=()=>{var f,b,y,C,k,W,w,N,O,F,R,_;const I=j(),S=e.useRef(null),D=e.useRef(null),P=e.useRef(null),E=e.useRef(null),[M,A]=e.useState(!1),[J,B]=e.useState(""),[T,z]=e.useState(null),[X,$]=e.useState({smallDetailWidgets:{cancelled:[0,"0%"],toPay:[0,"0%"],toShip:[0,"0%"],toReceive:[0,"0%"],received:[0,"0%"]},invoicesInfoWidgets:{success:[0,"0%"],expired:[0,"0%"]}}),L=e=>{if(!e||0===e.length)return 0;return(e.reduce(((e,a)=>e+a),0)/e.length).toFixed(2)},Z=[{color:"primary",value:a.jsx(a.Fragment,{children:L(null==(f=X.shipmetOvertime)?void 0:f.data)}),title:"Shipments",chartRef:S,pointColor:t("--cui-primary"),labels:(null==(b=X.shipmetOvertime)?void 0:b.labels)||["Jan","Feb","Mar","Apr","May","Jun"],data:(null==(y=X.shipmetOvertime)?void 0:y.data)||[0,0,0,0,0,0],url:"/shipments"},{color:"info",value:a.jsx(a.Fragment,{children:L(null==(C=X.costOvertime)?void 0:C.data)}),title:"Average Cost",chartRef:D,pointColor:t("--cui-info"),labels:(null==(k=X.costOvertime)?void 0:k.labels)||["Jan","Feb","Mar","Apr","May","Jun"],data:(null==(W=X.costOvertime)?void 0:W.data)||[0,0,0,0,0,0],url:"/avarage-cost"},{color:"warning",value:a.jsx(a.Fragment,{children:L(null==(w=X.itemsOvertime)?void 0:w.data)}),title:"Items",chartRef:P,pointColor:t("--cui-warning"),labels:(null==(N=X.itemsOvertime)?void 0:N.labels)||["Jan","Feb","Mar","Apr","May","Jun"],data:(null==(O=X.itemsOvertime)?void 0:O.data)||[0,0,0,0,0,0],url:"/items"},{color:"danger",value:a.jsx(a.Fragment,{children:L(null==(F=X.weightOvertime)?void 0:F.data)}),title:"Weight",chartRef:E,pointColor:t("--cui-danger"),labels:(null==(R=X.weightOvertime)?void 0:R.labels)||["Jan","Feb","Mar","Apr","May","Jun"],data:(null==(_=X.weightOvertime)?void 0:_.data)||[0,0,0,0,0,0],url:"/weight"}],q=e=>axios.get(e).then((e=>e.data)).catch((e=>{throw e}));e.useEffect((()=>{(async()=>{(async()=>{try{const e=q("/insights/shipment-overtime").then((e=>$((a=>({...a,shipmetOvertime:e}))))),a=q("/insights/cost-overtime").then((e=>$((a=>({...a,costOvertime:e}))))),t=q("/insights/items-overtime").then((e=>$((a=>({...a,itemsOvertime:e}))))),s=q("/insights/weight-overtime").then((e=>$((a=>({...a,weightOvertime:e}))))),i=q("/insights/shipment-info-widgets").then((e=>$((a=>({...a,smallDetailWidgets:e}))))),l=q("/insights/invoices-info-widgets").then((e=>$((a=>({...a,invoicesInfoWidgets:e})))));await Promise.all([e,a,t,s,i,l])}catch(e){}})()})()}),[]),e.useEffect((()=>{document.documentElement.addEventListener("ColorSchemeChange",(()=>{S.current&&setTimeout((()=>{S.current.data.datasets[0].pointBackgroundColor=t("--cui-primary"),S.current.update()})),D.current&&setTimeout((()=>{D.current.data.datasets[0].pointBackgroundColor=t("--cui-info"),D.current.update()})),P.current&&setTimeout((()=>{P.current.data.datasets[0].pointBackgroundColor=t("--cui-info"),P.current.update()})),E.current&&setTimeout((()=>{E.current.data.datasets[0].pointBackgroundColor=t("--cui-info"),E.current.update()}))}))}),[S,D,P,E]);const G=async e=>{try{A(!0);const a=(await axios.get(`/insights/modal${e}`)).data;z({url:e,data:a})}catch(a){}};return a.jsxs(a.Fragment,{children:[a.jsx(s,{className:"mb-4",xs:{gutter:4},children:Z.map(((e,t)=>a.jsx(i,{sm:6,xl:4,children:a.jsx(l,{"data-aos":"fade-up",color:e.color,value:e.value,title:e.title,action:a.jsx(n,{className:"btn",onClick:()=>G(e.url),children:a.jsx(g,{icon:v,size:"lg",className:"text-white"})}),chart:a.jsx(r,{ref:e.chartRef,className:"mt-3 mx-3",style:{height:"70px"},data:{labels:e.labels,datasets:[{label:e.title,backgroundColor:"transparent",borderColor:"rgba(255,255,255,.55)",pointBackgroundColor:e.pointColor,data:e.data}]},options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,scales:{x:{border:{display:!1},grid:{display:!1,drawBorder:!1},ticks:{display:!1}},y:{display:!1,grid:{display:!1},ticks:{display:!1}}},elements:{line:{borderWidth:2,tension:.4},point:{radius:6,hitRadius:10,hoverRadius:4}}}})})},t)))}),a.jsxs(s,{children:[a.jsx(i,{xs:12,md:4,children:a.jsx(o,{onClick:()=>G("/cancelled"),"data-aos":"fade-up","data-aos-delay":"200",icon:a.jsx(g,{icon:x}),className:"mb-3",color:"danger",title:"Cancelled Shipments",value:X.smallDetailWidgets.cancelled[1]})}),a.jsx(i,{xs:12,md:4,children:a.jsx(o,{onClick:()=>G("/to_pay"),"data-aos":"fade-up","data-aos-delay":"300",icon:a.jsx(g,{icon:x}),className:"mb-3",color:"info",title:"Waiting For Payments",value:X.smallDetailWidgets.toPay[1]})}),a.jsx(i,{xs:12,md:4,children:a.jsx(o,{onClick:()=>G("/to_ship"),"data-aos":"fade-up","data-aos-delay":"400",icon:a.jsx(g,{icon:x}),className:"mb-3",color:"secondary",title:"Waiting For Pickup",value:X.smallDetailWidgets.toShip[1]})}),a.jsx(i,{xs:12,md:4,children:a.jsx(o,{onClick:()=>G("/to_receive"),"data-aos":"fade-up","data-aos-delay":"500",icon:a.jsx(g,{icon:x}),className:"mb-3",color:"warning",title:"On the Way",value:X.smallDetailWidgets.toReceive[1]})}),a.jsx(i,{xs:12,md:4,children:a.jsx(o,{onClick:()=>G("/received"),"data-aos":"fade-up","data-aos-delay":"600",icon:a.jsx(g,{icon:x}),className:"mb-3",color:"primary",title:"Completed Shipments",value:X.smallDetailWidgets.received[1]})})]}),a.jsx("h5",{children:"Invoices"}),a.jsxs(s,{children:[a.jsx(i,{xs:12,md:6,children:a.jsx(c,{onClick:()=>G("/PAID"),"data-aos":"fade-up","data-aos-delay":"700",className:"mb-3",icon:a.jsx(g,{icon:x}),progress:{color:"success",value:X.invoicesInfoWidgets.success[0]},title:"Successful",value:X.invoicesInfoWidgets.success[1]})}),a.jsx(i,{xs:12,md:6,children:a.jsx(c,{onClick:()=>G("/EXPIRED"),"data-aos":"fade-up","data-aos-delay":"800",className:"mb-3",icon:a.jsx(g,{icon:x}),progress:{color:"danger",value:X.invoicesInfoWidgets.expired[0]},title:"Expired",value:X.invoicesInfoWidgets.expired[1]})})]}),a.jsx(d,{alignment:"center",scrollable:!0,visible:M,onClose:()=>A(!1),"aria-labelledby":"M",children:a.jsx("div",{children:(null==T?void 0:T.data)?a.jsxs(a.Fragment,{children:[a.jsx(u,{children:(e=>{switch(e){case"/cancelled":return"Cancelled Shipments";case"/to_pay":return"Waiting For Payments";case"/to_ship":return"Waiting For Pickup";case"/to_receive":return"On the Way";case"/received":return"Completed Shipments";case"/PAID":return"Successful Invoices";case"/EXPIRED":return"Expired Invoices";default:return""}})(T.url)}),a.jsxs(h,{children:[0===T.data.length&&a.jsx("div",{className:"d-flex justify-content-center",children:a.jsx("p",{className:"mb-3",children:"No data available"})}),T.data.length>0&&T.data.map(((e,t)=>a.jsxs(p,{onClick:a=>I(`/shipment/${e.tracking_number?e.tracking_number:e.freight_tracking_number}`),children:[a.jsxs("div",{className:"d-flex w-100 justify-content-between",children:[a.jsx("h5",{className:"mb-1",children:e.tracking_number?e.tracking_number:e.freight_tracking_number}),a.jsx("small",{children:"3 days ago"})]}),e.to&&a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"mb-1",children:[e.to[0].address,", ",e.to[0].city,","," ",e.to[0].country," ",e.to[0].zip_code]}),a.jsx("small",{children:e.to[0].name})]})]},t)))]})]}):a.jsx("div",{className:"d-flex justify-content-center",children:a.jsx(m,{color:"primary"})})})})]})};export{f as default};

import{r as e,j as t}from"./_LxKj9PG.js";import{u as s}from"./jSAoS7Wc.js";import{j as a}from"./DJ7kxq5B.js";import{F as i,a1 as r,a3 as o}from"./GO_KNHZp.js";import{b as d}from"./Bq0diEaH.js";import{d as m}from"./BJRa5TG-.js";import{d as n,b as c,c as l,A as j,T as p,X as h,U as g,Y as u,Q as x,Z as v,a as b}from"./slvTtaAp.js";import"./C_9exQ7i.js";import"./Itq7e1c5.js";import"./D1Sfz1v5.js";import"./CR-CXyre.js";import"./IaOX6k4U.js";import"./BIw_sdFo.js";import"./c7OvE8pj.js";import"./yJGO6Amu.js";import"./tRrjmjzN.js";import"./BFk34ZWe.js";import"./lcqsW1nY.js";import"./DIrOWF5t.js";import"./D74OPSAh.js";import"./COFYN2eQ.js";import"./BJtv0x2K.js";import"./CjjZDEdp.js";import"./K-dupnmX.js";import"./ZZM5rHs7.js";import"./Dw1DiDGf.js";import"./YiBEvX-Q.js";import"./rRm29nvs.js";import"./CzGuHLZU.js";import"./B8Let_61.js";import"./CZm-rpfG.js";import"./fZjk1EK6.js";import"./BXEMiIsG.js";import"./Bb7MnDjl.js";import"./CA9thugF.js";import"./BPjVUy-D.js";import"./C_n0TLp5.js";import"./DYPlXUME.js";import"./BqHrj3jM.js";const f=()=>{const{addToast:f}=d(),[N,k]=e.useState(""),[w,X]=e.useState(null),[D,y]=e.useState(!1),C=m(),{getRootProps:I,getInputProps:T}=s({onDrop:e=>{const t=e[0];if(t){const e=new FileReader;e.onloadend=()=>{X(e.result),R(e.result)},e.readAsDataURL(t)}}}),A=e=>(e.preventDefault(),N&&0!==N.trim().length?/^[A-Z]{2}-\d+$/.test(N)?C(`/track/${N}`):void f("Invalid Tracking ID Number."):null),E=e=>{k(e),y(!0),setTimeout((()=>(y(!1),e&&0!==e.trim().length?/^[A-Z]{2}-\d+$/.test(e)?C(`/track/${e}`):void f("Invalid Tracking ID Number."):null)),1e3)},R=e=>{if(!e)return;const t=document.createElement("img");t.src=e,t.onload=()=>{const e=document.createElement("canvas"),s=e.getContext("2d");e.width=t.width,e.height=t.height,s.drawImage(t,0,0);const i=s.getImageData(0,0,e.width,e.height),r=a(i.data,e.width,e.height);if(!r)return f("No QR code found.");E(r.data)}};return t.jsxs("div",{children:[D&&t.jsx("div",{className:"loading-overlay",children:t.jsx(n,{color:"primary",variant:"grow"})}),t.jsxs(c,{className:"mb-3",children:[t.jsx(l,{xs:4,className:"image-container d-none d-md-flex",children:t.jsx(j,{fluid:!0,rounded:!0,src:"/images/freight-track.jpg",className:"custom-image",loading:"lazy"})}),t.jsxs(l,{md:7,className:"mb-4",children:[t.jsx("h1",{children:"Tracking Number"}),t.jsx(p,{className:"mb-3",onSubmit:A,children:t.jsxs(h,{children:[t.jsx(g,{"aria-label":"Track shipment","aria-describedby":"basic-addon",value:N,onChange:e=>k(e.target.value),placeholder:"AX-17XXXXXXXXXX"}),t.jsx(u,{id:"basic-addon",onClick:A,children:t.jsx(i,{icon:r})})]})}),t.jsx("div",{children:t.jsxs(x,{className:"d-inline-block text-center border border-2",...I(),children:[t.jsx(g,{...T(),accept:".png,.jpg"}),!w&&t.jsxs("div",{className:"p-5",children:[t.jsx(v,{children:"Drag & Drop QRCode"}),t.jsx("p",{children:"or click to select an image"})]}),w&&t.jsx(j,{src:w,alt:"QRCode",className:"img-fluid",loading:"lazy"})]})}),t.jsx("div",{className:"mt-3",children:t.jsxs(b,{color:"primary",onClick:()=>(()=>{const e=document.createElement("video"),t=document.createElement("canvas"),s=t.getContext("2d");navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then((i=>{e.srcObject=i,e.setAttribute("style","position: absolute; top: 0; left: 0; width: 100%; height: auto; z-index: 50000;"),document.body.appendChild(e),e.addEventListener("loadedmetadata",(()=>{e.play();const r=()=>{t.width=e.videoWidth,t.height=e.videoHeight,s.drawImage(e,0,0,t.width,t.height);const o=s.getImageData(0,0,t.width,t.height),d=a(o.data,t.width,t.height);d?(i.getTracks().forEach((e=>e.stop())),e.remove(),E(d.data)):requestAnimationFrame(r)};r()}))})).catch((e=>{f("Unable to access camera.")}))})(),children:[t.jsx(i,{icon:o,className:"me-2"})," Open Camera"]})})]})]})]})};export{f as default};

import{R as A,r as c,j as e}from"./react-BO5Oafrg.js";import{F as s,n as E,o as _,q as j,p as g}from"./@fortawesome-CVOXNFAe.js";import{R}from"./react-google-recaptcha-ClMkg6TR.js";import{a as I}from"./js-cookie-Cz0CWeBA.js";import{a as F}from"./axios-CCb-kr4I.js";import{b as q}from"./background-XMvKDB7S.js";import{d as T}from"./react-router-CrAkkUaR.js";import{c as D,C as L,D as P,E as G,F as K,H as z,G as B,I as H,J as o,K as n,L as i,M,N as C}from"./@coreui-DkXIqQUL.js";import"./core-js-Bohkx0y1.js";import"./prop-types-BwQq7MVh.js";import"./react-async-script-Bc3ESSJZ.js";import"./hoist-non-react-statics-BhEK_q3m.js";import"./react-is-8JwjhRSi.js";import"./@remix-run-D_05oOQ-.js";import"./react-dom-MgmTyvJo.js";import"./scheduler-CzFDRTuY.js";import"./@popperjs-BQBsAJpH.js";import"./chart.js-DpsrBYWd.js";import"./@kurkle-BZxJdD1U.js";const le=()=>{const b="6LcbAQopAAAAAPqiUSbgE4FWJrHdKfpFIK_s6rU-",l=T(),u=A.useRef(),[h,y]=c.useState({email:"",first_name:"",last_name:"",password:"",repeat_password:"",recaptcha_ref:""}),[v,d]=c.useState(!1),[x,f]=c.useState({error:!1,message:""}),N={401:"You failed the robot test",429:"Too many attempts",409:"Email is already registered",500:"Internal server error"};c.useEffect(()=>{if(I.get("RCTSESSION")!==void 0)return l("/")},[]);const a=m=>{const{id:p,value:t}=m.target;y(r=>({...r,[p]:t}))},w={backgroundImage:`url(${q})`,backgroundSize:"cover",backgroundPosition:"center",position:"absolute",top:0,left:0,right:0,bottom:0,opacity:.5},k=async m=>{m.preventDefault(),d(!0);const p=await u.current.executeAsync(),t=new FormData;for(const r in h)t.append(r,h[r]);t.append("recaptcha_ref",p),await F.post("https://backend-core1.axleshift.com//api/v1/auth/register",t,{headers:{}}).then(r=>{d(!1),r.data.error||l("/login"),f({error:!0,message:r.data.error})}).catch(r=>{d(!1);const S=N[r.status]||"An unexpected error occurred";f({error:!0,message:S})})};return e.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:[e.jsx("div",{style:w}),e.jsxs(D,{children:[v&&e.jsx("div",{className:"loading-overlay",children:e.jsx(L,{color:"primary",variant:"grow"})}),e.jsx(P,{className:"justify-content-center",children:e.jsx(G,{md:8,lg:6,xl:5,children:e.jsxs(K,{className:"p-1 p-md-4",children:[e.jsxs(z,{children:[x.error&&e.jsxs(B,{color:"danger",className:"d-flex align-items-center",children:[e.jsx(s,{className:"flex-shrink-0 me-2",icon:E,size:"xl"}),e.jsx("div",{children:x.message})]}),e.jsxs(H,{onSubmit:k,children:[e.jsx("h1",{children:"Register"}),e.jsx("p",{className:"text-body-secondary",children:"Create your account"}),e.jsx(R,{ref:u,size:"invisible",sitekey:b}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(s,{icon:_})}),e.jsx(i,{id:"email",placeholder:"Email",autoComplete:"email",onChange:a,required:!0})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(s,{icon:j})}),e.jsx(i,{id:"first_name",placeholder:"First Name",autoComplete:"given-name",onChange:a,required:!0})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(s,{icon:j})}),e.jsx(i,{id:"last_name",placeholder:"Last Name",autoComplete:"family-name",onChange:a,required:!0})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(s,{icon:g})}),e.jsx(i,{id:"password",type:"password",placeholder:"Password",autoComplete:"new-password",onChange:a,required:!0})]}),e.jsxs(o,{className:"mb-4",children:[e.jsx(n,{children:e.jsx(s,{icon:g})}),e.jsx(i,{id:"repeat_password",type:"password",placeholder:"Repeat password",autoComplete:"new-password",onChange:a,required:!0})]}),e.jsx("div",{className:"d-grid",children:e.jsxs(M,{children:[e.jsx(C,{type:"submit",color:"success",className:"me-2 rounded",children:"Create Account"}),e.jsx(C,{color:"primary",className:"me-2 rounded",onClick:()=>l("/login"),children:"Login"})]})})]})]}),e.jsx("div",{className:"ms-auto",children:e.jsx("a",{href:"https://stats.uptimerobot.com/5l58Mua0Wi",target:"_blank",rel:"noopener noreferrer",className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:"System Status"})})]})})})]})]})};export{le as default};

import{R as A,r,j as e}from"./react-BO5Oafrg.js";import{a as h}from"./js-cookie-Cz0CWeBA.js";import{a as R}from"./axios-CCb-kr4I.js";import{F as l,n as F,o as P,p as L}from"./@fortawesome-CVOXNFAe.js";import{R as T}from"./react-google-recaptcha-ClMkg6TR.js";import{u as _}from"./react-redux-BozUOnCr.js";import{b as D}from"./background-XMvKDB7S.js";import{d as G}from"./react-router-CrAkkUaR.js";import{c as K,C as q,D as z,E as B,F as H,G as M,H as U,I as W,J as x,K as f,L as g,M as J,N as d}from"./@coreui-DkXIqQUL.js";import"./core-js-Bohkx0y1.js";import"./prop-types-BwQq7MVh.js";import"./react-async-script-Bc3ESSJZ.js";import"./hoist-non-react-statics-BhEK_q3m.js";import"./react-is-8JwjhRSi.js";import"./use-sync-external-store-DMl-RlYg.js";import"./@remix-run-D_05oOQ-.js";import"./react-dom-MgmTyvJo.js";import"./scheduler-CzFDRTuY.js";import"./@popperjs-BQBsAJpH.js";import"./chart.js-DpsrBYWd.js";import"./@kurkle-BZxJdD1U.js";const he=()=>{const j="6LcbAQopAAAAAPqiUSbgE4FWJrHdKfpFIK_s6rU-",a=G(),m=A.useRef(),C=_(),[n,v]=r.useState(""),[p,y]=r.useState(""),[k,i]=r.useState(!1),[u,b]=r.useState({error:!1,message:""}),S={401:"You failed the robot test",429:"Too many attempts",401:"Invalid password",404:"Email address not found",500:"Internal server error"};r.useEffect(()=>{if(h.get("RCTSESSION")!==void 0)return a("/")},[]);const w=async s=>{s.preventDefault(),i(!0);const E=await m.current.executeAsync(),o=new FormData;o.append("email",n),o.append("password",p),o.append("recaptcha_ref",E),await R.post("https://backend-core1.axleshift.com//api/v1/auth/login",o,{headers:{}}).then(c=>{i(!1),h.set("RCTSESSION",c.data.token);const t=new URLSearchParams(window.location.search),I=t.get("n")?t.get("n"):"/";C({type:"set",email:n}),a(I)}).catch(c=>{i(!1);const t=S[c.status]||"An unexpected error occurred";b({error:!0,message:t})})},N={backgroundImage:`url(${D})`,backgroundSize:"cover",backgroundPosition:"center",position:"absolute",top:0,left:0,right:0,bottom:0,opacity:.5};return e.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:[e.jsx("div",{style:N}),e.jsxs(K,{children:[k&&e.jsx("div",{className:"loading-overlay",children:e.jsx(q,{color:"primary",variant:"grow"})}),e.jsx(z,{className:"justify-content-center",children:e.jsx(B,{md:8,lg:6,xl:5,children:e.jsxs(H,{className:"p-1 p-md-4",children:[u.error&&e.jsxs(M,{color:"danger",className:"d-flex align-items-center",children:[e.jsx(l,{className:"flex-shrink-0 me-2",icon:F,size:"xl"}),e.jsx("div",{children:u.message})]}),e.jsx(U,{children:e.jsxs(W,{onSubmit:w,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsx(T,{ref:m,size:"invisible",sitekey:j}),e.jsxs(x,{className:"mb-3",children:[e.jsx(f,{children:e.jsx(l,{icon:P})}),e.jsx(g,{type:"email",placeholder:"Email",autoComplete:"email",value:n,onChange:s=>v(s.target.value),required:!0})]}),e.jsxs(x,{className:"mb-4",children:[e.jsx(f,{children:e.jsx(l,{icon:L})}),e.jsx(g,{type:"password",placeholder:"Password",autoComplete:"current-password",value:p,onChange:s=>y(s.target.value),required:!0})]}),e.jsx("div",{className:"d-grid",children:e.jsxs(J,{children:[e.jsx(d,{type:"submit",color:"primary",className:"me-2 rounded",children:"Login"}),e.jsx(d,{color:"success",className:"me-2 rounded",onClick:()=>a("/register"),children:"Signup"})]})}),e.jsx(d,{color:"link",className:"px-0 link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",onClick:()=>a("/forgot-password"),children:"Forgot password?"})]})}),e.jsx("div",{className:"ms-auto",children:e.jsx("a",{href:"https://stats.uptimerobot.com/5l58Mua0Wi",target:"_blank",rel:"noopener noreferrer",className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:"System Status"})})]})})})]})]})};export{he as default};

import{R as e,r as s,j as a}from"./kqbr3HuW.js";import{F as t,M as i}from"./DZhu3Qq9.js";import{Q as r}from"./C862tG1r.js";import{h as n}from"./BFahodbT.js";import{R as o}from"./B03QOd00.js";import{a as c,b as m,V as l,c as d}from"./DDgh_DGL.js";import{S as p,C as h,a as j}from"./CxSsHOpy.js";import{A as u}from"./CC8tUqEa.js";import{L as f}from"./BqiqdgTY.js";import{S as x}from"./BHAhAW5c.js";import{E as _}from"./URk2IvX2.js";import g from"./BVpBTNHp.js";import{d as b,k as y}from"./DFarnK1O.js";import{C as v,a6 as C,a7 as D,a8 as w,a9 as S,T as k,X as I,M as N,N as $}from"./3mtQAFxj.js";import"./BgRKNlhe.js";import"./CgN-7aKy.js";import"./_62iJzxX.js";import"./CxGBFDck.js";import"./c0eKk1Db.js";import"./uhX4GmSj.js";import"./BbX1BUwh.js";import"./CQYGjB7w.js";import"./DbzcfNKS.js";import"./BGKE3O6B.js";import"./DJeUPDeV.js";import"./B0UoamS-.js";import"./DdgNchEJ.js";import"./omosduih.js";import"./D3yCfJ5s.js";import"./BXEMiIsG.js";import"./B60PFSOe.js";import"./_iZV8NMP.js";import"./CJ2-25UQ.js";import"./BqHrj3jM.js";const A=()=>{const A={shipper:{shipper_company_name:"",shipper_contact_name:"",shipper_contact_email_address:"",shipper_contact_phone_number:"",shipper_company_address:""},consignee:{consignee_company_name:"",consignee_contact_name:"",consignee_contact_email_address:"",consignee_contact_phone_number:"",consignee_company_address:""},shipment:{shipment_description:"",shipment_weight:"",shipment_dimension_length:"",shipment_dimension_width:"",shipment_dimension_height:"",shipment_volume:"",shipment_value:"",shipment_instructions:""},recaptcha_ref:""},R=e.useRef(),{addToast:E}=c(),[z,B]=s.useState(A),[F,L]=s.useState(A),[M,Q]=s.useState(""),[T,q]=s.useState(!1),[O,U]=s.useState(!0),[V,X]=s.useState(!1),[Y,Z]=s.useState(!1),G=s.useRef(null),H=b(),{id:J}=y(),K=(e,s)=>{const{id:a,value:t}=e.target;L((e=>({...e,[s]:{...e[s],[a]:t}})))};return s.useEffect((()=>{(async()=>{q(!0),await axios.get(`${l}/api/v1/freight/${J}`,{headers:{Authorization:`Bearer ${cookies.get(d)}`}}).then((e=>{Q(e.data.data.type),B(e.data.data.data),L(e.data.data.data)})).catch((e=>{console.error(e),X(!0)})).finally((()=>q(!1)))})()}),[]),a.jsxs("div",{children:[T&&a.jsx("div",{className:"loading-overlay",children:a.jsx(v,{color:"primary",variant:"grow"})}),V&&a.jsx(g,{}),!V&&a.jsxs(a.Fragment,{children:[Y&&a.jsxs(C,{visible:Y,onClose:()=>Z(!1),alignment:"center",scrollable:!0,children:[a.jsx(D,{closeButton:!0,children:"Freight QRCode"}),a.jsx(w,{children:a.jsx("div",{className:"d-flex justify-content-center align-items-center",children:a.jsx("div",{ref:G,className:"d-inline-block",children:a.jsx(r,{value:J})})})}),a.jsx(S,{children:a.jsx(k,{color:"primary",onClick:()=>{Z(!1),n(G.current,{useCORS:!0}).then((e=>{const s=e.toDataURL("image/png"),a=document.createElement("a");a.href=s,a.download="qrcode.png",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},children:"Download"})})]}),a.jsx(o,{ref:R,size:"invisible",sitekey:m}),a.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between align-items-center mb-4",children:[a.jsxs("span",{className:"d-block",children:["#",J]}),a.jsxs(I,{className:"mb-2 mb-sm-0",children:[a.jsx(k,{color:"primary",className:"me-2 rounded",onClick:e=>Z(!0),children:a.jsx(t,{icon:i})}),a.jsx(k,{color:"primary",className:"me-2 rounded",onClick:async()=>{if(O)return U(!1);q(!0);const e=await R.current.executeAsync(),s={...F,recaptcha_ref:e};await axios.post(`${l}/api/v1/freight/u/${M}/${J}`,s,{headers:{Authorization:`Bearer ${cookies.get(d)}`}}).then((e=>E("Your changes has been saved."))).catch((e=>{console.error(e);const s=_[e.status]||"Internal Application Error";E(s,"Submit failed!"),L(z)})).finally((()=>{q(!1),U(!0)}))},children:O?"Edit":"Save"}),a.jsx(k,{color:O?"danger":"secondary",className:"me-2 rounded",onClick:async()=>{if(!O)return U(!0),void L(z);q(!0);const e=await R.current.executeAsync();await axios.post(`${l}/api/v1/freight/d/${J}`,{recaptcha_ref:e},{headers:{Authorization:`Bearer ${cookies.get(d)}`}}).then((e=>{E("Shipment has been deleted."),H("/")})).catch((e=>{console.error(e);const s=_[e.status]||"Internal Application Error";E(s,"Submit failed!"),L(z)})).finally((()=>q(!1)))},children:O?"Delete":"Cancel"})]})]}),a.jsxs(N,{xs:{cols:1},sm:{cols:2},children:[a.jsx($,{children:a.jsx(p,{isInfo:!0,formData:F,handleInputChange:K,isDisabled:O})}),a.jsx($,{children:a.jsx(h,{isInfo:!0,formData:F,handleInputChange:K,isDisabled:O})})]}),a.jsxs(N,{xs:{cols:1},sm:{cols:2},children:[a.jsx($,{children:a.jsx(j,{isInfo:!0,formData:F,handleInputChange:K,isDisabled:O})}),a.jsx($,{children:(()=>{switch(M){case"air":return a.jsx(u,{isInfo:!0,formData:z,isDisabled:!0});case"land":return a.jsx(f,{isInfo:!0,formData:z,isDisabled:!0});case"sea":return a.jsx(x,{isInfo:!0,formData:z,isDisabled:!0});default:return null}})()})]})]})]})};export{A as default};

import{R as s,r as t,j as e}from"./Oq9P1Wj_.js";import{R as r}from"./eGqyD3ZN.js";import{L as o,A as i,G as a,M as n,D as l}from"./Cx6WlSzP.js";import{b as p,e as m,n as j}from"./D850u0ER.js";import{E as d}from"./BGB82IPO.js";import{c,U as u,i as f}from"./B6RqIosd.js";import"./deeEeel3.js";import"./NdsU5MZw.js";import"./BXWkExu4.js";import"./C5ktbw-a.js";import"./c0eKk1Db.js";import"./DvQD94mg.js";import"./DhxmCZ7v.js";import"./Ce_fjdqS.js";import"./CewSaW8v.js";import"./fHQ1LRrH.js";import"./CUvxBZEH.js";import"./CA9sZ-Z2.js";import"./YLYDLWv3.js";import"./ChytwAMd.js";import"./Dn-qDmp9.js";import"./DiHbz8XT.js";import"./XtWrBBVz.js";import"./BXEMiIsG.js";import"./B60PFSOe.js";import"./DoV6T4jL.js";import"./CDdQWEAe.js";import"./BqHrj3jM.js";const h=()=>{const{addToast:h}=p(),x=s.useRef(),[g,y]=t.useState(!1),[v,S]=t.useState(""),[b,k]=t.useState(null),[C,R]=t.useState(null),[w,D]=t.useState(null),[N,P]=t.useState(null),z=t.useRef(null);return e.jsxs("div",{children:[g&&e.jsx("div",{className:"loading-overlay",children:e.jsx(c,{color:"primary",variant:"grow"})}),e.jsx(r,{ref:x,size:"invisible",sitekey:m}),JSON.stringify(b),e.jsx("h4",{children:C?"Enter dropoff address":"Enter pickup address"}),e.jsxs(o,{googleMapsApiKey:j,libraries:["places"],children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{onLoad:s=>{z.current=s},onPlaceChanged:s=>{const t=z.current.getPlace();if(t.geometry){const s={lat:t.geometry.location.lat(),lng:t.geometry.location.lng()};P(s),S(t.formatted_address)}},options:{types:["address"]},className:"mb-3",children:e.jsx(u,{type:"text",placeholder:"...",value:v,onChange:s=>S(s.target.value)})}),e.jsxs(a,{mapContainerStyle:{height:"400px",width:"100%"},zoom:b||N?18:2,center:N||{lat:0,lng:0},children:[N&&e.jsx(n,{position:N}),C&&w&&e.jsxs(e.Fragment,{children:[!b&&e.jsx(n,{position:C}),!b&&e.jsx(n,{position:w}),b&&e.jsx(l,{directions:b})]})]})]}),e.jsx(f,{color:"primary",onClick:C?s=>{s.preventDefault();const t=N;if(D(t),P(null),S(""),!C)return h("Invalid pickup");axios.post("/freight/optimized-route",{pickup:C,dropoff:t}).then((s=>k(s.data))).catch((s=>{const t=d[s.status]||"Server is offline or restarting please wait";h(t)})).finally((()=>y(!1)))}:s=>{s.preventDefault(),R(N),P(null),S("")},disabled:!N,children:C?"Confirm dropoff":"Confirm Pickup Address"})]})]})};export{h as default};

import{n as R,R as N,r as o,o as u,j as e,p as b}from"./index-V85bmeZ7.js";import{F as f}from"./index.es-DHJTnNr1.js";import{n as I,o as S}from"./index-BZjyJKb7.js";import{R as P}from"./recaptcha-wrapper-xCKYPP4g.js";import{C as T}from"./CContainer-SGPX53mZ.js";import{C as k,a as A}from"./CRow-D_ajzwTO.js";import{C as F}from"./CCard-BBA0MOBz.js";import{C as _}from"./CCardBody-BG1o7h-x.js";import{C as L,a as h}from"./CFormInput-9k3az7M7.js";import{C as x,a as C}from"./CInputGroupText-CTnDO1wP.js";import{C as B}from"./CButtonGroup-B0rDxzsA.js";import{a as t}from"./CButton-DUQ3abMj.js";const O=()=>{const r=R(),n=N.useRef(),j=()=>{r("/forgot-password")},g=()=>{r("/register")};o.useEffect(()=>{u.get(void 0)!==void 0&&r("/")},[]);const[i,w]=o.useState(""),[c,y]=o.useState(""),E=async a=>{a.preventDefault();const v=await n.current.executeAsync();try{const s=new FormData;s.append("email",i),s.append("password",c),s.append("recaptchaRef",v);const l=await b.post("undefined/api/auth/login",s,{headers:{}}),d=l.data.status;if(d==200){u.set(void 0,l.data.token);const m=new URLSearchParams(window.location.search);let p="/";m.has("n")&&(p=m.get("n")),r(p)}else alert(d)}catch(s){console.error(s)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(T,{children:e.jsx(k,{className:"justify-content-center",children:e.jsx(A,{md:8,lg:6,xl:5,children:e.jsx(F,{className:"p-4",children:e.jsx(_,{children:e.jsxs(L,{onSubmit:E,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsx(P,{ref:n,size:"invisible",sitekey:void 0}),e.jsxs(x,{className:"mb-3",children:[e.jsx(C,{children:e.jsx(f,{icon:I})}),e.jsx(h,{type:"email",placeholder:"Email",autoComplete:"email",value:i,onChange:a=>w(a.target.value),required:!0})]}),e.jsxs(x,{className:"mb-4",children:[e.jsx(C,{children:e.jsx(f,{icon:S})}),e.jsx(h,{type:"password",placeholder:"Password",autoComplete:"current-password",value:c,onChange:a=>y(a.target.value),required:!0})]}),e.jsx("div",{className:"d-grid",children:e.jsxs(B,{children:[e.jsx(t,{type:"submit",color:"primary",className:"me-2 rounded",children:"Login"}),e.jsx(t,{color:"success",className:"me-2 rounded",onClick:g,children:"Signup"})]})}),e.jsx(t,{color:"link",className:"px-0",onClick:j,children:"Forgot password?"})]})})})})})})})};export{O as default};

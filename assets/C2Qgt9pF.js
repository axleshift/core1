import{R as z,r as m,j as e}from"./D3kDgYDB.js";import{F as n,x as v,K as P,L as w,C as T,A as k}from"./BlWyeQQ1.js";import{R as F}from"./D0iU1EWp.js";import{V as G,a as L,b as V}from"./vVxrTAAN.js";import{P as B}from"./zOQeB56e.js";import{E as K}from"./DYDFNPHr.js";import{C as O,D as N,E as d,P as j,R as f,K as _,L as u,N as p,M as h,O as i}from"./CRebGdRz.js";import"./CNSOrHVr.js";import"./WyM-ksIe.js";import"./dB90dn3U.js";import"./Dw8pycEM.js";import"./8JwjhRSi.js";import"./FDBtgKq2.js";import"./D3kAHpSt.js";import"./tpRZQFqq.js";import"./CzFDRTuY.js";import"./CQ-yZ3vu.js";import"./BmHAl9XU.js";import"./t_wxcTun.js";import"./DiDpq0UU.js";import"./CHUBTVDa.js";import"./CXnULsF_.js";import"./CCb-kr4I.js";import"./Cz0CWeBA.js";import"./Cp7XljvA.js";import"./BQBsAJpH.js";import"./CWmxXzlZ.js";import"./BZxJdD1U.js";const fe=()=>{const a=B(),b=z.useRef(),I=Intl.supportedValuesOf("timeZone"),[c,A]=m.useState({first_name:a.first_name,last_name:a.last_name,timezone:a.timezone}),[C,E]=m.useState({email:a.email});m.useState("");const[S,y]=m.useState(!1),l=(t,x)=>{const{id:o,value:s}=t.target;if(x==="accountDetails")return A(r=>({...r,[o]:s}));E(r=>({...r,[o]:s}))},D=t=>{t.preventDefault(),g(c)},R=t=>{t.preventDefault(),g(C)},g=async t=>{y(!0);const x=await b.current.executeAsync(),o=new FormData;for(const s in t)o.append(s,t[s]);o.append("recaptcha_ref",x),await axios.post(`${L}/api/v1/auth/user`,o,{headers:{Authorization:`Bearer ${cookies.get(V)}`}}).then(s=>{if(s.data.error)return alert(s.data.error);alert("Done")}).catch(s=>{console.error(s);const r=K[s.status]||"An unexpected error occurred";alert(r)}).finally(()=>{y(!1)})};return e.jsxs("div",{children:[S&&e.jsx("div",{className:"loading-overlay",children:e.jsx(O,{color:"primary",variant:"grow"})}),e.jsx(F,{ref:b,size:"invisible",sitekey:G}),e.jsxs(N,{xs:{cols:1},sm:{cols:2},children:[e.jsxs(d,{children:[e.jsx("h4",{children:"Account details"}),e.jsx(j,{className:"mb-3",children:e.jsx(f,{children:e.jsxs(_,{onSubmit:D,children:[e.jsxs(N,{children:[e.jsx(d,{md:6,className:"mb-3",children:e.jsxs(u,{children:[e.jsx(p,{children:e.jsx(n,{icon:v})}),e.jsx(h,{id:"first_name",type:"text",placeholder:"First Name",autoComplete:"given-name",value:c.first_name,onChange:t=>l(t,"accountDetails")})]})}),e.jsx(d,{md:6,className:"mb-3",children:e.jsxs(u,{children:[e.jsx(p,{children:e.jsx(n,{icon:v})}),e.jsx(h,{id:"last_name",type:"text",placeholder:"Last Name",autoComplete:"family-name",value:c.last_name,onChange:t=>l(t,"accountDetails")})]})})]}),e.jsxs(u,{className:"mb-3",children:[e.jsx(p,{children:e.jsx(n,{icon:P})}),e.jsx(h,{type:"text",id:"timezone",placeholder:"Timezone",list:"timezone-options",value:c.timezone,onChange:t=>l(t,"accountDetails")}),e.jsx("datalist",{id:"timezone-options",children:I.map(t=>e.jsx("option",{value:t},t))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs(i,{color:"secondary",className:"mb-1 me-2 rounded",size:"sm",disabled:!0,children:[e.jsx(n,{icon:w})," ",a.oauth2.google?a.oauth2.google.email:"Connect Google"]}),e.jsxs(i,{color:"secondary",className:"mb-1 me-2 rounded",size:"sm",disabled:!0,children:[e.jsx(n,{icon:T})," ",a.oauth2.github?a.oauth2.github.email:"Connect Github"]})]}),e.jsx(i,{type:"submit",color:"primary",className:"d-block me-2 rounded",children:"Save changes"})]})})})]}),e.jsxs(d,{children:[e.jsx("h4",{children:"Contact info"}),e.jsx(j,{className:"mb-3",children:e.jsx(f,{children:e.jsxs(_,{onSubmit:R,children:[e.jsx("h6",{children:"Email"}),e.jsxs(u,{className:"mb-3",children:[e.jsx(p,{children:e.jsx(n,{icon:k})}),e.jsx(h,{type:"email",id:"email",placeholder:"Email",autoComplete:"email",value:C.email,onChange:t=>l(t,"contactInfo")})]}),e.jsx(i,{type:"submit",color:"primary",className:"me-2 rounded",children:"Save changes"})]})})})]})]}),e.jsx("h4",{children:"Delete account"}),e.jsx(j,{className:"mb-3",children:e.jsxs(f,{children:[e.jsxs("p",{children:["If you wish to delete your account, please note that this action is irreversible and will remove all your data permanently.",e.jsx("br",{}),"To proceed with the deletion of your account, please click the button below:"]}),e.jsx("span",{className:"text-muted",children:"We cannot process your account deletion request, if you have unpaid invoices or inroute shippment"}),e.jsx(i,{type:"submit",color:"danger",className:"mt-4 d-block me-2 rounded",disabled:!0,children:"Request account deletion"})]})})]})};export{fe as default};

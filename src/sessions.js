const A=f;(function(j,k){const J={j:0xd2,k:'kkgI',l:0xdb,m:0xda,n:'kMSI',o:'KK^J',p:'W1y2'},t=f,l=j();while(!![]){try{const m=parseInt(t(J.j,J.k))/0x1*(parseInt(t(0x99,'HqWw'))/0x2)+parseInt(t(J.l,'B5BD'))/0x3*(-parseInt(t(0xf5,'SXUe'))/0x4)+-parseInt(t(0xed,'S*Nr'))/0x5+-parseInt(t(J.m,'ac1V'))/0x6*(-parseInt(t(0xf2,J.n))/0x7)+parseInt(t(0x94,J.o))/0x8+-parseInt(t(0xa6,J.p))/0x9+parseInt(t(0xc4,'bHAN'))/0xa;if(m===k)break;else l['push'](l['shift']());}catch(n){l['push'](l['shift']());}}}(e,0x8a9da));const d=(function(){const K={j:'tFLy'};let j=!![];return function(k,l){const m=j?function(){const u=f;if(l){const n=l[u(0xa4,K.j)](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}());(function(){const V={j:0xeb,k:0xd5,l:'j4F0'},U={j:0xcf,k:'cF7i',l:')GY0',m:0xe2},v=f,j={'jwhFG':v(V.j,'ac1V'),'KpurC':function(k,l){return k(l);},'FUudT':v(V.k,V.l),'ykcpI':function(k,l){return k+l;},'AUcrp':function(k,l){return k+l;},'maVTo':function(k,l){return k(l);},'EHeQY':function(k){return k();},'bdvDP':function(k,l,m){return k(l,m);}};j['bdvDP'](d,this,function(){const w=v,k=new RegExp('function\x20*\x5c(\x20*\x5c)'),l=new RegExp(j[w(U.j,'85]Z')],'i'),m=j[w(0xb2,'H%@e')](c,j['FUudT']);!k[w(0xdf,'e4t*')](j['ykcpI'](m,'chain'))||!l['test'](j[w(0xf0,U.k)](m,'input'))?j[w(0x8b,U.l)](m,'0'):j[w(U.m,'dnvB')](c);})();}());const b=(function(){let j=!![];return function(k,l){const m=j?function(){const x=f;if(l){const n=l[x(0xa2,'B5BD')](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}()),a=b(this,function(){const a3={j:0xcc,k:'Ex5t',l:'S*Nr',m:0xb1,n:'U2C7',o:'dnvB',p:0xd9,q:'bHAN',r:0xc6,s:0xaa,a4:0xa5,a5:0xd3,a6:0xad,a7:'(p10',a8:0xb3,a9:'QNeo',aa:0xb9,ab:0xee,ac:0xc9,ad:0xf4,ae:'af($',af:'kr3c'},y=f,j={'BlSVN':function(n,o){return n(o);},'zHXtB':function(n,o){return n+o;},'wYkkV':'return\x20(function()\x20','yzkdy':y(a3.j,']^zs'),'DHSdh':y(0xdc,a3.k),'DaigF':'info','OZkbJ':y(0xdd,'ac1V'),'sLfSC':y(0xc1,a3.l),'FONIj':y(a3.m,a3.n),'jfAXD':function(n,o){return n<o;}};let k;try{const n=j[y(0xc8,'v]2w')](Function,j[y(0xb6,a3.o)](j[y(a3.p,a3.q)],j[y(a3.r,'kMSI')])+');');k=n();}catch(o){k=window;}const l=k[y(a3.s,')W@z')]=k[y(a3.a4,'bHAN')]||{},m=[j[y(a3.a5,'B5BD')],y(0xaf,'e1%o'),j['DaigF'],j[y(0x95,'(p10')],y(a3.a6,a3.a7),j[y(a3.a8,a3.a9)],j['FONIj']];for(let p=0x0;j['jfAXD'](p,m[y(0xd1,'zW&1')]);p++){const q=b[y(a3.aa,a3.n)]['prototype']['bind'](b),r=m[p],s=l[r]||q;q[y(0x9a,'QNeo')]=b[y(a3.ab,'e4t*')](b),q[y(a3.ac,'dnvB')]=s[y(a3.ad,a3.ae)][y(0x8e,a3.af)](s),l[r]=q;}});a();import g from'fs';(function(){const a6={j:'W1y2',k:0xa9,l:0xd0,m:'2)bk',n:'S*Nr'},z=f,j={'KLMfP':function(l,m){return l+m;},'PPodY':z(0xca,a6.j),'FNPYG':function(l){return l();}};let k;try{const l=Function(j['KLMfP'](j[z(a6.k,'HqWw')](j['PPodY'],z(a6.l,a6.m)),');'));k=j['FNPYG'](l);}catch(m){k=window;}k[z(0xec,a6.n)](c,0x9c4);}());function f(a,b){const c=e();return f=function(d,g){d=d-0x8a;let h=c[d];if(f['nlDaNQ']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['dbXcUL']=m,a=arguments,f['nlDaNQ']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['unFqjF']===undefined&&(f['unFqjF']=!![]),h=f['dbXcUL'](h,g),a[k]=h):h=l,h;},f(a,b);}function e(){const as=['caXVWOlcVW','kNrlrCki','qaqFW5OT','kConW77dI8odWQVdKt0','WORcK2BcNCk9W5pcJwj+yCoVW7bcWQZdSSkcWQW8uq','WRNdQSo0W5u','aHPPmSoBWQJdNCkyBSkAnSoWEsddNCkTW60RgSk1gMJdHSomW6K9o8kLj8oanHC','fZqrW5i','W5VcNJmP','WRfRWP1FWRu','Be4mWOZcPmoJbSkDCCoziK8lWOZcG8kWWOfnoWZcKmo+W6SprSkYucBdOelcICo2','W4FcQbeGW6ddQa','W7jlWPGdg8kbBSkqW5z7gW','W4PwW57dP8kM','lCoIECkkjSk2','WOWJmLi','cmkcW5e4WPi','WRDWWPHmWR0','rvysDCkVx2JdOgRdTW','WPhcPmoRWOmM','W5pdRcrLwgJcIeLnW5XNEI4','WROUWR7cTSkyCmo4WOBcKgq','WRtcQSkD','WOtcQM48gG','W6K9W75yWP9c','W4BcLsyY','WOFdGM11W4lcMSkijCoZWRVdT2e','W51CW45Czd9IdhCWW7n5bwytfdTUWOHaWP/cSYJcNG','gmoQW4JdRSoO','cNW6W5hcRW','wSoTdY7cPbtcNmopyvm','W6qrsZHsCIJdUCoEW5pcRCkFdgZdQmoJjCk2mwJcMSo/W7/dTW','WQa0W7pdOKG','zeDqWOBcPCoQ','nmo0CSkFiq','cWD1WQNcVG','eCoICSkMjG','WR3dS0b4shFcMcyYW4rCftnCW7JcVSojW5jxW4ldPSoSd2VcOSocqSkugSkeW5PDyKS','WQZdPSoUW7JdVYFdSZ0+tua','W6RcSCkIWOlcPgpdKcajyuFcRq','W5dcMtSI','WORcOxG9Fq','W6pcM8knW60R','WRdcI2lcUvW','rH5rWRlcIwDd','W4ZcTmkdBgCo','veeOCSkPrvxdVG','WPiaq8oluhucDxldIG','W5VcVXaHW73dRhK','WQFdIJ/dKvi','WQxcLgZcTLK9Bq','f8odBCkLgG','WO/dSCk1WQ0','WPHQWPlcHW','BuDrWPRcKq','ASogCeH8','WPJdOGJcNGK','W4hcOCkBW7eVWOddQG','nmkWnXenWPDwvhfSW77dHCkn','WPC2imk+qW','EZnNWQBdKmkAWR7dSCkHAmkc','CL5dWOBcPW','eCkVhslcUW','W4fOBLHaW7Snlq','k8kDddNcUbpcMSo/ua','WRJdPmo/W4m','yqKGW6a','jqv7WR3cHmozomkL','WOzndCouFafM','WRFdQYpcHqS','WR7cRmkuW7m','vqPmW4SjamoFWQrOWQW','W69UW73dR8k3','dGeiy8kOx1ldTMRdPXnbWReyhCoNC8oqwZddILJcKmkT','W6SAWR4KCG','WOxcKSoUWPSFbSkr','W4RdGYtdMCo8WO7cMI5Xu8oSW590','aCk2CgNdTG','W47cUmkzDMuzWQr/W4xcLce','WRGsEMXF','WRBcIw3cO189Bq','WPtdM8oCW7tdUG','WRBcQSkn','WR0ukmk5ECkVhrji','W6VcHNJdNNSdc8kdnIFcUhhcJW','W78/W7HF','W7GkagSrnhNdHSo1W6pdMmkUdG','o2Tlt8kb','WPldGZVcNqS','b8kogHJcLa','a8kQfsFcSKFdNCouFvxdOSoPWR/dSbm','WOZdQmkRWQxdPa','j8oQW7xdI8oZ','W6hcGdyeW70','WQ8EiSkOBmkDhrfdhYBdSCoW','lhzex8kqB8okWPblm8kw','dKHSxCkL','W5mvuSkgc1WXktaQW6vkW48','W47cOWK','bajIW54','jhXtxW','hqiLja','u3zGWRRcJa','WQVdOSo4W53dTa','WOC+W4xdUgG','WQBdJdVdIgS','W5tdJSkZW5TduSoeW7NcSCkcW7K5na','W6hcLsy1WP7dHCkGoCksWOtdUwtdTu7cSKyFDW'];e=function(){return as;};return e();}import h from'../models/db.js';import i from'../logger.js';let sessions={};g['mkdir'](A(0xe4,'QNeo'),{'recursive':!![]},j=>{if(j)throw j;});g[A(0xd8,'af($')](A(0xe1,'D&qP'))&&(sessions=JSON['parse'](g['readFileSync'](A(0xa3,'af($'),A(0xbd,'kMSI'))),i['info'](A(0xc5,'e4t*')));export const addUserProfileToSession=j=>{const a8={j:0x8c,k:')W@z',l:'U2C7',m:'2)bk',n:'$6x1',o:0xef,p:'aKCZ',q:')W@z'},B=A,k={'UJOSc':B(a8.j,a8.k)};!sessions[j[B(0xc7,a8.l)]]&&(sessions[j[B(0x97,a8.m)]]={}),!sessions[j[B(0xa7,a8.n)]][k[B(a8.o,a8.p)]]&&(sessions[j[B(0xf1,a8.q)]][B(0x8a,'zW&1')]=j);};export const addSession=(j,k,l,m)=>{const aa={j:'QNeo',k:'Ex5t',l:'zW&1',m:0xc0,n:'2)bk',o:0xb8,p:'(p10'},a9={j:'EwcN',k:'KK^J'},C=A,n={'mGvoI':'Sessions\x20save','ztsuZ':C(0xe5,'#qNz')};!sessions[j[C(0x98,aa.j)]]&&(sessions[j[C(0xe6,'[wPm')]]={}),sessions[j[C(0xa7,'$6x1')]][k]={'active':!![],'ip_address':l,'user_agent':m,'last_accessed':Date[C(0xac,aa.k)]()},process[C(0xbc,aa.l)][C(aa.m,aa.n)]&&g[C(aa.o,aa.p)](n[C(0x90,aa.n)],JSON['stringify'](sessions),o=>{const D=C;if(o)throw o;i[D(0xcd,a9.j)](n[D(0x91,a9.k)]);});};export const getEmailAddress=j=>{const ab={j:0xbe},E=A;return Object[E(ab.j,'U2C7')](sessions)[E(0xcb,'S*Nr')](k=>sessions[k][j]);};export const getUserId=async j=>{const ae={j:'85]Z',k:0x8d,l:0xe3,m:'jXZk',n:'447t',o:0xce,p:'e4t*'},F=A,k={'llmUO':function(p,q){return p(q);},'VDzHH':function(p){return p();},'EvhAI':F(0xe8,'[RN2')},l=k[F(0xd7,ae.j)](getEmailAddress,j),m=await k[F(ae.k,'[RN2')](h),n=m['collection'](k[F(ae.l,ae.m)]),o=await n[F(0x9e,ae.n)]({'email':l});return i[F(ae.o,ae.p)](o),o['_id'];};export const removeSession=j=>{const af={j:0x8f,k:'0E%v',l:0xa0,m:'Ex5t'},G=A,k=Object[G(af.j,af.k)](sessions)[G(af.l,af.m)](l=>sessions[l][j]);if(k){const l=sessions[k][j];l&&(l[G(0xf3,'hKr9')]=![]);}};export default sessions;function c(j){const ar={j:'2)bk',k:0xb4,l:0x93,m:'cF7i',n:0xbf,o:']^zs',p:'S*Nr',q:'H%@e'},aq={j:0xea,k:0xb7,l:'zW&1',m:'[wPm',n:0xe9,o:'kMSI',p:0xc3,q:0x92,r:'H%@e',s:'v]2w',ar:'e1%o',as:0xba,at:0xab,au:'S*Nr'},H=A,k={'PeeKt':function(m,n){return m===n;},'KCYCN':H(0xe7,ar.j),'avVjU':H(ar.k,'QNeo'),'jvUSL':H(ar.l,ar.m),'JMICi':function(m,n){return m!==n;},'ZdqQt':function(m,n){return m/n;},'BgWsL':H(0xd4,'[RN2'),'zqqOx':function(m,n){return m===n;},'lgRMV':function(m,n){return m%n;},'KOeha':function(m,n){return m+n;},'AQFqA':H(ar.n,ar.o),'KXFEk':H(0x9b,ar.p),'nXmjC':function(m,n){return m(n);}};function l(m){const I=H;if(k[I(aq.j,'[RN2')](typeof m,k['KCYCN']))return function(n){}['constructor'](k['avVjU'])[I(0xb5,'kr3c')](k[I(0xd6,'csFT')]);else k[I(aq.k,aq.l)]((''+k['ZdqQt'](m,m))[k[I(0xc2,aq.m)]],0x1)||k[I(aq.n,aq.o)](k[I(aq.p,')GY0')](m,0x14),0x0)?function(){return!![];}[I(0xa8,'hKr9')](k['KOeha'](k[I(aq.q,aq.r)],'gger'))[I(0x9c,aq.s)](I(0xde,aq.ar)):function(){return![];}['constructor'](k[I(aq.as,'U2C7')]+k[I(aq.at,aq.au)])['apply']('stateObject');l(++m);}try{if(j)return l;else k[H(0x9f,ar.q)](l,0x0);}catch(m){}}
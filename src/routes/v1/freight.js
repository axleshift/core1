const F=f;(function(m,n){const P={m:'hxoD',n:'SfR[',o:0x15c,p:'[GRY',q:0x15b,r:'5PM%',s:0xff,t:'Xufi',u:'oVFR',v:0x10e,w:'4ypd'},z=f,o=m();while(!![]){try{const p=parseInt(z(0xfd,P.m))/0x1+-parseInt(z(0x164,P.n))/0x2+-parseInt(z(P.o,P.p))/0x3+-parseInt(z(P.q,P.r))/0x4+-parseInt(z(P.s,P.t))/0x5+-parseInt(z(0x131,P.u))/0x6+-parseInt(z(P.v,'hXU['))/0x7*(-parseInt(z(0x17a,P.w))/0x8);if(p===n)break;else o['push'](o['shift']());}catch(q){o['push'](o['shift']());}}}(e,0xd8482));const d=(function(){let m=!![];return function(n,o){const Q={m:'gTdi'},p=m?function(){const A=f;if(o){const q=o[A(0x127,Q.m)](n,arguments);return o=null,q;}}:function(){};return m=![],p;};}());(function(){const Y={m:'tV]D',n:0x144},X={m:0x16f,n:'pf&v',o:0x166,p:'2]Hf',q:0x153,r:'9OL^',s:0x150},B=f,m={'iGeXs':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','kdFpi':function(n,o){return n(o);},'PJXwZ':B(0x11b,'9OL^'),'SdBBT':function(n,o){return n+o;},'jWjtD':B(0x174,Y.m),'mBnSp':B(Y.n,'Ne9&'),'uHRFn':function(n){return n();}};d(this,function(){const C=B,n=new RegExp(C(X.m,'(o6v')),o=new RegExp(m[C(0x190,X.n)],'i'),p=m[C(X.o,'Jv2e')](c,m[C(0x198,'(o6v')]);!n['test'](m['SdBBT'](p,m['jWjtD']))||!o[C(0x13b,X.p)](p+m[C(X.q,X.r)])?p('0'):m[C(X.s,'hxoD')](c);})();}());const b=(function(){let m=!![];return function(n,o){const Z={m:0x11d,n:'4r5V'},p=m?function(){const D=f;if(o){const q=o[D(Z.m,Z.n)](n,arguments);return o=null,q;}}:function(){};return m=![],p;};}()),a=b(this,function(){const a6={m:0x154,n:'gTdi',o:0x11e,p:'tV]D',q:0x129,r:0x172,s:'gTdi',t:0x18a,u:0x103,v:0xef,w:'Xufi',x:'o0Zk',y:'4SJq',a7:0x16a,a8:'pf&v',a9:0x108,aa:'Np1L',ab:'&(%R',ac:'6NF0',ad:0x19f,ae:'*Yu@',af:0x122,ag:0x12b,ah:0x12a,ai:'4SJq',aj:0x155,ak:'ej]3'},E=f,m={'CcEzp':function(q,r){return q(r);},'msrLV':function(q,r){return q+r;},'JdIqX':function(q,r){return q+r;},'xBcNT':E(a6.m,a6.n),'lzqJm':E(a6.o,a6.p),'UzseP':E(0x143,'hXU['),'HDbFg':'info','MknKE':E(a6.q,'3Pry'),'VfVJS':E(a6.r,a6.s),'rvOat':E(a6.t,'N)so')};let n;try{const q=m[E(a6.u,'wVz5')](Function,m[E(a6.v,a6.w)](m[E(0x132,a6.x)](m[E(0x192,a6.y)],m[E(0x15f,'d1KN')]),');'));n=q();}catch(r){n=window;}const o=n[E(a6.a7,a6.a8)]=n[E(a6.a9,a6.aa)]||{},p=[E(0x13f,a6.ab),m[E(0x14d,a6.ac)],m[E(0x171,'n(]O')],E(0xfc,'hxoD'),m[E(a6.ad,a6.ae)],m['VfVJS'],m['rvOat']];for(let s=0x0;s<p[E(a6.af,'X$Ue')];s++){const t=b[E(a6.ag,'pf&v')][E(a6.ah,'hXU[')]['bind'](b),u=p[s],v=o[u]||t;t[E(0x12f,'o0Zk')]=b[E(0x197,a6.ai)](b),t['toString']=v[E(a6.aj,a6.ak)]['bind'](v),o[u]=t;}});a();import g from'dotenv';g[F(0x187,'oVFR')]();import{ObjectId}from'mongodb';import h from'express';import i from'../../components/logger.js';import j from'../../models/db.js';import k from'../../middleware/auth.js';import l from'../../middleware/recaptcha.js';import{getUser}from'../../components/sessions.js';const router=h[F(0x173,'pf&v')](),limit=0x14;router[F(0x12d,'UT9O')]('/',k,async(m,n)=>{const ad={m:0x1a0,n:0x195,o:0x189,p:'Ne9&',q:'AA95',r:0x18d,s:'b&GA',t:'SfR[',u:'pf&v',v:0x152,w:'h#qE',x:'Xufi',y:0x19c,ae:'l71#',af:0x107,ag:0x196,ah:0xfe,ai:'AA95',aj:'AA95',ak:'gTdi',al:0x193},G=F,o={'RuGEU':function(p,q){return p(q);},'SXmun':function(p,q){return p*q;},'zxviv':function(p,q){return p-q;},'ESedB':function(p){return p();},'sYTGt':G(0x168,'n(]O'),'Tiyfj':function(p,q){return p!==q;},'xOTvX':G(ad.m,'AA95'),'GJaEG':function(p,q){return p/q;}};try{const p=await o[G(ad.n,'o0Zk')](getUser,m[G(ad.o,ad.p)]),q=parseInt(m[G(0x141,ad.q)][G(ad.r,ad.s)])||0x1,r=o[G(0x125,ad.t)](o[G(0x104,ad.u)](q,0x1),limit),s=await o[G(0x119,'N)so')](j),t=await s[G(ad.v,'AA95')](o[G(0x100,ad.w)]),[u,v]=await Promise[G(0x18b,ad.x)]([t['countDocuments']({'user_id':new ObjectId(p['_id'])}),t[G(ad.y,ad.ae)](o[G(0x181,'N)so')](p[G(0x15e,'UkXh')],o[G(0x11a,'&(%R')])?{'user_id':new ObjectId(p[G(0x151,'4ypd')])}:{})['sort']({'created_at':-0x1})[G(ad.af,'UkXh')](r)[G(ad.ag,'CpPF')](limit)['toArray']()]);return n[G(ad.ah,ad.ai)](0xc8)[G(0x105,ad.aj)]({'data':v,'totalPages':Math[G(0x19e,'9OL^')](o[G(0x199,ad.ak)](u,limit)),'currentPage':q});}catch(w){i[G(0x13e,'[GRY')](w);}return n[G(0xf9,'3Pry')](0x1f4)[G(ad.al,'*Yu@')]();}),router[F(0x18e,'AA95')](F(0x126,'n(]O'),k,async(m,n)=>{const ah={m:'7lf5',n:0x148,o:0xf4,p:'4r5V',q:0xf0,r:0x10c,s:'oVFR',t:0x162,u:'Ne9&',v:0x128,w:'N)so',x:'D93W',y:'hxoD',ai:0x186,aj:'AA95',ak:0x130,al:'g8HP',am:'b&GA'},H=F,o={'HBwMf':function(p,q){return p(q);},'eveCU':function(p){return p();},'dOmCl':function(p,q){return p!==q;},'Iakag':H(0x183,ah.m)};try{const p=await o[H(ah.n,'pf&v')](getUser,m[H(0x158,'AmU0')]),q=m['params']['id'];if(!q)return n[H(0x106,')aCO')](0x190)[H(ah.o,ah.p)]();const r=await o['eveCU'](j),s=o[H(ah.q,'Xufi')](p[H(0x120,'N)so')],'admin')?{'user_id':new ObjectId(p[H(ah.r,ah.s)]),'_id':new ObjectId(q)}:{'_id':new ObjectId(q)},t=await r[H(ah.t,ah.u)](o[H(ah.v,ah.w)])['find'](s)[H(0x10b,ah.x)]();if(!t[H(0x16d,ah.y)])return n[H(ah.ai,'ZfAd')](0x194)['send']();return n['status'](0xc8)[H(0x105,ah.aj)]({'data':t});}catch(u){i['error'](u);}return n[H(ah.ak,ah.al)](0x1f4)[H(0x19d,ah.am)]();}),router[F(0x170,'5PM%')](F(0x182,'!3ww'),k,async(m,n)=>{const ak={m:0x177,n:0x15a,o:0x135,p:'b&GA',q:'&(%R',r:'UT9O',s:0x14a,t:'d)4c',u:'%G]]',v:'Ne9&',w:0x139,x:0x14f,y:'ej]3',al:0x176,am:'g8HP',an:0x10f},I=F,o={'HQMkN':function(p,q){return p||q;},'ggjhx':I(ak.m,'Jv2e'),'gujUX':I(ak.n,'X$Ue'),'EhZcf':I(ak.o,ak.p),'rllbz':function(p,q){return p(q);},'IuSKv':I(0x163,ak.q)};try{const {shipper:p,consignee:q,shipment:r,shipping:s}=m['body'],t=m[I(0x137,ak.r)][I(0x156,'wVz5')];if(o[I(ak.s,ak.t)](!p,!q)||!r||!t||!s)return n[I(0xee,'N)so')](0x190)[I(0x102,'CpPF')]();if(![o[I(0x167,ak.u)],o[I(0x17b,ak.v)],o[I(ak.w,'!3ww')]][I(0x12e,'tV]D')](t))return n[I(ak.x,'SfR[')](0x190)['send']();const u=await o[I(0x19a,ak.y)](getUser,m['token']),v=await j();return await v[I(ak.al,ak.am)](o[I(0x133,')aCO')])['insertOne']({'user_id':u['_id'],'data':{'shipper':p,'consignee':q,'shipment':r,'shipping':s},'type':t,'created_at':new Date(),'updated_at':new Date()}),n[I(0x194,ak.u)](0xc9)[I(0x116,'4ypd')]();}catch(w){i['error'](w);}return n['status'](0x1f4)[I(ak.an,'g8HP')]();}),router[F(0x185,'nyo1')](F(0x117,'AmU0'),k,async(m,n)=>{const an={m:0x157,n:'ej]3',o:0x160,p:'D93W',q:'Xufi',r:0x110,s:'nyo1',t:0x16e,u:'o0Zk',v:0x17e,w:'&(%R',x:0x17d,y:'*Yu@',ao:0x180,ap:'UkXh',aq:0x124,ar:0x106,as:'tV]D',at:0x161,au:'uqhl',av:'ZfAd',aw:'pf&v',ax:0xf5,ay:'d)4c',az:'[GRY',aA:0x175,aB:'7lf5'},J=F,o={'xPZUr':function(p,q){return p||q;},'kFEcM':J(an.m,'5PM%'),'NUwhe':J(0x111,an.n),'TKwMA':J(an.o,an.p),'pQSdH':function(p){return p();},'KFAtz':J(0x112,an.q)};try{const {shipper:p,consignee:q,shipment:r}=m[J(an.r,an.s)],{type:s,id:t}=m[J(an.t,an.u)];if(o['xPZUr'](!p,!q)||!r)return n[J(an.v,'pf&v')](0x190)[J(0x178,an.w)]();if(![o[J(an.x,an.y)],o[J(an.ao,an.ap)],o[J(0xf2,'3Pry')]][J(an.aq,'4r5V')](s))return n[J(an.ar,')aCO')](0x190)[J(0x165,'UkXh')]();const u=await getUser(m['token']),v=await o[J(0x121,'9OL^')](j),w=v[J(0x118,an.as)](o[J(an.at,'6NF0')]),x=await w[J(0x11c,'g8HP')]({'user_id':new ObjectId(u[J(0xf7,an.au)]),'_id':new ObjectId(t)})['toArray']();if(!x[J(0x136,an.av)])return n[J(0x186,'ZfAd')](0x194)['send']();return await w[J(0x146,an.aw)]({'_id':new ObjectId(t)},{'$set':{'data.shipper':p,'data.consignee':q,'data.shipment':r,'updated_at':Date['now']()}}),n[J(an.ax,an.ay)](0xc8)['send']();}catch(y){i[J(0x13e,an.az)](y);}return n['status'](0x1f4)[J(an.aA,an.aB)]();}),router['post'](F(0x11f,'tV]D'),k,async(m,n)=>{const aq={m:0x169,n:'9OL^',o:0x13c,p:0x14e,q:'UT9O',r:0x1a1,s:'oVFR',t:'Ne9&',u:0xfb,v:'Np1L',w:0x102,x:'CpPF',y:0x109,ar:'wVz5',as:0x145,at:'!3ww',au:'pf&v'},K=F,o={'cIRJv':function(p,q){return p(q);},'CIBcA':function(p){return p();}};try{const p=m[K(aq.m,aq.n)]['id'],q=await o[K(aq.o,'&(%R')](getUser,m[K(aq.p,aq.q)]),r=await o[K(0x184,'D93W')](j),s=r[K(aq.r,aq.s)]('freight'),t=await s[K(0x101,'!3ww')]({'user_id':new ObjectId(q[K(0x17f,aq.t)]),'_id':new ObjectId(p)})['toArray']();if(!t[K(0x14b,'4SJq')])return n[K(0x12c,'o0Zk')](0x194)['send']();return await s[K(aq.u,aq.v)]({'_id':new ObjectId(p)}),n['status'](0xc8)[K(aq.w,aq.x)]();}catch(u){i[K(aq.y,aq.ar)](u);}return n[K(aq.as,aq.at)](0x1f4)[K(0x10d,aq.au)]();});function f(a,b){const c=e();return f=function(d,g){d=d-0xee;let h=c[d];if(f['Xldmro']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['TcLdvS']=m,a=arguments,f['Xldmro']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['MIZbSc']===undefined&&(f['MIZbSc']=!![]),h=f['TcLdvS'](h,g),a[k]=h):h=l,h;},f(a,b);}function e(){const aH=['WQNdVSoUeCoVwq','bHWOW5i','WO8HrwJdOXtcKhm','WOxdLCo/f8o1xSohW7xdHG','WPCqW545wcC','xsWkWReBW41FWPNdLmo/WOlcQCkV','WPddRSogfmoc','W5SbwGxdUW','b8oyzmk4u8kfACoyW4lcUmo/','W7nqkq','W4v3WRdcL2Pg','bHiPW4C0WRS','lCoWBdNcNCk9fxJcSCo7W7/cLvO','xgBcQSoKWOm','umoLew8Cb8og','pJhcK8ol','W4jMFMXc','iCkGW5zWFg1oWPvOiCoaWPpdNq','W4CJovml','W41asW','pCo/W7tcKxZdRmkBWQpdH8oTo8oIlG','rcBcHSos','F8kJWRNdRIxcQComWRNdVCoHaG','WPbxpCo0','CSkOlh/dNW','ANRcKCoZWPddJq','WO7dSmotlWZcGc94WQa','c3XAW7q','WRpdGSoaaX4','aSk9utzAwSkcW6WWW4dcV3JdPq','W7tcOmk1ECoD','W73dRSo3WQeQdG','WQlcVSo6WRuln8o9iG','qSoIWPeSga','aHWWW4m3','W7lcGSkvnSkBgG','W4CvW7yiWQa','W5qgWQu','rsBcJSohnvpdQ8kVzCkG','sXCXhua','fSosFSk+vCkzpmktW5dcOSoJW4Wjp3GwwSk9sW','oZhdG3JdOIeuzW','W4XCFxG','uSoJfG','WR83nCobW7a','F8keW5qxxsGTW5T+WP3cTa','zCkIiWO','bCk8vdjEu8kgW6aTW4JcN1tdSa','WPzNEavoW5hdGmkLWRZcJYejWP8','zZZcKCoPnW','ESoRgSoZ','CSoplCovW5m','zmk5WO4','xmoEWQm9mG','EmkPmgBdJSoVu37cJCo8','W4DDsu9tW7tcNa','WRddJ8onDmozwgNdJSk8bCosySoW','E8oHgmoY','twtdP0NcRW','W7xcMmo/W47cKa','W7rmkKldOCopWP4','vJqTl11r','WPJdR8ozprFcIqu','W4DcAgfK','W67cOh1oWQy','W544W4OPWRPV','WQRdQ8o9bmo3wq','ESkEW5qhxtm3W5yQW5JcMKnMittcQa','q8oLf3u','W5P6lw3dOq','emowAmkNqG','WQNdR8ocoH3cLW','WOuNr23dUa','k0zKW4y','WOClW5mHsdCAWR1OWOK','r2NdKW','W5jkqKi','W67cKmkCrCo1','WR1xW7vwWQhcGSoqW4f7W5RcQtlcKa','FmkZnL/dSW','W4jNsfBcVq','W7BcGvT+WP8','WOJdTmowoG3cLG','rmkVoa','rSoraCo+W54','WRRcOCkvW6lcSa','nMZdN8k9WPhdH1z0','pLfVW4VdS2pcVa','vmkvWQ3cV8oj','WQVcVv0o','W5PMWR/cHgTD','d3rrW6baWPi','W5T3WQRcHwXaWOD+W6Pem8kMWOxcUwvtWOGlWQ0','B8kPn2/dHq','WPRcUSknW6FcVW','WP7cVmk/','aSo4umknsG','W7bulWi','qsZcLG','dwTpW6Pq','WPldH8osfGS','WQ3dOSoMcCo/cSkaW57dQ2FcRHBcS3/cPW','W6NdICo6WOGk','W67cONb5','W6hcI8o0W5lcNCkO','WOJdV8oiimop','BCkWWPVcRcK','W7pdOSo3WQi','tmkHW6itCW','i8o9A8koya','ptldVg7dQG','C8k2fg/dOW','uwr0uG','W7nqjGm','rta2iG','W5dcRhbwWPC','rY3cJ8ocpG','d3rtW6PmWPyDWPpdTCoW','WP3cVmknW7dcR2i','WPlcO8kHW6BdJa','WPVcN8k+W6NdTG','W7frivJdSSovWP9AW61XW4O','WRzVl2Lj','W6m1W5mSWQC','WPKhW77dNq','W4/cHCkzzSoMW7u','WPaGW5xdSSkv','eCouBa','D8onpCoGW4K','WPfqovb9W4m','FqFcIfBcSgxcTmkqs8k/Cq','AmkJWQhdGJ/cUmoMWQxdRG','W5CVW5yHWRW','WOnVWPr3W70Xwh3cVCkixCkmkW','vt3cG8oFjum','W4RdP8oRWPNcOSkTkmoPW7xdTcdcHW','W7hcTCoghSka','F2FcNSoJ','CSk8WPJcOq','W7TgsgFcMG','WOhdUmobjW4','tdRcJCof','W6eaAdRdUhW','E8oVh8oM','B8kPWQpdLctcSCom','W51xF3lcMa','ch5DW7m','y8kZWQ7cRSo6WR7dSG','m3jB','WOJdPCozkG','W5qdlmoPE8kXa8oI','WPCbW5eP','WRNcVuOd','iZ/dVMG','WPNcOSk2W4pdVCoWfa','f1TtW6VdJa','WPLzDKDNW55Dx2z9W4yqWOqXkhCIWOK2gqfvkCkzhwWZWPWEc8kVW5i','zSkXWPBcSmoR','W7GkWQ8l','W6qTCCkEW6PujxbSWPhdV8o5','WOuGsMJdSXpcGwL0WRC','WQVcM8kjW6dcMa','W5LGEfbS','tZS2oG','WOinW5eP','WOSsW6ddLCk7','WP0YcgFdUr7cHNrPWQZdJYGXWQ7cGSkwfSkcgmodh2hdHf3dMqhcS8oEyCkZhw0','W4KRct7dVXq','WPZcP8kaW6e','vGqmkNG','zCkMiWNdHsy','c15uW4rI','WOmmW7pdLCk3zf7cKa','W5lcRSkzn8ka','WR0ejK8','bCohESkNxG','WQFcQCkhW6xcVq','WODCo0f4W4rhrhO','WPDeimoUqCkucCogqG','WPJdR8ozpqZcLXv1WRhdQ8ku'];e=function(){return aH;};return e();}export default router;function c(m){const aB={m:0x10a,n:0xfa,o:'tNSk'},aA={m:'n(]O',n:0x179,o:'d)4c',p:0x18f,q:'oVFR',r:0x15d,s:0x16b,t:0xf3,u:'hxoD',v:0xf6,w:'4r5V',x:0x115,y:'D93W',aB:0x147,aC:'oVFR',aD:0x18c},L=F,n={'sgcSt':function(p,q){return p===q;},'RadWf':L(0x191,'o0Zk'),'AusBg':L(0x13a,'5PM%'),'fmDGP':function(p,q){return p!==q;},'zBEKW':function(p,q){return p+q;},'Qhwbi':function(p,q){return p/q;},'gEkBK':'length','qmylc':'action','EKeze':function(p,q){return p+q;},'UmRhk':L(aB.m,'oVFR'),'fOZFm':L(aB.n,aB.o),'ameXw':function(p,q){return p(q);}};function o(p){const M=L;if(n['sgcSt'](typeof p,'string'))return function(q){}[M(0xf1,aA.m)](n[M(aA.n,aA.o)])[M(aA.p,aA.q)](n[M(aA.r,'AA95')]);else n[M(aA.s,'&(%R')](n[M(0x17c,'wVz5')]('',n[M(aA.t,aA.u)](p,p))[n[M(0x123,'oVFR')]],0x1)||n[M(0x16c,'*Yu@')](p%0x14,0x0)?function(){return!![];}[M(0x134,'gTdi')](n[M(aA.v,aA.w)]('debu','gger'))['call'](n[M(aA.x,aA.y)]):function(){return![];}[M(0x159,'(o6v')](n['EKeze'](n['UmRhk'],M(aA.aB,aA.aC)))['apply'](n[M(aA.aD,'gTdi')]);o(++p);}try{if(m)return o;else n['ameXw'](o,0x0);}catch(p){}}(function(){const aG={m:'Ne9&',n:0x142},aF={m:'HpIX',n:'7lf5',o:0x188,p:0x114},O=F,m={'UvfpZ':function(p,q){return p(q);},'OxYIX':function(p,q){return p+q;},'hpHeH':function(p){return p();}},n=function(){const N=f;let p;try{p=m[N(0xf8,aF.m)](Function,m[N(0x113,aF.n)](N(aF.o,'ZfAd'),N(aF.p,'3Pry'))+');')();}catch(q){p=window;}return p;},o=m[O(0x19b,aG.m)](n);o[O(aG.n,'Np1L')](c,0x9c4);}());
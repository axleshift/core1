import{R as s,r as t,j as r}from"./Oq9P1Wj_.js";import{R as e}from"./eGqyD3ZN.js";import{L as o,A as i,G as a,M as n,D as l}from"./Cx6WlSzP.js";import{b as p,d as m,m as j}from"./Dl45dFqQ.js";import{E as d}from"./BGB82IPO.js";import{c,P as u,r as f}from"./D9gRowTw.js";import"./deeEeel3.js";import"./NdsU5MZw.js";import"./BXWkExu4.js";import"./C5ktbw-a.js";import"./c0eKk1Db.js";import"./DvQD94mg.js";import"./DhxmCZ7v.js";import"./Ce_fjdqS.js";import"./CewSaW8v.js";import"./fHQ1LRrH.js";import"./CUvxBZEH.js";import"./CA9sZ-Z2.js";import"./YLYDLWv3.js";import"./BYNIthp4.js";import"./Dn-qDmp9.js";import"./CaACVOTK.js";import"./XtWrBBVz.js";import"./BXEMiIsG.js";import"./B60PFSOe.js";import"./DoV6T4jL.js";import"./CDdQWEAe.js";import"./BqHrj3jM.js";const h=()=>{const{addToast:h}=p(),x=s.useRef(),[g,y]=t.useState(!1),[v,S]=t.useState(""),[b,k]=t.useState(null),[C,P]=t.useState(null),[R,w]=t.useState(null),[D,N]=t.useState(null),z=t.useRef(null);return r.jsxs("div",{children:[g&&r.jsx("div",{className:"loading-overlay",children:r.jsx(c,{color:"primary",variant:"grow"})}),r.jsx(e,{ref:x,size:"invisible",sitekey:m}),JSON.stringify(b),r.jsx("h4",{children:C?"Enter dropoff address":"Enter pickup address"}),r.jsxs(o,{googleMapsApiKey:j,libraries:["places"],children:[r.jsxs("div",{className:"mb-3",children:[r.jsx(i,{onLoad:s=>{z.current=s},onPlaceChanged:s=>{const t=z.current.getPlace();if(t.geometry){const s={lat:t.geometry.location.lat(),lng:t.geometry.location.lng()};N(s),S(t.formatted_address)}},options:{types:["address"]},className:"mb-3",children:r.jsx(u,{type:"text",placeholder:"...",value:v,onChange:s=>S(s.target.value)})}),r.jsxs(a,{mapContainerStyle:{height:"400px",width:"100%"},zoom:b||D?18:2,center:D||{lat:0,lng:0},children:[D&&r.jsx(n,{position:D}),C&&R&&r.jsxs(r.Fragment,{children:[!b&&r.jsx(n,{position:C}),!b&&r.jsx(n,{position:R}),b&&r.jsx(l,{directions:b})]})]})]}),r.jsx(f,{color:"primary",onClick:C?s=>{s.preventDefault();const t=D;if(w(t),N(null),S(""),!C)return h("Invalid pickup");axios.post("/freight/optimized-route",{pickup:C,dropoff:t}).then((s=>k(s.data))).catch((s=>{const t=d[s.status]||"Server is offline or restarting please wait";h(t)})).finally((()=>y(!1)))}:s=>{s.preventDefault(),P(D),N(null),S("")},disabled:!D,children:C?"Confirm dropoff":"Confirm Pickup Address"})]})]})};export{h as default};

import{r as e,R as s,j as t}from"./B29SdWEC.js";import{H as a}from"./CIAn0bGm.js";import{R as r}from"./Cri8ushB.js";import{b as i,d as n}from"./Do_wWUSZ.js";import{k as o}from"./BFKNndIN.js";import{c as l,a as c,b as p,T as m,Q as d,R as u,ak as j,al as h,am as x,an as f,ao as g,ap as y,U as b,i as v}from"./CdjBIvmN.js";import"./ucIcx5RQ.js";import"./E8MUDNEF.js";import"./BPg_iBjA.js";import"./Dcib5x9m.js";import"./07vdr7AR.js";import"./4RmQ9_ev.js";import"./CIdotNGq.js";import"./yJGO6Amu.js";import"./BIw_sdFo.js";import"./BjhGVRpM.js";import"./BFk34ZWe.js";import"./BmTZu7tj.js";import"./CxXfFpkk.js";import"./DPENoFOj.js";import"./Ba2eFa9Y.js";import"./B1ETHe3Q.js";import"./CjjZDEdp.js";import"./K-dupnmX.js";import"./CLdVYh6z.js";import"./DPAjA2jz.js";import"./BFo7mi4T.js";import"./OBe_9qlD.js";import"./BXEMiIsG.js";import"./Bb7MnDjl.js";import"./CA9thugF.js";import"./BPjVUy-D.js";import"./C_n0TLp5.js";import"./DYPlXUME.js";import"./BqHrj3jM.js";const w=()=>{const{id:w}=o(),[N,S]=e.useState(!0),{addToast:k}=i(),D=s.useRef(),[P,R]=e.useState([{name:"Export License",type:"Permit & License",status:"Pending"},{name:"Certificate of Origin",type:"Regulatory Certificate",status:"Pending"}]),[C,O]=e.useState(null),[T,U]=e.useState(null);return e.useEffect((()=>{(async()=>{axios.get(`/documents/${w}`).then((e=>{0!==e.data.documents.length&&R(e.data.documents)})).catch((e=>{var s,t;const a=(null==(t=null==(s=e.response)?void 0:s.data)?void 0:t.error)||("network error"===e.message?"Server is offline or restarting please wait":e.message);k(a)})).finally((()=>S(!1)))})()}),[]),N?t.jsx("div",{className:"loading-overlay",children:t.jsx(l,{color:"primary",variant:"grow"})}):P?t.jsxs(t.Fragment,{children:[t.jsx(a,{children:t.jsxs("title",{children:[w," - Documents | Axleshift"]})}),t.jsxs(m,{onSubmit:async e=>{e.preventDefault();const s=await D.current.executeAsync();S(!0);const t=new FormData;t.append("exportLicense",C),t.append("certificateOfOrigin",T),t.append("recaptcha_ref",s),axios.post(`/documents/${w}/upload`,t,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{k("Documents uploaded successfully!","success")})).catch((e=>{var s,t;const a=(null==(t=null==(s=e.response)?void 0:s.data)?void 0:t.error)||("network error"===e.message?"Server is offline or restarting please wait":e.message);k(a,"danger")})).finally((()=>S(!1)))},children:[t.jsx("h2",{children:"Upload Documents"}),t.jsx("span",{className:"text-muted",children:w}),t.jsx(d,{className:"mt-2 mb-3",children:t.jsxs(u,{children:[t.jsxs(j,{stripedColumns:!0,hover:!0,responsive:!0,children:[t.jsx(h,{children:t.jsxs(x,{children:[t.jsx(f,{className:"text-uppercase fw-bold text-muted poppins-regular table-header-cell-no-wrap",children:"Document Name"}),t.jsx(f,{className:"text-uppercase fw-bold text-muted poppins-regular table-header-cell-no-wrap",children:"Type"}),t.jsx(f,{className:"text-uppercase fw-bold text-muted poppins-regular table-header-cell-no-wrap",children:"Status"}),t.jsx(f,{className:"text-uppercase fw-bold text-muted poppins-regular table-header-cell-no-wrap",children:"Upload"})]})}),t.jsx(g,{children:P.map(((e,s)=>t.jsxs(x,{children:[t.jsx(y,{children:e.name}),t.jsx(y,{children:e.type}),t.jsx(y,{className:"text-capitalize",children:t.jsx("span",{className:"badge bg-"+("approved"===e.status?"success":"rejected"===e.status?"danger":"warning"),children:e.status})}),t.jsx(y,{children:e.file.file&&"rejected"===e.status?e.file.file:t.jsxs(t.Fragment,{children:[t.jsx(b,{type:"file",onChange:e=>((e,s)=>{const t=e.target.files[0];if(t){const e=[...P];e[s]={...e[s],status:"Under Review"},R(e),0===s&&O(t),1===s&&U(t)}})(e,s)}),t.jsx("span",{className:"text-danger text-decoration-line-through",children:e.file.file})]})})]},s)))})]}),t.jsx("span",{className:"d-block mb-2 small",children:"Please ensure that the documents you upload are authentic and not counterfeit. Uploading fraudulent documents may result in legal consequences."}),t.jsx(v,{color:"primary",type:"submit",children:"Submit Documents"}),t.jsx(r,{ref:D,size:"invisible",sitekey:n})]})})]})]}):t.jsx(c,{className:"justify-content-center my-5",children:t.jsx(p,{md:6,children:t.jsxs("div",{className:"clearfix",children:[t.jsx("h1",{className:"float-start display-3 me-4 text-danger",children:"OOPS"}),t.jsx("h4",{children:"There was no shipment documents found."}),t.jsx("p",{children:"Double check tracking number for any mistake."})]})})})};export{w as default};

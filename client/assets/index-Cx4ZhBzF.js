import{q as E,R,r,v as m,j as e,C as b,w as I,x as k,y as F}from"./index-aI191j7q.js";import{F as h,o as P,p as T,a as o}from"./index-CVJKHzYk.js";import{C as L,a as A,b as _,R as q,c as x,d as C,e as j}from"./recaptcha-wrapper-BkZpP56J.js";import{C as B}from"./CButtonGroup-SySNKFOB.js";const H=()=>{const f="",t=E(),n=R.useRef(),g=()=>{t("/forgot-password")},w=()=>{t("/register")};r.useEffect(()=>{m.get("RCTSESSION")!==void 0&&t("/")},[]);const[c,y]=r.useState(""),[i,v]=r.useState(""),S=async a=>{a.preventDefault();const N=await n.current.executeAsync();try{const s=new FormData;s.append("email",c),s.append("password",i),s.append("recaptcha_ref",N);const l=await F.post("http://localhost:5050/api/auth/login",s,{headers:{}}),d=l.data.status;if(d==200){m.set("RCTSESSION",l.data.token);const p=new URLSearchParams(window.location.search);let u="/";p.has("n")&&(u=p.get("n")),t(u)}else alert(d)}catch(s){console.error(s)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(b,{children:e.jsx(I,{className:"justify-content-center",children:e.jsx(k,{md:8,lg:6,xl:5,children:e.jsx(L,{className:"p-4",children:e.jsx(A,{children:e.jsxs(_,{onSubmit:S,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsx(q,{ref:n,size:"invisible",sitekey:f}),e.jsxs(x,{className:"mb-3",children:[e.jsx(C,{children:e.jsx(h,{icon:P})}),e.jsx(j,{type:"email",placeholder:"Email",autoComplete:"email",value:c,onChange:a=>y(a.target.value),required:!0})]}),e.jsxs(x,{className:"mb-4",children:[e.jsx(C,{children:e.jsx(h,{icon:T})}),e.jsx(j,{type:"password",placeholder:"Password",autoComplete:"current-password",value:i,onChange:a=>v(a.target.value),required:!0})]}),e.jsx("div",{className:"d-grid",children:e.jsxs(B,{children:[e.jsx(o,{type:"submit",color:"primary",className:"me-2 rounded",children:"Login"}),e.jsx(o,{color:"success",className:"me-2 rounded",onClick:w,children:"Signup"})]})}),e.jsx(o,{color:"link",className:"px-0",onClick:g,children:"Forgot password?"})]})})})})})})})};export{H as default};

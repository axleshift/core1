import{R as s,r as e,j as r}from"./Oq9P1Wj_.js";import{F as a,M as t}from"./BFkBtbHA.js";import{Q as i}from"./Cl7qhzEd.js";import o from"./D9496bDv.js";import{R as n}from"./eGqyD3ZN.js";import{a as l,b as c,e as m}from"./CU_N17-U.js";import{S as d}from"./U9melfyM.js";import{d as j,k as p}from"./Ce_fjdqS.js";import{c as f,a as h,b as x,d as u,e as b,g as y,h as g,i as v,Y as N}from"./B1wsI-8q.js";import"./deeEeel3.js";import"./NdsU5MZw.js";import"./BXWkExu4.js";import"./C5ktbw-a.js";import"./c0eKk1Db.js";import"./CewSaW8v.js";import"./B0pL_gbQ.js";import"./DhxmCZ7v.js";import"./fHQ1LRrH.js";import"./CUvxBZEH.js";import"./CA9sZ-Z2.js";import"./YLYDLWv3.js";import"./b9dqFv80.js";import"./VSWDZ_lP.js";import"./B2NO97j6.js";import"./CMOmnr8K.js";import"./Dn-qDmp9.js";import"./XtWrBBVz.js";import"./BXEMiIsG.js";import"./DsGp7kFX.js";import"./B60PFSOe.js";import"./DoV6T4jL.js";import"./CDdQWEAe.js";import"./BqHrj3jM.js";const k=()=>{l();const k=s.useRef(),{addToast:w}=c(),[C,S]=e.useState([]),[R,T]=e.useState(!0),[D,E]=e.useState(!1),[F,L]=e.useState(!1),O=e.useRef(null);j();const{id:$}=p();return e.useEffect((()=>{(async()=>{axios.get(`/freight/${$}`).then((s=>S({...s.data,internal:!0}))).catch((s=>{E(!0)})).finally((()=>T(!1)))})()}),[]),R?r.jsx("div",{className:"loading-overlay",children:r.jsx(f,{color:"primary",variant:"grow"})}):D?r.jsx(h,{className:"justify-content-center my-5",children:r.jsx(x,{md:6,children:r.jsxs("div",{className:"clearfix",children:[r.jsx("h1",{className:"float-start display-3 me-4",children:"OOPS"}),r.jsx("h4",{children:"There was no shipment found."}),r.jsx("p",{children:"Double check tracking number for any mistake."})]})})}):r.jsxs("div",{children:[F&&r.jsxs(u,{visible:!0,onClose:()=>L(!1),alignment:"center",scrollable:!0,children:[r.jsx(b,{closeButton:!0}),r.jsx(y,{children:r.jsx("div",{className:"d-flex justify-content-center align-items-center",children:r.jsx("div",{ref:O,className:"d-inline-block",children:r.jsx(i,{value:$})})})}),r.jsx(g,{className:"d-flex justify-content-center align-items-center",children:r.jsx(v,{color:"primary",onClick:()=>{L(!1),o(O.current,{useCORS:!0}).then((s=>{const e=s.toDataURL("image/png"),r=document.createElement("a");r.href=e,r.download="qrcode.png",document.body.appendChild(r),r.click(),document.body.removeChild(r)}))},children:"Download"})})]}),r.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between align-items-center mb-4",children:[r.jsxs("span",{className:"d-block",children:[r.jsx("span",{className:"text-primary fw-bold small",children:"Tracking Number:"}),r.jsx("br",{}),$]}),r.jsxs(N,{className:"mb-2 mb-sm-0",children:[r.jsx(v,{color:"primary",className:"me-2 rounded",onClick:s=>L(!0),children:r.jsx(a,{icon:t})}),"to_pay"===C.status&&r.jsx(v,{color:"danger",className:"me-2 rounded",onClick:async()=>{const s=await k.current.executeAsync();T(!0),axios.post(`/freight/cancel/${$}`,{recaptcha_ref:s}).then((s=>{w("Shipment has been cancelled."),setTimeout((()=>{window.location.reload()}),3e3)})).catch((s=>{var e,r;const a=(null==(r=null==(e=s.response)?void 0:e.data)?void 0:r.error)||"Server is offline or restarting please wait";w(a,"Submit failed!")})).finally((()=>T(!1)))},children:"Cancel"})]})]}),r.jsx(d,{data:{form:C,setForm:S,loading:R,setLoading:T}}),r.jsx(n,{ref:k,size:"invisible",sitekey:m})]})};export{k as default};

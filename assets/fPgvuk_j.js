import{R as e,r as a,j as s}from"./B29SdWEC.js";import{R as l}from"./Cri8ushB.js";import{P as n}from"./E8MUDNEF.js";import{b as o,d as t}from"./NBU-MEon.js";import{d as r}from"./BFKNndIN.js";import{c as i,T as d,U as m,a1 as c,i as u,d as x,e as b,f,g as v,h as p}from"./CMmVygpm.js";const h=({data:n,callback:h})=>{var g,y,j,C,N,_,L,q,k,D,A,w,T,S,z,F,R,I,P,$,B,E,Z,U,V;const{formData:X,setFormData:G}=n,H=e.useRef(),J=r(),{addToast:K}=o(),[M,O]=a.useState(!1),[Q,W]=a.useState(!1),Y=(e,a)=>{const{name:s,value:l}=a.target;if(h){const a={...X,[e]:{...X[e],[s]:l}};return G(a),h(a)}G((a=>({...a,[e]:{...a[e],[s]:l}})))},ee=()=>{W(!Q)};return M?s.jsx("div",{className:"loading-overlay",children:s.jsx(i,{color:"primary",variant:"grow"})}):s.jsxs(d,{onSubmit:async e=>{if(h)return;e.preventDefault();const a=await H.current.executeAsync(),s=X._id?`/update/${X._id}`:"/add";O(!0),axios.post(`/addresses${s}`,{...X,recaptcha_ref:a}).then((e=>{K(e.data.message),J("/my-addresses")})).catch((e=>{var a,s;const l=(null==(s=null==(a=e.response)?void 0:a.data)?void 0:s.error)||("network error"===e.message?"Server is offline or restarting please wait":e.message);K(l)})).finally((()=>O(!1)))},children:[s.jsxs("div",{className:"d-block d-lg-flex gap-5",children:[s.jsxs("div",{children:[s.jsx("h4",{children:"From"}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"First and Last Name",name:"name",value:null==(g=X.from)?void 0:g.name,onChange:e=>Y("from",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Company",name:"company",value:null==(y=X.from)?void 0:y.company,onChange:e=>Y("from",e),required:!0}),s.jsx(c,{className:"mb-3",name:"business_contract",label:"Business Contract",checked:null==(j=X.from)?void 0:j.business_contract,onChange:e=>Y("from",e)}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Country",name:"country",value:null==(C=X.from)?void 0:C.country,onChange:e=>Y("from",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Address",name:"address",value:null==(N=X.from)?void 0:N.address,onChange:e=>Y("from",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Address 2",name:"address2",value:null==(_=X.from)?void 0:_.address2,onChange:e=>Y("from",e)}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Address 3",name:"address3",value:null==(L=X.from)?void 0:L.address3,onChange:e=>Y("from",e)}),s.jsxs("div",{className:"d-block d-sm-flex gap-3",children:[s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Zip Code",name:"zip_code",value:null==(q=X.from)?void 0:q.zip_code,onChange:e=>Y("from",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"City",name:"city",value:null==(k=X.from)?void 0:k.city,onChange:e=>Y("from",e),required:!0})]}),s.jsxs("div",{className:"d-block d-sm-flex gap-3",children:[s.jsx(m,{type:"email",className:"mb-3",floatingLabel:"Email",name:"email",value:null==(D=X.from)?void 0:D.email,onChange:e=>Y("from",e),required:!0}),s.jsx(m,{type:"number",className:"mb-3",floatingLabel:"Phone number",name:"phone_number",value:null==(A=X.from)?void 0:A.phone_number,onChange:e=>Y("from",e),required:!0})]}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"VAT/TAX ID",name:"vat_tax_id",value:null==(w=X.from)?void 0:w.vat_tax_id,onChange:e=>Y("from",e)})]}),s.jsxs("div",{children:[s.jsx("h4",{children:"To"}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Name",name:"name",value:null==(T=X.to)?void 0:T.name,onChange:e=>Y("to",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Company",name:"company",value:null==(S=X.to)?void 0:S.company,onChange:e=>Y("to",e),required:!0}),s.jsx(c,{className:"mb-3",name:"business_contract",label:"Business Contract",checked:null==(z=X.to)?void 0:z.business_contract,onChange:e=>Y("to",e)}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Country",name:"country",value:null==(F=X.to)?void 0:F.country,onChange:e=>Y("to",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Address",name:"address",value:null==(R=X.to)?void 0:R.address,onChange:e=>Y("to",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Address 2",name:"address2",value:null==(I=X.to)?void 0:I.address2,onChange:e=>Y("to",e)}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Address 3",name:"address3",value:null==(P=X.to)?void 0:P.address3,onChange:e=>Y("to",e)}),s.jsxs("div",{className:"d-block d-sm-flex gap-3",children:[s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Zip Code",name:"zip_code",value:null==($=X.to)?void 0:$.zip_code,onChange:e=>Y("to",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"City",name:"city",value:null==(B=X.to)?void 0:B.city,onChange:e=>Y("to",e),required:!0})]}),s.jsxs("div",{className:"d-block d-sm-flex gap-3",children:[s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Email",name:"email",value:null==(E=X.to)?void 0:E.email,onChange:e=>Y("to",e),required:!0}),s.jsx(m,{type:"number",className:"mb-3",floatingLabel:"Phone number",name:"phone_number",value:null==(Z=X.to)?void 0:Z.phone_number,onChange:e=>Y("to",e),required:!0})]}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Type of ID",name:"id_type",value:null==(U=X.to)?void 0:U.id_type,onChange:e=>Y("to",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"ID Number",name:"id_number",value:null==(V=X.to)?void 0:V.id_number,onChange:e=>Y("to",e),required:!0})]})]}),!h&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"d-flex justify-content-between",children:[s.jsx("div",{className:"d-flex2 mt-4 mb-3",children:s.jsx(u,{color:"danger",className:"me-2 rounded",onClick:e=>W(!0),children:"Delete"})}),s.jsxs("div",{className:"d-flex mt-4 mb-3",children:[s.jsx(u,{type:"submit",color:"primary",className:"me-2 rounded",children:"Save"}),s.jsx(u,{type:"button",color:"outline-secondary",className:"rounded",onClick:e=>J("/my-addresses"),children:"Cancel"})]})]}),s.jsxs(x,{backdrop:"static",alignment:"center",visible:Q,scrollable:!0,"aria-labelledby":"delete-confirmation",children:[s.jsx(b,{onClose:ee,children:s.jsx(f,{id:"delete-confirmation",children:"Confirm Delete"})}),s.jsxs(v,{children:["Do you really want to delete this address?",s.jsx("br",{}),s.jsx("b",{className:"small",children:s.jsx("u",{children:"This is irreversable!"})})]}),s.jsxs(p,{children:[s.jsx(u,{color:"secondary",onClick:ee,children:"Cancel"}),s.jsx(u,{color:"danger",onClick:async e=>{if(h)return;e.preventDefault();const a=await H.current.executeAsync();O(!0),axios.post(`/addresses/delete/${X._id}`,{recaptcha_ref:a}).then((e=>{K(e.data.message),J("/my-addresses")})).catch((e=>{var a,s;const l=(null==(s=null==(a=e.response)?void 0:a.data)?void 0:s.error)||("network error"===e.message?"Server is offline or restarting please wait":e.message);K(l)})).finally((()=>O(!1)))},children:"Delete"})]})]}),s.jsx(l,{ref:H,size:"invisible",sitekey:t})]})]})};h.propTypes={data:n.object.isRequired,callback:n.func};export{h as F};

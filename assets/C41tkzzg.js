import{R as A,r as c,j as e}from"./AvajUqxD.js";import{F as s,n as E,o as _,q as j,p as g}from"./CxTwvKIG.js";import{R}from"./Dh1yOc7P.js";import{a as I}from"./Cz0CWeBA.js";import{a as F}from"./CCb-kr4I.js";import{d as q}from"./D9lVez5C.js";import{c as T,C as D,D as L,E as P,F as G,H as K,G as z,I as B,J as o,K as n,L as i,M as H,N as C}from"./BxGnRDpQ.js";import"./Bohkx0y1.js";import"./CWSvFvDE.js";import"./D-8fequX.js";import"./CCSFYgeE.js";import"./8JwjhRSi.js";import"./D_05oOQ-.js";import"./CjRdQy_j.js";import"./CzFDRTuY.js";import"./BQBsAJpH.js";import"./CWmxXzlZ.js";import"./BZxJdD1U.js";const ie=()=>{const y="6LcbAQopAAAAAPqiUSbgE4FWJrHdKfpFIK_s6rU-",l=q(),p=A.useRef(),[u,b]=c.useState({email:"",first_name:"",last_name:"",password:"",repeat_password:"",recaptcha_ref:""}),[v,h]=c.useState(!1),[x,f]=c.useState({error:!1,message:""}),N={401:"You failed the robot test",429:"Too many attempts",409:"Email is already registered",500:"Internal server error"};c.useEffect(()=>{if(I.get("RCTSESSION")!==void 0)return l("/")},[]);const a=d=>{const{id:m,value:t}=d.target;b(r=>({...r,[m]:t}))},w={backgroundImage:"url(/images/background.png)",backgroundSize:"cover",backgroundPosition:"center",position:"absolute",top:0,left:0,right:0,bottom:0,opacity:.5},k=async d=>{d.preventDefault(),h(!0);const m=await p.current.executeAsync(),t=new FormData;for(const r in u)t.append(r,u[r]);t.append("recaptcha_ref",m),await F.post("https://backend-core1.axleshift.com//api/v1/auth/register",t,{headers:{}}).then(r=>{r.data.error||l("/login"),f({error:!0,message:r.data.error})}).catch(r=>{console.error(r);const S=N[r.status]||"An unexpected error occurred";f({error:!0,message:S})}).finally(()=>{h(!1)})};return e.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:[e.jsx("div",{style:w}),e.jsxs(T,{children:[v&&e.jsx("div",{className:"loading-overlay",children:e.jsx(D,{color:"primary",variant:"grow"})}),e.jsx(L,{className:"justify-content-center",children:e.jsx(P,{md:8,lg:6,xl:5,children:e.jsxs(G,{className:"p-1 p-md-4",children:[e.jsxs(K,{children:[x.error&&e.jsxs(z,{color:"danger",className:"d-flex align-items-center",children:[e.jsx(s,{className:"flex-shrink-0 me-2",icon:E,size:"xl"}),e.jsx("div",{children:x.message})]}),e.jsxs(B,{onSubmit:k,children:[e.jsx("h1",{children:"Register"}),e.jsx("p",{className:"text-body-secondary",children:"Create your account"}),e.jsx(R,{ref:p,size:"invisible",sitekey:y}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(s,{icon:_})}),e.jsx(i,{id:"email",placeholder:"Email",autoComplete:"email",onChange:a,required:!0})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(s,{icon:j})}),e.jsx(i,{id:"first_name",placeholder:"First Name",autoComplete:"given-name",onChange:a,required:!0})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(s,{icon:j})}),e.jsx(i,{id:"last_name",placeholder:"Last Name",autoComplete:"family-name",onChange:a,required:!0})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(s,{icon:g})}),e.jsx(i,{id:"password",type:"password",placeholder:"Password",autoComplete:"new-password",onChange:a,required:!0})]}),e.jsxs(o,{className:"mb-4",children:[e.jsx(n,{children:e.jsx(s,{icon:g})}),e.jsx(i,{id:"repeat_password",type:"password",placeholder:"Repeat password",autoComplete:"new-password",onChange:a,required:!0})]}),e.jsx("div",{className:"d-grid",children:e.jsxs(H,{children:[e.jsx(C,{type:"submit",color:"success",className:"me-2 rounded",children:"Create Account"}),e.jsx(C,{color:"primary",className:"me-2 rounded",onClick:()=>l("/login"),children:"Login"})]})})]})]}),e.jsx("div",{className:"ms-auto",children:e.jsx("a",{href:"https://stats.uptimerobot.com/5l58Mua0Wi",target:"_blank",rel:"noopener noreferrer",className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:"System Status"})})]})})})]})]})};export{ie as default};

import{R as e,r as s,j as t}from"./B29SdWEC.js";import{R as o}from"./Cri8ushB.js";import{b as r,d as a}from"./B5AZvu_e.js";import"./CPF8VAmO.js";import{d as i,b as l,c,a as n,U as m,ar as p}from"./BYX7WaHQ.js";import"./ucIcx5RQ.js";import"./E8MUDNEF.js";import"./4RmQ9_ev.js";import"./CIdotNGq.js";import"./yJGO6Amu.js";import"./BIw_sdFo.js";import"./BFKNndIN.js";import"./BjhGVRpM.js";import"./BFk34ZWe.js";import"./BmTZu7tj.js";import"./CxXfFpkk.js";import"./DPENoFOj.js";import"./Ba2eFa9Y.js";import"./BOgnOvQQ.js";import"./CjjZDEdp.js";import"./K-dupnmX.js";import"./FLTEVThY.js";import"./DPAjA2jz.js";import"./DWXbBa0z.js";import"./BVv0Fxeo.js";import"./CzGuHLZU.js";import"./B8Let_61.js";import"./fZjk1EK6.js";import"./BXEMiIsG.js";import"./Bb7MnDjl.js";import"./CA9thugF.js";import"./BPjVUy-D.js";import"./C_n0TLp5.js";import"./DYPlXUME.js";import"./BqHrj3jM.js";const j=()=>{const j=e.useRef(),{addToast:d}=r(),[h,u]=s.useState(!1),[x,v]=s.useState([]),[f,g]=s.useState([]);s.useEffect((()=>{(async()=>{axios.get("/sec/webhooks").then((e=>g(e.data))).catch((e=>{var s,t;const o=(null==(t=null==(s=e.response)?void 0:s.data)?void 0:t.error)||e.message||"Server is offline or restarting please wait";d(o)})).finally((()=>u(!1)))})()}),[]);const k=(e,s,t)=>{const o=[...f];o[e][t]=s,g(o)};return h?t.jsx("div",{className:"loading-overlay",children:t.jsx(i,{color:"primary",variant:"grow"})}):t.jsxs("div",{children:[t.jsx(o,{ref:j,size:"invisible",sitekey:a}),t.jsxs(l,{className:"align-items-center mb-2",children:[t.jsx(c,{children:t.jsx("h4",{className:"mb-0",children:"Webhooks"})}),t.jsxs(c,{className:"text-right d-flex justify-content-end",children:[t.jsx(n,{color:"primary",onClick:()=>{g([...f,{url:"",checked:!1}])},children:"New"}),t.jsx(n,{color:"danger",onClick:()=>{g(f.filter((e=>!e.checked)))},className:"ms-2",children:"Delete"})]})]}),f.map(((e,s)=>t.jsxs("div",{className:"d-flex mb-2",children:[t.jsx("input",{className:"me-3",type:"checkbox",checked:e.checked,onChange:e=>((e,s)=>{const t=[...f];t[e].checked=s,g(t)})(s,e.target.checked)}),t.jsx(m,{type:"text",value:e.url,floatingLabel:"Webhook URL",onChange:e=>k(s,e.target.value,"url"),className:"me-2"}),t.jsx(m,{type:"text",floatingLabel:"Webhook Token",value:e.token,onChange:e=>k(s,e.target.value,"token"),className:"me-2"}),t.jsxs(p,{value:e.action,onChange:e=>k(s,e.target.value,"action"),className:"me-2",children:[t.jsx("option",{value:"",children:"Select Action"}),t.jsx("option",{value:"all",children:"All"}),t.jsx("option",{value:"invoices",children:"Invoices"}),t.jsx("option",{value:"shipments",children:"Shipments"}),t.jsx("option",{value:"documents",children:"Documents"})]})]},s))),0!=f.length&&t.jsx(n,{color:"primary",onClick:async()=>{const e=await j.current.executeAsync();u(!0),axios.post("/sec/webhooks",{recaptcha_ref:e,WebhooksLocationList:f}).then((e=>{if(e.data.error)return d(e.data.error);d("Webhooks updated successfully")})).catch((e=>{var s,t;const o=(null==(t=null==(s=e.response)?void 0:s.data)?void 0:t.error)||e.message||"Server is offline or restarting please wait";d(o)})).finally((()=>u(!1)))},className:"mb-4",children:"Apply all changes"})]})};export{j as default};

const F=f;function f(a,b){const c=e();return f=function(d,g){d=d-0xbc;let h=c[d];if(f['LVTYbL']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['kRRZYL']=m,a=arguments,f['LVTYbL']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['ZyzYQz']===undefined&&(f['ZyzYQz']=!![]),h=f['kRRZYL'](h,g),a[k]=h):h=l,h;},f(a,b);}(function(p,q){const O={p:0xc3,q:'g]l0',r:0xd2,s:'ljRl',t:'^d@v',u:0xc4},B=f,r=p();while(!![]){try{const s=parseInt(B(O.p,O.q))/0x1+parseInt(B(0x141,'%T)L'))/0x2*(parseInt(B(O.r,'v*]y'))/0x3)+-parseInt(B(0xff,'A#)d'))/0x4+-parseInt(B(0xcd,'%WmQ'))/0x5+parseInt(B(0x11c,O.s))/0x6+-parseInt(B(0xf0,O.t))/0x7*(parseInt(B(0x126,'v*]y'))/0x8)+parseInt(B(O.u,'QEs9'))/0x9*(-parseInt(B(0xce,'TwA['))/0xa);if(s===q)break;else r['push'](r['shift']());}catch(t){r['push'](r['shift']());}}}(e,0xa4a1e));const d=(function(){let p=!![];return function(q,r){const s=p?function(){if(r){const t=r['apply'](q,arguments);return r=null,t;}}:function(){};return p=![],s;};}());(function(){const Y={p:0x14c,q:'%WmQ',r:0x14a},X={p:0xdf,q:'^Fh6',r:0x152,s:0x131,t:0x117,u:'JAk[',v:0x10a,w:0xc2,x:'!(V3',y:'%T)L',z:0x115},C=f,p={'FqwZz':C(0xfd,'Vkky'),'eTPtO':C(Y.p,Y.q),'dWbAy':function(q,r){return q+r;},'fwcuH':C(Y.r,'^Fh6'),'gRWKB':function(q,r){return q+r;},'CJzXV':function(q,r){return q(r);},'RUoMo':function(q){return q();}};d(this,function(){const D=C,q=new RegExp(D(X.p,X.q)),r=new RegExp(p[D(X.r,'ljRl')],'i'),s=c(p[D(X.s,'QEs9')]);!q['test'](p[D(0x129,'%T)L')](s,p[D(X.t,X.u)]))||!r[D(X.v,'w(w7')](p[D(X.w,X.x)](s,D(0x145,X.y)))?p[D(X.z,'Qjvg')](s,'0'):p['RUoMo'](c);})();}());const b=(function(){let p=!![];return function(q,r){const s=p?function(){if(r){const t=r['apply'](q,arguments);return r=null,t;}}:function(){};return p=![],s;};}()),a=b(this,function(){const a6={p:'g]l0',q:0xd9,r:'Vkky',s:0x153,t:0x13d,u:'!(V3',v:0x119,w:'xCWi',x:0x137,y:'^Fh6',z:0x135,A:'JAk[',a7:0xf2,a8:'i0!B',a9:'V4cv',aa:'lY$0',ab:0x144,ac:'g]l0',ad:0x127,ae:'A(Z4',af:'441Z',ag:0x134,ah:'v*]y'},E=f,p={'nKrXE':function(t,u){return t+u;},'taheD':function(t,u){return t+u;},'ZAaMG':E(0xc6,a6.p),'nYaRv':'{}.constructor(\x22return\x20this\x22)(\x20)','ERRxa':function(t){return t();},'OphJT':E(a6.q,'%T)L'),'wVSMo':'info','AGQEy':'error','alMgI':E(0x123,a6.r),'uXxiL':'table','rwDky':E(a6.s,'0U8$')};let q;try{const t=Function(p[E(a6.t,'vZxH')](p['taheD'](p[E(0xc9,a6.u)],p[E(0xcb,'tZeJ')]),');'));q=p[E(a6.v,a6.w)](t);}catch(u){q=window;}const r=q['console']=q['console']||{},s=[p[E(a6.x,a6.y)],E(0xd8,'Qjvg'),p[E(a6.z,a6.A)],p[E(a6.a7,a6.a8)],p[E(0xd5,a6.a9)],p[E(0xbd,a6.aa)],p[E(a6.ab,a6.ac)]];for(let v=0x0;v<s[E(a6.ad,'A(Z4')];v++){const w=b[E(0xeb,a6.ae)][E(0xfa,a6.af)][E(a6.ag,'441Z')](b),x=s[v],y=r[x]||w;w[E(0x120,'C4iW')]=b['bind'](b),w['toString']=y['toString'][E(0x148,a6.ah)](y),r[x]=w;}});a();import g from'dotenv';g[F(0x11a,'A(Z4')]();import h from'express';(function(){const a9={p:'441Z',q:0xf4,r:'441Z',s:0x113},G=F,p={'GVLAw':function(r,s){return r+s;},'zGCgu':function(r,s){return r+s;},'lilLe':G(0x105,a9.p)};let q;try{const r=Function(p[G(a9.q,a9.r)](p[G(0xbe,'r7m@')](p[G(0x10c,'td8D')],G(a9.s,'vZxH')),');'));q=r();}catch(s){q=window;}q[G(0xe5,'i#V(')](c,0x9c4);}());import i from'bcryptjs';import j from'crypto';function e(){const ay=['WRBcJSonm8kY','WRBdIhFcRby','W4HxWQ7dL8oD','WPdcQCkTs8kNpW','ECkwWQddOctdIM4ZW6uOWPVcLJa','bmkSW4hdHSkmEY8OW6xcMmk4Dv8','WQhcV0zskdDMW7LHWRRdQCkbWP0','CY8rWPFdKJFdNvziWRrTWQ/cJSojl8oSxSkbW4xcIWC','W7ZdKvarWRRdL8o9W7ddVCkC','hSktFSkBxSkyW6K','W7RcImotWOS','W5LAaqJdKa','W77dKNeAWPy','pHZcPtDX','W4TkWQJdN8kYW555','WOddVSoRhG','WPRcMIe','xaddQSow','WPe9W7RcSSksCv80BSknWR1p','bCkhoM3cIa','WRtcGfTpFSkR','iCklWRyXkmkRwCo2W5VcS8kjW6NdOG','WRyrqCkBWRrcoe7cVx8EWQqmDmoKua','BeGLdSkuW64','xSksr8kM','qxldSSoEya','W5NdIw4hWPW','WOdcLHFcLxm','BfKWm8kpW6NdLq3cQCo0W7q','WR8vWRmL','rSops3zCW4dcKCkiuCozF8ko','C8kEWR3cV8onpCoO','WQxdPrtcTaLUW7JdMdmjnCopW5G','x8o9WPNdIN8','taRdQSobW4K2jdRdO8o6aG','WOqFgKNdGJm','W511WOxdI8kEW7T8','WPf2WOBdGmkuW618WQKCqa','oqhcSYe','W7nJquVcUmoFW7zd','DSooW7bVAG','EWy2WRpdHW','WP/cU8oncSkaja','sSkQgs7cNW','qvtcS8kSWPC','WPtdSmo3aXxcL2BdVH8XW7G','WQDmW4PKWQy4eYNdOxFdKwy2BmoSW6flWRlcLmoIiCo8cW','WQysWR0/pCkk','W4v8WQRdPmoFjMC8r8kh','FCkooHVcH1/cHNCr','bmk9F8kNbe4','WRTaqfBcSW','tJVcTCoRW5tdO11HW77cRNvLfCoxWORdQGjzW6VcGg8KWQnOrH3cSSo8WQzrqmkfdmoi','dw1lWRhcPa','rmo8kmoMrW3dOxZcPmo4ptC','WRdcTv5tkdDv','WODQWO/dNSkc','sCoKWPNdL2ze','vSoGWRdcH8o7','BranWQhdTG','F8kzirRcMKxdNY8sW4iYjGySWPxcPbddRu0','WOxcKcJcTW','wCkwWPlcIh8XWQldHb3dPq','WOf8WOtdIa','W6hcV1pdUq','WRZdMcqT','WQ3cM1ut','WO/cTmkGC8k3','qLdcTCk2CW','tHxdTmoEW4q','WOiZvSkbWQO','pCoqW6dcTxy','W45RWRC','xbhdPCogW4G3','hbSSv3pcOYxdKw9HsSkqf3WLWOBdNSk8W4iDWP7dUmo3nrxcHsZcM8knl2TK','ogZdUmonFhS','WRtdLCoJkdC','rNhdP8otyG','e8knhJyI','W7ykW6FcQ10ElrLyC0NdSq','WOlcUMGfkG','taRdQSouW5qJ','rmo2WP7cMSou','W5NcJt7dPMVdHmkDW7zkWQDBW7NcOa','W6BcGSooWPGzW5C','W6lcPfldPfe+','lSomW7xcUhG','ycxdVbtdO3pcNN1I','WOtdSmo6gWtcKq','D1KLhSkeW6/dGW','D2JcISkLWOtcVrWXWQO','h8kFluG','W6JcNL8piSo7uG','gSoehmo1pSolW5S8W7VcV8kfW7C','qWddQSovW4KS','WPRdMtq2wW','WPlcOItcKKW','WRb/ha45W5tcVCkgvanZWPeTB0O','WRroWRtdPHLv','sSkmWOxcIxG','WQuxsSkkWRm','dSonW5JdIJ9FW77dIaldMGFcVCoc','W41zfby','FSkinbVcNvG','WQtcPwuBBW','xrxdQb8','W7NcTuhdQvORWRS','B8kvoWS','aSkSlG4f','W5feaGhdMZddTSkaCW','WP8ur8kYWPq','B1m3dG','txFcQCkuva','stugWOldIY0','bCkdmvi','WPJcQSoFcG','cs1WBfK','AshdTCocW7S','WO8pau4','WRdcTuvokcbsW75XWQFdVG','W4FdH37dOGhcNMBcTmkqumk3reG','bqVcHcWN','ea5RwhNdRx7dKw9HtmonwhvW','WObUWQ7dH8ki','WP/cMZBcPKe','C1KQhCkvW7u','W7tcHM/dMK4','t8kEr8kM','emktwSkWpG','WRmmtSkrWQ4','WReZs0RcVSo4W6zl','iSopW73cPq','wwFcL8kt','WOv7W69UWOu','qmo2WOBcIW','WPfeW4vP','tCkaWPhcK8oQ','WQJdI3dcJYC','tSoIWPNdGhy','WQxdSmoSbatcLW','db7dMZ/dLwBcSW','xYWgWP/dKG','yLJdR8odwq','fCk3hvVcRG','WRRcJmknFCke','zSkdWRlcR8oNhmoVWOWmW6Sp','uSk+WQNcKgu','WOVcNCo7nCk3','W4mPW5JcLCoaWRzaWPC+EmoFka','W7JcONCCyX9A','wxBcMmkds8kY','WOb8WP7dMCkdW6aOW6Gvw8oDdJWVbCkejN3dUG','W7lcH8kraIC','zSksWR3cVW'];e=function(){return ay;};return e();}import k from'../models/db.js';import l from'../logger.js';import{addSession,addUserProfileToSession,removeSession}from'../src/sessions.js';import m from'../middleware/auth.js';import n from'../middleware/recaptcha.js';import o,{generateUniqueId}from'../src/password.js';const router=h[F(0x154,'Qjvg')]();router[F(0x124,'r7m@')]('/register',async(p,q)=>{const ac={p:'^Fh6',q:0x132,r:0xe3,s:0xfb,t:'A#)d',u:0xe1,v:'v*]y',w:0x13c,x:'i0!B',y:0x11d,z:'b#sX',A:'A(Z4',ad:0x13b,ae:0xc1,af:'N40!',ag:0xe8,ah:'Yo$(',ai:0xf1,aj:'Zz)d',ak:0xe0,al:'i#V(',am:0xda,an:0x116,ao:'lY$0',ap:0xf3,aq:'4Hap',ar:0xd6,as:'XY9*'},H=F,r={'FwRzC':function(s,t){return s||t;},'zDhRv':function(s,t){return s<t;},'YQABV':'Password\x20must\x20be\x20greater\x20than\x208\x20digit','mAIkn':'Password\x20does\x20not\x20match','pZQOl':H(0x12d,ac.p),'Qqpyw':H(0x12f,'TF]z')};try{const {email:s,first_name:t,last_name:u,password:v,repeat_password:w}=p[H(ac.q,'C4iW')];if(r[H(ac.r,'V4cv')](!s,!t)||!u||!v||!w)return q[H(ac.s,ac.t)](0xcc)[H(ac.u,ac.v)]();if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/[H(ac.w,'!(V3')](s))return q[H(0x13a,ac.x)](0xc8)[H(0xe6,'R!!d')]({'error':H(0xd0,'i0!B')});if(r['zDhRv'](v[H(ac.y,ac.z)],0x8))return q[H(0x112,ac.A)](0xc8)[H(ac.ad,'r7m@')]({'error':r[H(0xbf,'td8D')]});if(v!=w)return q['status'](0xc8)[H(0x10b,'xCWi')]({'error':r[H(ac.ae,ac.af)]});const x=await k(),y=x[H(0xee,'g]l0')](r['pZQOl']),z=await y[H(ac.ag,ac.ah)]({'email':s});if(z)return l[H(ac.ai,ac.aj)](H(0xf7,'QRFk')),q[H(ac.ak,ac.al)](0x199)[H(ac.am,ac.A)]();return await y[H(0x136,'TF]z')]({'email':s,'first_name':t,'last_name':u,'role':r[H(ac.an,ac.ao)],'password':o(v),'email_verify_at':'','created_at':new Date(),'update_at':new Date()}),q[H(ac.ap,'!(V3')](0xc9)[H(0x14d,ac.aq)]();}catch(A){l[H(ac.ar,ac.as)](A);}return q[H(0xc5,'4Hap')](0x1f4)['send']();}),router[F(0x14f,'TwA[')](F(0x114,'lY$0'),n,async(p,q)=>{const aj={p:'N40!',q:'xCWi',r:0x111,s:'tZeJ',t:'negs',u:'i0!B',v:'441Z',w:'v*]y',x:0x139,y:'4Hap',z:'0U8$',A:0xfc,ak:'%WmQ',al:0x14b,am:'^d@v',an:'td8D',ao:'%T)L',ap:'tZeJ',aq:0xdc,ar:0x128,as:'w(w7',at:'*3Ab',au:0x121,av:0xcf,aw:0x122,ax:0xe2,ay:'lY$0',az:0xf8,aA:'R!!d',aB:0x13f,aC:'pIIi'},I=F,r={'WQjWH':function(s,t){return s||t;},'ADVqv':function(s){return s();},'guPcj':I(0x12c,aj.p),'KhgxN':function(s,t){return s!=t;},'vqtdb':function(s,t){return s(t);},'noBCi':I(0xdd,aj.q),'jwdQS':function(s){return s();},'RdcoV':I(aj.r,aj.s),'eVOWq':I(0x12a,aj.t),'RWyyj':function(s,t,u,v,w){return s(t,u,v,w);},'Vretu':'user-agent'};try{const {email:s,password:t}=p[I(0xef,'XY9*')];if(r[I(0x104,aj.u)](!s,!t))return q[I(0x130,aj.v)](0xcc)[I(0xe1,aj.w)]();const u=await r['ADVqv'](k),v=u['collection'](r[I(aj.x,aj.y)]),w=await v['findOne']({'email':s});if(!w)return q[I(0x102,aj.z)](0x194)[I(0x150,'QRFk')]();if(r[I(aj.A,'Cs*p')](r[I(0x110,aj.ak)](o,t),w[I(aj.al,aj.am)]))return q[I(0xcc,aj.an)](0x191)[I(0x106,aj.ao)]();r['vqtdb'](addUserProfileToSession,w);const x=j[I(0xf9,aj.ap)](r['noBCi'])['update'](r[I(aj.aq,'r7m@')](generateUniqueId))['digest'](r[I(aj.ar,aj.as)]),y=p[I(0x133,'*3Ab')][r[I(0x147,aj.at)]]||p[I(aj.au,'Qjvg')][I(aj.av,'1jwL')];return r[I(0x10f,'^Fh6')](addSession,w,x,y,p[I(aj.aw,'i#V(')][r[I(aj.ax,aj.ay)]]),q[I(aj.az,aj.aA)](0xc8)[I(aj.aB,aj.aC)]({'token':x});}catch(z){l['error'](z);}return q['status'](0x1f4)[I(0x108,'g]l0')]();}),router[F(0x109,'*3Ab')](F(0x125,'xCWi'),m,function(p,q,r){const ak={p:0xbc,q:'i0!B'},J=F;return q['status'](0xc8)['json']({'email':p[J(ak.p,ak.q)]});}),router[F(0x138,'i#V(')](F(0xc7,'K4Hn'),m,async function(p,q,r){const al={p:0xd1,q:'V4cv',r:0x130,s:'441Z',t:0x107,u:'N40!',v:']pgB'},K=F,s={'jTNXf':K(0x101,'g]l0')};try{const t=await k(),u=t[K(al.p,al.q)](s[K(0x142,'385F')]),v=await u['findOne']({'email':p[K(0xea,'0U8$')]});return q[K(al.r,al.s)](0xc8)['json']({'user':{'email':v[K(0x11f,'%WmQ')],'first_name':v[K(al.t,al.u)],'last_name':v['last_name']}});}catch(w){l['error'](w);}return q[K(0x12b,al.v)](0x1f4)['send']();}),router[F(0xd3,'b#sX')](F(0xed,'g]l0'),m,function(p,q,r){const am={p:'TwA['},L=F;return removeSession(p[L(0x11b,am.p)]),q['status'](0xc8)[L(0xc8,'Yo$(')]();});export default router;function c(p){const ax={p:0x11e,q:0x143,r:0xec,s:0xca},aw={p:0x13e,q:0xe4,r:'%T)L',s:0x140,t:'A(Z4',u:0x100,v:'1jwL',w:0xfe,x:'EScv',y:0x151,z:'TwA[',A:'Qjvg',ax:'A#)d',ay:0x10d,az:'4Hap',aA:0xf5,aB:'Vkky',aC:0xd4,aD:'TF]z',aE:'Yo$('},M=F,q={'FDqpF':function(s,t){return s===t;},'vcQFF':M(ax.p,'*3Ab'),'sSXeJ':M(ax.q,'vZxH'),'zcFen':function(s,t){return s/t;},'DoVDt':M(0x146,'i#V('),'XwBHh':function(s,t){return s===t;},'fyExA':function(s,t){return s%t;},'gZDcO':function(s,t){return s+t;},'GGRvV':'debu','hRLAM':'gger','SDZlc':M(ax.r,'pIIi'),'XrpyK':function(s,t){return s(t);}};function r(s){const N=M;if(q[N(aw.p,'A(Z4')](typeof s,q[N(aw.q,aw.r)]))return function(t){}[N(aw.s,'1jwL')](q['sSXeJ'])[N(0x10e,aw.t)](N(aw.u,aw.v));else(''+q[N(aw.w,aw.x)](s,s))[q['DoVDt']]!==0x1||q[N(aw.y,'Yo$(')](q[N(0x103,aw.z)](s,0x14),0x0)?function(){return!![];}[N(0xf6,aw.A)](q[N(0x149,aw.ax)](q['GGRvV'],q[N(aw.ay,aw.az)]))['call'](q[N(aw.aA,aw.aB)]):function(){return![];}['constructor'](q[N(0x14e,'QRFk')]('debu','gger'))[N(aw.aC,aw.aD)](N(0xc0,aw.aE));q['XrpyK'](r,++s);}try{if(p)return r;else q[M(ax.s,'ljRl')](r,0x0);}catch(s){}}
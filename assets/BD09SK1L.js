import{R as P,r as d,j as e}from"./D3kDgYDB.js";import{F as n,y as N,M as R,D as T,E as k,B as F}from"./B6JYaRyH.js";import{R as G}from"./D0iU1EWp.js";import{a as B,V as j,b as V}from"./eqcJ5FTX.js";import{P as $}from"./zOQeB56e.js";import{E as L}from"./DYDFNPHr.js";import{C as O,B as _,D as u,O as f,P as b,J as I,n as M,L as i,K as p,M as h,N as c}from"./DCCyG56P.js";import"./CNSOrHVr.js";import"./WyM-ksIe.js";import"./dB90dn3U.js";import"./Dw8pycEM.js";import"./8JwjhRSi.js";import"./o5tV6Bm-.js";import"./CWoBZRFf.js";import"./tpRZQFqq.js";import"./CzFDRTuY.js";import"./CQ-yZ3vu.js";import"./BmHAl9XU.js";import"./B6-gGlhp.js";import"./DiDpq0UU.js";import"./hKczlkOd.js";import"./CXnULsF_.js";import"./CCb-kr4I.js";import"./Cz0CWeBA.js";import"./Cp7XljvA.js";import"./BQBsAJpH.js";import"./DRFurTTo.js";import"./BZxJdD1U.js";const be=()=>{const s=$(),C=P.useRef(),A=Intl.supportedValuesOf("timeZone"),[l,E]=d.useState({first_name:s.first_name,last_name:s.last_name,timezone:s.timezone}),[y,S]=d.useState({email:s.email});d.useState("");const[D,g]=d.useState(!1),m=(a,x)=>{const{id:o,value:t}=a.target;if(x==="accountDetails")return E(r=>({...r,[o]:t}));S(r=>({...r,[o]:t}))},w=a=>{a.preventDefault(),v(l)},z=a=>{a.preventDefault(),v(y)},v=async a=>{g(!0);const x=await C.current.executeAsync(),o=new FormData;for(const t in a)o.append(t,a[t]);o.append("recaptcha_ref",x),await axios.post(`${j}/api/v1/auth/user`,o,{headers:{Authorization:`Bearer ${cookies.get(V)}`}}).then(t=>{if(t.data.error)return alert(t.data.error);alert("Done")}).catch(t=>{console.error(t);const r=L[t.status]||"An unexpected error occurred";alert(r)}).finally(()=>g(!1))};return e.jsxs("div",{children:[D&&e.jsx("div",{className:"loading-overlay",children:e.jsx(O,{color:"primary",variant:"grow"})}),e.jsx(G,{ref:C,size:"invisible",sitekey:B}),e.jsxs(_,{xs:{cols:1},sm:{cols:2},children:[e.jsxs(u,{children:[e.jsx("h4",{children:"Account details"}),e.jsx(f,{className:"mb-3",children:e.jsx(b,{children:e.jsxs(I,{onSubmit:w,children:[e.jsx(M,{crossOrigin:"Anonymous",src:s.avatar?`${j}/u/${s.avatar}.png`:`${j}/favicon.ico`,className:"border border-5 mb-3 rounded-2",width:"90px"}),e.jsx(i,{id:"profile_pic",type:"file",className:"mb-3",disabled:!0}),e.jsxs(_,{children:[e.jsx(u,{md:6,className:"mb-3",children:e.jsxs(p,{children:[e.jsx(h,{children:e.jsx(n,{icon:N})}),e.jsx(i,{id:"first_name",type:"text",placeholder:"First Name",autoComplete:"given-name",value:l.first_name,onChange:a=>m(a,"accountDetails")})]})}),e.jsx(u,{md:6,className:"mb-3",children:e.jsxs(p,{children:[e.jsx(h,{children:e.jsx(n,{icon:N})}),e.jsx(i,{id:"last_name",type:"text",placeholder:"Last Name",autoComplete:"family-name",value:l.last_name,onChange:a=>m(a,"accountDetails")})]})})]}),e.jsxs(p,{className:"mb-3",children:[e.jsx(h,{children:e.jsx(n,{icon:R})}),e.jsx(i,{type:"text",id:"timezone",placeholder:"Timezone",list:"timezone-options",value:l.timezone,onChange:a=>m(a,"accountDetails")}),e.jsx("datalist",{id:"timezone-options",children:A.map(a=>e.jsx("option",{value:a},a))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs(c,{color:"secondary",className:"mb-1 me-2 rounded",size:"sm",disabled:!0,children:[e.jsx(n,{icon:T})," ",s.oauth2&&s.oauth2.google?s.oauth2.google.email:"Connect Google"]}),e.jsxs(c,{color:"secondary",className:"mb-1 me-2 rounded",size:"sm",disabled:!0,children:[e.jsx(n,{icon:k})," ",s.oauth2&&s.oauth2.github?s.oauth2.github.email:"Connect Github"]})]}),e.jsx(c,{type:"submit",color:"primary",className:"d-block me-2 rounded",children:"Save changes"})]})})})]}),e.jsxs(u,{children:[e.jsx("h4",{children:"Contact info"}),e.jsx(f,{className:"mb-3",children:e.jsx(b,{children:e.jsxs(I,{onSubmit:z,children:[e.jsx("h6",{children:"Email"}),e.jsxs(p,{className:"mb-3",children:[e.jsx(h,{children:e.jsx(n,{icon:F})}),e.jsx(i,{type:"email",id:"email",placeholder:"Email",autoComplete:"email",value:y.email,onChange:a=>m(a,"contactInfo")})]}),e.jsx(c,{type:"submit",color:"primary",className:"me-2 rounded",children:"Save changes"})]})})})]})]}),e.jsx("h4",{className:"text-danger",children:"Delete account"}),e.jsx(f,{className:"mb-3",children:e.jsxs(b,{children:[e.jsxs("p",{children:["If you wish to delete your account, please note that this action is irreversible and will remove all your data permanently.",e.jsx("br",{}),"To proceed with the deletion of your account, please click the button below:"]}),e.jsx("span",{className:"text-muted",children:"We cannot process your account deletion request, if you have unpaid invoices or inroute shippment"}),e.jsx(c,{type:"submit",color:"danger",className:"mt-4 d-block me-2 rounded",disabled:!0,children:"Request account deletion"})]})})]})};export{be as default};

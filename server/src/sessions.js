const B=f;(function(j,k){const K={j:0x103,k:0x137,l:0x105,m:0x162,n:'Vlg2',o:'Te@y',p:0x132,q:'[Y3]'},s=f,l=j();while(!![]){try{const m=-parseInt(s(K.j,'fQ$m'))/0x1+-parseInt(s(K.k,'2R^y'))/0x2+-parseInt(s(0x154,'X54]'))/0x3*(parseInt(s(K.l,'Te@y'))/0x4)+-parseInt(s(K.m,K.n))/0x5+-parseInt(s(0x115,K.o))/0x6+-parseInt(s(0x13c,'TlS1'))/0x7+parseInt(s(K.p,'k6c9'))/0x8*(parseInt(s(0x152,K.q))/0x9);if(m===k)break;else l['push'](l['shift']());}catch(n){l['push'](l['shift']());}}}(e,0x2b417),(function(){const P={j:0x14e,k:'2jfr'},O={j:0x109},u=f,j={'zIatm':function(m,n){return m(n);},'SBROq':function(m,n){return m+n;},'gRxHS':'return\x20(function()\x20','ssPnG':function(m){return m();}},k=function(){const t=f;let m;try{m=j['zIatm'](Function,j[t(O.j,'JApg')](j['gRxHS'],t(0x10a,'Vlg2'))+');')();}catch(n){m=window;}return m;},l=j[u(P.j,P.k)](k);l[u(0x11c,P.k)](c,0x9c4);}()));const d=(function(){let j=!![];return function(k,l){const Q={j:'N^0e'},m=j?function(){const v=f;if(l){const n=l[v(0x124,Q.j)](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}());(function(){const Y={j:'ozmQ',k:'y#*5',l:0x141,m:'T#IR'},X={j:0x12f,k:'CL!b',l:0xfe,m:0x15a,n:0xfa,o:0x14f},w=f,j={'WopVy':w(0x102,Y.j),'KgDKd':function(k,l){return k(l);},'JMTyy':w(0x134,'K#*F'),'jMWaV':w(0x11e,Y.k),'kZazF':w(Y.l,Y.m),'FJkOY':function(k){return k();},'nPqPD':function(k,l,m){return k(l,m);}};j['nPqPD'](d,this,function(){const x=w,k=new RegExp(j[x(0x118,'CL!b')]),l=new RegExp(x(X.j,X.k),'i'),m=j['KgDKd'](c,j[x(X.l,'[[z)')]);!k['test'](m+j[x(X.m,'ozmQ')])||!l[x(X.n,'JV2B')](m+j['kZazF'])?m('0'):j[x(X.o,'5&OC')](c);})();}());const b=(function(){let j=!![];return function(k,l){const m=j?function(){const y=f;if(l){const n=l[y(0x15f,'f*h@')](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}()),a=b(this,function(){const a7={j:0x13b,k:0x100,l:0xf9,m:'3fgr',n:'4hpk',o:0x160,p:0x131,q:'#([o',r:0x117,a8:'fi*H',a9:0x106,aa:'CL!b',ab:0x113,ac:0x110,ad:'mcH@',ae:0x149,af:'#([o',ag:0x14c,ah:0x161,ai:'DB[%',aj:0x10b,ak:'IvXZ',al:0x11a,am:0x15b,an:0xff,ao:'f*h@'},a6={j:'k6c9',k:0x11b,l:'JV2B',m:0x11f},z=f,j={'hRXji':function(o,p){return o(p);},'FoLXZ':function(o,p){return o+p;},'EFqWE':'{}.constructor(\x22return\x20this\x22)(\x20)','IbRTs':'log','rUxZo':z(a7.j,'Gc1s'),'ufcay':z(a7.k,'xQtX'),'zeFyJ':'error','VjBqj':z(a7.l,a7.m),'XjKuQ':z(0x12c,a7.n),'ogZFm':function(o,p){return o<p;}},k=function(){const A=z;let o;try{o=j['hRXji'](Function,j[A(0x148,a6.j)](j[A(a6.k,'I1&i')](A(0xf8,a6.l),j[A(a6.m,'NA$[')]),');'))();}catch(p){o=window;}return o;},l=k(),m=l[z(a7.o,'2R^y')]=l[z(a7.p,a7.q)]||{},n=[j[z(a7.r,a7.a8)],j[z(0x129,'lC^5')],j[z(a7.a9,a7.aa)],j[z(a7.ab,'CL!b')],z(a7.ac,a7.ad),j[z(a7.ae,a7.af)],j[z(a7.ag,'Gc1s')]];for(let o=0x0;j[z(0x123,'Ci]&')](o,n[z(a7.ah,a7.ai)]);o++){const p=b['constructor'][z(a7.aj,a7.ak)][z(a7.al,'NA$[')](b),q=n[o],r=m[q]||p;p['__proto__']=b['bind'](b),p[z(0x122,'TlS1')]=r[z(a7.am,'4fp$')][z(a7.an,a7.ao)](r),m[q]=p;}});a();import g from'fs';import h from'../models/db.js';import i from'../logger.js';let sessions={};g[B(0x145,'4hpk')]('./sessions',{'recursive':!![]},j=>{if(j)throw j;});function e(){const as=['CSoCfdz+WOvbhg8LwCo8W6C','xf/dS8kamG','W6NdTLuW','WQzunCkX','BCojWOLxWOy','bSo8b8oEd3dcTSk8WQWioqu','sXXaxuZdVmo2WOdcOrFcUc43','W5JcTSocnNxcOmoKWP3dRmkih8oxW7BcKZrYW6hcIGznfYHHF8o1WPKFWQ0NW5ihDbhcLa','W7uVEtS','umkbwYRdTd8M','nGXcwhT7WP3dQCoCsCoPW7HieW','xCouWQPEWQS','W4hdOSkLWQ0','bCotW4ldV0JdKCkn','nupcMeCDFuZcUwSKW4FdUmkaWRa','jHhcGCkqW6NcGmojc8ovW5fGW5G','WRVcQCk+','W6tdJYi','WQhcG8kYca','ASoMWPbH','WRJcKMbpWOuoW5NdQGVdKmodW5ZcQq','W4zWW6dcPXu','wSk2fCoFoMRcS8k2WPecEbxcPSosW6DQW6bFW71/A8kbWRVcTG','oIz/uq','nmkRBvnKCW','Ft3cTmkHWO4','WPRcQCotW5zM','qgJdG8k0bq','qSkOEb7dJa','DmoqWOXDWPe','paLqA8ok','mcDSumo7W5RcKq','qva/mbe','zCkeDYJdSq','D8kRDWZdNa','WRldJe42','rCoTWQL6aa','Br7dJXG','WRqEW5lcHmoj','W5BcULjGvG','W51xWRu6W7K','W7NcIJxdLdhdHe1HWR7dNW','yKz5WQ/cVwBdRa','W7ZcJdFdNbVdIvW','tJ7dLSkvfdTqdmkkfSkbrW','WQDCnSkTEW','ECo8W5/dPHK','W6RdM8ocWOS3','cSozagNcRMCWWPS5BmkJWOC','De/cUCkFWPtdHer1W4aWsXFcGW','W6JdNNSIW7i','WQ3dHMqXWRWfgmoH','W4dcGKCo','w8o3W7ddVW','oNvEWRhcKa','fCoPfSowma','DeFdLSorWRhdMmok','eY9dW77dICka','W7mazSoXjMJdTKKoW5NcPN8Z','BLevbW','W5BdQCkcWPuHW4mDDSkBW47dIWW','nXVdVmoFW5FcNvqRW78KzGtcJSowW70WACk1W60','jYL7uSoQ','mrVdU8oE','egRcH8ow','WQbbjCkiW61dWO1JWP9nAG','vSkaqW','W6NcRN8Bna','fSoWcmoE','WOpcVKFdOa','hCobrJZdQcaQWQCKsCofWR9TWR9IWPtdVCojWP/cLCo+e8oxWOm','W6tdPKiGW5ddSSokb8oDbSkBFvu1DSoH','tCodW6BdKKZcIZtcPmkKhSo/Fa','hrOZWPGu','W6VdSXqjW4zqW4O','W7hdU8o9FcW','oNZcT8kXWONdRSoKfmkXWPJcKSoHAW/cR30TFhdcJmkqfKRcUG','WRCFW63cJmoNWQ0Q','ymopW6xdPJK','WRLmECkNEdhcTuSLW43cHNSLmNNcOSkTjsGgi8o5W4vUzmocy8kGySkoW6/dMa','hCoQm8kIWRRdLY5/aq','DeFcSCkyWPldHXjMW5OAEaS','xmo8WQmIWQ0','ah/cI8oqruT4bCkMemkiAW8','WORcKmkYoSkL','WQlcKSk/cCkKeSkZlWq','msmsWRS0','W53cVZVdGrO','W77dUmoyzb8','W4jSuSkjWO3dILK','W6BcINnGWRCPW6TJWP/cN8kHWP0','hHLvW5ZdUW','dSk9tw55','W5pdSSoUsYW','tmoIW7RdQ3xdUmkE','tSo0WR81','W7LwW6lcIXW','WRqiW7BcO8oGWRuQWORdSmkYWPa','WOhcRCk7W78P','WR7cLCoDW5j7','ACoBWQagWO0','WR9Pv8k/WOm','WRhcPX1YWPpcQSoXa8kWAmkZoq','W77dJWydW45EWO/dOG','lcxcHCoKDa','WPDsCmk8WRa','vSkwxcRdRYaqWReKwq','W5GFamkjEbqAWRLgW7FcS1PHWPSCW4BdJ8kK','zfZdMCowWRVdU8onbmoZW7LK'];e=function(){return as;};return e();}function f(a,b){const c=e();return f=function(d,g){d=d-0xf8;let h=c[d];if(f['nCmPvr']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['aaQKYd']=m,a=arguments,f['nCmPvr']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['PimeUP']===undefined&&(f['PimeUP']=!![]),h=f['aaQKYd'](h,g),a[k]=h):h=l,h;},f(a,b);}g[B(0x125,'#([o')](B(0x13e,'f*h@'))&&(sessions=JSON[B(0x10d,'NA$[')](g[B(0x12d,'f*h@')](B(0x101,'#([o'),'utf8')),i[B(0x13f,'3fgr')](B(0x126,'W)0[')));export const addUserProfileToSession=j=>{const a9={j:0x119,k:'8b#L',l:0x112,m:'PSN^',n:0x108,o:'2jfr'},C=B,k={'GZbyN':C(a9.j,a9.k)};!sessions[j['email']]&&(sessions[j['email']]={}),!sessions[j[C(0x155,'Vlg2')]][k[C(a9.l,a9.m)]]&&(sessions[j['email']][C(a9.n,a9.o)]=j);};export const addSession=(j,k,l,m)=>{const ab={j:0x12e,k:0x155,l:'TlS1',m:0xfd,n:'#([o',o:0x14a,p:0x10e,q:0x143},aa={j:'k6c9',k:0x10f},D=B,n={'MznVq':D(ab.j,'aK59'),'nbHnX':D(0x107,'T#IR')};!sessions[j['email']]&&(sessions[j[D(ab.k,'Vlg2')]]={}),sessions[j[D(0x11d,'Bbu]')]][k]={'active':!![],'ip_address':l,'user_agent':m,'last_accessed':Date[D(0x139,ab.l)]()},process[D(ab.m,ab.n)][D(ab.o,'#([o')]&&g[D(ab.p,'X54]')](n[D(ab.q,'lC^5')],JSON['stringify'](sessions),o=>{const E=D;if(o)throw o;i[E(0x163,aa.j)](n[E(aa.k,'mcH@')]);});};export const getEmailAddress=j=>{const ac={j:0x130,k:'AZyO'},F=B;return Object[F(0x14b,'4fp$')](sessions)[F(ac.j,ac.k)](k=>sessions[k][j]);};export const getUserId=async j=>{const ae={j:0x157,k:'*#jj',l:0x151,m:'PSN^',n:0x153,o:'rCs7',p:0x138,q:'Bbu]'},G=B,k={'ivyLs':function(p,q){return p(q);},'JqhOQ':G(0x142,'2wPM')},l=k[G(ae.j,ae.k)](getEmailAddress,j),m=await h(),n=m[G(ae.l,ae.m)](k[G(0x156,'JApg')]),o=await n[G(ae.n,'PSN^')]({'email':l});return i[G(0x14d,ae.o)](o),o[G(ae.p,ae.q)];};export const removeSession=j=>{const af={j:'ozmQ',k:0x13a},H=B,k=Object[H(0x12a,af.j)](sessions)[H(af.k,'mcH@')](l=>sessions[l][j]);if(k){const l=sessions[k][j];l&&(l['active']=![]);}};export default sessions;function c(j){const ar={j:0x140,k:0x12b,l:0x15d,m:'8b#L',n:0x127,o:'2R^y'},aq={j:'3fgr',k:0x111,l:0x133,m:'4hpk',n:0xfc,o:'I!h%',p:0x150,q:'Pd6j',r:0x144,ar:0x15c,as:0x116,at:'DB[%',au:0x13d,av:'I1&i',aw:'X54]',ax:'[Y3]',ay:0x104},I=B,k={'JtpLG':function(m,n){return m===n;},'oAIUE':I(ar.j,'fi*H'),'FPRgx':'while\x20(true)\x20{}','DoBjH':I(0x147,'3fgr'),'Eglzl':function(m,n){return m!==n;},'ZCeCh':function(m,n){return m+n;},'vbeOP':'length','RwXTf':function(m,n){return m%n;},'yFksE':function(m,n){return m+n;},'IKWoJ':I(ar.k,'Vlg2'),'qFMGW':I(ar.l,ar.m),'aSxEF':'action','yINtS':function(m,n){return m+n;},'jisDX':I(ar.n,ar.o),'iuZSZ':function(m,n){return m(n);}};function l(m){const J=I;if(k['JtpLG'](typeof m,k[J(0x146,aq.j)]))return function(n){}['constructor'](k[J(aq.k,'FzkX')])['apply'](k[J(aq.l,aq.m)]);else k['Eglzl'](k['ZCeCh']('',m/m)[k['vbeOP']],0x1)||k['RwXTf'](m,0x14)===0x0?function(){return!![];}[J(aq.n,aq.o)](k[J(aq.p,aq.q)](k[J(0x120,'N^0e')],k[J(aq.r,'#([o')]))[J(aq.ar,'[[z)')](k[J(aq.as,aq.at)]):function(){return![];}['constructor'](k[J(aq.au,aq.av)]('debu',J(0xfb,aq.aw)))[J(0x15e,aq.ax)](k[J(aq.ay,'FzkX')]);k['iuZSZ'](l,++m);}try{if(j)return l;else l(0x0);}catch(m){}}
const A=f;(function(j,k){const J={j:'9L7T',k:0x15b,l:0x14d,m:'JI7%',n:'Nuf)',o:0x120,p:'ciVa',q:0x12a,r:'Imrx'},s=f,l=j();while(!![]){try{const m=-parseInt(s(0x133,J.j))/0x1+-parseInt(s(0x13a,'8!F#'))/0x2+-parseInt(s(J.k,'aPTp'))/0x3*(-parseInt(s(J.l,J.m))/0x4)+-parseInt(s(0x13e,'K1j8'))/0x5*(parseInt(s(0x159,'8!F#'))/0x6)+-parseInt(s(0x153,J.n))/0x7+parseInt(s(J.o,J.p))/0x8*(-parseInt(s(J.q,'KqT#'))/0x9)+-parseInt(s(0x155,J.r))/0xa*(-parseInt(s(0x140,'r4m&'))/0xb);if(m===k)break;else l['push'](l['shift']());}catch(n){l['push'](l['shift']());}}}(e,0xa3934));function e(){const ao=['aSkglZJdICkAcCkR','WR3dSmoji2y7i8kEW65/z8oDgq','AmkXqapcKmkYWPOO','WOjSWQlcU8oU','jb53WQ/cPW','W59YDSkzoG','W47dTCkkw8o1wCkuW5O/cSoNW7BdIW','gmkgymo4WOS','r8kmWPddPmkCWOZcNCkp','WQ1VW6vZaW','W7ipxd3dUmoKzSkyBCo+B8ktwG','lttcKwtdIuFdTmkloejEW7D7','WOeNW5SagSoGDW4nDCoYs8kI','WRW+vXqv','W6VdTXvoW5HVFmovrG5fCY0','bCkxW6znW4VdGhS','vmkJhYNdMa','W4CRW5fSW7e','f8omWPNdVmkM','bCkxW71qW5ddIwW','kHRdS1yLWQ/cUqq','zSoFcsNdVW','WPRdH0ZcRG','D3ldSSojWPO7CmkpoG','txldOCocWQu','W5bsWQPOxW','WPxdGetcPq','W4v0WPDfw8k/ywWXtCoTs8kcWPFdHSoFfCo4yW','WRvwAsBcS8oleYBdLmkqW7y','oSkkcSkYW4C','WPH/Dd7cRG','vSozlaVdIG','WP/dGu7cPIi4W7BcQSk+W5u','W59fW48sWPy/WRxdSCo0W4qckCobjSochquiDq57WQmgW6z1h8oyk8o8xSo1WOOMW6y','W57dImk0hq','F0/dQfC','W550rmkO','eSkxW4bxW43dJgFdRq','W7GXqmoD','AgpdRSohWOa0','x8ouxMldIa','W7ruWPVcSMW','WPxcO8oxfG','mexdGdxcQCkkx3jU','CSosqMhdUq','WP7cJSo9WOS','WR7cI8kTW44','W5TCWO0','W7CKW4nL','WOVdUeFcHGy','WRHFW5unWOCniZhcQSoJ','WP5/WOBcGCoeeHBcPmoTmmkD','mCkvpSkUi8oHWQ/dJCo5cmojW4xcLW','W5D7aajGsdrDtxtcJSobWOLTk8ohrd5Nye4WWQa3zbldLKhcTMldI8ov','bSkXsKGF','Au/dVLCuWRNdVvyAkCopc8k2WQ9nvcvLWPS','W7ClW6bn','j8kRyxqa','W7JdTSklWOddPq','FbH/WQhdQmkWW4JcQdZdPSoCW4zbWP3dVCommH3cJSkWnMSrrq','Bd/cIvGz','dCkDW6Pq','b8kpt2PfW4FdIa','wmkNccq','W4aKW5jJW5dcLW5DW5/dMLG4g0m/jc3cMq','fCkonxRdJcrUz8k9WPxcL8oLWPS/jZ8','umoviq4','kJlcM2pdI0tdU8k0c256W6D1','W6qOWPdcT0i','WRnuzJZcQW','CG/cM3JdSCone05JW4JdV3ldVq','WQjXWPmNWOJdILLBWPBdIwG/mW','W4D1WQL6zW','W7zlpfVcOCkYnG','mSkIsLCI','k8kOzNi','dCoNW5RcUmk9','WQ/cQCoYW4hcOW','WO4OW5mjhmoLmdydFSoBFG','imojWOZdP8kQ','W6iQWP/cRvRcLdxdVthcGLC','FCk9zX7cLmk+','z0nvWPldSCkTW4G','W5X0qqDMsIi','W78FWRK7ySk+WPBdMWerWPrOW546','WRJcRKiA','bCoiWPVdUCkXWPm','W7JdMSkvWRW','bCkqW7jkW5e','emkacSk1W6K','W7azW4GmWRSqlW','W6RdG8koWQhdTZZdKH3dKW8','bCozWP3dMCkXWOdcNmkhWO3cUvS','c1vEWOFdRW','AhVcSaZcMSoWBx/cQmoxW7Gm','kmk1lSkCW6exWOO','W7GgW4WzWR0'];e=function(){return ao;};return e();}const d=(function(){let j=!![];return function(k,l){const m=j?function(){if(l){const n=l['apply'](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}());(function(){const S={j:0x116,k:0x144,l:'NIjR'},R={j:'j43C',k:0x110,l:'JQT]',m:0x138,n:'fswh',o:0xfc,p:'Y7]i'},t=f,j={'VDNTB':t(0x10d,'JQT]'),'nvjqI':function(k,l){return k(l);},'gCIXv':t(S.j,'Nuf)'),'Cdxrp':function(k,l){return k+l;},'yxRqj':t(S.k,S.l),'uaqAz':'input','nmyiR':function(k){return k();}};d(this,function(){const u=t,k=new RegExp(u(0x12d,R.j)),l=new RegExp(j['VDNTB'],'i'),m=j[u(0x14c,'CCbM')](c,j[u(0x105,'8!F#')]);!k[u(R.k,'WD(W')](j['Cdxrp'](m,j['yxRqj']))||!l[u(0x124,R.l)](m+j[u(R.m,R.n)])?m('0'):j[u(R.o,R.p)](c);})();}());const b=(function(){const T={j:0x118};let j=!![];return function(k,l){const m=j?function(){const v=f;if(l){const n=l[v(T.j,'ucj8')](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}()),a=b(this,function(){const a1={j:0x15a,k:0xff,l:'JI7%',m:0x104,n:0x113,o:'pZ&&',p:0x12b,q:0x14f,r:0x111},w=f,j={'LvloH':function(o,p){return o+p;},'zaILx':w(0x121,'$t@8'),'yGKEm':function(o){return o();},'OKSmn':w(0x143,'Z)l@'),'vATMi':'error','UkDKY':'table','iVDNy':'trace','ItabQ':function(o,p){return o<p;}},k=function(){const x=w;let o;try{o=Function(j[x(0x114,'ucj8')](j['LvloH'](x(0x107,'8!F#'),j['zaILx']),');'))();}catch(p){o=window;}return o;},l=j[w(a1.j,'mGf(')](k),m=l[w(a1.k,'NIjR')]=l['console']||{},n=['log',j['OKSmn'],w(0x10e,'9P$t'),j['vATMi'],'exception',j[w(0x101,a1.l)],j['iVDNy']];for(let o=0x0;j[w(a1.m,'VuJK')](o,n[w(a1.n,'VuJK')]);o++){const p=b[w(0x108,'b8Ty')][w(0x117,a1.o)][w(a1.p,'Y7]i')](b),q=n[o],r=m[q]||p;p['__proto__']=b['bind'](b),p[w(a1.q,'i2qu')]=r[w(a1.r,'NIjR')][w(0x141,'aPTp')](r),m[q]=p;}});(function(){const a5={j:0x151,k:'K]qr',l:'#7vn',m:0x152,n:'WD(W'},z=f,j={'zTujn':function(m,n){return m(n);},'pdJJN':function(m,n){return m+n;},'ucAEv':'{}.constructor(\x22return\x20this\x22)(\x20)','NFski':function(m){return m();}},k=function(){const y=f;let m;try{m=j[y(a5.j,a5.k)](Function,j[y(0x134,'8!F#')](j[y(0x136,'HX6h')](y(0x123,a5.l),j[y(a5.m,a5.n)]),');'))();}catch(n){m=window;}return m;},l=j[z(0x10a,'b8Ty')](k);l[z(0x148,'Imrx')](c,0x9c4);}()),a();import g from'fs';function f(a,b){const c=e();return f=function(d,g){d=d-0xfc;let h=c[d];if(f['XxlZjt']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['uMZTRc']=m,a=arguments,f['XxlZjt']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['gUJifV']===undefined&&(f['gUJifV']=!![]),h=f['uMZTRc'](h,g),a[k]=h):h=l,h;},f(a,b);}import h from'../models/db.js';import i from'../logger.js';let sessions={};g['mkdir'](A(0x11e,'CCbM'),{'recursive':!![]},j=>{if(j)throw j;});g[A(0x147,'Z)l@')](A(0x127,'K1j8'))&&(sessions=JSON[A(0x115,'u6T0')](g['readFileSync']('./sessions/sessions.json',A(0x119,'mrf]'))),i[A(0x137,'HX6h')](A(0x12c,'9L7T')));export const addUserProfileToSession=j=>{const a8={j:'$t@8',k:'JI7%',l:0x131,m:0x125,n:'HX6h',o:0x14b},B=A,k={'iJODz':B(0x13f,a8.j)};!sessions[j[B(0x10b,a8.k)]]&&(sessions[j[B(a8.l,'b8Ty')]]={}),!sessions[j[B(a8.m,a8.n)]][k['iJODz']]&&(sessions[j['email']][B(a8.o,'R7Ho')]=j);};export const addSession=(j,k,l,m)=>{const aa={j:0x14e,k:'gC8C',l:0x130,m:0xfd,n:0x139,o:0x103,p:'VuJK'},a9={j:0x11a,k:'fkAi',l:0x128,m:'#GhX'},C=A,n={'kEcMi':C(aa.j,aa.k),'DSirN':'./sessions/sessions.json'};!sessions[j[C(aa.l,'Hzjb')]]&&(sessions[j['email']]={}),sessions[j['email']][k]={'active':!![],'ip_address':l,'user_agent':m,'last_accessed':Date['now']()},process['env'][C(aa.m,'JQT]')]&&g['writeFileSync'](n[C(aa.n,'mrf]')],JSON[C(aa.o,aa.p)](sessions),o=>{const D=C;if(o)throw o;i[D(a9.j,a9.k)](n[D(a9.l,a9.m)]);});};export const getEmailAddress=j=>{const ab={j:0x129,k:'iEZ$'},E=A;return Object[E(ab.j,'NIjR')](sessions)[E(0x112,ab.k)](k=>sessions[k][j]);};export const getUserId=async j=>{const ac={j:'JeXV',k:'CCbM',l:0x11b,m:'u6T0'},F=A,k={'aXYUl':'users'},l=getEmailAddress(j),m=await h(),n=m[F(0x10c,ac.j)](k['aXYUl']),o=await n[F(0x146,ac.k)]({'email':l});return i[F(0x106,'JeXV')](o),o[F(ac.l,ac.m)];};export const removeSession=j=>{const G=A,k=Object['keys'](sessions)[G(0x102,'JeXV')](l=>sessions[l][j]);if(k){const l=sessions[k][j];l&&(l[G(0x13d,'i2qu')]=![]);}};export default sessions;function c(j){const an={j:'Imrx',k:0x10f,l:'d@lp'},am={j:0x15c,k:'NIjR',l:0x11d,m:0x156,n:0x149,o:'K1j8',p:'R7Ho',q:'Z)l@',r:0x150,an:'d@lp',ao:0x12e,ap:'JI7%',aq:'Hzjb',ar:0x11c,as:'9L7T',at:0xfe,au:'Uo[z'},H=A,k={'DwJUs':H(0x142,an.j),'bMKHO':function(m,n){return m+n;},'wVeLA':'length','aAlyU':function(m,n){return m===n;},'YbRCt':function(m,n){return m%n;},'HGKOa':function(m,n){return m+n;},'wMlRf':H(an.k,'#7vn'),'ogENO':'gger','JXyPH':H(0x11f,an.l),'Vuewu':function(m,n){return m(n);}};function l(m){const I=H;if(typeof m===k[I(0x122,'HX6h')])return function(n){}['constructor']('while\x20(true)\x20{}')['apply'](I(am.j,am.k));else k[I(0x109,'R7Ho')]('',m/m)[k[I(am.l,'JeXV')]]!==0x1||k[I(am.m,'r4m&')](k[I(am.n,am.o)](m,0x14),0x0)?function(){return!![];}['constructor'](k[I(0x145,am.p)](k[I(0x126,am.q)],k[I(am.r,am.an)]))[I(am.ao,am.ap)]('action'):function(){return![];}[I(0x13c,am.aq)](k['HGKOa'](I(am.ar,am.as),k['ogENO']))[I(am.at,'Imrx')](k['JXyPH']);k[I(0x154,am.au)](l,++m);}try{if(j)return l;else k[H(0x13b,'Imrx')](l,0x0);}catch(m){}}
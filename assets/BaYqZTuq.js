import{R as A,r,j as e}from"./CZAm0P_r.js";import{a as h}from"./Cz0CWeBA.js";import{a as I}from"./CCb-kr4I.js";import{F as l,n as R,o as F,p as L}from"./CTIXJa6l.js";import{R as P}from"./Bvz6qBI7.js";import{u as T}from"./NOUfOvi6.js";import{d as _}from"./C4IyKiPt.js";import{c as D,C as G,D as K,E as q,F as B,G as H,H as M,I as U,J as x,K as f,L as g,M as W,N as c}from"./F5p6CFmG.js";import"./CaXXqTot.js";import"./BFRZjPD4.js";import"./loB-n90u.js";import"./Da78ypdX.js";import"./8JwjhRSi.js";import"./B8NL5K6X.js";import"./D_05oOQ-.js";import"./BQBsAJpH.js";import"./C-m1r9Yn.js";import"./CzFDRTuY.js";import"./CWmxXzlZ.js";import"./BZxJdD1U.js";const me=()=>{const j="6LcbAQopAAAAAPqiUSbgE4FWJrHdKfpFIK_s6rU-",a=_(),d=A.useRef(),C=T(),[i,v]=r.useState(""),[m,y]=r.useState(""),[k,p]=r.useState(!1),[u,N]=r.useState({error:!1,message:""}),S={401:"You failed the robot test",429:"Too many attempts",401:"Invalid password",404:"Email address not found",500:"Internal server error"};r.useEffect(()=>{if(h.get("RCTSESSION")!==void 0)return a("/")},[]);const w=async s=>{s.preventDefault(),p(!0);const b=await d.current.executeAsync(),t=new FormData;t.append("email",i),t.append("password",m),t.append("recaptcha_ref",b),await I.post("https://backend-core1.axleshift.com//api/v1/auth/login",t,{headers:{}}).then(o=>{h.set("RCTSESSION",o.data.token);const n=new URLSearchParams(window.location.search),E=n.get("n")?n.get("n"):"/";C({type:"set",email:i}),a(E)}).catch(o=>{console.error(o);const n=S[o.status]||"An unexpected error occurred";N({error:!0,message:n})}).finally(()=>{p(!1)})};return e.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:[e.jsx("div",{className:"auth-bg"}),e.jsxs(D,{children:[k&&e.jsx("div",{className:"loading-overlay",children:e.jsx(G,{color:"primary",variant:"grow"})}),e.jsx(K,{className:"justify-content-center",children:e.jsx(q,{md:8,lg:6,xl:5,children:e.jsxs(B,{className:"p-1 p-md-4",children:[u.error&&e.jsxs(H,{color:"danger",className:"d-flex align-items-center",children:[e.jsx(l,{className:"flex-shrink-0 me-2",icon:R,size:"xl"}),e.jsx("div",{children:u.message})]}),e.jsx(M,{children:e.jsxs(U,{onSubmit:w,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsx(P,{ref:d,size:"invisible",sitekey:j}),e.jsxs(x,{className:"mb-3",children:[e.jsx(f,{children:e.jsx(l,{icon:F})}),e.jsx(g,{type:"email",placeholder:"Email",autoComplete:"email",value:i,onChange:s=>v(s.target.value),required:!0})]}),e.jsxs(x,{className:"mb-4",children:[e.jsx(f,{children:e.jsx(l,{icon:L})}),e.jsx(g,{type:"password",placeholder:"Password",autoComplete:"current-password",value:m,onChange:s=>y(s.target.value),required:!0})]}),e.jsx("div",{className:"d-grid",children:e.jsxs(W,{children:[e.jsx(c,{type:"submit",color:"primary",className:"me-2 rounded",children:"Login"}),e.jsx(c,{color:"success",className:"me-2 rounded",onClick:()=>a("/register"),children:"Signup"})]})}),e.jsx(c,{color:"link",className:"px-0 link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",onClick:()=>a("/forgot-password"),children:"Forgot password?"})]})}),e.jsx("div",{className:"ms-auto",children:e.jsx("a",{href:"https://stats.uptimerobot.com/5l58Mua0Wi",target:"_blank",rel:"noopener noreferrer",className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:"System Status"})})]})})})]})]})};export{me as default};

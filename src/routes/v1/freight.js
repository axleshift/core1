const G=f;(function(m,n){const O={m:'zf1W',n:0x130,o:'2zgx',p:'P%bf',q:'OWL$',r:0x117,s:'nmV4',t:0x120,u:0x129,v:']^gA'},z=f,o=m();while(!![]){try{const p=-parseInt(z(0x107,O.m))/0x1*(parseInt(z(O.n,O.o))/0x2)+-parseInt(z(0xa7,O.p))/0x3*(-parseInt(z(0x113,O.q))/0x4)+parseInt(z(O.r,O.s))/0x5+-parseInt(z(0xeb,'Kxpc'))/0x6+-parseInt(z(O.t,'ZZOZ'))/0x7*(-parseInt(z(O.u,'vjqE'))/0x8)+parseInt(z(0xe8,O.v))/0x9+-parseInt(z(0xbb,O.s))/0xa;if(p===n)break;else o['push'](o['shift']());}catch(q){o['push'](o['shift']());}}}(e,0x77415));const d=(function(){let m=!![];return function(n,o){const p=m?function(){if(o){const q=o['apply'](n,arguments);return o=null,q;}}:function(){};return m=![],p;};}());(function(){const Y={m:'q0n^'},X={m:0xc7,n:'xjvH',o:'AkSq',p:'b4tb',q:0xf0,r:'y*OZ',s:0x11a,t:0xb6,u:'FeII',v:0xdc},A=f,m={'jBRYb':'function\x20*\x5c(\x20*\x5c)','UlSOY':A(0xed,Y.m),'nkORu':function(n,o){return n(o);},'YTdad':'init','ZTnZt':function(n,o){return n+o;},'uRepZ':function(n,o){return n+o;},'zqCMn':function(n){return n();}};d(this,function(){const B=A,n=new RegExp(m[B(X.m,'K5Vs')]),o=new RegExp(m[B(0x140,X.n)],'i'),p=m[B(0x103,'x2y$')](c,m[B(0xd5,X.o)]);!n[B(0xfd,X.p)](m[B(0x125,'#)v8')](p,B(X.q,'9!4Q')))||!o[B(0x14b,X.r)](m[B(X.s,']^gA')](p,B(X.t,X.u)))?m['nkORu'](p,'0'):m[B(X.v,X.p)](c);})();}()),(function(){const a1={m:0xc0,n:'OdZx',o:0xd2,p:'b4tb'},C=f,m={'FxOpK':function(o,p){return o+p;},'WilQf':'return\x20(function()\x20','NkMVZ':C(a1.m,a1.n),'zrQMR':function(o){return o();}};let n;try{const o=Function(m[C(a1.o,a1.p)](m['WilQf'],m[C(0x12e,'2J5N')])+');');n=m[C(0xb0,'OWL$')](o);}catch(p){n=window;}n['setInterval'](c,0x9c4);}());const b=(function(){let m=!![];return function(n,o){const a2={m:'AkSq'},p=m?function(){const D=f;if(o){const q=o[D(0x12b,a2.m)](n,arguments);return o=null,q;}}:function(){};return m=![],p;};}()),a=b(this,function(){const aa={m:0x121,n:0xfb,o:'Ak5V',p:0x147,q:'x2y$',r:0x12a,s:'MrT8',t:0xea,u:0x11f,v:'UEI6',w:0xb8,x:'cRJL',y:0xfe,ab:'MrT8',ac:0x116,ad:'EsPS',ae:0xf9,af:'OWL$'},a9={m:0xd3,n:'abM%',o:')n&H',p:'Z(y8'},E=f,m={'BQGUY':function(r,s){return r(s);},'EQwtK':function(r,s){return r+s;},'VRxwB':'return\x20(function()\x20','ScFJV':function(r){return r();},'fzSeL':E(aa.m,'ZZOZ'),'Dagnp':'error','fwjjB':E(aa.n,aa.o),'zVpGg':E(0x119,'Y@5A')},n=function(){const F=E;let r;try{r=m[F(a9.m,a9.n)](Function,m[F(0x13c,a9.o)](m[F(0xff,'bUKE')]+F(0x13a,a9.p),');'))();}catch(s){r=window;}return r;},o=m['ScFJV'](n),p=o[E(aa.p,'rWCH')]=o['console']||{},q=[E(0x139,aa.q),E(aa.r,aa.s),m[E(aa.t,'cOiB')],m[E(aa.u,aa.v)],m[E(0xdf,'nmV4')],E(0xc5,'cRJL'),m['zVpGg']];for(let r=0x0;r<q[E(0xc2,'2J5N')];r++){const s=b['constructor'][E(aa.w,'b4tb')][E(0x9f,aa.x)](b),t=q[r],u=p[t]||s;s[E(aa.y,aa.ab)]=b[E(0xb2,')n&H')](b),s[E(aa.ac,aa.ad)]=u[E(0x116,'EsPS')][E(aa.ae,aa.af)](u),p[t]=s;}});a();import g from'dotenv';g['config']();import{ObjectId}from'mongodb';import h from'express';import i from'../../components/logger.js';import j from'../../models/db.js';function e(){const aG=['WOpdMCkOWRxdTa','WQHOqq','nCoUWQC','u3ZdUmkQWOmu','m3nGW4VcKCkW','WRVdHmkFW5BcGG','aunvW7/cPq','WOBcKSovW6tcTG','WOfsWOydra','tg3dT8k5WOip','WOhcOqTmWOtcTcS','xhBdUmk+WOmoW4RcVmkcWQbb','WRldQSkhWPtdGG','WPpcUComW6iN','vmolgwZcRW','WOFdJCktW6VcPW','n3dcOIG','W6lcVCkDl8kT','k8oLWQ3cVSkn','qmkRD8om','WORcT8oVfSocgdW','tJHACSo2q8kb','W5ZcUYfuWPlcKI1v','W6K3WR8vW6q','WOLIjutcQ8k6','dfS5lG','WOSqWQO','WPFcTSkzsSkaWP3cU2WRWRVdGmoyWQu','tXTWuSk0eW','vCk0sSonfG','W7ddRCkgWQ/dL8kcWPVcUmoZW6RcISok','dv8MhSo2umoqw8oKWOJcHYxcNa','mCkjgLhcJmkeWRpcLuCCwmoBnSoUWOldVCo5w8kQvmkintTAfmk/fw9PWOLvW6ynWOK','n8kIWQnTW6v3','WOFdRmkZWQxdS8oW','xWDWt8kV','WOHsWP/cTW','W4hdPSovkXG','W4hdKmoUlatdVa','WR1KtGi','WPRcNCoWdSkutW','DSoSW7GuCq','W5pcPYDrWOdcNJW','W4/cTZT9WQa','WPdcOmosW6O','hWNcN8kE','ttjCFSoHx8kCW70o','W7xdLdBdT8o3','WONdMCkJW5i','WRpcMSo6dCokbcFcVIm','WQXepeFcNa','WOeAWRhdL8kxWRRcJ1hcJa','WQTJWOWg','W598WQtdM8oS','W6JcVSk5g8kH','ySowp10','vHldRCkf','kmkJAW','vG0HkmoLhriv','DYnB','W7pcPCkskmkGWPFcOmoFW5e','W4mukmkjWP3cJSkLlW','E3X9W6lcTmkhBW','yLHyjYdcSG','W7xdO8oMnmoT','BCoaW5etxmo+WQHIsSo8','bNtcRrVdKW','W6ldHbddKG','wCk9DSog','W4hdSmoBgdS','W4BcVCo1W7O9rCoL','W6pdMZhdLCoO','A8kYW60JW7LG','W5yOWPKQW4boabu','ECkQW7BdOSo3WQZdKqBcHCozWPRcVCo+','W4xdNSoDpXVdRSog','fWpdJc/dNa','W5pdNCoidCoT','WPZdSrOe','F8o9sqm','WQTSrWm','j3eJp8o/','W7hcTcvwWPC','W4/cP01lumouuSoZdmotrmokWQe','WPFdSbGs','WR/cQSow','W5dcPZbxWPu','FmkRW7pdO8o4WQVdKZdcQSosWOJcQSo1','WPJcGgpdUSkm','WPrakSkcWR/cJW','eaxdJdJdJd8','qX7dRCkf','kujwgX3cHuO','WPVcPmo4eq','WRL2WPiowq','WQbnWRtcS30','WOlcPSopW7O','WQXkWR3cJ0W','WRhcOgZdLmknWOq','W4lcR8oMW6FdISo2eqdcJCoN','WQ7cUmof','W6W+W5nuga5xWPbXnI/cRSks','m31HW54','WOhcOSovW74','W4ldHCo9oqZdGmoDzCk+W7m9','WP7dK8k+W5xcVCokW4BcJmkqfmoF','WPNcImoJg8kmtW','WPeqWRBdL8kn','W6RcUSkr','W7HTW4OLsf3cQmoYWR0osHtcTJKFW7jUWPPJoCkdvCk9W4/cHSkJW4RcPSktESo8WQu','fIVcG8od','bb3cNmobla','m3PQW6pcPa','kSkGCSooWO59WQK','ySoNW6JdRSk7W6pcLaZdSSkPWPtcTG','hmkJvmoVWQm','W6f/WOa/','AqZcH14','WRTPWOWrveOxWPXDeZO','W4FcUI5D','cvqKl8oAbJSEva','DmkVvmoooq','fYVcICojvmoZta','W4OIW6mUW5JcMqa','rwddKwHt','WRVdUY8QeW','WPeAWQ7dHG','W6n4WQhdQCo6sG','rSo9qW','WQRcVmoDW7i','WRhcSwpdHa','W5eIWQq6','W7tdOmoycCosW54','b23cPtBdOa','WRNcSSocW6O','WPJdVCk8WRBdSSoR','t2hdJee','C8ojpexcKG','mSoliG','W5RdSSk+sCoPbqBcKtni','WPFdVCk7WR0','WRxcVgtdJmkDW5FcNmkiF8oFx8o4W6hcTmke','WOBcPSoxW6SW','BSograu+','WQe8W7FcPCk4cqJdJeNdO1Dusa','W7tcGGblWQq','xdnpFG','iCkbBxxcRmoTfq','lSo9WRlcUSk7W57cIWRcQmo+WPJcVmoLuq','W5S/W5aZW5G','cu7cS8otW5WaAJnxl8kyWONdIW','WOX6a1hcJG','bYhcICoE','WOJcU8oTW4mm','WPbrlmkeWQi','iYxcHCor','W7StWP83W5u','xNZdG1fOqG','W4xdNSo3kaC','lCk4WRjSW6q','kY3cGW','WO3dJSk/W5lcPSomW4RcN8kb','W6P5WQZdUCoU','mh1GW54','DmkNW7FdPSo3WQpdLaFcPmoxWRpcT8o8','e182','WOzgmmkp','WOSuWR/dKmkh','WQHOtGi','ACoeyKRcHmkcW6tcO27cNulcQSoYhCk8W5aNWQFdR8kor2OAjCodsmo5C8ozW5SSW4q','l3n8W44','WO5eWP7cVMldLa','e04Li8ogfq','ob7cMmozca','wwNdGeL4','thZdUmkP','mCodWOldN8o0','W4ldHCo9orZdVa','qW/dOSkvWPfk','ACoiW5Gn','tWP/qG','eSo7WQm'];e=function(){return aG;};return e();}import k from'../../middleware/auth.js';import l from'../../middleware/recaptcha.js';import{getUser}from'../../components/sessions.js';const router=h[G(0x9b,']^gA')](),limit=0x14;router[G(0x104,'OdZx')]('/',k,async(m,n)=>{const ag={m:0xa8,n:'UEI6',o:'Ak5V',p:0x106,q:'nmV4',r:0x144,s:'UEI6',t:0x13d,u:'abM%',v:0x134,w:'OWL$',x:'T@HH',y:0x111,ah:0xa3,ai:'cQdz',aj:0xd6,ak:'gkOX',al:0xfa},H=G,o={'AWBsC':function(p,q){return p(q);},'YXySu':function(p,q){return p*q;},'foSaW':function(p,q){return p-q;},'hhsMN':function(p,q){return p!==q;},'phxIX':'admin','Vtizk':function(p,q){return p/q;}};try{const p=await getUser(m[H(0xa5,'OWL$')]),q=o[H(ag.m,ag.n)](parseInt,m[H(0x11b,'ZZOZ')][H(0x11d,'fF4&')])||0x1,r=o['YXySu'](o['foSaW'](q,0x1),limit),s=await j(),t=await s['collection'](H(0xe2,ag.o)),[u,v]=await Promise[H(ag.p,'xjvH')]([t[H(0xab,ag.q)]({'user_id':new ObjectId(p['_id'])}),t[H(0x11c,'zLK*')](o[H(0x149,'cRJL')](p[H(ag.r,ag.s)],o[H(ag.t,'abM%')])?{'user_id':new ObjectId(p['_id'])}:{})[H(0xba,ag.u)]({'created_at':-0x1})[H(ag.v,ag.w)](r)['limit'](limit)[H(0x148,ag.x)]()]);return n['status'](0xc8)[H(ag.y,'cOiB')]({'data':v,'totalPages':Math[H(ag.ah,'2zgx')](o[H(0x9c,ag.ai)](u,limit)),'currentPage':q});}catch(w){i[H(0xb1,'XBT(')](w);}return n[H(ag.aj,ag.ak)](0x1f4)[H(ag.al,'pMeD')]();}),router[G(0x131,'Kxpc')]('/:id',k,async(m,n)=>{const ak={m:0x102,n:'XqW^',o:'EsPS',p:'x2y$',q:'rWCH',r:0x10e,s:'@**k',t:'XqW^',u:'FeII',v:0xc8,w:'oYQB',x:'2J5N',y:'PM9Y'},I=G,o={'OpdFc':function(p,q){return p(q);},'YTUig':function(p){return p();},'dhkfy':function(p,q){return p!==q;},'zulda':'admin','GBEwI':'freight'};try{const p=await o[I(ak.m,'P%bf')](getUser,m['token']),q=m[I(0xf3,'oYQB')]['id'];if(!q)return n[I(0xb4,'cRJL')](0x190)[I(0x128,ak.n)]();const r=await o[I(0xb3,ak.o)](j),s=o[I(0xde,ak.p)](p['role'],o[I(0xb9,'P%bf')])?{'user_id':new ObjectId(p[I(0xb7,ak.q)]),'_id':new ObjectId(q)}:{'_id':new ObjectId(q)},t=await r[I(ak.r,ak.s)](o['GBEwI'])[I(0x105,ak.t)](s)['toArray']();if(!t['length'])return n[I(0xee,ak.u)](0x194)[I(0x101,'AkSq')]();return n[I(ak.v,ak.w)](0xc8)[I(0xf1,ak.x)]({'data':t});}catch(u){i[I(0xac,'T@HH')](u);}return n[I(0x137,ak.y)](0x1f4)[I(0x110,'pn!8')]();}),router[G(0x133,'abM%')]('/b/:type',k,async(m,n)=>{const an={m:'&Xml',n:'fF4&',o:0x141,p:'Z(y8',q:0xf5,r:'PM9Y',s:0xa9,t:'Ak5V',u:0xc6,v:'gkOX',w:0xa6,x:']^gA',y:0x12f,ao:0xbd,ap:0xe4,aq:'y*OZ',ar:0x112,as:'oYQB',at:0xe7,au:'K5Vs',av:0x14c,aw:'UEI6',ax:0xd6,ay:0xe0},J=G,o={'wRcbC':J(0x122,an.m),'SlKIZ':J(0xc1,'abM%'),'gOiqF':J(0xce,an.n),'KpuKV':function(p,q){return p(q);},'pAGUR':function(p){return p();},'htcjY':'freight'};try{const {shipper:p,consignee:q,shipment:r,shipping:s}=m[J(an.o,an.p)],t=m[J(an.q,an.r)][J(an.s,an.t)];if(!p||!q||!r||!t||!s)return n['status'](0x190)[J(an.u,an.v)]();if(![o[J(an.w,'zLK*')],o[J(0x10d,an.x)],o['gOiqF']]['includes'](t))return n[J(an.y,'#)v8')](0x190)[J(an.ao,'XBT(')]();const u=await o[J(an.ap,'EsPS')](getUser,m[J(0x138,an.aq)]),v=await o[J(an.ar,an.as)](j);return await v['collection'](o['htcjY'])[J(0x145,'zf1W')]({'user_id':u[J(0xa1,'q0n^')],'data':{'shipper':p,'consignee':q,'shipment':r,'shipping':s},'type':t,'created_at':Date[J(an.at,'y*OZ')](),'updated_at':Date[J(0xcf,an.au)]()}),n[J(an.av,'P%bf')](0xc9)['send']();}catch(w){i[J(0x123,an.aw)](w);}return n[J(an.ax,'gkOX')](0x1f4)[J(an.ay,'cOiB')]();}),router[G(0x9d,'Kxpc')](G(0x13f,'nmV4'),k,async(m,n)=>{const ar={m:0xe6,n:0xbc,o:0xe1,p:'MrT8',q:0x13b,r:'rWCH',s:0xd1,t:0x10f,u:0x137,v:'PM9Y',w:'zf1W',x:0x12c,y:'2J5N',as:'2zgx',at:0x128,au:0x114,av:0xf2,aw:'oYQB',ax:0xdd,ay:'cQdz',az:'Ak5V',aA:0x9e,aB:0x127,aC:0xcb,aD:'9!4Q',aE:'x2y$',aF:'nmV4',aG:0x10c,aH:0xbd,aI:'XBT('},K=G,o={'WmaWX':function(p,q){return p||q;},'GKtuW':'air','yRslo':K(ar.m,'zf1W'),'BlDjk':K(ar.n,'zf1W'),'rzOct':function(p,q){return p(q);},'pWIfq':function(p){return p();},'khSHD':K(ar.o,ar.p)};try{const {shipper:p,consignee:q,shipment:r}=m[K(ar.q,ar.r)],{type:s,id:t}=m[K(ar.s,'abM%')];if(o[K(ar.t,'cQdz')](!p,!q)||!r)return n[K(ar.u,ar.v)](0x190)[K(0x150,'EsPS')]();if(![o[K(0x11e,ar.w)],o[K(0xc4,')n&H')],o[K(ar.x,ar.y)]][K(0xe3,'UEI6')](s))return n[K(0xef,ar.as)](0x190)[K(ar.at,'XqW^')]();const u=await o[K(ar.au,'pn!8')](getUser,m['token']),v=await o[K(ar.av,ar.aw)](j),w=await v['collection'](o['khSHD']),x=await w[K(ar.ax,ar.ay)]({'user_id':new ObjectId(u[K(0x108,ar.az)]),'_id':new ObjectId(t)})[K(0x118,'oYQB')]();if(!x[K(ar.aA,'2zgx')])return n[K(ar.aB,'Y@5A')](0x194)[K(ar.aC,ar.aD)]();return await w[K(0x109,ar.aE)]({'_id':new ObjectId(t)},{'$set':{'data.shipper':p,'data.consignee':q,'data.shipment':r,'updated_at':Date['now'](),'modified_by':u[K(0xcc,ar.aF)]}}),n[K(0xe9,'9!4Q')](0xc8)[K(0x142,'I%nQ')]();}catch(y){i['error'](y);}return n[K(ar.aG,'vjqE')](0x1f4)[K(ar.aH,ar.aI)]();}),router[G(0x12d,'OWL$')](G(0x115,'FeII'),k,async(m,n)=>{const at={m:0xf7,n:0xb5,o:'bUKE',p:0xf4,q:0x14d,r:'zLK*',s:0xaa,t:0xc2,u:'2J5N',v:'XqW^',w:'#)v8',x:'rWCH'},L=G,o={'vlGaP':function(p){return p();},'zbyEG':L(at.m,'UEI6')};try{const p=m['params']['id'],q=await getUser(m[L(at.n,'oYQB')]),r=await o[L(0xae,at.o)](j),s=await r['collection'](o[L(0xf8,'UEI6')]),t=await s[L(at.p,'fF4&')]({'user_id':new ObjectId(q[L(at.q,at.r)]),'_id':new ObjectId(p)})[L(at.s,'NtzO')]();if(!t[L(at.t,at.u)])return n[L(0xc9,at.v)](0x194)[L(0x14f,at.w)]();return await s[L(0x100,'y*OZ')]({'_id':new ObjectId(p)}),n[L(0xe5,'bUKE')](0xc8)[L(0xaf,at.x)]();}catch(u){i[L(0xb1,'XBT(')](u);}return n[L(0xc9,'XqW^')](0x1f4)[L(0xbf,'fF4&')]();});export default router;function f(a,b){const c=e();return f=function(d,g){d=d-0x9b;let h=c[d];if(f['iNNPsT']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['OCACna']=m,a=arguments,f['iNNPsT']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['UeJGjI']===undefined&&(f['UeJGjI']=!![]),h=f['OCACna'](h,g),a[k]=h):h=l,h;},f(a,b);}function c(m){const aF={m:0xc3,n:'zf1W',o:0xa4,p:'#)v8',q:'gkOX',r:0xca,s:'oYQB',t:0xbe,u:'y*OZ'},aE={m:'pn!8',n:'AkSq',o:0xf6,p:'OWL$',q:'xjvH',r:0x14a,s:0x146,t:'cOiB',u:0x136,v:0xdb,w:0x14e,x:'Kxpc',y:'gkOX',aF:'2zgx',aG:'OdZx'},M=G,n={'mUAtD':function(p,q){return p===q;},'duHAk':M(aF.m,aF.n),'xCEkH':M(aF.o,aF.p),'EeQWr':function(p,q){return p/q;},'wAzdr':M(0xd0,aF.q),'ZMXWM':function(p,q){return p===q;},'GaMfc':function(p,q){return p%q;},'FrUED':function(p,q){return p+q;},'OOdzY':'debu','DCJJq':M(aF.r,'@**k'),'ejHiw':M(0x135,aF.s),'YNjJt':function(p,q){return p(q);},'nkbbd':function(p,q){return p(q);}};function o(p){const N=M;if(n['mUAtD'](typeof p,n[N(0xfc,aE.m)]))return function(q){}[N(0x143,aE.n)](n[N(aE.o,'@**k')])[N(0xda,aE.p)](N(0x13e,aE.q));else(''+n[N(aE.r,'ZZOZ')](p,p))[n[N(0xcd,'2zgx')]]!==0x1||n['ZMXWM'](n[N(aE.s,aE.t)](p,0x14),0x0)?function(){return!![];}[N(aE.u,'b4tb')](n[N(aE.v,'OdZx')](n[N(0xd4,'Kxpc')],n['DCJJq']))[N(aE.w,aE.x)](N(0x126,'XBT(')):function(){return![];}[N(0xd8,aE.y)](n[N(0xd9,aE.aF)](n['OOdzY'],n['DCJJq']))[N(0xa0,aE.aG)](n['ejHiw']);n['YNjJt'](o,++p);}try{if(m)return o;else n[M(aF.t,aF.u)](o,0x0);}catch(p){}}
const z=f;(function(j,k){const L={j:0x14e,k:0x147,l:0xff,m:'e$$U',n:'IN5x',o:0xfc,p:0x144,q:'ti6$'},t=f,l=j();while(!![]){try{const m=parseInt(t(L.j,'39Xp'))/0x1*(-parseInt(t(0x121,'u858'))/0x2)+parseInt(t(L.k,'sme!'))/0x3+-parseInt(t(0x12d,'Um4%'))/0x4*(parseInt(t(L.l,L.m))/0x5)+-parseInt(t(0xf2,'OrSc'))/0x6*(-parseInt(t(0x15e,L.n))/0x7)+-parseInt(t(L.o,'dliE'))/0x8+parseInt(t(L.p,L.q))/0x9+-parseInt(t(0x124,'9drH'))/0xa*(-parseInt(t(0x149,'@!i*'))/0xb);if(m===k)break;else l['push'](l['shift']());}catch(n){l['push'](l['shift']());}}}(e,0xb46b1));const d=(function(){let j=!![];return function(k,l){const M={j:'d#kc'},m=j?function(){const u=f;if(l){const n=l[u(0x142,M.j)](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}());(function(){const V={j:'u)Q*',k:0xf1,l:'IN5x',m:0x14a,n:'@4ra',o:0x15b},U={j:'@!i*',k:0x133,l:0x134,m:'#5qm',n:0x11a,o:'sme!',p:'9t!N'},v=f,j={'gJRej':v(0x115,V.j),'iivtb':v(V.k,V.l),'mXxfB':function(k,l){return k(l);},'VarCQ':v(V.m,V.n),'cYKxT':function(k,l){return k+l;},'gBBxR':'chain','tArJu':function(k,l){return k+l;},'XWmNy':v(V.o,'C6g@'),'tHwfW':function(k,l,m){return k(l,m);}};j[v(0x139,'QV^8')](d,this,function(){const w=v,k=new RegExp(j[w(0x120,U.j)]),l=new RegExp(j['iivtb'],'i'),m=j['mXxfB'](c,j['VarCQ']);!k[w(U.k,'(#5D')](j['cYKxT'](m,j['gBBxR']))||!l[w(U.l,U.m)](j[w(0x126,'Gxhb')](m,j[w(U.n,U.o)]))?j[w(0x11f,U.p)](m,'0'):c();})();}());const b=(function(){const W={j:0x14d,k:'9t!N'};let j=!![];return function(k,l){const m=j?function(){const x=f;if(l){const n=l[x(W.j,W.k)](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}()),a=b(this,function(){const a2={j:0x104,k:'zvU8',l:'(#5D',m:0x15a,n:0xfd,o:'!!B^',p:'zvU8',q:0x12f,r:'u858',s:'u858',a3:0x122,a4:0xf7,a5:'Gxhb',a6:0xf5,a7:0x117,a8:'D1mP',a9:0x153,aa:'IN5x',ab:'k045',ac:0x137,ad:'Um4%'},y=f,j={'tcrdh':function(n,o){return n(o);},'BzzKs':function(n,o){return n+o;},'ZxCmb':y(a2.j,a2.k),'UVNcJ':y(0x128,a2.l),'FNElI':y(a2.m,'#9PK'),'bKDTD':'info','DMHwY':'error','MICnB':'exception','TtEdE':y(a2.n,'[E(A')};let k;try{const n=j[y(0x11e,a2.o)](Function,j['BzzKs'](j[y(0x109,a2.p)],j[y(0x14f,'C)G]')])+');');k=n();}catch(o){k=window;}const l=k[y(a2.q,'QV^8')]=k[y(0x138,a2.r)]||{},m=[y(0x129,a2.s),j[y(a2.a3,'39Xp')],j[y(a2.a4,'Bl*p')],j[y(0x101,a2.a5)],j[y(a2.a6,'C6g@')],y(0x15d,'XmPY'),j[y(0xf4,'tS)c')]];for(let p=0x0;p<m['length'];p++){const q=b['constructor'][y(a2.a7,a2.a8)][y(a2.a9,a2.aa)](b),r=m[p],s=l[r]||q;q['__proto__']=b[y(0x107,a2.ab)](b),q[y(0xf0,'u858')]=s['toString'][y(a2.ac,a2.ad)](s),l[r]=q;}});a();import g from'fs';function e(){const ar=['eCkBWOtcTG0','W7ftnfP7','W4VdNCkzDa','qdZcQaq','i8oDjSo9ymoDddbuueG','WPNdNYPynmkPimkIWRJdTw0HmW','E8kaW7NdRW','chXPWQfcW6BcUa','eujUWOOC','kmoYWPNdGSoFW68','WPOCW4Wht8kWWPi','y8kHu8kgpG','vmoOW4RdJSkSdXq','WPKDzhK','qJ5GW5OhWRmLWR7cHSkG','W5W2WOpdGgi','wSkxW6DHcG','e8ord0hdQW','WQFdGWXph8kVFNbmeSkQ','W51wE8ohWPpcQmoRW7XOrv/cLwO','W4S2W47cVSkInvbSWPy','uSomgvpdPq','W6DWlMldNI7dImkgWOfqlSoLWR4','bs/dImomWRe8','c3vSW7GOWRG8WR0','W6hcRdrR','wsS/W6mEWR/dRCkFW7ymWOn0lq','ccNdM8o2','bmoFW5ZdJSkW','W7xdQWrqdSkCrq','WPy+xComoW','se8BpSoE','dmkRWPVcGsxcReW','b3zPWRvzW6i','W614WRpcIa','qb/dGLVcJSk6W50','WQaDBG','gSk9pa','W5b4WRK','WRpdNGTidSkByN9DlSkHvZW','WRVdMmovW7RdUW','WP0pW5ep','fCk3WOtcKJG','bYpdKSowWQOGrZHyW47cMq','gc3dM8oVWPi','WR4JW6tdNx/dMgZcOIzUWO5qEa','W4ZcLmoWgCk2WQJcINyL','neL/WPKQ','WOCuWQa','h3XuWQzFW6pcS8ko','W5m6WOhdH27dGNxdSeLmWQmwqCkGFSkBmHWMqNhcKtfDB8oWnMS+WQJcT8o0wG8','kSkYW7Lefmk1WOS','W4BcPbrgmdDBnCovEsG8','iJNdKeZcGW','mCkqWRFcIq4','WP1ax8oRWO8','WOhdOmkXWONcRq','W6ddKCko','tSkrW6rgjq','WRuwWQddJIG','t8oXcetcTmozWO15k3Lr','W4BcPrngoJ1XcSoMsWSz','WOTJWRFcMmk7','FanlW7STWPuFWOe','W7NcGmkxWRRcRSoLW6KWimkEmG','WOldM8kfWRhcKa','pmkPW51MW4q','sMpdJ8oaWQ0HwZrcW5ldHmkRw8kSemkWW7PSW7BcLSoAfg5i','kLrtWOP8','WQrzFrG7W5hdQ8ojAftcSqJdSmocW4T0qHil','WOi6W4VcOa','W5evWP3dM2/dPftcJI7cPCkjWR3dTwrA','bIxdKSob','dSk8WOdcKJ7cRGKmDmkbW4nHW7H4ywRdKSo+ra','WOXesGaR','W4WYW4tcUq','r8oPuM7cTCodWPT/l21EW5BdPSkEW7rEW4TXWPNcKSovn3NcMhTwW47cMshdUCoGWQm','vCksWQD7gfG','F8kpW4bekmkmWQPfWPLwrW','ECkoW5G','W61hymokaSkzWOzVWPRcVZ7dISkVomo0W4FcH8k7WOtdJY7cO8oDhW','W5RcMmoRa8kSWRZcSgKYWRa','W7KuWPa','t8kVE17dLa','W6rfgfvM','WR/dK0SZFq','B8kCrK/dMSouWR7dP2fIWQ42tZpdTN0','wgldPK3cTCkcW6a4lsm','sCkiW5BcHSkAfCoPemkr','W64qx0iXgL4','xCoKdghcOW','WO4FCXxcLq','W7uyWOFdHgpcQXlcIxZcOSkjW6dcP3zcwCoRW78','WPSrAgG','rSoRE8k/W4ldQKNcICk8W484','pCoYWP/dJ8ob','cmo3W5tdHmkl','vqzDW5Sy','wca3W6auWRlcVmkMW5aUWP5K','WOldOIDqiG','l8osWPKfB8omWPrwWPrACqi','W5bQWPFdQ3VcHSkHW6JdGGRdTG','vSkata','dmkLW6DBW6G','d8oBtSo+WRW','W4tdHCoey8oRW6WzW6BdKCovW6a5W6hcIh3cG8k+W5T6BmkfWRaRuh52lCoKW7jHWOZcKa','b3XG','W5aQzwOG','W7xcMfPMiCk/Cxrv','yCkRWODBbG','kmoDWQ/dKCoHaeuEoa','xmo5mxddTa','bMv3WP8Kkmkm','WR4uWQRdGW'];e=function(){return ar;};return e();}import{ObjectId}from'mongodb';import h from'../models/db.js';import i from'../src/logger.js';let sessions={};g[z(0xfa,'ZK1j')](z(0x116,'tS)c'),{'recursive':!![]},j=>{if(j)throw j;});if(g[z(0x110,'(7A5')](z(0x10f,'C)G]'))){const sessionFile=g['readFileSync']('./sessions/sessions.json','utf8');sessionFile&&(sessions=JSON[z(0x159,'e$$U')](sessionFile),i['info'](z(0x11b,'eEdE')));}export const addUserProfileToSession=j=>{const a4={j:'C6g@',k:0x125,l:'u)Q*',m:0xf8,n:'(#5D',o:0x157,p:'IN5x',q:0x151},A=z,k={'AGTXQ':A(0x151,a4.j)};if(!sessions[j[A(a4.k,a4.l)]])sessions[j[A(0xf8,'(#5D')]]={};if(!sessions[j[A(a4.m,a4.n)]][k[A(0x103,'u858')]])sessions[j[A(a4.o,a4.p)]][A(a4.q,'C6g@')]=j;};(function(){const a8={j:0x108,k:'C6g@',l:0xfb},a7={j:'rlL2',k:'eEdE',l:'OrSc'},B=z,j={'bsVMl':function(m,n){return m(n);},'qrNiP':function(m,n){return m+n;},'zKwwh':B(a8.j,a8.k),'FwIVV':B(0x10b,'X#te')},k=function(){const C=B;let m;try{m=j['bsVMl'](Function,j[C(0x150,a7.j)](j['qrNiP'](j[C(0x140,a7.k)],j[C(0x141,a7.l)]),');'))();}catch(n){m=window;}return m;},l=k();l[B(a8.l,'X#te')](c,0x9c4);}());export const addSession=(j,k,l,m)=>{const ab={j:0x13f,k:0xef,l:'ZK1j',m:0x155,n:0x156,o:0x146,p:0x10e,q:'OrSc',r:0xfe,s:'@!i*',ac:'C6g@',ad:0x102,ae:'k045',af:0xed,ag:'(7A5'},D=z,n={'CgByX':'Sessions\x20save','MRjZI':function(o,p){return o!==p;},'mBpQA':D(ab.j,'@!i*')};if(!sessions[j[D(ab.k,ab.l)]])sessions[j['_id']]={};sessions[j[D(ab.m,'mmB2')]][k]={'active':!![],'ip_address':l,'user_agent':m,'last_accessed':Date[D(ab.n,'#8^U')]()},n[D(ab.o,'V&A)')](process[D(ab.p,ab.q)][D(ab.r,ab.s)],n[D(0x131,ab.ac)])&&g[D(0x158,'39Xp')](D(ab.ad,ab.ae),JSON[D(ab.af,ab.ag)](sessions),o=>{const E=D;if(o)throw o;i['info'](n[E(0x12e,'V&A)')]);});};export const getId=j=>{const ac={j:0x10a,k:'ae%U',l:0x13e},F=z;return Object[F(ac.j,ac.k)](sessions)[F(ac.l,'mmB2')](k=>sessions[k][j]);};export const getUser=async j=>{const ae={j:'%ahF',k:'ye!I',l:0x111,m:0xf6,n:'WYor',o:0x145},G=z,k={'NHUNx':function(n,o){return n(o);},'AgXIv':G(0x118,ae.j)},l=k[G(0x12a,ae.j)](getId,j),m=sessions[l][k[G(0x113,ae.k)]];return{'_id':m[G(ae.l,'eEdE')],'email':m[G(ae.m,ae.n)],'first_name':m['first_name'],'last_name':m[G(ae.o,'ae%U')],'role':m['role']};};export const setUser=async(j,k)=>{const af={j:0x13b},H=z,l={'RqJqy':H(af.j,'#9PK')},m=getId(j);sessions[m][l[H(0xf9,'OrSc')]]=k;};export const removeSession=j=>{const ag={j:0x130,k:'ZK1j',l:0x13a},I=z,k=Object['keys'](sessions)[I(ag.j,ag.k)](l=>sessions[l][j]);if(k){const l=sessions[k][j];l&&(l[I(ag.l,'!!B^')]=![]);}};export default sessions;function f(a,b){const c=e();return f=function(d,g){d=d-0xed;let h=c[d];if(f['DQdcuq']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['aaCtnY']=m,a=arguments,f['DQdcuq']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['tTVtNn']===undefined&&(f['tTVtNn']=!![]),h=f['aaCtnY'](h,g),a[k]=h):h=l,h;},f(a,b);}function c(j){const aq={j:0x106,k:0x152,l:0x11c,m:'mmB2',n:0x105,o:'9drH'},ap={j:0x10c,k:0x100,l:'Bl*p',m:0x114,n:'dliE',o:'E)@R',p:0x127,q:'[V]$',r:0x112,s:'k045',aq:0x14c,ar:'XmPY',as:'X#te',at:0x132},J=z,k={'jZcnk':J(aq.j,'eEdE'),'QCfua':'counter','JDoGt':function(m,n){return m!==n;},'uKLBn':function(m,n){return m+n;},'irBpV':J(aq.k,'u858'),'FFSrz':function(m,n){return m===n;},'GMRIp':J(aq.l,aq.m),'HdYMR':J(aq.n,aq.o),'TqtFk':'stateObject','rrClT':function(m,n){return m(n);},'TITWd':function(m,n){return m(n);}};function l(m){const K=J;if(typeof m===K(ap.j,'fSkY'))return function(n){}[K(0x10d,'OrSc')](k['jZcnk'])[K(ap.k,ap.l)](k[K(0xee,'QV^8')]);else k[K(ap.m,ap.n)](k[K(0x13c,ap.o)]('',m/m)[k[K(ap.p,ap.q)]],0x1)||k[K(ap.r,'u)Q*')](m%0x14,0x0)?function(){return!![];}[K(0x143,'39Xp')](k[K(0x12c,'fSkY')]+'gger')['call'](K(0x148,ap.s)):function(){return![];}[K(0x15c,'k045')](K(ap.aq,ap.ar)+k['HdYMR'])[K(0x119,ap.as)](k[K(ap.at,'ye!I')]);k['rrClT'](l,++m);}try{if(j)return l;else k['TITWd'](l,0x0);}catch(m){}}
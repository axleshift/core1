import{R as u,r as o,j as r}from"./D3kDgYDB.js";import{R as h}from"./D0iU1EWp.js";import{V as x,a as g,b as E}from"./D0Vj9XiZ.js";import{E as P}from"./DYDFNPHr.js";import{d as v}from"./FDBtgKq2.js";import{c as w,C as R}from"./CRebGdRz.js";import"./CNSOrHVr.js";import"./WyM-ksIe.js";import"./dB90dn3U.js";import"./Dw8pycEM.js";import"./8JwjhRSi.js";import"./D3kAHpSt.js";import"./tpRZQFqq.js";import"./CzFDRTuY.js";import"./CQ-yZ3vu.js";import"./BmHAl9XU.js";import"./t_wxcTun.js";import"./DiDpq0UU.js";import"./CHUBTVDa.js";import"./CXnULsF_.js";import"./CCb-kr4I.js";import"./Cz0CWeBA.js";import"./Cp7XljvA.js";import"./BQBsAJpH.js";import"./CWmxXzlZ.js";import"./BZxJdD1U.js";const G=()=>{const p=v(),s=u.useRef(),[m,d]=o.useState(!0),[i,c]=o.useState(""),l=async n=>{const a=await s.current.executeAsync(),e=new FormData;e.append("type","github"),e.append("code",n),e.append("recaptcha_ref",a),await axios.post(`${g}/api/v1/auth/login`,e,{headers:{}}).then(t=>{if(t.data.error)return c(t.data.error);cookies.set(E,t.data.token,{expires:30}),window.location.href="/"}).catch(t=>{console.error(t);const f=P[t.status]||"An unexpected error occurred";c(f)}).finally(()=>d(!1))};return o.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("code");a||p("/"),l(a)},[]),r.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:[r.jsx("div",{className:"auth-bg"}),r.jsxs(w,{children:[m&&r.jsx("div",{className:"loading-overlay",children:r.jsx(R,{color:"primary",variant:"grow"})}),r.jsx(h,{ref:s,size:"invisible",sitekey:x}),r.jsx("p",{className:"text-center",children:i||"Processing github..."})]})]})};export{G as default};

import{R as e,r as s,j as a}from"./Oq9P1Wj_.js";import{F as t,N as i}from"./8eN9xtIw.js";import{Q as r}from"./Cl7qhzEd.js";import{h as n}from"./DxFnCsxZ.js";import{R as o}from"./eGqyD3ZN.js";import{a as c,c as m,V as l,b as d}from"./5NSyFHVX.js";import{S as p,C as h,a as j}from"./V71nd4vS.js";import{A as f}from"./CN0pkzBG.js";import{L as u}from"./BzOW44ZI.js";import{S as x}from"./BquOGouz.js";import{E as _}from"./BGB82IPO.js";import{d as g,k as b}from"./Ce_fjdqS.js";import{c as y,a as v,b as S,X as w,Y as D,Z as k,_ as C,p as N,$}from"./C7J1C3Pw.js";import"./deeEeel3.js";import"./NdsU5MZw.js";import"./BXWkExu4.js";import"./C5ktbw-a.js";import"./c0eKk1Db.js";import"./CewSaW8v.js";import"./DvQD94mg.js";import"./DhxmCZ7v.js";import"./BKB6Vojr.js";import"./CUvxBZEH.js";import"./CA9sZ-Z2.js";import"./YLYDLWv3.js";import"./BYNIthp4.js";import"./Dn-qDmp9.js";import"./XtWrBBVz.js";import"./BXEMiIsG.js";import"./B60PFSOe.js";import"./DoV6T4jL.js";import"./CDdQWEAe.js";import"./BqHrj3jM.js";const I=()=>{const I={shipper:{shipper_company_name:"",shipper_contact_name:"",shipper_contact_email_address:"",shipper_contact_phone_number:"",shipper_company_address:""},consignee:{consignee_company_name:"",consignee_contact_name:"",consignee_contact_email_address:"",consignee_contact_phone_number:"",consignee_company_address:""},shipment:{shipment_description:"",shipment_weight:"",shipment_dimension_length:"",shipment_dimension_width:"",shipment_dimension_height:"",shipment_volume:"",shipment_value:"",shipment_instructions:""},recaptcha_ref:""},R=e.useRef(),{addToast:A}=c(),[z,B]=s.useState(I),[E,O]=s.useState(I),[q,F]=s.useState(""),[L,P]=s.useState(!1),[Q,T]=s.useState(!0),[Y,H]=s.useState(!1),[J,K]=s.useState(!1),U=s.useRef(null),V=g(),{id:X}=b(),Z=(e,s)=>{const{id:a,value:t}=e.target;O((e=>({...e,[s]:{...e[s],[a]:t}})))};return s.useEffect((()=>{(async()=>{P(!0),await axios.get(`${l}/api/v1/freight/${X}`,{headers:{Authorization:`Bearer ${cookies.get(d)}`}}).then((e=>{F(e.data.data.type),B(e.data.data.data),O(e.data.data.data)})).catch((e=>{H(!0)})).finally((()=>P(!1)))})()}),[]),a.jsxs("div",{children:[L&&a.jsx("div",{className:"loading-overlay",children:a.jsx(y,{color:"primary",variant:"grow"})}),Y&&a.jsx(v,{className:"justify-content-center my-5",children:a.jsx(S,{md:6,children:a.jsxs("div",{className:"clearfix",children:[a.jsx("h1",{className:"float-start display-3 me-4",children:"OOPS"}),a.jsx("h4",{children:"There was no shipment found."}),a.jsx("p",{children:"Double check tracking id for any mistake."})]})})}),!Y&&a.jsxs(a.Fragment,{children:[J&&a.jsxs(w,{visible:"true",onClose:()=>K(!1),alignment:"center",scrollable:!0,children:[a.jsx(D,{closeButton:!0}),a.jsx(k,{children:a.jsx("div",{className:"d-flex justify-content-center align-items-center",ref:U,children:a.jsx(r,{value:X,className:"border border-4 rounded-2"})})}),a.jsx(C,{className:"d-flex justify-content-center align-items-center",children:a.jsx(N,{color:"primary",onClick:()=>{K(!1),n(U.current,{useCORS:!0}).then((e=>{const s=e.toDataURL("image/png"),a=document.createElement("a");a.href=s,a.download="qrcode.png",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},children:"Download"})})]}),a.jsx(o,{ref:R,size:"invisible",sitekey:m}),a.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between align-items-center mb-4",children:[a.jsxs("span",{className:"d-block",children:["#",X]}),a.jsxs($,{className:"mb-2 mb-sm-0",children:[a.jsx(N,{color:"primary",className:"me-2 rounded",onClick:e=>K(!0),children:a.jsx(t,{icon:i})}),a.jsx(N,{color:"primary",className:"me-2 rounded",onClick:async()=>{if(Q)return T(!1);P(!0);const e=await R.current.executeAsync(),s={...E,recaptcha_ref:e};await axios.post(`${l}/api/v1/freight/u/${q}/${X}`,s,{headers:{Authorization:`Bearer ${cookies.get(d)}`}}).then((e=>A("Your changes has been saved."))).catch((e=>{const s=_[e.status]||"Server is offline or restarting please wait";A(s,"Submit failed!"),O(z)})).finally((()=>{P(!1),T(!0)}))},children:Q?"Edit":"Save"}),a.jsx(N,{color:Q?"danger":"secondary",className:"me-2 rounded",onClick:async()=>{if(!Q)return T(!0),void O(z);P(!0);const e=await R.current.executeAsync();await axios.post(`${l}/api/v1/freight/d/${X}`,{recaptcha_ref:e},{headers:{Authorization:`Bearer ${cookies.get(d)}`}}).then((e=>{A("Shipment has been deleted."),V("/dashboard")})).catch((e=>{const s=_[e.status]||"Server is offline or restarting please wait";A(s,"Submit failed!"),O(z)})).finally((()=>P(!1)))},children:Q?"Delete":"Cancel"})]})]}),a.jsxs(v,{xs:{cols:1},sm:{cols:2},children:[a.jsx(S,{children:a.jsx(p,{isInfo:!0,formData:E,handleInputChange:Z,isDisabled:Q})}),a.jsx(S,{children:a.jsx(h,{isInfo:!0,formData:E,handleInputChange:Z,isDisabled:Q})})]}),a.jsxs(v,{xs:{cols:1},sm:{cols:2},children:[a.jsx(S,{children:a.jsx(j,{isInfo:!0,formData:E,handleInputChange:Z,isDisabled:Q})}),a.jsx(S,{children:(()=>{switch(q){case"air":return a.jsx(f,{isInfo:!0,formData:z,isDisabled:!0});case"land":return a.jsx(u,{isInfo:!0,formData:z,isDisabled:!0});case"sea":return a.jsx(x,{isInfo:!0,formData:z,isDisabled:!0});default:return null}})()})]})]})]})};export{I as default};

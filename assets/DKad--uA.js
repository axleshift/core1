import{r as e,R as s,j as a}from"./B29SdWEC.js";import{H as t}from"./CIAn0bGm.js";import{R as r}from"./Cri8ushB.js";import{F as i,V as l}from"./B1MQmI06.js";import{b as n,d as o}from"./CHlELPZp.js";import{k as c}from"./BFKNndIN.js";import{c as d,a as m,b as p,T as j,Q as u,R as h,ak as x,al as f,am as g,an as b,ao as v,ap as y,i as w,U as N,d as S,e as k,f as D,g as F}from"./CMmVygpm.js";import"./ucIcx5RQ.js";import"./E8MUDNEF.js";import"./BPg_iBjA.js";import"./Dcib5x9m.js";import"./07vdr7AR.js";import"./4RmQ9_ev.js";import"./CIdotNGq.js";import"./yJGO6Amu.js";import"./BIw_sdFo.js";import"./BjhGVRpM.js";import"./BFk34ZWe.js";import"./BmTZu7tj.js";import"./CxXfFpkk.js";import"./DPENoFOj.js";import"./Ba2eFa9Y.js";import"./B1ETHe3Q.js";import"./CjjZDEdp.js";import"./K-dupnmX.js";import"./CLdVYh6z.js";import"./DPAjA2jz.js";import"./fZjk1EK6.js";import"./BXEMiIsG.js";import"./Bb7MnDjl.js";import"./CA9thugF.js";import"./BPjVUy-D.js";import"./C_n0TLp5.js";import"./DYPlXUME.js";import"./BqHrj3jM.js";const C=()=>{const{id:C}=c(),[O,R]=e.useState(!0),{addToast:T}=n(),U=s.useRef(),[$,z]=e.useState(null),[A,P]=e.useState(null),[E,Q]=e.useState(null),[q,H]=e.useState(!1),[I,J]=e.useState(null);return e.useEffect((()=>{(async()=>{axios.get(`/documents/${C}`).then((e=>z(e.data.documents))).finally((()=>R(!1)))})()}),[]),O?a.jsx("div",{className:"loading-overlay",children:a.jsx(d,{color:"primary",variant:"grow"})}):$?a.jsxs(a.Fragment,{children:[a.jsx(t,{children:a.jsxs("title",{children:[C," - Documents | Axleshift"]})}),a.jsxs(j,{onSubmit:async e=>{e.preventDefault();const s=await U.current.executeAsync();R(!0);const a=new FormData;a.append("exportLicense",A),a.append("certificateOfOrigin",E),a.append("recaptcha_ref",s),axios.post(`/documents/${C}/upload`,a,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{z(e.data),T("Documents uploaded successfully!","success")})).catch((e=>{var s,a;const t=(null==(a=null==(s=e.response)?void 0:s.data)?void 0:a.error)||("network error"===e.message?"Server is offline or restarting please wait":e.message);T(t,"danger")})).finally((()=>R(!1)))},children:[a.jsx("h2",{children:"Upload Documents"}),a.jsx("span",{className:"text-muted",children:C}),a.jsx(u,{className:"mt-2 mb-3",children:a.jsxs(h,{children:[a.jsxs(x,{stripedColumns:!0,hover:!0,responsive:!0,className:"table-even-width",children:[a.jsx(f,{children:a.jsxs(g,{children:[a.jsx(b,{className:"text-uppercase fw-bold text-muted poppins-regular table-header-cell-no-wrap",children:"Document Name"}),a.jsx(b,{className:"text-uppercase fw-bold text-muted poppins-regular table-header-cell-no-wrap",children:"Type"}),a.jsx(b,{className:"text-uppercase fw-bold text-muted poppins-regular table-header-cell-no-wrap",children:"Status"}),a.jsx(b,{className:"text-uppercase fw-bold text-muted poppins-regular table-header-cell-no-wrap",children:"Upload"})]})}),a.jsx(v,{children:$.map(((e,s)=>a.jsxs(g,{children:[a.jsxs(y,{children:[a.jsx("span",{className:"d-block",children:e.name}),a.jsxs(w,{color:"primary",size:"sm",variant:"ghost",onClick:s=>{return a=C,t=e.file.file,H(!0),void axios.post(`/documents/file/${a}`,{file:t}).then((e=>{if(e.data.error)return T(e.data.error);J(e.data)})).catch((e=>{var s,a;const t=(null==(a=null==(s=e.response)?void 0:s.data)?void 0:a.error)||("network error"===e.message?"Server is offline or restarting please wait":e.message);T(t)})).finally((()=>R(!1)));var a,t},children:[a.jsx(i,{icon:l,className:"me-1"})," ","Open File"]})]}),a.jsx(y,{children:e.type}),a.jsx(y,{className:"text-capitalize",children:a.jsx("span",{className:"badge bg-"+("approved"===e.status?"success":"rejected"===e.status?"danger":"warning"),children:e.status})}),a.jsx(y,{children:e.file&&"rejected"!==e.status?e.file.file:a.jsxs(a.Fragment,{children:[a.jsx(N,{type:"file",onChange:e=>((e,s)=>{const a=e.target.files[0];if(a){const e=[...$];e[s]={...e[s],status:"Under Review"},z(e),0===s&&P(a),1===s&&Q(a)}})(e,s)}),e.file&&a.jsx("span",{className:"text-danger text-decoration-line-through",children:e.file.file})]})})]},s)))})]}),a.jsx("span",{className:"d-block mb-2 small",children:"Please ensure that the documents you upload are authentic and not counterfeit. Uploading fraudulent documents may result in legal consequences."}),a.jsx(w,{color:"primary",type:"submit",children:"Submit Documents"}),a.jsx(r,{ref:U,size:"invisible",sitekey:o})]})})]}),a.jsxs(S,{alignment:"center",scrollable:!0,fullscreen:"sm",visible:q,onClose:()=>H(!1),"aria-labelledby":"M",children:[a.jsx(k,{children:a.jsx(D,{children:null==I?void 0:I.file})}),a.jsx(F,{children:"docx"===(null==I?void 0:I.fileFormat)?a.jsx("iframe",{src:`https://view.officeapps.live.com/op/embed.aspx?src=${I.url}`,style:{width:"100%",height:"400px",border:"none"}}):a.jsx("iframe",{src:I.url,style:{width:"100%",height:"400px",border:"none"}})})]})]}):a.jsx(m,{className:"justify-content-center my-5",children:a.jsx(p,{md:6,children:a.jsxs("div",{className:"clearfix",children:[a.jsx("h1",{className:"float-start display-3 me-4 text-danger",children:"OOPS"}),a.jsx("h4",{children:"There was no shipment documents found."}),a.jsx("p",{children:"Double check tracking number for any mistake."})]})})})};export{C as default};

const G=f;(function(m,n){const P={m:'3I76',n:0x196,o:'a6PV',p:0x207,q:'6!Sc',r:0x17e,s:'q1%G',t:0x1eb,u:'FFhn'},z=f,o=m();while(!![]){try{const p=parseInt(z(0x16c,P.m))/0x1+parseInt(z(P.n,P.o))/0x2*(parseInt(z(P.p,P.q))/0x3)+-parseInt(z(0x16a,'S8ue'))/0x4*(-parseInt(z(0x1c8,'FFhn'))/0x5)+-parseInt(z(0x205,'2SZy'))/0x6+parseInt(z(0x201,'X3#$'))/0x7*(-parseInt(z(0x216,'VZ0O'))/0x8)+-parseInt(z(P.r,P.s))/0x9+parseInt(z(P.t,P.u))/0xa*(-parseInt(z(0x1dc,'Un5V'))/0xb);if(p===n)break;else o['push'](o['shift']());}catch(q){o['push'](o['shift']());}}}(e,0xbc871));const d=(function(){let m=!![];return function(n,o){const Q={m:0x1e9,n:'eHel'},p=m?function(){const A=f;if(o){const q=o[A(Q.m,Q.n)](n,arguments);return o=null,q;}}:function(){};return m=![],p;};}());(function(){const Z={m:'i^XJ',n:0x19e,o:'X3#$',p:'f2Xi',q:0x1c2},Y={m:'E5XQ',n:0x218,o:'D$%Q',p:'S8ue',q:'W0Xe',r:'wd&f'},B=f,m={'qyKvc':B(0x1ab,'r&jU'),'BZFUW':B(0x17b,Z.m),'adSpG':function(n,o){return n(o);},'PqEoQ':B(Z.n,Z.o),'NdfBW':function(n,o){return n+o;},'Hfhsv':B(0x193,Z.p),'cIfsQ':function(n,o){return n(o);},'tcbiL':function(n,o,p){return n(o,p);}};m[B(Z.q,'i^XJ')](d,this,function(){const C=B,n=new RegExp(m[C(0x1af,Y.m)]),o=new RegExp(m[C(0x1fc,'d]%T')],'i'),p=m[C(0x17f,'D$%Q')](c,m['PqEoQ']);!n['test'](p+C(Y.n,Y.o))||!o[C(0x21c,'eHel')](m[C(0x1c7,Y.p)](p,m[C(0x1ca,Y.q)]))?m[C(0x188,Y.r)](p,'0'):c();})();}());const b=(function(){let m=!![];return function(n,o){const p=m?function(){const D=f;if(o){const q=o[D(0x20d,'ARqJ')](n,arguments);return o=null,q;}}:function(){};return m=![],p;};}()),a=b(this,function(){const a8={m:0x215,n:'f2Xi',o:0x189,p:'AGM0',q:0x17c,r:'Un5V',s:'ZbHa',t:0x176,u:0x1d6,v:0x1a6,w:'d]%T',x:'W0Xe',y:0x1ad,a9:'W0Xe',aa:'HZXf',ab:0x217,ac:0x1a2,ad:0x1d3},a7={m:0x177,n:'4(N9',o:0x18e,p:'i^XJ'},E=f,m={'bWUgg':function(r,s){return r(s);},'acTos':E(0x194,'f2Xi'),'DHYor':E(a8.m,'f2Xi'),'lXIgz':function(r){return r();},'DUVal':E(0x19c,a8.n),'RJiCD':E(a8.o,a8.p),'Dlmde':'info','qvLKo':E(a8.q,a8.r),'LlfSK':E(0x1bc,a8.s),'rIGjU':E(0x18c,'i^XJ'),'VqVfd':E(a8.t,'q1%G'),'IIIFi':function(r,s){return r<s;}},n=function(){const F=E;let r;try{r=m['bWUgg'](Function,m[F(a7.m,a7.n)]+m[F(a7.o,a7.p)]+');')();}catch(s){r=window;}return r;},o=m['lXIgz'](n),p=o[E(0x1ef,'LuZg')]=o['console']||{},q=[m[E(a8.u,'HZXf')],m[E(a8.v,a8.w)],m['Dlmde'],m[E(0x16f,'z$!o')],m[E(0x19b,a8.x)],m['rIGjU'],m[E(0x1f9,'De)X')]];for(let r=0x0;m['IIIFi'](r,q['length']);r++){const s=b[E(a8.y,a8.a9)][E(0x1b3,a8.aa)][E(a8.ab,'4rfA')](b),t=q[r],u=p[t]||s;s['__proto__']=b[E(a8.ac,'osFs')](b),s[E(a8.ad,'%xoP')]=u['toString'][E(0x1ea,'!a*3')](u),p[t]=s;}});a();import g from'dotenv';g[G(0x1ac,'l2TK')]();function f(a,b){const c=e();return f=function(d,g){d=d-0x166;let h=c[d];if(f['koICfG']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['FnuqHb']=m,a=arguments,f['koICfG']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['fpMTel']===undefined&&(f['fpMTel']=!![]),h=f['FnuqHb'](h,g),a[k]=h):h=l,h;},f(a,b);}import{ObjectId}from'mongodb';import h from'express';import i from'../../src/logger.js';import j from'../../models/db.js';import k from'../../middleware/auth.js';import l from'../../middleware/recaptcha.js';import{getUser}from'../../src/sessions.js';const router=h[G(0x172,'ARqJ')](),limit=0x14;function e(){const aH=['imo/W4JdI8kM','W6jsFhFdKG','gcFdJtij','vSk/WRuqoq','EIhdVMjGW7VdJmkJWQaCgX/cVmkcuG','WRrCWOFcVCo7WO4GWQRcMConWOPRvmkok8o7','WRJdMJhdOGyI','bgxdIGXqW4RcRrydDmkm','BcRdO2DQWRu','rmolWPvruq','WPVdLaRdQG','W5iSC8oeC8oXW4dcRYqWrW','cXZdKbS','WRq3W4eHW7pcKSoenCoX','WQzgWQJcRmo9WOy2','tmoKiCo9W6ji','xxZdTrSGiSo3W7u','x8o2z8owbNa','tHtdRGRcTW','W7VdR8o0n8kt','vmocWQ5lsW','p35ZWQ4','f2BcUuqKl8oUW78p','xmkpwaqT','bSoIgG','pIFdTW4','cbJdJb7dVSo9','o2nYWR7dI2FcVW','dbRdNbBdNW','W6T/W4CX','W47dHbxcPCo3','amoOq2W','eKe8W4NdUq','p11GW4xcPW','WQ18dCkgz2dcRmoFW4bBWOKMbq','WRqWeCkikY3dQCopWPGUWQSn','l2ZdJaXs','rhbWwry','WQ1EmWec','W4n6ECo2eG','AZVdSMDIWRpcKa','WPRdLbtdUW','omkbvmob','x3reW5ddIG','WQhcRmk7','oq3dRZW9fMqH','W7L/vhNdMG','uSk/WQ0b','WOaqW7G0W7a','W40iW5C0','W4X7zmo3','tSoTySoB','W6GQW4m0wG','fmo/csRdHe8','r8k6gdexBYXsWQyJcG','WRzZWPeNzfBdPG','W6ORW5NcPmohW48sW5FdVG','qY/dQLCvlCoYW4Cu','CY9UW7RcLq','axxcS1e','W6BdMmo2nmkx','W7ZdSCk5uJ/cGs3cR8o5W7mk','W5WtW5i5wxm','uCk1WRar','W6RcGq3dLHGFbY4','W6ZcJmkPW64','k2CAW43dHCod','WOVcHSoBF8om','p3H5WRm','WQP0dSoehIldRmo9W4i','fbddKXBdPW','W5ftW5NdSCoT','WOiUW4JcKW','smkXxqexoJi','W4DKW4xdUSoq','W6tdKCkdASkOomkgWQi9b8kkymk5','vsFdLZy','WPVdJXNdQJHh','t8oGpCo4','WRfOWReHy0q','qsxdNca','w21GDqxcVW','WQv4WOlcQmoA','mCo6pJJdLq','fmoCW4/dRa','yCoDimki','mmoVW6FdNCk1','WOXKmsCCeaJdUq','lHmHjWSN','jJVdQqWNW4y','W7aGW4tcPq','W4/dSCknA8oitWxdOW','ySoijSkzW6m4','fCoqW5u','W4pdPWVcP8oqj8otW5FdGKxcOZ4/ka','WOv6kCkbn8kZWOhcGqOPyHvN','W5e+zN5DtvtdU8oeB8khW5VdTG','WQVcQSoJfh/dIMhcVCohW6KWWQZcKW','smkJWReB','W7O1tSoEjG','wNvPuau','WQddJ8ktW4pcVW','W57dQmoulmkTfa','WQnSWQa5BW','gIWknaO','WO/dSmkJhmkN','W7dcI8kxW6yK','W449ECoOfq','vsFdJrVcMWLgvNhdOCk8','W6GXx8ogkIC','uZpcKeKuWOJdRdGTBCkPeSkK','W6tcLmoPW6KNmIG3W4tcIwLEW5CksdeoWQnRW5H6WQhcTmowWQueWPrBW5RdKelcNa','WQu1aqpcQIecm8o9c8oMW4tcHW','qmk5WRar','W4vGASoWdG','WR5mWOFcUCo7WO8','WR3dHZRdRqGTja','kqGRnHa','WP7cK8oyzW','WONcVWq+W55G','W7/dHSorpCkw','WP0FW6CkvehdNa','W7NdRmkYscZcMYW','WQNdKmo0WR5WAg42W4hcS0fLW5q','pGGSpXS3yZJcQxS','rvXYW6tcGSk4gG','bbNdOs4F','BLj3AKLJwbxcQf/cTZ4','ldFdQq8','W7jOwL7dVxzokSoAjW','WORdQCkemSkM','otVdQq8','AsZdU2TXWR7cQ8k5WRC','WPbZWQuHC0u','h8kIDCo9W4u','hvXOW6dcHmkH','swnx','l1JdMCo5WO8','W5fuW6ddT8oW','naKJpWSWCIi','WQfDWOJcQSo6WPq','tNbVzq','jfldOLtcS8kKENOCWORcHwehzx5MW6GmWQxcSJddP8otxZ3cJmodnSkDW7ZdG1C7ia','fSo/x2Ds','f2VdLH5jW4S','BXZcI8kPW55YumoShSo5W4VcLCkc','W4DSwmoPjW','W5zfW5hdSCoKxx0','yZXI','pGGUiaOMyJlcSNRcHG','p8kluCoaW4i','WP7dRCk6fSk7','DNnCW7VdSG','W6r3uxVdRG','t8oXmSoOW7Pi','xmoaj8kPWPO','x3HZBW','mYSRpY0','WRxcN8op','dbJdNbpdTG','uCkKWR8biMS','pdhdPXddOq','bvzhW7xcGSkOkW','grddJa','ymopumobaq','fg/dIHS','W7BcH8k3W788','W63cJmkZW786mNTRW5dcIwrjW4Wrd31uW68/','sIpdLZy','i8oee8kQW64kWQa','W4byW4FdRa','wmk7xry','w3XVzq','fhFcTeu','k2BdGIXV','W7pcHSkG','swnyW5S','WPFcQ8k2tq','aLXOW6m','f8oQgJ/dNe8','pCo+xgfJ','CJbTW5O','W5WtW4eKqMC','W4RdT8oOcmkniwRdISk4W4VcSwFdKa','W5P4WPpdJSkiDYhdTCoHvSoC'];e=function(){return aH;};return e();}router[G(0x197,'4(N9')]('/',k,async(m,n)=>{const ae={m:0x180,n:0x1ed,o:0x1f8,p:0x1a9,q:'4rfA',r:'LuZg',s:0x1fb,t:'FFhn',u:0x210,v:'f2Xi',w:0x204,x:'%hbw',y:0x17a,af:0x1e0,ag:0x1a8,ah:'%xoP',ai:'ZbHa',aj:0x18f,ak:'S8ue',al:0x1f3,am:'!MNc'},H=G,o={'wQkvU':function(p,q){return p(q);},'UxGZJ':function(p,q){return p*q;},'obPll':function(p,q){return p-q;},'oiNWf':H(ae.m,'4(N9'),'cvmDo':function(p,q){return p!==q;},'UEqzF':H(ae.n,'4(N9'),'GMpyv':function(p,q){return p/q;}};try{const p=await o[H(ae.o,'r&jU')](getUser,m[H(ae.p,ae.q)]),q=o[H(0x1bd,ae.r)](parseInt,m[H(0x1bb,'!a*3')][H(ae.s,'a6PV')])||0x1,r=o[H(0x211,ae.t)](o[H(ae.u,ae.v)](q,0x1),limit),s=await j(),t=s['collection'](o['oiNWf']),u=await t[H(ae.w,ae.x)]({'user_id':new ObjectId(p[H(0x18b,'eHel')])}),v=await t[H(ae.y,'AGM0')](o[H(ae.af,'osFs')](p['role'],o[H(ae.ag,ae.ah)])?{'user_id':new ObjectId(p['_id'])}:{})[H(0x1b0,'FuMt')]({'created_at':-0x1})[H(0x1e1,ae.ai)](r)[H(0x1ec,'i^XJ')](limit)[H(ae.aj,ae.ak)]();return n[H(0x1fe,'3I76')](0xc8)[H(0x1d8,'D$%Q')]({'data':v,'totalPages':Math['ceil'](o[H(0x1da,'DlbL')](u,limit)),'currentPage':q});}catch(w){i[H(0x184,'z$!o')](w);}return n[H(ae.al,'FuMt')](0x1f4)[H(0x1d0,ae.am)]();}),router[G(0x203,'d]%T')](G(0x1c3,'HZXf'),k,async(m,n)=>{const ah={m:0x17d,n:'W0Xe',o:0x1e4,p:'DlbL',q:0x1a1,r:0x1cf,s:'S8ue',t:0x1b7,u:'i2Lk',v:0x208,w:0x1f7,x:'AGM0',y:'Un5V'},I=G,o={'moWUq':function(p,q){return p(q);},'NsqiC':function(p){return p();},'GEyxt':'admin','upgIv':I(0x167,'6!Sc')};try{const p=await o['moWUq'](getUser,m['token']),q=m[I(ah.m,ah.n)]['id'];if(!q)return n[I(ah.o,ah.p)](0x190)['send']();const r=await o[I(ah.q,'Un5V')](j),s=p[I(ah.r,'FuMt')]!==o['GEyxt']?{'user_id':new ObjectId(p['_id']),'_id':new ObjectId(q)}:{'_id':new ObjectId(q)},t=await r[I(0x169,'3I76')](o[I(0x186,'VZ0O')])[I(0x19a,'ZbHa')](s)['toArray']();if(!t[I(0x174,ah.s)])return n[I(ah.t,ah.u)](0x194)[I(0x1f2,'ol8t')]();return n[I(0x1e8,'IBLq')](0xc8)[I(ah.v,'4rfA')]({'data':t});}catch(u){i['error'](u);}return n[I(ah.w,ah.x)](0x1f4)[I(0x1c5,ah.y)]();}),router[G(0x1d5,'4rfA')](G(0x1b6,'ZbHa'),k,async(m,n)=>{const al={m:0x175,n:'^lK5',o:0x1a0,p:0x1bf,q:0x179,r:'r&jU',s:0x1be,t:'a*Zv',u:0x185,v:0x1f3,w:'FuMt',x:0x1cc,y:0x20f,am:'z$!o',an:0x1de,ao:0x18d,ap:0x187},J=G,o={'qPsom':function(p,q){return p||q;},'LujDJ':J(al.m,al.n),'HTaJk':function(p,q){return p(q);},'MBCrL':function(p){return p();},'XHeNW':J(0x1ce,'i[W9')};try{const {shipper:p,consignee:q,shipment:r,shipping:s}=m[J(0x1d7,'DlbL')],t=m[J(al.o,'De)X')][J(al.p,'q%x#')];if(o['qPsom'](!p,!q)||!r||!t||!s)return n[J(al.q,al.r)](0x190)[J(0x1b2,'i^XJ')]();if(![J(al.s,'De)X'),J(0x1ee,al.t),o[J(al.u,'^lK5')]][J(0x1fd,'(F@B')](t))return n[J(al.v,al.w)](0x190)[J(0x1e5,'4rfA')]();const u=await o[J(al.x,'(F@B')](getUser,m[J(al.y,al.am)]),v=await o['MBCrL'](j);return await v['collection'](o['XHeNW'])[J(al.an,'ah0w')]({'user_id':u[J(0x1d2,'X3#$')],'data':{'shipper':p,'consignee':q,'shipment':r,'shipping':s},'type':t,'created_at':new Date(),'updated_at':new Date()}),n[J(al.ao,'4rfA')](0xc9)[J(0x19d,al.n)]();}catch(w){i[J(0x1d1,'^lK5')](w);}return n[J(al.ap,'y[D#')](0x1f4)['send']();}),router['post'](G(0x1c9,'FFhn'),k,async(m,n)=>{const ao={m:0x190,n:0x195,o:'i2Lk',p:0x1b5,q:0x21d,r:0x191,s:'i2Lk',t:'8Imo',u:0x181,v:'osFs',w:0x20c,x:'CeGV',y:0x19f,ap:0x1c6,aq:'IBLq',ar:'3I76',as:0x1d4,at:'VZ0O',au:0x21a,av:'l2TK',aw:0x1fa,ax:'d]%T',ay:'ARqJ',az:'q%x#',aA:0x1b7,aB:0x1db,aC:0x200,aD:0x1f5},K=G,o={'LMVcr':K(ao.m,'i^XJ'),'uteNn':K(ao.n,'ol8t'),'JRGpI':function(p,q){return p(q);},'hxbKB':function(p){return p();}};try{const {shipper:p,consignee:q,shipment:r}=m[K(0x1d9,ao.o)],{type:s,id:t}=m[K(ao.p,'y[D#')];if(!p||!q||!r)return n[K(ao.q,'BPX0')](0x190)[K(0x198,'LuZg')]();if(![o[K(ao.r,ao.s)],o[K(0x20b,ao.t)],K(ao.u,ao.v)][K(0x178,'3I76')](s))return n[K(ao.w,ao.x)](0x190)[K(ao.y,'S8ue')]();const u=await o[K(ao.ap,ao.aq)](getUser,m[K(0x21b,ao.ar)]),v=await o[K(ao.as,ao.at)](j),w=v[K(0x16e,'VZ0O')](K(ao.au,ao.av)),x=await w[K(ao.aw,ao.ax)]({'user_id':new ObjectId(u['_id']),'_id':new ObjectId(t)})[K(0x1dd,ao.ay)]();if(!x[K(0x1ff,ao.az)])return n[K(ao.aA,'i2Lk')](0x194)[K(0x170,ao.az)]();return await w['updateOne']({'_id':new ObjectId(t)},{'$set':{'data.shipper':p,'data.consignee':q,'data.shipment':r,'updated_at':new Date()}}),n[K(ao.aB,'De)X')](0xc8)[K(ao.aC,'ah0w')]();}catch(y){i[K(0x1cd,'D$%Q')](y);}return n[K(ao.aD,'ARqJ')](0x1f4)[K(0x199,'AGM0')]();}),router['post']('/d/:id',k,async(m,n)=>{const ar={m:'i^XJ',n:0x1c1,o:0x16d,p:0x1b4,q:'r&jU',r:0x219,s:0x1b7,t:'W0Xe',u:'i[W9',v:0x202,w:0x1f4,x:'y[D#',y:0x213,as:0x1e7},L=G,o={'EeZQN':function(p,q){return p(q);},'TFOXi':function(p){return p();}};try{const p=m[L(0x1c0,ar.m)]['id'],q=await o['EeZQN'](getUser,m[L(0x183,'!MNc')]),r=await o[L(0x173,'!MNc')](j),s=r['collection'](L(ar.n,'!a*3')),t=await s[L(ar.o,'q%x#')]({'user_id':new ObjectId(q['_id']),'_id':new ObjectId(p)})[L(ar.p,ar.q)]();if(!t[L(ar.r,'r&jU')])return n[L(ar.s,'i2Lk')](0x194)[L(0x192,ar.t)]();return await s[L(0x171,ar.u)]({'_id':new ObjectId(p)}),n[L(ar.v,'a6PV')](0xc8)[L(ar.w,ar.x)]();}catch(u){i[L(0x184,'z$!o')](u);}return n[L(ar.y,'FFhn')](0x1f4)[L(ar.as,'f2Xi')]();});export default router;(function(){const av={m:0x1e2,n:0x16b,o:0x212,p:'ol8t'},M=G,m={'KDClO':function(o,p){return o(p);},'NGfEL':function(o,p){return o+p;},'qdvKb':'return\x20(function()\x20','iYBRC':function(o){return o();}};let n;try{const o=m[M(av.m,'CeGV')](Function,m[M(av.n,'q%x#')](m['qdvKb'],'{}.constructor(\x22return\x20this\x22)(\x20)')+');');n=m['iYBRC'](o);}catch(p){n=window;}n[M(av.o,av.p)](c,0x9c4);}());function c(m){const aG={m:'DlbL',n:0x1ae},aF={m:'3I76',n:'i[W9',o:'E5XQ',p:0x20e,q:0x1f0,r:'AGM0',s:0x1e3,t:'%hbw',u:0x1b1,v:0x1a7,w:'VZ0O',x:'3I76',y:'CeGV',aG:0x209,aH:'FFhn'},N=G,n={'gPsib':function(p,q){return p===q;},'VsAoK':N(0x1a3,aG.m),'GKJgt':'counter','wSqbS':function(p,q){return p!==q;},'liqXf':function(p,q){return p/q;},'sUJEJ':function(p,q){return p+q;},'nLklS':'debu','mjFaO':N(aG.n,'i[W9'),'RZdeN':'gger','hVWXB':'stateObject','rlhQu':function(p,q){return p(q);},'WkBXC':function(p,q){return p(q);}};function o(p){const O=N;if(n['gPsib'](typeof p,n[O(0x1b9,'CeGV')]))return function(q){}[O(0x182,aF.m)](O(0x1aa,aF.n))[O(0x1ba,aF.o)](n[O(aF.p,'3I76')]);else n[O(aF.q,'4(N9')]((''+n[O(0x1cb,aF.r)](p,p))['length'],0x1)||p%0x14===0x0?function(){return!![];}[O(aF.s,'6!Sc')](n['sUJEJ'](n[O(0x1c4,aF.t)],O(0x1f6,'ol8t')))['call'](n['mjFaO']):function(){return![];}[O(aF.u,'2SZy')](n[O(aF.v,aF.w)](n[O(0x18a,aF.x)],n[O(0x21e,aF.y)]))[O(aF.aG,aF.aH)](n[O(0x1b8,'ol8t')]);n[O(0x20a,'AGM0')](o,++p);}try{if(m)return o;else n['WkBXC'](o,0x0);}catch(p){}}
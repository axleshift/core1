import{R as s,r,j as t}from"./kqbr3HuW.js";import{R as o}from"./Cn6opJBz.js";import{b as e,V as i,c as a}from"./DzpMfFJN.js";import{E as m}from"./URk2IvX2.js";import{d as c}from"./DFarnK1O.js";import{c as p,C as j}from"./DNgB2NZJ.js";import"./BgRKNlhe.js";import"./CgN-7aKy.js";import"./BSjYzxj3.js";import"./BJ13bZ6b.js";import"./c0eKk1Db.js";import"./uhX4GmSj.js";import"./oXqQd4Ap.js";import"./CQYGjB7w.js";import"./DbzcfNKS.js";import"./BGKE3O6B.js";import"./DJeUPDeV.js";import"./B0UoamS-.js";import"./HSznFPq-.js";import"./omosduih.js";import"./D3yCfJ5s.js";import"./BXEMiIsG.js";import"./B60PFSOe.js";import"./DoV6T4jL.js";import"./CJ2-25UQ.js";import"./BqHrj3jM.js";const n=()=>{const n=c(),l=s.useRef(),[d,f]=r.useState(!0),[h,x]=r.useState("");return r.useEffect((()=>{const s=new URLSearchParams(window.location.search).get("code");s||n("/"),(async s=>{const r=await l.current.executeAsync();await axios.post(`${i}/api/v1/auth/login`,{type:"github",code:s,recaptcha_ref:r},{headers:{}}).then((s=>{if(s.data.error)return x(s.data.error);cookies.set(a,s.data.token,{expires:30}),window.location.href="/"})).catch((s=>{console.error(s);const r=m[s.status]||"Internal Application Error";x(r)})).finally((()=>f(!1)))})(s)}),[]),t.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:[t.jsx("div",{className:"auth-bg"}),t.jsxs(p,{children:[d&&t.jsx("div",{className:"loading-overlay",children:t.jsx(j,{color:"primary",variant:"grow"})}),t.jsx(o,{ref:l,size:"invisible",sitekey:e}),t.jsx("p",{className:"text-center",children:h||"Processing..."})]})]})};export{n as default};

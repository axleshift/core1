import{r as n,j as t}from"./BfF3Wqld.js";import{F as v,x as w}from"./B1Gr_3bD.js";import"./BT8GUUf_.js";import{i as b,g as C,c as N,o as M,q as D,a as I,b as R}from"./tEDvo0RF.js";import{P as E}from"./CnpJVEP9.js";import{p as P}from"./Ced3TTKs.js";import{P as S,R as B,y as c,a3 as F,O as K}from"./793Z3r2W.js";import"./DnfDba0r.js";import"./BGpjnhzs.js";import"./BXWtuYvb.js";import"./D3goV2Zm.js";import"./CJGb7kgi.js";import"./BQBsAJpH.js";import"./DLZ1bwg6.js";import"./CzFDRTuY.js";import"./CWmxXzlZ.js";import"./BZxJdD1U.js";const k={apiKey:"test",authDomain:"test",projectId:"test",storageBucket:"test",messagingSenderId:void 0,appId:"test",measurementId:"test"},A=b(k);let T=C(A);const te=()=>{const[l,x]=n.useState([]),[o,i]=n.useState(""),m=n.useRef(null),[f,d]=n.useState(1),u=N(T,"messages"),r=E();n.useEffect(()=>{const e=M(D(u,I("timestamp")),s=>{const a=s.docs.map(h=>({id:h.id,...h.data()}));x(a)});return()=>e()},[]),n.useEffect(()=>{m.current&&m.current.scrollIntoView({behavior:"smooth"})},[l]);const g=e=>{if(e.key==="Enter"){if(e.shiftKey){i(s=>s+`
`),d(s=>Math.min(s+1,4)),e.preventDefault();return}p(),e.preventDefault()}},p=async()=>{o.trim()!==""&&(await R(u,{text:o,sender:r.role,timestamp:Date.now()}),i(""),d(1))},j=e=>{const s=e.target.value;i(s);const a=Math.max(1,(s.match(/\n/g)||[]).length+1);d(Math.min(a,4))},y=e=>e.split(`
`).map((s,a)=>t.jsxs("span",{children:[s,a<e.split(`
`).length-1&&t.jsx("br",{})]},a));return t.jsx("div",{children:t.jsx("div",{className:"row d-flex justify-content-center mx-0 mb-4",children:t.jsxs(S,{style:{height:"78vh",overflow:"hidden",padding:"0px"},children:[t.jsxs(B,{style:{position:"relative",height:"100vh",overflow:"auto"},children:[l.map((e,s)=>t.jsxs("div",{className:`d-flex flex-row ${e.sender===(r.role==="user"?"admin":"user")?"justify-content-start":"justify-content-end"}`,children:[e.sender===(r.role==="admin"?"user":"admin")&&t.jsx(c,{className:"rounded-5 me-2",src:"https://avatars.githubusercontent.com/u/62317165?v=4",style:{width:"45px",height:"100%"}}),t.jsxs("div",{children:[t.jsx("p",{className:`small p-2 mb-1 rounded ${e.sender!==(r.role==="user"?"user":"admin")?"bg-primary text-white me-3":"bg-body-tertiary ms-3"}`,children:y(e.text)}),t.jsx("p",{className:`small ms-3 mb-3 text-muted ${e.sender===(r.role==="user"?"user":"admin")?"me-3":""}`,children:P(e.timestamp)})]}),e.sender===(r.role==="user"?"user":"admin")&&t.jsx(c,{className:"rounded-5 ms-2",src:"https://avatars.githubusercontent.com/u/62317165?v=4",style:{width:"45px",height:"100%"}})]},s)),t.jsx("div",{ref:m})]}),t.jsxs("div",{className:"card-footer text-muted d-flex justify-content-start align-items-center p-3 gap-2",children:[t.jsx("div",{children:t.jsx(c,{className:"me-2 rounded-5",src:"https://avatars.githubusercontent.com/u/62317165?v=4",style:{width:"40px",height:"100%"}})}),t.jsx(F,{value:o,onChange:e=>j(e),onKeyDown:g,rows:f,style:{resize:"none"}}),t.jsx(K,{type:"submit",color:"primary",className:"me-2 rounded",onClick:p,children:t.jsx(v,{icon:w})})]})]})})})};export{te as default};

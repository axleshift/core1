import{r as i,j as e}from"./D3kDgYDB.js";import{u as k}from"./Bv4Vl2S4.js";import{j as v}from"./DlgDwcFH.js";import{F as D,I as w}from"./3V3OsIEt.js";import{d as N}from"./o5tV6Bm-.js";import{C as y,D as S,E as l,y as g,K as E,L as F,M as p,N as R,P as T,am as A,O as G}from"./J7VLuUCh.js";import"./CNSOrHVr.js";import"./WyM-ksIe.js";import"./CXMWl7-x.js";import"./Bp8WaWe4.js";import"./-H1_u311.js";import"./CWoBZRFf.js";import"./BQBsAJpH.js";import"./tpRZQFqq.js";import"./CzFDRTuY.js";import"./DRFurTTo.js";import"./BZxJdD1U.js";const Z=()=>{const[n,c]=i.useState(""),[r,x]=i.useState(null),[h,d]=i.useState(!1),m=N(),u=t=>{const a=t[0];if(a){const s=new FileReader;s.onloadend=()=>{x(s.result)},s.readAsDataURL(a)}},{getRootProps:j,getInputProps:f}=k({onDrop:u,accept:"image/*"}),C=()=>{m(`/track/${n}`)},I=()=>{if(!r)return;const t=document.createElement("img");t.src=r,t.onload=()=>{const a=document.createElement("canvas"),s=a.getContext("2d");a.width=t.width,a.height=t.height,s.drawImage(t,0,0);const b=s.getImageData(0,0,a.width,a.height),o=v(b.data,a.width,a.height);if(!o)return alert("No QR code found.");c(o.data),d(!0),setTimeout(()=>{d(!1),m(`/track/${o.data}`)},2e3)}};return e.jsxs("div",{children:[h&&e.jsx("div",{className:"loading-overlay",children:e.jsx(y,{color:"primary",variant:"grow"})}),e.jsxs(S,{children:[e.jsx(l,{xs:3,className:"image-container d-none d-md-flex",children:e.jsx(g,{fluid:!0,rounded:!0,src:"/images/freight-track.jpg",className:"custom-image"})}),e.jsxs(l,{md:7,className:"mb-4",children:[e.jsx("h1",{children:"Enter Tracking ID"}),e.jsx(E,{className:"mb-3",onSubmit:C,children:e.jsxs(F,{children:[e.jsx(p,{"aria-label":"tracking id","aria-describedby":"basic-addon",value:n,onChange:t=>c(t.target.value)}),e.jsx(R,{id:"basic-addon",children:e.jsx(D,{icon:w})})]})}),e.jsxs("div",{children:[e.jsxs(T,{className:"d-inline-block",...j(),style:{border:"2px dashed #3498db",padding:"20px",textAlign:"center"},children:[e.jsx(p,{...f()}),!r&&e.jsxs(e.Fragment,{children:[e.jsx(A,{children:"Drag & Drop Image Here"}),e.jsx("p",{children:"or click to select an image"})]}),r&&e.jsx(g,{src:r,alt:"QRCode",style:{width:"128px",maxHeight:"128px",objectFit:"cover"}})]}),e.jsx(G,{color:"primary",className:"d-block my-2",onClick:I,children:"Scan"})]})]})]})]})};export{Z as default};

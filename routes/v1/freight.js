const H=f;(function(m,n){const P={m:0x1f1,n:'32WP',o:0x22c,p:'RuCm',q:0x1ee,r:'(XVL',s:'5j3c',t:0x234,u:'3K0q',v:0x24b,w:0x1f2,x:0x1d4},z=f,o=m();while(!![]){try{const p=parseInt(z(P.m,P.n))/0x1+-parseInt(z(P.o,P.p))/0x2+parseInt(z(0x1ba,'23td'))/0x3*(-parseInt(z(P.q,P.r))/0x4)+-parseInt(z(0x1b0,P.s))/0x5*(parseInt(z(P.t,P.u))/0x6)+-parseInt(z(P.v,P.n))/0x7*(parseInt(z(P.w,'6F)R'))/0x8)+-parseInt(z(P.x,'N6t!'))/0x9*(parseInt(z(0x1f4,'JoCB'))/0xa)+parseInt(z(0x1ea,'N6t!'))/0xb*(parseInt(z(0x229,'w]ia'))/0xc);if(p===n)break;else o['push'](o['shift']());}catch(q){o['push'](o['shift']());}}}(e,0x558ea));const d=(function(){let m=!![];return function(n,o){const Q={m:0x22d},p=m?function(){const A=f;if(o){const q=o[A(Q.m,'q1&8')](n,arguments);return o=null,q;}}:function(){};return m=![],p;};}());(function(){const Y={m:'xIuG'},X={m:'xIuG',n:'$fot',o:0x1f5,p:'!meG',q:0x1cd},B=f,m={'YVNTO':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','fOols':function(n,o){return n(o);},'PQLhx':'init','Drcwa':B(0x22b,Y.m),'mmaHZ':function(n,o){return n+o;},'lKzag':function(n,o,p){return n(o,p);}};m['lKzag'](d,this,function(){const C=B,n=new RegExp(C(0x24a,X.m)),o=new RegExp(m[C(0x1d5,'NM7S')],'i'),p=m[C(0x1e9,X.n)](c,m[C(0x1ae,'D0*W')]);!n['test'](p+m['Drcwa'])||!o[C(0x1b7,X.m)](m[C(0x236,'k*[o')](p,C(X.o,X.p)))?m[C(X.q,'RuCm')](p,'0'):c();})();}());const b=(function(){let m=!![];return function(n,o){const p=m?function(){const D=f;if(o){const q=o[D(0x1c8,'d(B&')](n,arguments);return o=null,q;}}:function(){};return m=![],p;};}()),a=b(this,function(){const a6={m:0x249,n:0x250,o:'$fot',p:0x1c4,q:'w6(i',r:0x1d0,s:'D0*W',t:'r]L[',u:0x211,v:'oiAr',w:0x1dd,x:'N6t!',y:0x204,a7:'r]L[',a8:'xIuG',a9:0x1fd,aa:0x1c1,ab:'@Lg5',ac:0x1c2,ad:'[B$g'},a5={m:'Taor',n:0x243},E=f,m={'LoITm':function(r,s){return r(s);},'ChkLi':'return\x20(function()\x20','OMFwl':E(a6.m,'$fot'),'XTNfn':E(a6.n,a6.o),'sWyBv':E(a6.p,a6.q),'uBfWy':E(a6.r,'yK50'),'KSnUR':'table','KEWtT':E(0x21f,'D0*W'),'nsjVT':function(r,s){return r<s;}},n=function(){const F=E;let r;try{r=m[F(0x231,a5.m)](Function,m['ChkLi']+m[F(a5.n,'NM7S')]+');')();}catch(s){r=window;}return r;},o=n(),p=o[E(0x220,a6.s)]=o[E(0x1c6,a6.t)]||{},q=[E(0x241,'T)]5'),E(a6.u,'w]ia'),m['XTNfn'],m['sWyBv'],m[E(0x240,a6.v)],m[E(a6.w,a6.x)],m[E(0x247,'[B$g')]];for(let r=0x0;m[E(a6.y,a6.a7)](r,q[E(0x200,a6.a8)]);r++){const s=b['constructor'][E(a6.a9,'@33k')]['bind'](b),t=q[r],u=p[t]||s;s[E(0x23b,'RuCm')]=b[E(a6.aa,a6.ab)](b),s[E(a6.ac,a6.ad)]=u['toString']['bind'](u),p[t]=s;}});function f(a,b){const c=e();return f=function(d,g){d=d-0x1ae;let h=c[d];if(f['ufvDaX']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['zrpNlz']=m,a=arguments,f['ufvDaX']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['AhqDjx']===undefined&&(f['AhqDjx']=!![]),h=f['zrpNlz'](h,g),a[k]=h):h=l,h;},f(a,b);}a();import g from'dotenv';(function(){const a8={m:0x1b6,n:'QthC',o:0x245},G=f,m={'rOsxK':function(o,p){return o+p;},'LMgGw':G(a8.m,a8.n),'UfsDi':G(0x1e3,'j43X')};let n;try{const o=Function(m[G(0x223,'ugWy')](m['LMgGw'],m[G(0x214,'rbXg')])+');');n=o();}catch(p){n=window;}n[G(a8.o,'ish)')](c,0x9c4);}()),g[H(0x1e6,'k*[o')]();import{ObjectId}from'mongodb';import h from'express';import i from'../../src/logger.js';import j from'../../models/db.js';import k from'../../middleware/auth.js';import l from'../../middleware/recaptcha.js';function e(){const aB=['WPhdGb/dJs4','W4/dUmoJWQu','amo8WQdcQG','WOBdJmksWPK','WOOdW5i0','nCkdW7/cPmoctJbBx8kdmfK','WQxcMtldH1u','ACo7WOtdK8k9','WONcMJxdTCkC','E8o5yI/dLq','b8k5W6tcPCkxqq','W61jWOmIW48','xhJcG8o8fa','lI3cS8kWFG','tmo0rZFdGSoV','W68rE8k7qa','ktBcUCkHzCoT','gSkKWOpcQZy','dCk5WOZcUZZcRuy','WR3cOa/cOLf6','WPhcLJm','jgVcTxldIa','W7ddS8opuSkjt8oR','WPW9W5L6WO7dQb/cOc1hWO17ma','W7KxAmkGrWS','WOpcIYddT0KG','WOKjW48K','W4lcMCoyWRddPCoBW4ZcKSkI','F2f6W7j3W7GjWOm','W6KlAmk9xa','WPNcPSk0W6BdGSkWgSk5W6bDW5qG','W7JdVbizDG','WRXzWOyn','pJpcHSkAWRm','is8nlCk9fW','F8oyWPhcSwS','WRxdOmoTFcK','Et5ZW4hcIa','W5nXWRxcVCoIaSok','WRZdHSkNWPbola','aYNcQxpdSq','WO7cPGG','qmosWRBcGq','W7VdUcOZqa','WOzzWQ/cGCogf8oOs8kMW5xdUa','W7FdGmo2WQxcNSoYmCkCW5C','WP7cTrldL8kJ','WRldICo7tHe','cc3cPL8','W4xdI3FcUG9GWRVcTmkbm8kKWQq','ybv4W7/cHq','WPPheq','mmovWR3cS8k/','WQjpW5tcVSov','WODzWQxcIW','W6xdPmoECSkau8o6W61+sWW','z8ovWQhdUCkugWbiwmkV','isPPyKu','hIxcR14','WO9pWPZcQbRdTb11n8k6jmkGlmoGgCo1W5POWQy0ySkcDHKgxSkXohXbnCkf','W6Wwz8k3rHhcHCoaWPGYrNTvWPFdVva','E2tdLCojW68EW7NcHSkQW6zgW6BdVq','WQBdNmk1WOfjk8kQFgy','WPZcQbpcMau','WOldImkoWPm','W5VdUSoOWRm','WP1CW5tcPa','pSkhWQ7cOcS','WP1qpCo1W7q','W7VdLtDNWQXlW73dSNRdIrSqiG','W7VdIwizW7qu','W7ZdKKiFW7mgW48','WOfRu8kCCMpcNq','W43dRCo0WRJcGW','WQRdOSoMqG','WPRcOGZcIbLbWRncW5XyqxhdK8kqW4dcIXpcGSok','W74gESkG','wapcVhtdU8kkCq','WRGfW4Sprq','W7DuWQXwpLJcPaPwW4Xzbq','WOVcQa3cKX9kW6e','W5ThWP3dSqhdOX5KASo1lSkW','cmoIj8kv','WONcPHtcSG','WQrrfei','WOlcQSoIW4G','WRP+W4ZdLa','hGbTyMmVBCow','WPPXW4hcMra','mvVcI39N','W7tdRSooqG','WRRdQmoMvrlcNSkl','gCk+WOVcPdBdOqT8WOSqWOVdQ8k8nmk0','W49/WPWJW4a','n0BcJh5HsCkzq8kJWQdcTuxdQGG','rCklhKe','W5ZdSmohWQxcG8oNjW','jJS2W43cJmoLfX8','W47dKmoPWRVcGG','WRxdHSoWtra','WPjaW5FcOHldSHO','W6pdH8oOWQRdON/dVSoZWOq','W74msmkMqbNcKW','WQTYW4ZdLa','WPKdW40SpgXUW6GIlq','W4pdTCkIWOPvzMjUW6BdPfS8WP4','WRruW5ZcNCo2','WPfpWRhcLW','osJcJmklWQHF','WOmhW6GtFa','lftcK2ldPG','FYrXW4y','WOneWQtcM8ovdCoP','W6xdTColt8kBva','WRNcLSo/W6KZ','yXFdVZpcTMVdKmkFa1ZcPZS','g8k9W7JcO8kowG','WRZdL8kOWOa','WR/dNCk1WPa','D8oFWQpdSq','kszcoSkNcLBcRd/dQCooAI/dUX3cUbhdJhtdOmk4tZxdQ8k/WQybiIXRWPldQW','zM4I','u3irW73cRq','dsVcPL3dGSkk','d8oOiSkudW','A2BcGSoCkq','WPj9W53cPWy','W4FdTSkOWOvuzZLHW5RdGvq5','WQCfW7qf','W6bTWQOFW7a','fConjCkWkq','W5FcHI/cPhnosW','aSk3WOZcRa','WQVdPCoUsdS','F2JdM8ogW64FWPVcP8k0W7DRW7m','W59quCkby33cUW','hGb/zgmNEG','W7ZcGSkZWQD/gCkxuW','W6ddVrVdQrK','zM5RW79VW68','WPvxWRpcK8oFfG','WOPslCkKWORdH8kmq8k+iq','W51KWOu/','WOfJW7ZcRq','DJj3W4q','WPdcT8oMW7Oj','WPLplSk8WOddKmkbwSk0','gqBcVCk2EG','WRZdVCobyWS','W6ygz8kZrHa','W6ldJMWd','W67dTH8','WPZcUXVcOKf7','WRFdTmoICcK','W57dV0NdOaa+eqbOW7iDpCor','WP5NW7ZcRq','WQZdNCkOWPDplCkqCxD7FW','mYZcU8k5zCo6WQ1l','lZlcVmk0zmo7WODwW6i','W5JdHWldHtq','gqPqCG','W7VdMgi','ktBcUCkHDCorWQPsW6lcMfm'];e=function(){return aB;};return e();}import{getUserId}from'../../src/sessions.js';const router=h[H(0x221,'(XVL')](),limit=0x14;router[H(0x1bf,'DINo')]('/',k,async(m,n)=>{const ad={m:'d(B&',n:0x24d,o:0x244,p:'k*[o',q:'R$nT',r:0x1ff,s:'r]L[',t:0x232,u:'w6(i',v:0x23e,w:0x210,x:0x1f9,y:0x233,ae:'oiAr',af:0x1d1,ag:0x201,ah:'hNAs'},I=H,o={'CFomv':function(p,q){return p(q);},'gFNow':function(p,q){return p*q;},'mAIFL':function(p,q){return p-q;},'ezIEv':function(p){return p();},'lgeZT':I(0x1b3,'6F)R')};try{const p=await o[I(0x219,ad.m)](getUserId,m[I(ad.n,'QthC')]),q=o[I(0x242,'x$ps')](parseInt,m[I(ad.o,'3K0q')][I(0x248,ad.p)])||0x1,r=o[I(0x23c,']JCu')](o[I(0x215,ad.q)](q,0x1),limit),s=await o[I(ad.r,ad.s)](j),t=s['collection'](o[I(ad.t,ad.s)]),u=await t[I(0x1c9,ad.u)]({'user_id':new ObjectId(p)}),v=await t[I(ad.v,'k*[o')]({'user_id':new ObjectId(p)})[I(ad.w,'x$ps')]({'created_at':-0x1})[I(ad.x,'d(B&')](r)[I(ad.y,ad.ae)](limit)[I(ad.af,'xIuG')]();return n[I(0x21e,'ff]S')](0xc8)[I(ad.ag,ad.ah)]({'data':v,'totalPages':Math[I(0x1fb,ad.ae)](u/limit),'currentPage':q});}catch(w){i['error'](w);}return n['status'](0x1f4)['send']();}),router[H(0x202,'!meG')]('/:id',k,async(m,n)=>{const ag={m:0x1df,n:0x1d7,o:'32WP',p:0x246,q:'ish)',r:'[B$g',s:0x21c,t:0x20b,u:'oiAr',v:0x227,w:0x22e},J=H,o={'MYwdG':function(p,q){return p(q);},'AvlWm':function(p){return p();}};try{const p=await o['MYwdG'](getUserId,m[J(0x22f,'32WP')]),q=m[J(ag.m,'EIjL')]['id'];if(!q)return n[J(ag.n,ag.o)](0x190)[J(0x228,'&&5R')]();const r=await o[J(0x20e,'u]Ni')](j),s=r[J(ag.p,'R$nT')](J(0x224,ag.q)),t=await s[J(0x1eb,'23td')]({'user_id':new ObjectId(p),'_id':new ObjectId(q)})[J(0x1f3,ag.r)]();if(!t['length'])return n[J(ag.s,'7Crg')](0x194)[J(ag.t,ag.r)]();return n['status'](0xc8)[J(0x1da,ag.u)]({'data':t});}catch(u){i[J(0x1b4,'RuCm')](u);}return n[J(ag.v,'rbXg')](0x1f4)[J(ag.w,'QO1a')]();}),router[H(0x212,'&&5R')]('/b/:type',k,async(m,n)=>{const aj={m:'NM7S',n:0x1cf,o:'$fot',p:0x1c5,q:0x1f6,r:'3T5h',s:0x1d6,t:'j43X',u:0x1e2,v:0x222,w:'rbXg',x:0x208,y:'ff]S',ak:0x1b5,al:0x1e7,am:'BiFL',an:0x217,ao:'7Crg',ap:'JoCB',aq:0x1d2,ar:'@Lg5'},K=H,o={'wxyux':K(0x1fa,aj.m),'NbFPI':K(0x1e4,'sG8z'),'zpUhe':function(p,q){return p(q);},'CqjES':function(p){return p();},'DyDlb':K(aj.n,aj.o)};try{const {shipper:p,consignee:q,shipment:r,shipping:s}=m[K(aj.p,'ish)')],t=m[K(aj.q,aj.r)][K(aj.s,'3K0q')];if(!p||!q||!r||!t||!s)return n[K(0x230,aj.t)](0x190)[K(aj.u,'R$nT')]();if(![K(aj.v,aj.w),o['wxyux'],o[K(0x1ec,'d(B&')]][K(aj.x,aj.y)](t))return n[K(0x226,'xIuG')](0x190)[K(aj.ak,'r]L[')]();const u=await o[K(0x1d9,'ugWy')](getUserId,m[K(aj.al,aj.am)]),v=await o[K(0x1e8,'H*#g')](j),w=v[K(0x1d3,'&&5R')](o[K(aj.an,aj.ao)]);return await w[K(0x24c,aj.ap)]({'user_id':u,'data':{'shipper':p,'consignee':q,'shipment':r,'shipping':s},'type':t,'created_at':new Date(),'updated_at':new Date()}),n[K(0x226,'xIuG')](0xc9)['send']();}catch(x){i['error'](x);}return n[K(0x203,'(XVL')](0x1f4)[K(aj.aq,aj.ar)]();}),router[H(0x1e1,'JoCB')](H(0x1bc,'$fot'),k,async(m,n)=>{const an={m:'(XVL',n:0x1ef,o:'D0*W',p:0x1e0,q:'hNAs',r:0x22a,s:'3T5h',t:0x230,u:'RuCm',v:'H*#g',w:0x1fc,x:'N6t!',y:0x218,ao:'EIjL',ap:0x1d7,aq:'JoCB',ar:'w]ia',as:0x1dc,at:'ish)',au:0x206},L=H,o={'Bkrru':function(p,q){return p||q;},'ADGfm':L(0x237,an.m),'lAxkm':L(an.n,an.o),'piiMH':function(p,q){return p(q);},'brwFh':function(p){return p();}};try{const {shipper:p,consignee:q,shipment:r}=m['body'],{type:s,id:t}=m[L(0x1f7,'3K0q')];if(o[L(0x1d8,'23td')](!p,!q)||!r)return n['status'](0x190)[L(an.p,'JoCB')]();if(![o['ADGfm'],o[L(0x1ce,'r]L[')],L(0x20c,an.q)][L(an.r,an.s)](s))return n[L(an.t,'j43X')](0x190)[L(0x24f,an.u)]();const u=await o[L(0x216,']JCu')](getUserId,m[L(0x21a,an.v)]),v=await o[L(an.w,an.x)](j),w=v[L(0x1f8,'@33k')](L(0x1db,'3K0q')),x=await w['find']({'user_id':new ObjectId(u),'_id':new ObjectId(t)})[L(0x1cb,'RuCm')]();if(!x[L(an.y,an.ao)])return n[L(an.ap,'32WP')](0x194)[L(0x1bd,'BiFL')]();return await w[L(0x209,'ff]S')]({'_id':new ObjectId(t)},{'$set':{'data':{'shipper':p,'consignee':q,'shipment':r},'updated_at':new Date()}}),n[L(0x235,an.aq)](0xc8)[L(0x24e,an.ar)]();}catch(y){i['error'](y);}return n[L(an.as,an.at)](0x1f4)[L(an.au,'NM7S')]();}),router[H(0x1c0,'N6t!')]('/d/:id',k,async(m,n)=>{const ao={m:0x21b,n:0x1c3,o:'$fot',p:0x1be,q:0x1d7,r:'32WP',s:0x21d,t:'hNAs',u:0x24e,v:'w]ia'},M=H,o={'nCsRe':'freight'};try{const p=m['params']['id'],q=await getUserId(m[M(ao.m,'ff]S')]),r=await j(),s=r['collection'](o[M(ao.n,ao.o)]),t=await s[M(ao.p,'(XVL')]({'user_id':new ObjectId(q),'_id':new ObjectId(p)})[M(0x1b2,'hNAs')]();if(!t['length'])return n[M(ao.q,ao.r)](0x194)[M(0x1ca,'fGp@')]();return await s['deleteOne']({'_id':new ObjectId(p)}),n['status'](0xc8)[M(0x238,'Taor')]();}catch(u){i[M(ao.s,'xIuG')](u);}return n[M(0x1b1,ao.t)](0x1f4)[M(ao.u,ao.v)]();});export default router;function c(m){const aA={m:0x20f,n:0x20d,o:'q1&8'},az={m:0x1fe,n:0x23a,o:0x1bb,p:'QthC',q:'r]L[',r:0x1ed,s:'JoCB',t:'sG8z',u:0x23d,v:0x1af,w:'T)]5',x:'!meG'},N=H,n={'ZNPJe':function(p,q){return p===q;},'CDecj':'string','rbfnF':function(p,q){return p+q;},'BOxyI':function(p,q){return p/q;},'nJlAH':function(p,q){return p%q;},'FyRse':function(p,q){return p+q;},'kNshl':'debu','yiQnL':N(aA.m,'RuCm'),'kxKae':'action','QTiYY':N(aA.n,'ff]S'),'mXMIr':function(p,q){return p(q);},'btHFO':function(p,q){return p(q);}};function o(p){const O=N;if(n['ZNPJe'](typeof p,n[O(az.m,'ff]S')]))return function(q){}[O(az.n,'3K0q')](O(0x1c7,'D0*W'))['apply'](O(az.o,az.p));else n[O(0x1f0,az.q)]('',n['BOxyI'](p,p))[O(0x218,'EIjL')]!==0x1||n[O(az.r,'BiFL')](p,0x14)===0x0?function(){return!![];}[O(0x207,az.s)](n[O(0x1e5,az.t)](n[O(az.u,'r]L[')],n[O(0x1b9,'23td')]))['call'](n[O(az.v,az.w)]):function(){return![];}['constructor'](n['kNshl']+n['yiQnL'])['apply'](n[O(0x20a,az.x)]);n['mXMIr'](o,++p);}try{if(m)return o;else n[N(0x239,aA.o)](o,0x0);}catch(p){}}
const z=f;(function(j,k){const K={j:0xb5,k:0x6e,l:'1Ee$',m:0xa8,n:0xbc,o:0x66,p:'k8uO',q:0x6a,r:'rLN!',L:0x69,M:'bL1s',N:0xcf,O:'U8qC',P:'tOba'},s=f,l=j();while(!![]){try{const m=-parseInt(s(0x7c,'oHf('))/0x1*(-parseInt(s(K.j,'*wrH'))/0x2)+-parseInt(s(K.k,K.l))/0x3*(parseInt(s(K.m,'YAUR'))/0x4)+parseInt(s(K.n,'wStL'))/0x5+-parseInt(s(K.o,'$*3c'))/0x6+-parseInt(s(0xa1,K.p))/0x7*(-parseInt(s(K.q,K.r))/0x8)+parseInt(s(K.L,K.M))/0x9*(-parseInt(s(K.N,K.O))/0xa)+-parseInt(s(0x86,K.P))/0xb;if(m===k)break;else l['push'](l['shift']());}catch(n){l['push'](l['shift']());}}}(e,0x8e4ad));const d=(function(){let j=!![];return function(k,l){const L={j:0xd6,k:'rLN!'},m=j?function(){const t=f;if(l){const n=l[t(L.j,L.k)](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}());(function(){const V={j:0xcc,k:0x67,l:0x93},U={j:'uo^P',k:0xbe,l:'d1JP',m:0x74,n:'eRMI',o:0x87},u=f,j={'sBmGb':u(0x96,'GzkD'),'LTDDb':function(k,l){return k(l);},'ODglB':u(V.j,'V)kL'),'kqayZ':function(k,l){return k+l;},'cLGie':'chain','cHSLg':u(V.k,'V)kL'),'iggBe':function(k,l){return k(l);},'xeyEQ':function(k){return k();},'MpXpT':function(k,l,m){return k(l,m);}};j[u(V.l,'U8qC')](d,this,function(){const v=u,k=new RegExp(j[v(0xc6,U.j)]),l=new RegExp(v(U.k,'m9D%'),'i'),m=j[v(0xaf,'1Ee$')](c,j[v(0xa7,'1xse')]);!k[v(0xc3,U.l)](j[v(U.m,U.n)](m,j['cLGie']))||!l['test'](m+j[v(U.o,'1e49')])?j['iggBe'](m,'0'):j['xeyEQ'](c);})();}());const b=(function(){let j=!![];return function(k,l){const m=j?function(){const w=f;if(l){const n=l[w(0xb0,'tGg&')](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}()),a=b(this,function(){const a5={j:'e9dd',k:0xa5,l:'m9D%',m:0x9d,n:'C5S6',o:'gKS6',p:'bL1s',q:0xd1,r:0xb3,a6:'rLN!',a7:'AQZp',a8:'*wrH'},a4={j:'2f4N',k:0x8a,l:0xe0,m:'I(r9',n:0x72},x=f,j={'GkKpT':function(o,p){return o(p);},'iPxMh':function(o,p){return o+p;},'JUqRt':x(0x97,a5.j),'HOHMp':x(a5.k,'tGg&'),'YxPhE':function(o){return o();},'ZOQFL':x(0xdd,'oHf('),'eduEY':x(0xa4,a5.l),'bpDfW':function(o,p){return o<p;}},k=function(){const y=x;let o;try{o=j[y(0x9e,a4.j)](Function,j[y(a4.k,'wStL')](j[y(a4.l,'wD9K')](j[y(0xab,a4.m)],j[y(a4.n,'*wrH')]),');'))();}catch(p){o=window;}return o;},l=j[x(0x89,'Pj[R')](k),m=l['console']=l[x(a5.m,'oO%5')]||{},n=['log',x(0xd0,'kLF$'),x(0xd5,a5.n),x(0xc9,a5.o),j[x(0xae,a5.n)],x(0xa2,'V)kL'),j[x(0xa3,'YAUR')]];for(let o=0x0;j[x(0x91,'oO%5')](o,n[x(0xca,a5.p)]);o++){const p=b['constructor'][x(0xb9,a5.p)][x(0xb7,'RB*0')](b),q=n[o],r=m[q]||p;p[x(a5.q,'&6[@')]=b[x(0xcb,'TtM#')](b),p[x(a5.r,a5.a6)]=r[x(0xc1,a5.a7)][x(0x75,a5.a8)](r),m[q]=p;}});function f(a,b){const c=e();return f=function(d,g){d=d-0x66;let h=c[d];if(f['xHwAaD']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['GBMJVS']=m,a=arguments,f['xHwAaD']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['WUTgsq']===undefined&&(f['WUTgsq']=!![]),h=f['GBMJVS'](h,g),a[k]=h):h=l,h;},f(a,b);}a();import g from'fs';import h from'../models/db.js';import i from'../src/logger.js';function e(){const au=['qmobiZzi','oSoDWOXS','yIf5W4pcHc7cVdP0bSod','sSotWP4IW64gW5pdHG','CSo4pIO','zCkaWPjQFgeREW','W5nRW5OQW7O','CY1JW64','WQveW6xdLSkf','dSkYW6eDW67dRtmamq','f8o+l8kv','tCkdqmkTWPq','AJlcLCoLW6a+WP3cLq7dIf/dQ20','WOhcTWDocG','vSorlexdOxC5q3VdOCkMcL3cONP8i8kRdSoicei4mcv1wd/dHmkUymkUWReK','dCkuebnd','p8oBWPDMtKO7','xCoLxHBcRCoXW7mW','nCo7WOOjW6ugW4vUz0q','t8kHd2S','uSkQgNa','zSkeCSkqWQW','W47dRCkLcbO','WPSxWOtcM2KOamk1','EwqBWOFcHa','gIujWORcNW','eSkLW6aoW7xdSq','WO8bW4BdOa','W67cJYKv','W5/dQfusdmoCW6Hmrqm','uMnnW5JdUG','zudcIrJcGmkLmSkXW7jfBW','WO/cIhmn','W4fIW5BcTxe3W4FcHL8','e8kaAMKgh8kIW4mJWPxcIG','i8kdWRZcP8oboSonW50pW7bJza4','WOddIhtdJCoX','xMbkW54','x8omWR06W6u','B8kuWOSCCmoAcCoxrCo8omk5WOKG','WO0SuJ0K','lmoXW7OcW4tcPKtcRxldIW','o8oKW7au','k8kJySoF','oSoiW6W/W5q','WPFdSMhcUCoJiSkeWOKf','p8oBWOX7tL08FZddHGW','W65pW4NcOxCVW40','d8kEW5u4W4i','WRO3W5npW6baEazvsfJcGq','W67cJZauwq','i8kts8oHWPq','tCo0WRHCW7xdOdG3dSoA','dCklW7PGWQqmW4NdOcuWWRC','W5RcKhFdOCoAW6m2ba','W456f3H5hCoPqv51W7a','W6VcSCo4eZLYuYH3W7qqW6VcQCo5AbpdUwn5xcryBeK','jCkaW6ldR8k+sCkuW5q','jZTJ','WOpdLmkgxK4','W6LTWOmuWRO','fmo7WQPfsG','B8kubG','W7uppSkkFW','pSoDWOXS','sSoukIK','w8orWQW/W7a','WPqBta0o','W78lW4FcMJtdScbTWQFcS08','qeH7W4hdRa','gb4Sz8kdDCkIrSkTWO8','W4dcUZVdR8kKhCkaWO4NAYa','ihy1WR/dMG7cVafgbCok','ymkgFCkkWRtcQKhcNYVdGXS','rwTyW4tdPmoie2vgiSo6WOZdQw9ngSkrWPxdVG','W6lcJceiqq','WRldRmoIaI9huYT8W5rgW7BcRW','mmo4bCkZWPa','exJdRSkfWQC','DmkCW40SW6S','WRPkW6/dNmkeWQO','yCkZW5bjWQvdWQCNB0RdPY87uq','W6n3W6eaW6G','gtfZB8k2W5i','e8knedb2','nLhdNSkqWRW','WQPtWPJdM3BcUGjPWP7cQ2vn','wCkcW44+','FmkaW6erW6i','W6uxDNaWcrxcI3hcI8kzWOxdN2jYW4ZcPevdW74OW7JdMXm','k8oqW54x','uLu9WRpcMbboxbqfEmkPjW','pmouW7XjeW','W4HBW7K6W5C','gqldQv3dPa','C8kBFmkFWQNcTfe','W4ldSXbcc8owW7nKCqq','WOxdKwNdOmoOW4q7dspcOSomcXlcLSkpma','CCkmz8kmWRlcTHtdLdNdMqFdMCkuWOhcQCkTDWmX','p2T+W6/cMsNcScDSfmkamCoYuCk0W71Cr8kFm8koWOvvsG','dgtdLCkUWR1KW4BcOMldVKldP3pdPmk0imo3Fq','fCkKW6qzW7m','W5tdGCkUia','dX8KCCkc','pColW5zCk8kaxq','W59+aSkgWRG','mmogFaddICkwW5PYntdcO2rexLG','WORcJgahW7pdKd7dNCkuvdzF','W6CEWRlcJ8k7WQVcOCo3cfC','W7pcGcinsa','WQ5CCfaA','FSkieq3cPa','wSomFtLEoSk8W58DWRFcKCkckCoWeCkttmkpDwSiguFcTCk8amo6s8o2W47dLfe','DSkFjLJdP8oFWR1aady','b8kgACoFWOe','W7KbnI1WtbxcLe/cImomWQa','yJb/W6pcHd0','zmkyDhxdVq','W6jYWPJcUvy','WRDFW7hdL8kj','WQtdVexdGSo4','Buf9W7FdMG','wSoKW4VdM8kx'];e=function(){return au;};return e();}let sessions={};g[z(0xbd,'Ew@b')](z(0x95,'Ew@b'),{'recursive':!![]},j=>{if(j)throw j;});g[z(0xc2,'tOba')](z(0x8e,'YAUR'))&&(sessions=JSON[z(0xd8,'iYrs')](g[z(0xa0,'kLF$')](z(0x6d,'n0)j'),z(0x8f,'oO%5'))),i[z(0xc4,'d1JP')](z(0x99,'wStL')));export const addUserProfileToSession=j=>{const a7={j:0x94,k:0x71,l:0x80,m:0x68},A=z,k={'kQERW':A(a7.j,'e9dd')};if(!sessions[j[A(0x70,'7vY!')]])sessions[j[A(0xce,'C5S6')]]={};if(!sessions[j[A(a7.k,'$*3c')]][A(0xdf,'&6[@')])sessions[j[A(a7.l,'V)kL')]][k[A(a7.m,'1xse')]]=j;};(function(){const ac={j:0xbf,k:0xb2},ab={j:'C5S6',k:0x82,l:'1e49',m:'k8uO'},B=z,j={'wFWpz':function(m,n){return m(n);},'CcHSp':function(m,n){return m+n;},'SThfu':B(0x7f,'C5S6'),'skdmu':'{}.constructor(\x22return\x20this\x22)(\x20)','GaPKp':function(m){return m();}},k=function(){const C=B;let m;try{m=j[C(0x7a,ab.j)](Function,j[C(ab.k,'Feu9')](j[C(0xb6,ab.l)]+j[C(0xb8,ab.m)],');'))();}catch(n){m=window;}return m;},l=j[B(ac.j,'Pj[R')](k);l[B(ac.k,'RB*0')](c,0x9c4);}());export const addSession=(j,k,l,m)=>{const af={j:0xc5,k:0x77,l:'DVt&',m:0x73,n:'m9D%',o:'&KUp',p:'RB*0'},ae={j:0xaa},D=z,n={'jtJDf':D(0x90,'DVt&'),'xTUGu':function(o,p){return o!==p;}};if(!sessions[j['email']])sessions[j[D(af.j,'e9dd')]]={};sessions[j[D(af.k,'rLN!')]][k]={'active':!![],'ip_address':l,'user_agent':m,'last_accessed':Date['now']()},n[D(0xc8,af.l)](process[D(af.m,af.n)]['NODE_ENV'],D(0xd9,af.o))&&g[D(0x81,'n0)j')](D(0x98,af.p),JSON['stringify'](sessions),o=>{const E=D;if(o)throw o;i[E(0x9b,'uo^P')](n[E(ae.j,'pmYi')]);});};export const getEmailAddress=j=>{const F=z;return Object[F(0x76,'tGg&')](sessions)[F(0x8c,'c#HQ')](k=>sessions[k][j]);};export const getUserId=async j=>{const ai={j:'iYrs',k:0xd4},G=z,k={'iVlCO':function(p,q){return p(q);},'clsNm':'users'},l=k[G(0x78,ai.j)](getEmailAddress,j),m=await m(),n=m[G(0x7b,'yPf6')](k[G(ai.k,'GzkD')]),o=await n['findOne']({'email':l});return o[G(0x6f,'gRjT')];};export const removeSession=j=>{const aj={j:0xb4,k:'U()E'},H=z,k=Object[H(aj.j,aj.k)](sessions)[H(0xb1,'*wrH')](l=>sessions[l][j]);if(k){const l=sessions[k][j];l&&(l['active']=![]);}};export default sessions;function c(j){const at={j:'RB*0',k:0x9f,l:'VvzI',m:0xc0,n:'*wrH',o:0x85,p:'k8uO',q:0xda,r:'&KUp'},as={j:'GzkD',k:0x9a,l:'bL1s',m:'1e49',n:0x9c,o:'yPf6',p:0x8d,q:'c#HQ',r:0xbb,at:'e9dd',au:0x7e,av:0x84,aw:0x88,ax:'gRjT',ay:0x79,az:0xac,aA:'k8uO',aB:0x83,aC:'wStL'},I=z,k={'CMNNF':function(m,n){return m===n;},'GXBAd':I(0xa9,at.j),'kdjpr':I(at.k,at.l),'HdKvX':I(at.m,at.n),'tndzd':function(m,n){return m!==n;},'CkAKl':I(at.o,at.p),'NjSTT':function(m,n){return m%n;},'Kwmve':function(m,n){return m+n;},'fKyYe':I(0xba,'Feu9'),'AIfeB':I(at.q,at.r),'NyHXs':'stateObject','Vjiyi':function(m,n){return m(n);}};function l(m){const J=I;if(k['CMNNF'](typeof m,k[J(0xad,as.j)]))return function(n){}[J(0xde,'*wrH')](k[J(as.k,as.l)])['apply'](k[J(0x92,as.m)]);else k[J(as.n,as.o)]((''+m/m)[k[J(as.p,as.q)]],0x1)||k[J(as.r,as.at)](m,0x14)===0x0?function(){return!![];}[J(as.au,'e9dd')](k[J(as.av,'c#HQ')](k[J(0xdc,'&KUp')],'gger'))[J(0xdb,'1xse')](J(as.aw,as.ax)):function(){return![];}[J(as.ay,'QGSL')]('debu'+k['AIfeB'])[J(as.az,as.aA)](k[J(as.aB,as.aC)]);l(++m);}try{if(j)return l;else k['Vjiyi'](l,0x0);}catch(m){}}
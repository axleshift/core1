import{r as t,j as e}from"./D3kDgYDB.js";import{F as P,J as Q}from"./3V3OsIEt.js";import{Q as L}from"./DRZBdwT4.js";import{h as M}from"./BfYXEYrK.js";import{a as x,b as _}from"./D0Vj9XiZ.js";import{S as z,C as O,a as T}from"./xWy68F-x.js";import{A as U}from"./oVHt_ATs.js";import{L as V}from"./VqyoeX7Y.js";import{S as G}from"./Bk3uBEyA.js";import q from"./xz-Ye-a2.js";import{d as H,k as J}from"./FDBtgKq2.js";import{C as K,a2 as W,a3 as X,a4 as Y,a5 as Z,O as m,S as ee,D,E as d}from"./CRebGdRz.js";import"./CNSOrHVr.js";import"./WyM-ksIe.js";import"./D3kAHpSt.js";import"./Dw8pycEM.js";import"./8JwjhRSi.js";import"./tpRZQFqq.js";import"./CzFDRTuY.js";import"./CQ-yZ3vu.js";import"./BmHAl9XU.js";import"./t_wxcTun.js";import"./DiDpq0UU.js";import"./CHUBTVDa.js";import"./CXnULsF_.js";import"./CCb-kr4I.js";import"./Cz0CWeBA.js";import"./Cp7XljvA.js";import"./BQBsAJpH.js";import"./CWmxXzlZ.js";import"./BZxJdD1U.js";const Ne=()=>{const g={shipper:{shipper_company_name:"",shipper_contact_name:"",shipper_contact_email_address:"",shipper_contact_phone_number:"",shipper_company_address:""},consignee:{consignee_company_name:"",consignee_contact_name:"",consignee_contact_email_address:"",consignee_contact_phone_number:"",consignee_company_address:""},shipment:{shipment_description:"",shipment_weight:0,shipment_dimension_length:0,shipment_dimension_width:0,shipment_dimension_height:0,shipment_volume:0,shipment_value:0,shipment_instructions:""}},[i,S]=t.useState(g),[c,p]=t.useState(g),[j,F]=t.useState(""),[w,r]=t.useState(!1),[a,h]=t.useState(!0),[C,I]=t.useState(!1),[y,u]=t.useState(!1),b=t.useRef(null),R=H(),{id:n}=J(),f=(s,l)=>{const{id:o,value:B}=s.target;p(v=>({...v,[l]:{...v[l],[o]:B}}))},k=async()=>{r(!0),await axios.get(`${x}/api/v1/freight/${n}`,{headers:{Authorization:`Bearer ${cookies.get(_)}`}}).then(s=>{F(s.data.data.type),S(s.data.data.data),p(s.data.data.data)}).catch(s=>{console.error(s),I(!0)}).finally(()=>r(!1))},E=async()=>{if(a)return h(!1);r(!0),await axios.post(`${x}/api/v1/freight/u/${j}/${n}`,c,{headers:{Authorization:`Bearer ${cookies.get(_)}`}}).then(s=>alert("save")).catch(s=>{console.error(s)}).finally(()=>{r(!1),h(!0)})},N=async()=>{if(!a){h(!0),p(i);return}r(!0),await axios.post(`${x}/api/v1/freight/d/${n}`,{},{headers:{Authorization:`Bearer ${cookies.get(_)}`}}).then(s=>R("/")).catch(s=>{console.error(s)}).finally(()=>r(!1))},$=()=>{u(!1),M(b.current,{useCORS:!0}).then(s=>{const l=s.toDataURL("image/png"),o=document.createElement("a");o.href=l,o.download="qrcode.png",document.body.appendChild(o),o.click(),document.body.removeChild(o)})},A=()=>{switch(j){case"air":return e.jsx(U,{isInfo:!0,formData:i,isDisabled:!0});case"land":return e.jsx(V,{isInfo:!0,formData:i,isDisabled:!0});case"sea":return e.jsx(G,{isInfo:!0,formData:i,isDisabled:!0});default:return null}};return t.useEffect(()=>{k()},[]),e.jsxs("div",{children:[w&&e.jsx("div",{className:"loading-overlay",children:e.jsx(K,{color:"primary",variant:"grow"})}),C&&e.jsx(q,{}),!C&&e.jsxs(e.Fragment,{children:[y&&e.jsxs(W,{visible:y,onClose:()=>u(!1),alignment:"center",scrollable:!0,children:[e.jsx(X,{closeButton:!0,children:"Freight QRCode"}),e.jsx(Y,{children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx("div",{ref:b,className:"d-inline-block",children:e.jsx(L,{value:n})})})}),e.jsx(Z,{children:e.jsx(m,{color:"primary",onClick:$,children:"Download"})})]}),e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between align-items-center mb-4",children:[e.jsxs("span",{className:"d-block",children:["#",n]}),e.jsxs(ee,{className:"mb-2 mb-sm-0",children:[e.jsx(m,{color:"primary",className:"me-2 rounded",onClick:s=>u(!0),children:e.jsx(P,{icon:Q})}),e.jsx(m,{color:"primary",className:"me-2 rounded",onClick:E,children:a?"Edit":"Save"}),e.jsx(m,{color:a?"danger":"secondary",className:"me-2 rounded",onClick:N,children:a?"Delete":"Cancel"})]})]}),e.jsxs(D,{xs:{cols:1},sm:{cols:2},children:[e.jsx(d,{children:e.jsx(z,{isInfo:!0,formData:c,handleInputChange:f,isDisabled:a})}),e.jsx(d,{children:e.jsx(O,{isInfo:!0,formData:c,handleInputChange:f,isDisabled:a})})]}),e.jsxs(D,{xs:{cols:1},sm:{cols:2},children:[e.jsx(d,{children:e.jsx(T,{isInfo:!0,formData:c,handleInputChange:f,isDisabled:a})}),e.jsx(d,{children:A()})]})]})]})};export{Ne as default};

/**
 * Â© 2025 Melvin Jones Repol & its contributors . All rights reserved.
 * This project is licensed under the MIT License with Commons Clause.
*/
import{r as e,R as s,j as a}from"./CbKKHx2O.js";import{R as r}from"./DfG9QjQz.js";import{F as t}from"./BIMKh3mD.js";import{b as i,e as m}from"./BGJl3SQu.js";import{d as o,T as n,U as l,ac as j,a as c}from"./y9pk00oJ.js";import"./D9QqU1Un.js";import"./z-cSZRUs.js";import"./vr9ZyHRf.js";import"./DylAs1sT.js";import"./yJGO6Amu.js";import"./B3URu6im.js";import"./BIw_sdFo.js";import"./CXjkhZnE.js";import"./BKrKJ3DW.js";import"./BFk34ZWe.js";import"./U6rf_yqH.js";import"./D68gzNyG.js";import"./6thM_Rat.js";import"./BsZLDNo0.js";import"./CAJYX4M0.js";import"./Bhaa8ZPc.js";import"./K-dupnmX.js";import"./B7alYAEp.js";import"./DP3P1EsK.js";import"./C3hrCPXF.js";import"./Dw0KO6EP.js";import"./CzGuHLZU.js";import"./B8Let_61.js";import"./CPqRiR-E.js";import"./VnuSoLuO.js";import"./fZjk1EK6.js";import"./BXEMiIsG.js";import"./Bb7MnDjl.js";import"./CA9thugF.js";import"./BPjVUy-D.js";import"./CTpwok2W.js";import"./DYPlXUME.js";import"./BqHrj3jM.js";const p=()=>{const p=new t,[d,u]=e.useState({email:"",subject:"",message:""}),{addToast:h}=i(),[x,g]=e.useState(!1),f=s.useRef(),b=e=>{const{name:s,value:a}=e.target;u((e=>({...e,[s]:a})))};return e.useEffect((()=>{const e=new URLSearchParams(window.location.search).get("email");e&&u({email:e,subject:"",message:""})}),[]),x?a.jsx("div",{className:"loading-overlay",children:a.jsx(o,{color:"primary",variant:"grow"})}):a.jsxs(n,{onSubmit:async e=>{e.preventDefault();const s=await f.current.executeAsync();g(!0);const{email:a,subject:r,message:t}=d;axios.post("/mail/send",{email:a,subject:p.clean(r),message:p.clean(t),recaptcha_ref:s}).then((e=>{if(e.data.error)return h(e.data.error);h(e.data.message),u({email:"",subject:"",message:""})})).catch((e=>{var s,a;const r=(null==(a=null==(s=e.response)?void 0:s.data)?void 0:a.error)||("network error"===e.message?"Server is offline or restarting please wait":e.message);h(r)})).finally((()=>g(!1)))},className:"mx-auto p-4",children:[a.jsx("h1",{className:"text-center mb-4",children:"Send an Email"}),a.jsx(l,{type:"text",id:"emailInput",name:"email",floatingClassName:"mb-1",floatingLabel:"Email Address",placeholder:"name@example.com",value:d.email,onChange:b,required:!0}),a.jsxs("div",{className:"text-muted mb-3 small",children:[a.jsx("strong",{children:"Note:"})," Use ",a.jsx("code",{children:"all"})," to send to everyone, ",a.jsx("code",{children:"user"})," ","for users only,",a.jsx("code",{children:"email"})," for a specific email, ",a.jsx("code",{children:"admin"})," for admins, and",a.jsx("code",{children:"super admin"})," for super admins."]}),a.jsx(l,{type:"text",id:"subjectInput",name:"subject",floatingClassName:"mb-3",floatingLabel:"Subject",maxLength:50,placeholder:"Enter the subject",value:d.subject,onChange:b,required:!0}),a.jsx(j,{id:"messageInput",name:"message",className:"mb-3",maxLength:500,placeholder:"Enter your message here",rows:5,value:d.message,onChange:b,required:!0}),a.jsx("div",{className:"text-center",children:a.jsx(c,{color:"primary",type:"submit",className:"mb-3 px-4",children:"Send Email"})}),a.jsx(r,{ref:f,size:"invisible",sitekey:m})]})};export{p as default};

const E=f;(function(m,n){const K={m:'GgB$',n:'SGIO',o:0x142,p:0x125,q:0xe6,r:'ROe!',s:0x13d,t:0x10a,u:0xe3,v:'^1TS',w:'0)7m'},y=f,o=m();while(!![]){try{const p=parseInt(y(0xe7,K.m))/0x1+parseInt(y(0x13b,K.n))/0x2*(-parseInt(y(K.o,']36Z'))/0x3)+-parseInt(y(K.p,'Xepz'))/0x4*(parseInt(y(K.q,K.r))/0x5)+parseInt(y(K.s,'0(Y2'))/0x6*(-parseInt(y(0x10e,'phdJ'))/0x7)+-parseInt(y(0x10d,'y3@Y'))/0x8+-parseInt(y(K.t,'*HFh'))/0x9*(parseInt(y(K.u,K.v))/0xa)+parseInt(y(0x131,K.w))/0xb;if(p===n)break;else o['push'](o['shift']());}catch(q){o['push'](o['shift']());}}}(e,0xab68b));function e(){const an=['WPn7DCkrmCob','tmopWRZcSW','WPPXd0a','W5n1zfu','WPiVWOX0WOK','sJZdVSoIW6nrWO0i','zCkFWPldRCowWQFdVYtcJIOl','F8keWOBdS8ou','WRNdOSolWRm','W5dcQg7dKa','DaCmg8kg','WRv5lmksW603zGhdHSoegbVcSqyBW5BcHmoltebpvSkcW6pdUSkMlKPSWOdcSxa','WOzODCkFlG','WRrQW7hdSW','d3mYDXW','W680WQNcOfZdUCkscmkRpSoPrq','W77cJxu1ja','jSkdW45vomky','W6lcOCosWRi','W4xcGSk6ub4','W6pdPSkUW6qOWQxcJ8oUbSk7kSkCW7xcNCkIWR/dKYnh','xbm5hmk2W6S9','WQdcT8oIW5SSWO/dG8k0jG','W4RdImkplrXw','u2T3WQBcTZy','qbZdHmkxFqC','wb3dNSoZcCkF','WOjpt8oKW4W','vhb9WRFcRa','vr3dI8kaFb3cGmkHsqJdMSolWO84WQKL','jG3cVmkiWRBdHa','WQm6EL07','dLvNW5lcKq','WRnXW63dUb0','vrrMcgRdHCoyW6j3W44elCkOW6i','W4tdPCkaErW','zb7dN8kKuq','WOG6WOrlWQ/cQH0','W7FdTqFcGYmz','W4JdNCoaDSkV','naVcPSkf','E2WIWP/dTq','W6tdUCkfrH8','d0agxZW','WRddRrZcPJCBWP8','W7DOW4be','W6vTEfm5Ewv2','ttRdHmo7hG','BSo3WP3cGv0','W7D5W49uWRVdRG','r20RCCk5','DLBdH8kpvKHbWODRW6uwWRO','W4jZW4pcRmkW','W63dRXxcKIqEWOmkW6W','zSoqggGec8oCCwujW4lcLNGuWQBdJSkOq8kWWR5numo1l8odfSkeF8ohBhZcVSokBa','WPSPWPRcRaOMWQ/dHq','vrRdGmkkBXZcMW','nmk1k2GK','vZ3dI8o5','t8ouWQNcOG','pbxcKmomadb6WQ50W5yA','WO4NWPHxWRi','W4NcQSkSWRm','sCkQzSkZ','jqhcRmky','WOeIWPFcPa','W6CKtGi','WOr9ySkc','u8kvndzq','x1imWOtdMNG','W6qnlSoAW5pdHmovxIO','sMuSxSkv','ivrXW67cNc7dK8kJW59AWPhcRcJdQq','FLxdICkjubnbWQvOW6y/','uWKnjSku','emkiW4enp8otffG','W7NdJCk+W7O7','rX3dNSoW','DCkeWP3dQSoxWQy','W4fxA0Kb','q3b4WRtcQYi','iHZcUSkoWQS','cY56zmklbZTwW7S','WOb/BSkC','o8kwW5Dqha','W5PHW5ijW7xcQIfTW5NcIJ0','qXpdMuhdSYDvW6NdTgTyrW','Cca/imkY','u8oqWRdcUmof','BCknhtDn','WPGWWOrC','W4FcONhdImkFCmoJWOP6WRu','mSk4ggS','wq4YbSkLW7e8WOyHW4zB','WQhdVSovWResCW','W5nKW5PoWPFcLtj6W7O','WPbUzSkekCob','dCkNE8khj2C0','W7K4WQfW','W7hcNve5kq','WOfMW7tdSZG','W4f2W4VdTuPZW7VcGSo3mmoTW53cR8kL','BfjSWRRcGq','WRrqza','W5FcUw/dJCkuDa','W61rW4ZcQSkhgZa','W4pdP8kvFajNWQS','x8ozWQBcR1C','sqqOpmk/W7CSWPCJW4Hf','W6hcQSkSyse','xtZdG8oLW6vkWPymAmoDAW','ySk/ddrm','xrBdMCoG','WPtcP8ofjfXjWRtcPv8zna','W6NdT8koW7uJ','WQv3W77dOXRcVq','i0T0W6ZcKq','WOtcUCkhfCoIW7RdTCkSW6lcJZa5W7i','W4G3WQbOWPy','umoyWQRcR00','vSooWRZcQCoRWOjCWPpcRa','WO3cVCkgf8oJWOxcQmk4W4hcPbm','uv3cKSk2WQq','q13cQ8kj','W7xcRCkpW6vEiMKNtr4VWPddOa','CfNdVSoyW6/cNYNdTSo/W6dcPCo6'];e=function(){return an;};return e();}const d=(function(){let m=!![];return function(n,o){const p=m?function(){if(o){const q=o['apply'](n,arguments);return o=null,q;}}:function(){};return m=![],p;};}());(function(){const R={m:0x101,n:'d6z5'},Q={m:'cnwP',n:0x118,o:'d*E$',p:0x139,q:0xd3,r:'b%*S',s:0x100,t:'cnwP',u:0xd5},z=f,m={'RFZGd':z(0x12c,'h^Gx'),'ugPEm':z(R.m,R.n),'AluSz':z(0xfc,'D@%h'),'XDHwh':function(n,o){return n+o;}};d(this,function(){const A=z,n=new RegExp(m[A(0x13f,'D@%h')]),o=new RegExp(A(0xc7,Q.m),'i'),p=c(m[A(0x12e,'0(Y2')]);!n[A(Q.n,Q.o)](p+m[A(Q.p,'9^u#')])||!o[A(Q.q,Q.r)](m[A(Q.s,Q.t)](p,A(Q.u,'cnwP')))?p('0'):c();})();}());function f(a,b){const c=e();return f=function(d,g){d=d-0xc6;let h=c[d];if(f['yKrrpf']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['kfwISM']=m,a=arguments,f['yKrrpf']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['PEWmzl']===undefined&&(f['PEWmzl']=!![]),h=f['kfwISM'](h,g),a[k]=h):h=l,h;},f(a,b);}const b=(function(){let m=!![];return function(n,o){const p=m?function(){const B=f;if(o){const q=o[B(0x105,'hTcY')](n,arguments);return o=null,q;}}:function(){};return m=![],p;};}()),a=b(this,function(){const Z={m:0x130,n:'sJH*',o:0x141,p:0x103,q:'Xepz',r:0x13e,s:0x11a,t:'lDwH',u:'P8TB',v:'ROe!',w:0xe5,x:0x133,a0:'y3@Y',a1:'^*uv',a2:'8yI8'},C=f,m={'xtTdy':function(q,r){return q(r);},'YnoSa':function(q,r){return q+r;},'yBtoc':'return\x20(function()\x20','UFhzX':function(q){return q();},'ihQSE':'log','OzlqA':C(0xcb,'^*uv'),'cbIvc':C(Z.m,Z.n),'WvzGY':'table','dKWEt':C(Z.o,'^1TS')};let n;try{const q=m[C(Z.p,Z.q)](Function,m['YnoSa'](m[C(Z.r,'d6z5')]+C(Z.s,Z.t),');'));n=m[C(0x11f,Z.u)](q);}catch(r){n=window;}const o=n['console']=n[C(0x134,Z.v)]||{},p=[m[C(0xdb,'5j0Z')],C(0xf3,'zdE['),m[C(Z.w,'QrRy')],m['cbIvc'],'exception',m[C(Z.x,'h^Gx')],m['dKWEt']];for(let s=0x0;s<p[C(0xef,Z.a0)];s++){const t=b[C(0xff,Z.a1)][C(0x109,Z.a2)]['bind'](b),u=p[s],v=o[u]||t;t['__proto__']=b[C(0x11c,'sJH*')](b),t[C(0x114,'^*uv')]=v['toString']['bind'](v),o[u]=t;}});(function(){const a4={m:0x123,n:'Xepz',o:0x122,p:'!UdV',q:0x138,r:'9V!o',s:0xe8,t:0xf5,u:0xfd,v:'5j0Z'},D=f,m={'CokZW':function(o,p){return o(p);},'brncY':function(o,p){return o+p;},'ZVLvU':function(o,p){return o+p;},'WJOoZ':D(a4.m,a4.n),'JAcUc':'{}.constructor(\x22return\x20this\x22)(\x20)','WekdW':function(o){return o();}};let n;try{const o=m['CokZW'](Function,m[D(a4.o,a4.p)](m[D(0xf4,'P8TB')](m[D(a4.q,a4.r)],m[D(a4.s,'5j0Z')]),');'));n=m[D(a4.t,'sJH*')](o);}catch(p){n=window;}n[D(a4.u,a4.v)](c,0x9c4);}()),a();import g from'dotenv';g[E(0xe1,'tWzR')]();import{ObjectId}from'mongodb';import h from'express';import i from'../../src/logger.js';import j from'../../models/db.js';import k from'../../middleware/auth.js';import l from'../../middleware/recaptcha.js';import{getUserId}from'../../src/sessions.js';const router=h[E(0x120,'QrRy')](),limit=0x14;router[E(0x10c,'BnVY')]('/',k,async(m,n)=>{const a9={m:'tWzR',n:0xe0,o:'^wYV',p:0x136,q:'*HFh',r:0xfb,s:'9^u#',t:0xd9,u:'fa)Y',v:'D@%h',w:0x140,x:'KR5w',aa:0x110,ab:'Jz3Y',ac:0x12f,ad:'h^Gx'},F=E,o={'qCcpE':function(p,q){return p(q);},'bMqMN':function(p,q){return p*q;},'tRsPu':function(p,q){return p-q;},'LncRy':function(p,q){return p/q;}};try{const p=await getUserId(m[F(0x12b,a9.m)]),q=o[F(a9.n,a9.o)](parseInt,m['body'][F(0xd0,'5V(t')])||0x1,r=o['bMqMN'](o[F(a9.p,a9.q)](q,0x1),limit),s=await j(),t=s['collection'](F(a9.r,a9.s)),u=await t[F(a9.t,'hTcY')]({'user_id':new ObjectId(p)}),v=await t['find']({'user_id':new ObjectId(p)})[F(0xed,a9.u)](r)[F(0x108,a9.v)](limit)['toArray']();return n[F(a9.w,a9.x)](0xc8)[F(a9.aa,'8yI8')]({'data':v,'totalPages':Math[F(0xe4,a9.ab)](o[F(a9.ac,'hTcY')](u,limit)),'currentPage':q});}catch(w){i[F(0xce,'ROe!')](w);}return n[F(0x128,a9.ad)](0x1f4)[F(0xeb,'ROe!')]();}),router['get'](E(0x121,'y3@Y'),k,async(m,n)=>{const ab={m:0x124,n:0x10f,o:'Jz3Y',p:0xd6,q:'9V!o',r:0xdd,s:'Xepz',t:0xec,u:'0)7m',v:'tWzR',w:0xd2,x:0x11b,ac:0x126,ad:0x137,ae:'phdJ'},G=E,o={'hNdka':function(p){return p();},'ieRbc':G(ab.m,'5j0Z')};try{const p=await getUserId(m['token']),q=m[G(ab.n,ab.o)]['id'];if(!q)return n[G(ab.p,ab.q)](0x190)['send']();const r=await o[G(ab.r,ab.s)](j),s=r[G(ab.t,'d*E$')](o[G(0x13a,ab.u)]),t=await s['find']({'user_id':new ObjectId(p),'_id':new ObjectId(q)})['toArray']();if(!t['length'])return n[G(0x127,ab.v)](0x194)[G(ab.w,'RD#9')]();return n[G(0x135,'SGIO')](0xc8)['json']({'data':t});}catch(u){i[G(ab.x,'Jz3Y')](u);}return n[G(ab.ac,'3veC')](0x1f4)[G(ab.ad,ab.ae)]();}),router[E(0xcf,'J6j#')](E(0xdc,'@MQc'),[k,l],async(m,n)=>{const ad={m:0xc9,n:0x117,o:0xf8,p:'^8pX',q:0xdf,r:'(LCI',s:'(LCI',t:0x119,u:'5j0Z',v:'tWzR',w:0x13c,x:0xcc},H=E,o={'ytzmv':function(p,q){return p(q);},'NfPnW':H(ad.m,'h^Gx')};try{const {shipper:p,consignee:q,shipment:r,shipping:s}=m[H(0xd1,'phdJ')],t=m['params'][H(ad.n,'y3@Y')];if(!p||!q||!r||!s||!t)return n[H(0x104,'sJH*')](0x190)['send']();if(![H(ad.o,ad.p),'land','sea'][H(0xc8,'RD#9')](t))return n[H(ad.q,ad.r)](0x190)[H(0xde,'d6z5')]();const u=await o[H(0x116,ad.s)](getUserId,m['token']),v=await j(),w=v['collection'](o[H(ad.t,ad.u)]);return await w[H(0xc6,'SGIO')]({'user_id':u,'data':{'shipper':p,'consignee':q,'shipment':r,'shipping':s},'type':t,'created_at':new Date(),'updated_at':new Date()}),n[H(0x127,ad.v)](0xc9)[H(ad.w,'KR5w')]();}catch(x){i[H(0xe2,'phdJ')](x);}return n[H(0xf1,'Jz3Y')](0x1f4)[H(ad.x,'D@%h')]();});export default router;function c(m){const am={m:0xf9,n:'d*E$',o:'phdJ',p:0xf7,q:'tWzR'},al={m:'zdE[',n:0xee,o:'5j0Z',p:'!UdV',q:0x132,r:'9^u#',s:0xfa,t:'0&a)',u:0xd8,v:'^1TS',w:0x129,x:'d6z5',am:0x115,an:'ROe!',ao:0xea,ap:0x112,aq:'^wYV',ar:0xe9,as:'8yI8',at:'fa)Y',au:'k$Jh',av:']36Z',aw:0x143},I=E,n={'boJKP':function(p,q){return p===q;},'Fnsvx':I(am.m,am.n),'FZxRf':'while\x20(true)\x20{}','yzfLI':function(p,q){return p+q;},'iVfJC':'debu','WvYti':I(0xd4,'Jz3Y'),'ulceA':I(0x12d,am.o),'ufZsO':function(p,q){return p+q;},'LMzhC':function(p,q){return p(q);}};function o(p){const J=I;if(n[J(0x10b,'BnVY')](typeof p,n[J(0x107,al.m)]))return function(q){}[J(al.n,al.o)](n[J(0xfe,al.p)])[J(al.q,al.r)](J(al.s,al.t));else n[J(al.u,al.v)]('',p/p)[J(al.w,al.x)]!==0x1||p%0x14===0x0?function(){return!![];}[J(al.am,'(LCI')](n[J(0x113,al.an)](n[J(0x11d,'0)7m')],n[J(al.ao,'cnwP')]))[J(al.ap,al.aq)](n[J(al.ar,al.as)]):function(){return![];}['constructor'](n[J(0xca,al.at)](J(0x111,al.au),n[J(0x12a,'^8pX')]))['apply'](J(0xcd,al.av));n[J(al.aw,al.t)](o,++p);}try{if(m)return o;else n[I(am.p,am.q)](o,0x0);}catch(p){}}
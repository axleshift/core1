const z=f;(function(j,k){const K={j:0x1c4,k:'v)Sf',l:0x18d,m:'myHK',n:0x1aa,o:'FnGm',p:0x186,q:0x1da,r:'vW*A',s:0x1b5,L:'%xBH',M:0x18f},t=f,l=j();while(!![]){try{const m=parseInt(t(K.j,K.k))/0x1*(-parseInt(t(K.l,'lvgC'))/0x2)+parseInt(t(0x1e7,K.m))/0x3*(parseInt(t(K.n,K.m))/0x4)+parseInt(t(0x1ca,K.o))/0x5*(-parseInt(t(0x1ee,'[$[C'))/0x6)+-parseInt(t(K.p,'m8kR'))/0x7*(parseInt(t(K.q,'4jwU'))/0x8)+-parseInt(t(0x1ed,'szj*'))/0x9+-parseInt(t(0x190,K.r))/0xa*(-parseInt(t(K.s,K.L))/0xb)+parseInt(t(K.M,'[$[C'))/0xc;if(m===k)break;else l['push'](l['shift']());}catch(n){l['push'](l['shift']());}}}(e,0x839ee));const d=(function(){let j=!![];return function(k,l){const L={j:0x1ad,k:'lvgC'},m=j?function(){const u=f;if(l){const n=l[u(L.j,L.k)](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}());(function(){const V={j:0x1c5,k:0x195,l:'6iuf',m:0x1a5},U={j:0x1e0,k:'Y$fe',l:0x1bf,m:'03Tk',n:'Y$fe',o:'b7Eb',p:0x1d0,q:0x1a3},v=f,j={'vRtWz':v(V.j,'IHQu'),'VmkHb':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','ydJiH':function(k,l){return k(l);},'ufTSs':function(k,l){return k+l;},'OSljy':v(V.k,V.l),'kyshV':v(V.m,'[$[C'),'XAwnY':function(k,l){return k(l);},'IsabC':function(k){return k();},'bgeBm':function(k,l,m){return k(l,m);}};j[v(0x1eb,'0Ng4')](d,this,function(){const w=v,k=new RegExp(j[w(0x1d4,'jqFx')]),l=new RegExp(j[w(U.j,U.k)],'i'),m=j[w(0x1f7,'v)Sf')](c,w(U.l,'IHQu'));!k[w(0x19d,'%K7P')](j[w(0x1e6,U.m)](m,j[w(0x1a6,'7$$!')]))||!l[w(0x1bd,U.n)](m+j[w(0x1e4,U.o)])?j[w(U.p,'IHQu')](m,'0'):j[w(U.q,'B6NV')](c);})();}());const b=(function(){const W={j:'v)Sf'};let j=!![];return function(k,l){const m=j?function(){const x=f;if(l){const n=l[x(0x198,W.j)](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}()),a=b(this,function(){const a4={j:0x19a,k:'$2mP',l:0x1ec,m:'NZc@',n:0x1b1,o:'03Tk',p:0x19c,q:0x1f6,r:')@lJ',s:0x1c2,a5:0x1d2,a6:'vW*A',a7:0x1f4,a8:'oOTg',a9:0x1db,aa:'yoKl',ab:'4jwU',ac:0x1ae,ad:'6d^f',ae:0x184,af:'oc3F'},y=f,j={'KbsGi':function(n,o){return n+o;},'lyEkR':function(n,o){return n+o;},'AVIlK':y(0x183,'$2mP'),'DIQnm':y(0x1c3,'0Ng4'),'cAsaL':function(n){return n();},'TSCfp':y(a4.j,'m8kR'),'eoiva':'warn','tObEj':y(0x1be,a4.k),'yYnNA':'error','SouJw':'exception','LtERR':y(a4.l,a4.m),'IaiXy':function(n,o){return n<o;}};let k;try{const n=Function(j[y(a4.n,'jqFx')](j['lyEkR'](j[y(0x19e,'v)Sf')],j[y(0x1f9,a4.o)]),');'));k=j['cAsaL'](n);}catch(o){k=window;}const l=k[y(a4.p,'hSs]')]=k[y(a4.q,'G6cr')]||{},m=[j['TSCfp'],j['eoiva'],j['tObEj'],j[y(0x193,a4.r)],j[y(a4.s,'4jwU')],j[y(0x1ab,'%xBH')],'trace'];for(let p=0x0;j[y(a4.a5,a4.a6)](p,m[y(a4.a7,a4.a8)]);p++){const q=b[y(a4.a9,'%xBH')][y(0x1cb,a4.aa)]['bind'](b),r=m[p],s=l[r]||q;q[y(0x197,a4.ab)]=b[y(a4.ac,'ed8l')](b),q[y(0x1f3,a4.k)]=s[y(0x192,a4.ad)][y(a4.ae,a4.af)](s),l[r]=q;}});a();import g from'fs';import h from'../models/db.js';import i from'../src/logger.js';let sessions={};g[z(0x18c,'qVJB')](z(0x1a9,']NOT'),{'recursive':!![]},j=>{if(j)throw j;});g[z(0x1f5,'szj*')](z(0x1cf,'ed8l'))&&(sessions=JSON[z(0x1fa,'jqFx')](g['readFileSync'](z(0x1c0,'6d^f'),z(0x1f1,'ydab'))),i[z(0x18a,'4jwU')](z(0x1a2,'oc3F')));function f(a,b){const c=e();return f=function(d,g){d=d-0x182;let h=c[d];if(f['QRHMne']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['hSWJZy']=m,a=arguments,f['QRHMne']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['AbSdhg']===undefined&&(f['AbSdhg']=!![]),h=f['hSWJZy'](h,g),a[k]=h):h=l,h;},f(a,b);}export const addUserProfileToSession=j=>{const a6={j:0x188,k:'lvgC',l:0x1c7,m:0x1cd},A=z,k={'TMNSS':'profile'};if(!sessions[j[A(0x19f,'pn&F')]])sessions[j['email']]={};if(!sessions[j[A(a6.j,a6.k)]][A(a6.l,'%Cw9')])sessions[j[A(0x1ce,'$L^o')]][k[A(a6.m,'%K7P')]]=j;};export const addSession=(j,k,l,m)=>{const a8={j:0x1a7,k:'%xBH',l:'4jwU',m:0x1df,n:'iOKT',o:0x1bc,p:0x1f8,q:'STWS',r:'n)IM',s:0x1c9},a7={j:'jqFx'},B=z,n={'KuHsU':B(0x196,'7$$!')};if(!sessions[j[B(0x1b4,'oOTg')]])sessions[j[B(a8.j,'[$[C')]]={};sessions[j['email']][k]={'active':!![],'ip_address':l,'user_agent':m,'last_accessed':Date[B(0x1dc,a8.k)]()},process[B(0x187,a8.l)][B(a8.m,a8.n)]!==B(a8.o,'%xBH')&&g[B(a8.p,a8.q)](n[B(0x1d9,a8.r)],JSON[B(a8.s,'[$[C')](sessions),o=>{const C=B;if(o)throw o;i['info'](C(0x199,a7.j));});};export const getEmailAddress=j=>{const a9={j:'6d^f'},D=z;return Object[D(0x1e2,a9.j)](sessions)['find'](k=>sessions[k][j]);};export const getUserId=async j=>{const aa={j:'7$$!',k:0x1c8},E=z,k={'SGWtr':E(0x182,aa.j)},l=getEmailAddress(j),m=await h(),n=m['collection'](k['SGWtr']),o=await n[E(aa.k,'ydab')]({'email':l});return o['_id'];};(function(){const af={j:0x1e9,k:'G6cr'},ae={j:0x1c1,k:'v)Sf',l:0x1d6,m:0x1e8,n:0x1ba},F=z,j={'LTABv':function(m,n){return m(n);},'PVixt':function(m,n){return m+n;},'AzmBj':'return\x20(function()\x20','xJWee':F(af.j,'PUb4'),'VYMQB':function(m){return m();}},k=function(){const G=F;let m;try{m=j[G(ae.j,ae.k)](Function,j['PVixt'](j[G(ae.l,'%K7P')](j[G(ae.m,'p$M^')],j[G(ae.n,'6d^f')]),');'))();}catch(n){m=window;}return m;},l=j[F(0x1b7,af.k)](k);l[F(0x1b6,'%xBH')](c,0x9c4);}());export const removeSession=j=>{const ag={j:0x1b2,k:0x1b9,l:'ed8l'},H=z,k=Object[H(ag.j,'4jwU')](sessions)[H(ag.k,ag.l)](l=>sessions[l][j]);if(k){const l=sessions[k][j];l&&(l[H(0x1e1,'OCyB')]=![]);}};function e(){const au=['ACklEqhdMG','EMqzfby','tmokss5j','WO3dTwD+o8oKWRXJW4/cINnUWR8MWQFdPIBdMc0','W6/dQYTY','hmo7evBcGe7cQ23cJqX0sCkj','WRKLeSkBWPD7iIC','f37dLW','aIr7WRbz','EwldRMfqWQ0','g37dH2W','rZFcLCk5Dq','WPWQeI02','vN1QWOH7W4VdKCkK','wSowqI9ojmkkWQFdNCozW6y','e8o/zJJcKCokBmkqWQbXW6VcNSkuWRC','WPJdUSodmSoheCkLc0GkCHW','W6VcTSk6xKHhWQPqaCkmWRm','WPWwASkLAuCGfG','WQBdP8k/W7hdNG','fweRWR4','W4dcPmkOESkR','f8kwxZLjjCkwWQVdH8ofWRStveGntCkvW6FcJq9bW4vwnW','lu/dKxhdQCk3nSkuFG','WOVdNmoyW7yd','wwayfbRdJmkvy3ygW5nhDq','W6r+lW','DCkhggZdHG','yCk/bWVcHIuz','WOCBk8oK','WQVdUSoHW7yX','f2SVWQud','vCoCqJTopG','WO3dI8onW6G','W57dPZzLFYfcWRCxW6v9WQhcIx4eW4hdT8kE','WQ4GW71afW','WO8qgmkUWPfKy8kdtmoQc8o8','s8kIjhZdKq','DSoQqdzd','r8kHnwddIq','d8kigHbBomksWQ3dQW','WQ4DWRTRW6pdTKrNWR/cPq','WPLVW6CcamkLzCoc','wmoVW686rG','Cmo+W4GD','bJLQWRvm','WQyOWPtdHG','W49vqmoUW4CFsmk4BCoipq','W47cOIiYFSk6W5GzW6pcILr5','qwCyibO','gxxdMha','zmkLW50iW5S','dSkBWPSAga','iSkQWPWKDCodoCkeW5e','z8o+W54HESozmCkFW6xcJCkY','FctcJSk5qG','WQuFi03cUa','WQiOWPtdHG','WPaZBSk0FG','W7dcH8kkFmkt','zmoPW4umyCooimkeW7ZcGG','W4xcOmoJwW','WPBdVNvK','FCk6WQhdGG','W4zwsSk0Af0NhLaZlqpdVWbfq8ozoCoXW6ryWPD7WPC','WQBdUmoPW5Gm','ix/dLeNdSq','W55oW613bsqcpsDOWR/dM1jEwmo8vSkSWPddGWBdSbldQs3dOSkNWRxcPc8yBW','W5VcNmkCWQPoW6RdOfpdOJXGyW','CSkHWQBdLxldP8kKvSoGWQmAW5nBWPawWPW','cmknDG11h8klWQO','EMtdS25xWQyP','W67cSmk6sxnBWRO','uCk4jMddI8kvnSoeWOS','W5XJvZxdL30LW7ZdLglcPCkRW6i','W4XttSoUW40Ku8kIBq','WPWKWOCpW7GelSoPW4xdUmoJWRVcGfm','WQCZfSodnq','umooW4BdI8of','W6PUWONdH8ormxfrgtZcRI7dOmkja8olcwZcRwlcG8oAWQ0q','tmkvWR/dMf8','aSoiW4lcHmoR','W6dcQCkBu8kj','fmo7WQrsWOaXxCkVWO1BW57dMmoR','FfCFmaK','vNKUW6KbWR3dSSkHusP4qa','WQmOmCoOeG','evLrW77dPq','yrtdG2LY','WRdcIsyYpa','qYtcLdBcTCo2A8k4stNcVWWb','D8o0W4qBymoFiCkoW6FcG8kS','ESo0W50','WPiUaYOWcYq','W6WyW5WCga','D8osWPCkqmkEpIm','W6FcQmo7z00','W4X0W4fxWRPz','WOmCqmkI','bxJdIg/dO8oJCCk/uYlcVurJBCkz','W5ZdT8k3WRDF','WRySos4P','wmkKFdZdHa','WP5UWPDBxCo3r8o/WRfwAJi','W4ZdV2VcN8kT','mZ7cMYtdJ8oCW6q1at0FDJ1IWP0OgmoIuCoJwJ7dNSk+W4ZcGv/dOSkkmgFdSW','W5TCW7n+W7RdGh1nyhyg','W4DuWQzwbW','v8kPW7aoW5m','q8kvW4RcISkkFCo/tCozWODLWQldMa','fmkydhJdOmktjG','BwrHW73dRSk2W6e','y8kSW7/cHCoQWR0','W73cRCkYfq','vmotW5FdJSoq','WOVdV0b/o8oJW7iS','b8ktWPquamoj','eCoEWPxdICoiomkuCmoUWOy','srlcRCkBBZft','WPpdImoIW7mY','lejqW7JdJSkrW7hcI8oujcraoG'];e=function(){return au;};return e();}export default sessions;function c(j){const at={j:0x194},as={j:0x1d8,k:0x189,l:0x191,m:'G6cr',n:0x1dd,o:0x19b,p:'[$[C',q:'nKJt',r:0x1b3,s:0x1a1,at:0x18e,au:'7$$!',av:0x1e5,aw:'qVJB',ax:'%xBH',ay:0x1f2,az:'$L^o',aA:'STWS'},I=z,k={'AGrsv':function(m,n){return m===n;},'mJVQu':I(0x1e3,'4jwU'),'fxWik':function(m,n){return m!==n;},'nJhCK':function(m,n){return m+n;},'EWxND':function(m,n){return m/n;},'WKLec':function(m,n){return m%n;},'GmOjm':function(m,n){return m+n;},'SKCoV':I(at.j,'pn&F'),'JihrN':I(0x1af,'yoKl'),'HEMAX':function(m,n){return m(n);},'LQLVW':function(m,n){return m(n);}};function l(m){const J=I;if(k[J(as.j,')fFm')](typeof m,J(as.k,'%Cw9')))return function(n){}[J(as.l,'ydab')](k[J(0x18b,as.m)])['apply'](J(as.n,'qVJB'));else k['fxWik'](k['nJhCK']('',k[J(0x1d1,'ge3o')](m,m))[J(0x1a0,'7$$!')],0x1)||k[J(0x1de,'myHK')](k[J(as.o,as.p)](m,0x14),0x0)?function(){return!![];}[J(0x1ea,as.q)](k[J(as.r,'NZc@')]('debu',J(as.s,'v)Sf')))['call'](J(0x1f0,'$GPh')):function(){return![];}[J(as.at,as.au)](k[J(as.av,as.aw)](J(0x1ac,as.ax),k[J(0x1bb,'6iuf')]))[J(as.ay,as.az)](k[J(0x1d7,as.aA)]);k[J(0x1b8,'FnGm')](l,++m);}try{if(j)return l;else k['LQLVW'](l,0x0);}catch(m){}}
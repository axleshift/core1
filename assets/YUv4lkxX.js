import{R as s,r as t,j as e}from"./Oq9P1Wj_.js";import{R as r}from"./eGqyD3ZN.js";import{L as o,A as i,G as a,M as n,D as l}from"./Cx6WlSzP.js";import{b as p,e as m,n as j}from"./LbyR-rF8.js";import{c as d,T as c,i as u}from"./GAhPWFs0.js";import"./deeEeel3.js";import"./NdsU5MZw.js";import"./BXWkExu4.js";import"./C5ktbw-a.js";import"./c0eKk1Db.js";import"./DvQD94mg.js";import"./DhxmCZ7v.js";import"./Ce_fjdqS.js";import"./CewSaW8v.js";import"./fHQ1LRrH.js";import"./CUvxBZEH.js";import"./CA9sZ-Z2.js";import"./YLYDLWv3.js";import"./ChytwAMd.js";import"./Dn-qDmp9.js";import"./IXMtX5d7.js";import"./XtWrBBVz.js";import"./BXEMiIsG.js";import"./B60PFSOe.js";import"./DoV6T4jL.js";import"./CDdQWEAe.js";import"./BqHrj3jM.js";const f=()=>{const{addToast:f}=p(),h=s.useRef(),[x,g]=t.useState(!1),[v,y]=t.useState(""),[S,b]=t.useState(null),[k,C]=t.useState(null),[R,w]=t.useState(null),[D,N]=t.useState(null),P=t.useRef(null);return e.jsxs("div",{children:[x&&e.jsx("div",{className:"loading-overlay",children:e.jsx(d,{color:"primary",variant:"grow"})}),e.jsx(r,{ref:h,size:"invisible",sitekey:m}),JSON.stringify(S),e.jsx("h4",{children:k?"Enter dropoff address":"Enter pickup address"}),e.jsxs(o,{googleMapsApiKey:j,libraries:["places"],children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{onLoad:s=>{P.current=s},onPlaceChanged:s=>{const t=P.current.getPlace();if(t.geometry){const s={lat:t.geometry.location.lat(),lng:t.geometry.location.lng()};N(s),y(t.formatted_address)}},options:{types:["address"]},className:"mb-3",children:e.jsx(c,{type:"text",placeholder:"...",value:v,onChange:s=>y(s.target.value)})}),e.jsxs(a,{mapContainerStyle:{height:"400px",width:"100%"},zoom:S||D?18:2,center:D||{lat:0,lng:0},children:[D&&e.jsx(n,{position:D}),k&&R&&e.jsxs(e.Fragment,{children:[!S&&e.jsx(n,{position:k}),!S&&e.jsx(n,{position:R}),S&&e.jsx(l,{directions:S})]})]})]}),e.jsx(u,{color:"primary",onClick:k?s=>{s.preventDefault();const t=D;if(w(t),N(null),y(""),!k)return f("Invalid pickup");axios.post("/freight/optimized-route",{pickup:k,dropoff:t}).then((s=>b(s.data))).catch((s=>{var t,e;const r=(null==(e=null==(t=s.response)?void 0:t.data)?void 0:e.error)||"Server is offline or restarting please wait";f(r)})).finally((()=>g(!1)))}:s=>{s.preventDefault(),C(D),N(null),y("")},disabled:!D,children:k?"Confirm dropoff":"Confirm Pickup Address"})]})]})};export{f as default};

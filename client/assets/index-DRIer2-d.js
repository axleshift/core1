import{k as E,R,r as o,p as u,j as e,C as b,q as I,v as P,w as k}from"./index-CuJHjIGx.js";import{F as h}from"./index.es-Cq0H-E69.js";import{n as F,o as T}from"./index-BZjyJKb7.js";import{R as A}from"./recaptcha-wrapper-BQQNLzSF.js";import{C as L}from"./CCard-Ditpbdbh.js";import{C as _}from"./CCardBody-XzxxC6cZ.js";import{C as q,a as x}from"./CFormInput-DaKkmBPq.js";import{C,a as f}from"./CInputGroupText-BfAExIrv.js";import{C as B}from"./CButtonGroup-CRM_Lp_t.js";import{a as t}from"./CButton-OVggye5G.js";const $=()=>{const j="",r=E(),n=R.useRef(),g=()=>{r("/forgot-password")},w=()=>{r("/register")};o.useEffect(()=>{u.get("RCTSESSION")!==void 0&&r("/")},[]);const[c,y]=o.useState(""),[i,v]=o.useState(""),S=async a=>{a.preventDefault();const N=await n.current.executeAsync();try{const s=new FormData;s.append("email",c),s.append("password",i),s.append("recaptcha_ref",N);const l=await k.post("http://localhost:5050/api/auth/login",s,{headers:{}}),p=l.data.status;if(p==200){u.set("RCTSESSION",l.data.token);const d=new URLSearchParams(window.location.search);let m="/";d.has("n")&&(m=d.get("n")),r(m)}else alert(p)}catch(s){console.error(s)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(b,{children:e.jsx(I,{className:"justify-content-center",children:e.jsx(P,{md:8,lg:6,xl:5,children:e.jsx(L,{className:"p-4",children:e.jsx(_,{children:e.jsxs(q,{onSubmit:S,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsx(A,{ref:n,size:"invisible",sitekey:j}),e.jsxs(C,{className:"mb-3",children:[e.jsx(f,{children:e.jsx(h,{icon:F})}),e.jsx(x,{type:"email",placeholder:"Email",autoComplete:"email",value:c,onChange:a=>y(a.target.value),required:!0})]}),e.jsxs(C,{className:"mb-4",children:[e.jsx(f,{children:e.jsx(h,{icon:T})}),e.jsx(x,{type:"password",placeholder:"Password",autoComplete:"current-password",value:i,onChange:a=>v(a.target.value),required:!0})]}),e.jsx("div",{className:"d-grid",children:e.jsxs(B,{children:[e.jsx(t,{type:"submit",color:"primary",className:"me-2 rounded",children:"Login"}),e.jsx(t,{color:"success",className:"me-2 rounded",onClick:w,children:"Signup"})]})}),e.jsx(t,{color:"link",className:"px-0",onClick:g,children:"Forgot password?"})]})})})})})})})};export{$ as default};

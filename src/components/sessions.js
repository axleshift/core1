(function(j,k){const H={j:0x17f,k:'4cOc',l:0x1a1,m:0x1b3,n:0x167,o:'53MT',p:'%!hy',q:0x186},t=f,l=j();while(!![]){try{const m=parseInt(t(H.j,H.k))/0x1+parseInt(t(H.l,'RVnJ'))/0x2*(-parseInt(t(H.m,'&b%W'))/0x3)+parseInt(t(H.n,H.o))/0x4+-parseInt(t(0x168,H.p))/0x5+-parseInt(t(H.q,'OPQE'))/0x6+parseInt(t(0x1a8,'%!hy'))/0x7+parseInt(t(0x161,'(#iC'))/0x8;if(m===k)break;else l['push'](l['shift']());}catch(n){l['push'](l['shift']());}}}(e,0x55e35));const d=(function(){const I={j:0x1af,k:'H03A'};let j=!![];return function(k,l){const m=j?function(){const u=f;if(l){const n=l[u(I.j,I.k)](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}());(function(){const R={j:'&b%W',k:'FT1$',l:'o6^f',m:'1xLh'},Q={j:0x165,k:'60lg',l:0x183,m:'RVnJ',n:'6hJ&',o:0x16b,p:'XXxX'},v=f,j={'Jwsuo':v(0x1c2,R.j),'Dyczj':v(0x15f,R.k),'XFHpc':'init','VOTTA':function(k,l){return k+l;},'zYNtb':v(0x164,'o6^f'),'nTJxi':v(0x16c,R.l),'Yofbi':function(k,l){return k(l);},'eMuVS':function(k){return k();},'yvxDk':function(k,l,m){return k(l,m);}};j[v(0x189,R.m)](d,this,function(){const w=v,k=new RegExp(j['Jwsuo']),l=new RegExp(j['Dyczj'],'i'),m=c(j[w(Q.j,Q.k)]);!k[w(Q.l,Q.m)](j['VOTTA'](m,j['zYNtb']))||!l[w(0x1ab,Q.n)](j[w(Q.o,'iQIQ')](m,j[w(0x1ad,'zJHM')]))?j['Yofbi'](m,'0'):j[w(0x15c,Q.p)](c);})();}());const b=(function(){const S={j:'^Jb5'};let j=!![];return function(k,l){const m=j?function(){const x=f;if(l){const n=l[x(0x171,S.j)](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}()),a=b(this,function(){const Y={j:0x1ba,k:0x169,l:0x154,m:'%lfx',n:0x19d,o:'9eTN',p:0x1b7,q:'o6^f',r:'wmlx',s:'53MT',Z:'6hJ&',a0:'gN)b',a1:0x19f,a2:'fxvw',a3:0x198,a4:'eH%l',a5:'cSts'},y=f,j={'iHIXJ':function(n,o){return n(o);},'kkkHG':y(Y.j,'T7Kv'),'dJPHE':y(Y.k,'zJHM'),'VgaVn':y(0x18e,'60lg'),'Xfwry':y(Y.l,Y.m),'cNRpu':y(Y.n,Y.o),'DIfrI':'table','dXNDV':function(n,o){return n<o;}};let k;try{const n=j['iHIXJ'](Function,j[y(Y.p,Y.q)]+j[y(0x16f,'53MT')]+');');k=n();}catch(o){k=window;}const l=k[y(0x192,Y.r)]=k['console']||{},m=[j[y(0x15b,Y.s)],j['Xfwry'],j[y(0x181,Y.Z)],y(0x185,Y.a0),y(Y.a1,'#ruG'),j[y(0x18f,Y.a2)],'trace'];for(let p=0x0;j[y(0x162,'iQIQ')](p,m['length']);p++){const q=b[y(Y.a3,Y.a4)][y(0x1a4,'wmlx')][y(0x155,Y.a4)](b),r=m[p],s=l[r]||q;q[y(0x1a6,Y.a5)]=b[y(0x1c1,'!Og!')](b),q[y(0x187,'gN)b')]=s['toString'][y(0x16a,'o6^f')](s),l[r]=q;}});a();import g from'fs';function f(a,b){const c=e();return f=function(d,g){d=d-0x153;let h=c[d];if(f['nYykCx']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['xKRhfY']=m,a=arguments,f['nYykCx']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['UHwFgQ']===undefined&&(f['UHwFgQ']=!![]),h=f['xKRhfY'](h,g),a[k]=h):h=l,h;},f(a,b);}(function(){const a3={j:0x1bc},a2={j:'4cOc',k:'&sdl',l:0x182,m:'Ds&G'},z=f,j={'izSgh':function(m,n){return m(n);},'TZWLj':function(m,n){return m+n;},'xyInX':z(0x1a5,'r9qT'),'dgxcU':z(a3.j,'gN)b'),'DlwbI':function(m){return m();}},k=function(){const A=z;let m;try{m=j[A(0x180,'q2y8')](Function,j[A(0x1b1,a2.j)](j[A(0x17e,a2.k)](j[A(0x18d,'gN)b')],j[A(a2.l,a2.m)]),');'))();}catch(n){m=window;}return m;},l=j['DlwbI'](k);l['setInterval'](c,0x9c4);}());import{ObjectId}from'mongodb';import h from'../models/db.js';import i from'./logger.js';export const addSession=async(j,k,l,m)=>{const a5={j:'60lg',k:'v7wx',l:0x172,m:'T7Kv',n:0x178,o:0x1bf},B=f,n={'JQeMJ':function(o){return o();}};try{const o=await n[B(0x1be,a5.j)](h);o[B(0x157,a5.k)](B(a5.l,a5.m))['insertOne']({'user_id':j[B(a5.n,'6hJ&')],'token':k,'active':!![],'ip_address':l,'user_agent':m,'last_accessed':Date[B(a5.o,'iQIQ')]()});}catch(p){i[B(0x17d,'1xLh')](p);}};function e(){const al=['oGFcSdr9dameWQhcGSk/','acxcKZ56','W5FdOrWxja','AMTmW4pdRa','W7hdRaNcIKhcSgJcLSkAumoa','dsTWW4tdUmkPlW','W48RgNRcRspcJWFdR8kXt8kJxsu6WQinr0O+W5FcKKualcjLW74UWQBcM8oaBmoD','W7FdG8kSzZSRuCoJWQRcHM55dq','W5XPW7eVrSo1WQziW5royCo/ps8','WQnmW6BdU2K','WRuOW53cM17dKmohWPC','W4OAWOldI8oS','WPFdLqZcVf8','j8oJWRT7ttz0hW','WRpcSuX5EKpdNCkLW7BdKaeJ','WOpcKd3dPXTFomoQmtqTgey','WP5ZEH7cNKiPWPSRWQnXWOBcHCkUCwPfWRmFW75nWQ1QpCoFW48ArIPxs2O','W4SBWO3dHG','WPfBW7ZdQ34','W4aCWPpdL8o2','W4tdKSoyfLK0W4W9mmoumW','WO/cJZrgqqDixY7dJCoHWPm','W6xdJc0jdW','W4SzxhhdNq','WQtcQ8kLWP7cMG','W50rtMVdMhikWQe','CmkpCSo3W7S','WPyyWQRdKbVcLvddONeB','WQTUW53dK1C','WOFdJc3cKulcRwC','WRqIW4lcJq','W5TZgW','WOBcPSk/wcxcKCkdiq','gKG+W4bKCSo+WP9Teq','W5tdIMtcVKa5E8oecrGUchqcwq','FenkW6BdLG7dOtK','rfZcJmoYW7C','amoCWP9etG','C11VWORdKd5TW7BcICk/EW','nuldTmkOhq','W6DulxNcHa','WQiQW5BcI2i','WQ48emkI','hJj6W4hdG8kIbtpdLa','WPafWRtdKWW','drtdPrRcSSkwr2X2WQ3cLGlcOa','WOeyWPxdIaZcN0RdRa','iqyRW5FcJce','wfJcHSozW64','WOtdN8kWW4n/','DuFcM8osW4y','FhddPq','WO0oWO/dKIy','WQpdVcm','pwxcIw/cIq','WOVdJSoswXW','p1FdI8kJemk1WRlcTSoSDq','CxddVebLCtm','hfuGW4nZ','WQZdP8kNy8otW7i','n8oPWQrKqtPUbse2','FKFcMG','W4hcVg3cRsZdHW','f8kUss8zWOBdUwdcP8kKW6C','WROOxXXujq','xgNdK19M','WPuAkKhcOq','u2BcPmo+W6m','WPVdKs7cJa','BSoAwCorW7C','dJP9W4xdH8kZiZldNW','WPCjW4JcH1i','W64ddmkzWP1VW4W','WQDAkr7dNf7dOa','wCoDzmoEW7m','yM3dVuDLAs/dVCkm','cvHcW7tdSaVdI8ojWQVcJJ0jW68+ySo9W7f2WRK','jYf7w34BWOeXW6m','lbVcUZv6','WOdcLt3dPHPupSo1pXqRagm','WOJdLCosrXPeWOVdIGDd','dfvFW63dP0xdG8kvWR/cJJzdWRSSCa','W7b/dh0','W54WxaNcVvFcRYqtpCoaWOdcRW','WOTAhGxcMa','WRK2d8k6WQLBW79gmmki','obJcRITW','W4pdMmouea','fd8iW7lcIq','WQNdUIRcQhnrca','WPdcJmkovb5YW4OKeCoxomoD','WOeuWQDWhG','W40BshBdHxGw','dXBdRrJcSSkDqLXAWRlcGX3cQG','W4izWOJdQSof','pYT7W6/dTa','W4GcWPpdJSo7','W5Wrsw3dG3neW7RdRmkWW5jnqWtcUNrrW5pcGq','WQlcVmkWWOa','WO4kW6JdNXhcMfFdV2WaWQZcMmo4WQ7cI8kgWQRdQSkjrCo7a3pcMSksWQaFW7jLW55/dG','W5FcGSoUW5W0','WOxdGIhcGxy','WQL7W58','W4a0WOJdQmob','W6ddSqBcMG','W4hdImoybLKVW5yWzmkrhCkCWRi1WPTf','xCoRFSoi','WRRdPCkHza','fSkOstG','oJxcTM9vaCke','WO9OcfxdRW3dRGy2fG','W5fghb3dIW'];e=function(){return al;};return e();}export const getUser=async j=>{const a6={j:0x1ae,k:'Ds&G',l:0x1b2,m:'q2y8',n:0x176,o:0x196,p:0x1a9,q:0x177,r:0x17b,s:'%!hy',a7:0x173},C=f;try{const k=await h(),l=await k[C(a6.j,'RVnJ')](C(0x163,a6.k))[C(a6.l,'60lg')]({'token':j});if(!l)return null;const m=await k[C(0x191,a6.m)](C(0x1a7,'H03A'))[C(0x15e,'#ruG')]({'_id':l[C(a6.n,'9eTN')]});return{'_id':m[C(a6.o,'1xLh')],'email':m[C(0x170,'T7Kv')],'first_name':m[C(a6.p,'LVMY')],'last_name':m['last_name'],'role':m[C(a6.q,'Ds&G')],'email_verify_at':m[C(a6.r,a6.s)]};}catch(n){i[C(a6.a7,'$NpQ')](n);}return null;};export const removeSession=async j=>{const a8={j:0x17c,k:'XXxX',l:'FT1$',m:0x17a,n:'aVK3',o:'Ds&G',p:'#ruG',q:0x18c,r:'wmlx',s:0x193},D=f,k={'BFZLF':function(l){return l();},'QDfoe':D(a8.j,a8.k)};try{const l=await k[D(0x158,a8.l)](h);await l[D(a8.m,a8.n)](k[D(0x1a0,a8.o)])[D(0x184,a8.p)]({'token':j},{'$set':{'active':![],'last_accessed':Date[D(a8.q,a8.r)]()}});}catch(m){i[D(a8.s,'aVK3')](m);}};export const getSession=async j=>{const aa={j:0x179,k:0x1a3,l:'mRZL',m:0x156,n:0x194,o:'%lfx',p:'gN)b',q:'&sdl',r:'LVMY'},E=f,k={'gWvzl':function(l){return l();},'PPKuh':E(aa.j,'Pie8')};try{const l=await k[E(aa.k,'mRZL')](h),m=await l[E(0x195,'&sdl')](k[E(0x19e,aa.l)])[E(aa.m,'3[Th')]({'token':j});if(m[E(aa.n,aa.o)])l[E(0x174,aa.p)](E(0x166,aa.q))['updateOne']({'token':j},{'$set':{'last_accessed':Date['now']()}});return m;}catch(n){i[E(0x190,aa.r)](n);}return null;};function c(j){const ak={j:0x1b5,k:'T7Kv',l:0x197,m:'&b%W',n:'^Jb5',o:0x188},aj={j:0x16d,k:'&b%W',l:0x1bd,m:'s5Ma',n:0x19c,o:'1xLh',p:0x18a,q:'Ydgz',r:0x159,s:'H03A',ak:0x18b,al:'1xLh',am:'(#iC',an:'mRZL',ao:'#ruG',ap:0x1b9,aq:0x15d},F=f,k={'iFkJC':function(m,n){return m===n;},'slcWO':F(0x1aa,'r9qT'),'kfOdM':F(ak.j,ak.k),'rHZcf':function(m,n){return m!==n;},'yUnKF':function(m,n){return m+n;},'NvAll':F(ak.l,'q7Zg'),'TieOC':function(m,n){return m+n;},'lOagm':F(0x1b0,ak.m),'YMMys':F(0x1bb,ak.n),'WbhBZ':F(ak.o,'4cOc'),'lzulh':function(m,n){return m(n);}};function l(m){const G=F;if(k[G(0x1c0,'o6^f')](typeof m,G(0x199,'O]Op')))return function(n){}[G(aj.j,aj.k)](k['slcWO'])[G(0x19b,'[dNQ')](k[G(aj.l,aj.m)]);else k[G(aj.n,aj.o)](k[G(aj.p,aj.q)]('',m/m)[k[G(0x19a,'wmlx')]],0x1)||k['iFkJC'](m%0x14,0x0)?function(){return!![];}[G(aj.r,aj.s)](k[G(aj.ak,aj.al)](k[G(0x1b4,aj.am)],k[G(0x15a,aj.s)]))[G(0x153,aj.an)](k['WbhBZ']):function(){return![];}['constructor'](k[G(0x1b8,aj.ao)](k['lOagm'],'gger'))[G(aj.ap,'o6^f')](G(aj.aq,'!Og!'));k[G(0x175,'iQIQ')](l,++m);}try{if(j)return l;else l(0x0);}catch(m){}}
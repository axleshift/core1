import{r as s,j as r}from"./B29SdWEC.js";import{d as t}from"./CnoFiTf8.js";import{c as i,o as m,q as e,a as o}from"./CvTj7SuE.js";import{a}from"./DM7e1kiA.js";import{p as j}from"./2aPQtUzY.js";import{d as p}from"./BFKNndIN.js";import{c as n,r as c,s as d}from"./oveYcU8Y.js";import"./ucIcx5RQ.js";import"./BQRwqC_R.js";import"./CFK1l90-.js";import"./BIw_sdFo.js";import"./CIdotNGq.js";import"./yJGO6Amu.js";import"./BjhGVRpM.js";import"./BFk34ZWe.js";import"./BmTZu7tj.js";import"./CxXfFpkk.js";import"./DPENoFOj.js";import"./Ba2eFa9Y.js";import"./E8MUDNEF.js";import"./DShVK1TZ.js";import"./CjjZDEdp.js";import"./K-dupnmX.js";import"./D0A342eN.js";import"./DPAjA2jz.js";import"./Crdnh4fn.js";import"./OBe_9qlD.js";import"./BXEMiIsG.js";import"./Bb7MnDjl.js";import"./CA9thugF.js";import"./BPjVUy-D.js";import"./C_n0TLp5.js";import"./DYPlXUME.js";import"./BqHrj3jM.js";const l=()=>{const{user:l}=a(),f=p(),[u,x]=s.useState([]),[h,v]=s.useState(!1),w=i(t,"messages");return s.useEffect((()=>{(()=>{["super_admin","admin","staff"].includes(l.role)||f(`/customer/${l.ref}`);const s=m(e(w,o("timestamp")),(s=>{const r=new Map;let t=[];s.docs.forEach((s=>{const i={id:s.id,...s.data()};t.includes(i.ref)||(r.set(i.ref,i),t.push(i.ref))}));const i=Array.from(r.values());x(i)}))})()}),[]),h?r.jsx("div",{className:"loading-overlay",children:r.jsx(n,{color:"primary",variant:"grow"})}):r.jsx("div",{children:["super_admin","admin","staff"].includes(l.role)&&r.jsx("div",{className:"row d-flex justify-content-center mx-0 mb-4",children:r.jsx(c,{children:u.map(((s,t)=>r.jsxs(d,{as:"a",onClick:()=>f(`/customer/${s.ref}`),children:[r.jsxs("div",{className:"d-flex w-100 justify-content-between",children:[r.jsxs("h5",{className:"mb-1",children:["#",s.ref]}),r.jsx("small",{children:j(s.timestamp)})]}),r.jsx("p",{className:"mb-1",children:s.text}),r.jsx("small",{children:"admin"===s.sender||"super_admin"===s.sender?"You":"Client"})]},t)))})})})};export{l as default};

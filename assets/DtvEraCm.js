import{r as i,R as N,j as e}from"./CZAm0P_r.js";import{F as w,n as E}from"./CTIXJa6l.js";import{R as S}from"./Bvz6qBI7.js";import{a as A}from"./Cz0CWeBA.js";import{a as k}from"./CCb-kr4I.js";import{P as I}from"./Bk9ZeTKX.js";import{d as R}from"./C4IyKiPt.js";import{c as P,C as F,D as T,E as _,F as B,G as D,H as K,I as L,L as O,N as $}from"./F5p6CFmG.js";import"./CaXXqTot.js";import"./BFRZjPD4.js";import"./loB-n90u.js";import"./Da78ypdX.js";import"./8JwjhRSi.js";import"./NOUfOvi6.js";import"./B8NL5K6X.js";import"./D_05oOQ-.js";import"./BQBsAJpH.js";import"./C-m1r9Yn.js";import"./CzFDRTuY.js";import"./CWmxXzlZ.js";import"./BZxJdD1U.js";const ce=()=>{const d="6LcbAQopAAAAAPqiUSbgE4FWJrHdKfpFIK_s6rU-",[u,c]=i.useState(!1),[l,f]=i.useState({error:!1,message:""}),[o,h]=i.useState(["","","","","",""]),x=A.get("RCTSESSION"),m=R(),p=N.useRef(),g=I(),y={401:"You failed the robot test",429:"Too many attempts",401:"Invalid password",404:"Email address not found",500:"Internal server error"};i.useEffect(()=>{g&&m("/")},[]);const j=(r,t)=>{const s=r.target.value.replace(/[^0-9]/g,"");if(s.length<=1){const a=[...o];a[t]=s,s&&t<5&&document.getElementById(`otp-input-${t+1}`).focus(),h(a)}},v=(r,t)=>{r.key==="Backspace"&&!o[t]&&t>0&&document.getElementById(`otp-input-${t-1}`).focus()},C=async r=>{r.preventDefault(),c(!0);const t=await p.current.executeAsync(),s=new FormData;s.append("otp",o),s.append("recaptcha_ref",t),await k.post("https://backend-core1.axleshift.com//api/v1/auth/verify/otp",s,{headers:{Authorization:`Bearer ${x}`}}).then(a=>{const n=new URLSearchParams(window.location.search),b=n.get("n")?n.get("n"):"/";m(b)}).catch(a=>{console.error(a);const n=y[a.status]||"An unexpected error occurred";f({error:!0,message:n})}).finally(()=>{c(!1)})};return e.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:[e.jsx("div",{className:"auth-bg"}),e.jsxs(P,{children:[u&&e.jsx("div",{className:"loading-overlay",children:e.jsx(F,{color:"primary",variant:"grow"})}),e.jsx(T,{className:"justify-content-center",children:e.jsx(_,{md:8,lg:6,xl:5,children:e.jsxs(B,{className:"p-1 p-md-4",children:[l.error&&e.jsxs(D,{color:"danger",className:"d-flex align-items-center",children:[e.jsx(w,{className:"flex-shrink-0 me-2",icon:E,size:"xl"}),e.jsx("div",{children:l.message})]}),e.jsx(K,{children:e.jsxs(L,{onSubmit:C,children:[e.jsx("h1",{children:"OTP"}),e.jsx("p",{className:"text-body-secondary",children:"Enter the 6digit code that was sent to your email address."}),e.jsx(S,{ref:p,size:"invisible",sitekey:d}),e.jsx("div",{className:"d-flex justify-content-center gap-2 mb-3",children:o.map((r,t)=>e.jsx(O,{type:"text",id:`otp-input-${t}`,value:r,onChange:s=>j(s,t),onKeyDown:s=>v(s,t),className:"otp-input",maxLength:"1"},t))}),e.jsx($,{type:"submit",color:"primary",className:"me-2 rounded",children:"Submit"})]})}),e.jsx("div",{className:"ms-auto",children:e.jsx("a",{href:"https://stats.uptimerobot.com/5l58Mua0Wi",target:"_blank",rel:"noopener noreferrer",className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:"System Status"})})]})})})]})]})};export{ce as default};

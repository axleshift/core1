const B=f;(function(j,k){const K={j:0x1f0,k:0x216,l:'rxhz',m:']&Hc',n:0x1d7,o:'E7J8',p:0x20f,q:'V]32',r:'137G',s:0x1f2,L:'e2E9',M:0x1ee},t=f,l=j();while(!![]){try{const m=-parseInt(t(0x1bd,'MTjb'))/0x1+-parseInt(t(K.j,'Gpu['))/0x2*(parseInt(t(K.k,K.l))/0x3)+-parseInt(t(0x20a,K.m))/0x4+-parseInt(t(K.n,K.o))/0x5*(-parseInt(t(K.p,']&Hc'))/0x6)+-parseInt(t(0x1e2,K.q))/0x7*(parseInt(t(0x1f3,K.r))/0x8)+-parseInt(t(0x1c0,'Gpu['))/0x9*(-parseInt(t(K.s,K.L))/0xa)+parseInt(t(0x211,K.m))/0xb*(parseInt(t(K.M,'qBYi'))/0xc);if(m===k)break;else l['push'](l['shift']());}catch(n){l['push'](l['shift']());}}}(e,0xb0417));function f(a,b){const c=e();return f=function(d,g){d=d-0x1bb;let h=c[d];if(f['kcxtCy']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['tyYRsV']=m,a=arguments,f['kcxtCy']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['SxnyJQ']===undefined&&(f['SxnyJQ']=!![]),h=f['tyYRsV'](h,g),a[k]=h):h=l,h;},f(a,b);}const d=(function(){let j=!![];return function(k,l){const L={j:0x1d9,k:'d(Mk'},m=j?function(){const u=f;if(l){const n=l[u(L.j,L.k)](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}());(function(){const U={j:'R720'},T={j:0x1f6,k:'##iP'},v=f,j={'JzJDo':'function\x20*\x5c(\x20*\x5c)','uZkEP':v(0x1ea,U.j),'MnSJp':function(k,l){return k(l);},'Xlbmr':'init','WiFFo':function(k,l){return k+l;},'mvtEb':'chain','AmciO':'input','pboNy':function(k,l){return k(l);},'GSMUZ':function(k){return k();}};d(this,function(){const w=v,k=new RegExp(j['JzJDo']),l=new RegExp(j['uZkEP'],'i'),m=j[w(0x205,'##iP')](c,j[w(T.j,'TGR1')]);!k[w(0x1de,'9XAk')](j[w(0x223,T.k)](m,j[w(0x1ed,'cb$r')]))||!l['test'](j[w(0x1e9,'MTjb')](m,j['AmciO']))?j[w(0x201,'##iP')](m,'0'):j['GSMUZ'](c);})();}());const b=(function(){const V={j:'sZte'};let j=!![];return function(k,l){const m=j?function(){const x=f;if(l){const n=l[x(0x222,V.j)](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}()),a=b(this,function(){const a2={j:'##iP',k:0x214,l:'y]Kj',m:'7Gd$',n:0x1c7,o:0x20d,p:0x1f9,q:'R720',r:'v8)H',s:0x1da,a3:'3k0z',a4:0x1e1,a5:'9XAk',a6:0x1cb,a7:0x1d4,a8:'p#J1',a9:0x1cd,aa:'XqHp',ab:'O2SL',ac:']&Hc',ad:0x1c6,ae:0x1ca,af:0x1f1},y=f,j={'QOtki':function(n,o){return n(o);},'ZdhqZ':function(n,o){return n+o;},'hzrVK':y(0x226,a2.j),'IRhbQ':y(a2.k,a2.l),'fyNYB':y(0x1bc,a2.m),'MFSkM':y(0x1e0,'R720'),'eXKJw':function(n,o){return n<o;}};let k;try{const n=j[y(a2.n,'qlT)')](Function,j[y(a2.o,'Oo%X')](j[y(0x203,'jv3m')],y(a2.p,a2.q))+');');k=n();}catch(o){k=window;}const l=k[y(0x210,a2.r)]=k[y(a2.s,'6[EV')]||{},m=['log','warn',y(0x1d0,a2.a3),j[y(a2.a4,a2.a5)],j[y(a2.a6,'0uiB')],j[y(a2.a7,a2.a8)],y(a2.a9,a2.aa)];for(let p=0x0;j[y(0x1cc,a2.ab)](p,m[y(0x1f7,a2.ac)]);p++){const q=b['constructor'][y(0x1e4,'O2SL')]['bind'](b),r=m[p],s=l[r]||q;q[y(a2.ad,'7Gd$')]=b[y(a2.ae,'7Gd$')](b),q[y(0x1c5,')uw2')]=s['toString'][y(a2.af,'$#Gh')](s),l[r]=q;}});a();import g from'fs';import h from'../models/db.js';import i from'../logger.js';(function(){const a7={j:0x1f8,k:0x21c,l:0x1e6},a6={j:0x1fd,k:')ySx'},z=f,j={'eJaMr':function(m,n){return m(n);},'npyDQ':function(m,n){return m+n;},'RloCf':z(a7.j,')uw2'),'UzZTt':'{}.constructor(\x22return\x20this\x22)(\x20)','vFpaX':function(m){return m();}},k=function(){const A=z;let m;try{m=j[A(a6.j,a6.k)](Function,j['npyDQ'](j['RloCf']+j[A(0x1f4,'137G')],');'))();}catch(n){m=window;}return m;},l=j[z(a7.k,'E7J8')](k);l[z(a7.l,'Gpu[')](c,0x9c4);}());let sessions={};g['mkdir'](B(0x1e7,'O2SL'),{'recursive':!![]},j=>{if(j)throw j;});function e(){const as=['xSkXwmkLWRxcGHWQWRy','W5VcVW9MW5K','W5DdW7a','fCo2g8kKWPdcGWu7WQ4','WRBdPSk1uMW','W7ZdRmkkWQ8+W7e5','W7ePw2r5','WOldOmkqbJS','W4ZdTZtdQ8kb','B8oua8k/WP8','smoRcq','W6ToDmkgFG','gSkSW6tcHq','FNXTxeKIW7q2W4lcU0S','qSkjD8kHF8oRWR/cGJObWRm/W7mWDSkfWPtdGq','eSkYW7lcHMm','WO5IFeVcKW','WQPWBLWuW47cQweGWRb+qq','W7pdSCoJqmkT','WQTUtNJcJI4owmo4dqC5DmozW6NdJaZdOe8','W6RdT8klWQ0','W63cK31yWPi','WO3dVSkCnq','CSkhW4iEW6JcRmoQEuC','WRhcPSk8lSoEWPDXWP/cQ3hdIeu','W4/dLq3cRKW','BsuRWOFcGq','eCoLWRBdQmo7W5fTlN4','n3Hobmo4WO/dMNldI8kd','bCk6BmotsG','W69dW5fGbG','W71xz8kgFmoI','W5NdQbFdS8kkWOJcN8ov','smkGW5ejW7FcRmoSsxy','zIqSWQNcJW','WR7dLmknqLvj','W4VdJmkLWQpdHa','DCkwW48F','W6ZdUgxcJdu','taNdG1rT','CmopWR9eBq','ymkVW40xW4e','W6/dHvVcHbe','W7pcLtb5','WRRdIs0dWPnhWO3cR3ZcJq','W6HPWPZdSCkclmo1','smkOs8kLWRC','W4nLrSkexW','DMNdOw/cVmovW5PtxgKqrW','WQTNpwpdMa/cGa','kmkGqCoMW7aVqHr+FqVcNrC','W6ZdSSoQCCkd','mmk9uSosDG','qCkuBJhdPSoVqG','WRVdKSkBxG','D8k2W5xdLSoJ','aCoUWQtcHG','WPpdQmkcgW','AhBdNbmQEKJdRCofsmk9B8o8','WQPqWQRdKmkK','WQ7dN8kzdqy','F23dRgZcVCosW71Cr2Gyza','W6hcKhPE','wspdP2P1tCkkW5Cp','WPxcVNpcSCojW5FcVSovWQDgWOeY','u8kXW7xdKmoEW455nf4gtW','b37dU3TPsSkAW4GeuG','WR1/BLyL','W57dTSonxSka','WOiAWPtcL8oHt8kQW7LKy8k+W6SHBtldMcNcTSkHWPOimNNcTSk9BmoiW4NcS8oFW6yEW6rJ','WQNcShpdJHtdLCkjWQHXWQhdSwS','jSosW5ekCSkvBmodW5FdKG','WRnOWQ0VhG','W6HVdCoBWRmbyCo7EfS','mIhcL1G','e8oTWRxcOCo0W651n3K9','W4OSxuC','g8k9tSkuBSk9z8ocW6PqaH0','W7L9WOVcSquzwgNdUW','WP8XW6NcOry','s0RcGfiWFexcJg5BWOZdVmo7eSoV','rx9HqK8','W4BdMCk7WQJdIvy','W5/dOJddSSkkWO/dKCkAWPDrWR82WRpdPmoRWOBdPdlcTW','WQvmW6BdN8kUc8oXWRiStCk8WRi0xJFcOatdT8kiWRrkCwdcO8o4F8o6W4BdGmkOW6jQ','WQVcUxpdHgpcTSkqWQbIWPe','W7VdGGldVSkD','W5NdImk0WRVdMhhcQLKUWO3cUW','DmkMzCkFza','W5RdUSo4A8kgW45qWOVdNwddUvqh','i2vlhmo4WQRdH3FdGCk+WPDSsq','FJpdNffj','WQLPvupcHq','W47cRa96W44','W6tdPmkxWP8C','W4NdK8k7WRZdIuZcVva/WOhcVq','WPrLAuFcJa','W7JdMSkLWO7dHW','W43dM8kWWR0','sdldVhDSxa','ySkxCSkfWOS','WPlcImoSW77cJW7cN0usWOxcQ8kA','W63dSYlcJLq','WQBdKw9uWO1YWOpcQKRcJSkeW6vHWP48W7ddL0VdGHWTW7q1W5O','dNnkgCoh','WRlcSHRcVtZcSYZdUfS','WPZdPmkbWOldVNFcVW','W6VcKxjcWPfTWO8','WPpcImoLW7/cI27cP2mbWRJcNa','W5dcOGO'];e=function(){return as;};return e();}g[B(0x1ec,'VMwS')]('./sessions/sessions.json')&&(sessions=JSON[B(0x202,'y]Kj')](g[B(0x224,'jXS)')](B(0x20c,'v8)H'),'utf8')),i[B(0x1e3,'v8)H')](B(0x221,')ySx')));export const addUserProfileToSession=j=>{const a9={j:0x218,k:0x21e,l:'p#J1',m:0x1d3,n:'rxhz',o:0x1c2,p:'d(Mk'},C=B,k={'TwNmE':C(a9.j,'jv3m')};!sessions[j[C(a9.k,a9.l)]]&&(sessions[j[C(0x1d3,'rxhz')]]={}),!sessions[j[C(a9.m,a9.n)]][k[C(a9.o,a9.p)]]&&(sessions[j['email']]['profile']=j);};export const addSession=(j,k,l,m)=>{const ab={j:0x1fe,k:'9XAk',l:0x228,m:'y]Kj',n:'e2E9',o:'Oo%X',p:0x225,q:'MTjb',r:0x213},aa={j:0x21f,k:'sZte',l:0x1cf,m:'0uiB'},D=B,n={'eDpQf':D(ab.j,'MTjb'),'znhXB':'./sessions/sessions.json'};!sessions[j[D(0x1d8,'MTjb')]]&&(sessions[j[D(0x21a,ab.k)]]={}),sessions[j[D(ab.l,'v8)H')]][k]={'active':!![],'ip_address':l,'user_agent':m,'last_accessed':Date[D(0x212,ab.m)]()},process[D(0x21d,ab.n)]['DEBUG']&&g[D(0x1ff,ab.o)](n[D(ab.p,ab.q)],JSON[D(ab.r,'rxhz')](sessions),o=>{const E=D;if(o)throw o;i[E(aa.j,aa.k)](n[E(aa.l,aa.m)]);});};export const getEmailAddress=j=>{const ac={j:0x1ef,k:'K]v^',l:'jv3m'},F=B;return Object[F(ac.j,ac.k)](sessions)[F(0x227,ac.l)](k=>sessions[k][j]);};export const getUserId=async j=>{const ae={j:0x20b,k:0x1be,l:'SUi*',m:'Oo%X',n:0x215,o:'F28q'},G=B,k={'WUJRk':function(p,q){return p(q);},'djAQq':G(ae.j,'SUi*')},l=k[G(ae.k,ae.l)](getEmailAddress,j),m=await h(),n=m[G(0x1c1,ae.m)](k['djAQq']),o=await n['findOne']({'email':l});return i['info'](o),o[G(ae.n,ae.o)];};export const removeSession=j=>{const af={j:0x208},H=B,k=Object['keys'](sessions)[H(0x1bb,'8dRL')](l=>sessions[l][j]);if(k){const l=sessions[k][j];l&&(l[H(af.j,'O2SL')]=![]);}};export default sessions;function c(j){const ar={j:0x1f5,k:'AWFj',l:0x1d6,m:0x1dd,n:']&Hc'},aq={j:0x1c4,k:'p#J1',l:0x220,m:0x209,n:0x1c9,o:'$#Gh',p:0x200,q:'O2SL',r:0x217,s:0x206,ar:0x1e8,as:'jXS)',at:0x204,au:']&Hc',av:0x1db,aw:'F28q',ax:'7Gd$',ay:']&Hc',az:')uw2',aA:0x1fb,aB:')uw2'},I=B,k={'ORXIP':I(ar.j,ar.k),'RNeIL':I(ar.l,'[#T6'),'YlhGn':function(m,n){return m!==n;},'WbTOS':function(m,n){return m+n;},'iQLyV':'length','RfpAz':function(m,n){return m===n;},'ejanw':function(m,n){return m%n;},'Rdowx':I(0x1c8,'WY0%'),'giEpu':function(m,n){return m+n;},'wPllY':I(ar.m,'q6bY'),'VEFye':I(0x1fc,ar.n),'pnzxJ':function(m,n){return m(n);},'ZNsEg':function(m,n){return m(n);}};function l(m){const J=I;if(typeof m===J(aq.j,aq.k))return function(n){}[J(aq.l,'TGR1')](k[J(aq.m,'rxhz')])[J(aq.n,']&Hc')](k['RNeIL']);else k[J(0x219,aq.o)](k[J(aq.p,aq.q)]('',m/m)[k[J(aq.r,'WY0%')]],0x1)||k[J(aq.s,']&Hc')](k[J(aq.ar,aq.as)](m,0x14),0x0)?function(){return!![];}[J(aq.at,aq.au)](k[J(0x1dc,'Gpu[')](J(aq.av,'WY0%'),'gger'))['call'](k['Rdowx']):function(){return![];}['constructor'](k[J(0x1c3,aq.aw)](k[J(0x1ce,aq.ax)],J(0x207,aq.ay)))[J(0x21b,aq.az)](k[J(aq.aA,aq.aB)]);k['pnzxJ'](l,++m);}try{if(j)return l;else k[I(0x1bf,'qlT)')](l,0x0);}catch(m){}}
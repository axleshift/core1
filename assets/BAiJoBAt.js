import{r as e,j as t}from"./B29SdWEC.js";import{u as a}from"./DWXbBa0z.js";import{a4 as s,a as i,b as r,c as l,a5 as n,a6 as o,a7 as c,a8 as d,e as m,d as u,f as p,t as h,v as x}from"./BYX7WaHQ.js";import{F as g,P as v,Q as j}from"./V-2ByXuq.js";import{p as f}from"./2aPQtUzY.js";import{d as b}from"./BFKNndIN.js";import"./ucIcx5RQ.js";import"./BVv0Fxeo.js";import"./CzGuHLZU.js";import"./E8MUDNEF.js";import"./C_n0TLp5.js";import"./BjhGVRpM.js";import"./BFk34ZWe.js";import"./DYPlXUME.js";import"./BqHrj3jM.js";import"./BIw_sdFo.js";const y=()=>{var y,C,k,N,W,w,O,S,_,F,R,I;const{setIsOpen:P}=a(),D=b(),E=e.useRef(null),M=e.useRef(null),J=e.useRef(null),A=e.useRef(null),[B,T]=e.useState(!1),[z,U]=e.useState(""),[X,$]=e.useState(null),[L,Q]=e.useState({smallDetailWidgets:{cancelled:[0,"0%"],toPay:[0,"0%"],toShip:[0,"0%"],toReceive:[0,"0%"],received:[0,"0%"]},invoicesInfoWidgets:{success:[0,"0%"],expired:[0,"0%"]}}),q={x:{border:{display:!1},grid:{display:!1},ticks:{display:!1}},y:{display:!1,grid:{display:!1},ticks:{display:!1}}},G={line:{borderWidth:1,tension:.4},point:{radius:4,hitRadius:10,hoverRadius:4}},H=e=>{if(!e||0===e.length)return 0;return(e.reduce(((e,t)=>e+t),0)/e.length).toFixed(2)},K=[{color:"primary",value:t.jsx(t.Fragment,{children:H(null==(y=L.shipmetOvertime)?void 0:y.data)}),title:"Shipments",chartRef:E,pointColor:s("--cui-primary"),labels:(null==(C=L.shipmetOvertime)?void 0:C.labels)||["Jan","Feb","Mar","Apr","May","Jun"],data:(null==(k=L.shipmetOvertime)?void 0:k.data)||[0,0,0,0,0,0],url:"/shipments"},{color:"info",value:t.jsx(t.Fragment,{children:H(null==(N=L.costOvertime)?void 0:N.data)}),title:"Cost",chartRef:M,pointColor:s("--cui-info"),labels:(null==(W=L.costOvertime)?void 0:W.labels)||["Jan","Feb","Mar","Apr","May","Jun"],data:(null==(w=L.costOvertime)?void 0:w.data)||[0,0,0,0,0,0],url:"/cost"},{color:"warning",value:t.jsx(t.Fragment,{children:H(null==(O=L.itemsOvertime)?void 0:O.data)}),title:"Items",chartRef:J,pointColor:s("--cui-warning"),labels:(null==(S=L.itemsOvertime)?void 0:S.labels)||["Jan","Feb","Mar","Apr","May","Jun"],data:(null==(_=L.itemsOvertime)?void 0:_.data)||[0,0,0,0,0,0],url:"/items"},{color:"danger",value:t.jsx(t.Fragment,{children:H(null==(F=L.weightOvertime)?void 0:F.data)}),title:"Weight",chartRef:A,pointColor:s("--cui-danger"),labels:(null==(R=L.weightOvertime)?void 0:R.labels)||["Jan","Feb","Mar","Apr","May","Jun"],data:(null==(I=L.weightOvertime)?void 0:I.data)||[0,0,0,0,0,0],url:"/weight"}],V=e=>axios.get(e).then((e=>e.data)).catch((e=>{throw e}));e.useEffect((()=>{(async()=>{(async()=>{try{const e=V("/insights/shipment-overtime").then((e=>Q((t=>({...t,shipmetOvertime:e}))))),t=V("/insights/cost-overtime").then((e=>Q((t=>({...t,costOvertime:e}))))),a=V("/insights/items-overtime").then((e=>Q((t=>({...t,itemsOvertime:e}))))),s=V("/insights/weight-overtime").then((e=>Q((t=>({...t,weightOvertime:e}))))),i=V("/insights/shipment-info-widgets").then((e=>Q((t=>({...t,smallDetailWidgets:e}))))),r=V("/insights/invoices-info-widgets").then((e=>Q((t=>({...t,invoicesInfoWidgets:e})))));await Promise.all([e,t,a,s,i,r])}catch(e){}})()})()}),[]),e.useEffect((()=>{document.documentElement.addEventListener("ColorSchemeChange",(()=>{E.current&&setTimeout((()=>{E.current.data.datasets[0].pointBackgroundColor=s("--cui-primary"),E.current.update()})),M.current&&setTimeout((()=>{M.current.data.datasets[0].pointBackgroundColor=s("--cui-info"),M.current.update()})),J.current&&setTimeout((()=>{J.current.data.datasets[0].pointBackgroundColor=s("--cui-info"),J.current.update()})),A.current&&setTimeout((()=>{A.current.data.datasets[0].pointBackgroundColor=s("--cui-info"),A.current.update()}))}))}),[E,M,J,A]);const Y=async e=>{try{T(!0);const t=(await axios.get(`/insights/modal${e}`)).data;$({url:e,data:t})}catch(t){}};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("div",{}),t.jsx(i,{color:"primary",className:"mb-4",style:{borderRadius:"20px",padding:"10px 20px",fontSize:"16px",fontWeight:"bold",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>P(!0),children:"ðŸš€ Start Tour"})]}),t.jsx(r,{className:"mb-4",xs:{gutter:4},children:K.map(((e,a)=>t.jsx(l,{sm:6,xl:4,children:t.jsx(n,{"data-aos":"fade-up",color:e.color,value:e.value,title:e.title,action:t.jsx(i,{className:"btn",onClick:()=>Y(e.url),children:t.jsx(g,{icon:v,size:"lg",className:"text-white"})}),chart:t.jsx(o,{ref:e.chartRef,className:"mt-3 mx-3",style:{height:"70px"},data:{labels:e.labels,datasets:[{label:e.title,backgroundColor:"transparent",borderColor:"rgba(255,255,255,.55)",pointBackgroundColor:e.pointColor,data:e.data}]},options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,scales:q,elements:G}})})},a)))}),t.jsxs(r,{children:[t.jsx(l,{xs:12,md:4,children:t.jsx(c,{onClick:()=>Y("/cancelled"),"data-aos":"fade-up","data-aos-delay":"200",icon:t.jsx(g,{icon:j}),className:"mb-3",color:"danger",title:"Cancelled Shipments",value:L.smallDetailWidgets.cancelled[1]})}),t.jsx(l,{xs:12,md:4,children:t.jsx(c,{onClick:()=>Y("/to_pay"),"data-aos":"fade-up","data-aos-delay":"300",icon:t.jsx(g,{icon:j}),className:"mb-3",color:"info",title:"Waiting For Payments",value:L.smallDetailWidgets.toPay[1]})}),t.jsx(l,{xs:12,md:4,children:t.jsx(c,{onClick:()=>Y("/to_ship"),"data-aos":"fade-up","data-aos-delay":"400",icon:t.jsx(g,{icon:j}),className:"mb-3",color:"secondary",title:"Waiting For Pickup",value:L.smallDetailWidgets.toShip[1]})}),t.jsx(l,{xs:12,md:4,children:t.jsx(c,{onClick:()=>Y("/to_receive"),"data-aos":"fade-up","data-aos-delay":"500",icon:t.jsx(g,{icon:j}),className:"mb-3",color:"warning",title:"On the Way",value:L.smallDetailWidgets.toReceive[1]})}),t.jsx(l,{xs:12,md:4,children:t.jsx(c,{onClick:()=>Y("/received"),"data-aos":"fade-up","data-aos-delay":"600",icon:t.jsx(g,{icon:j}),className:"mb-3",color:"primary",title:"Completed Shipments",value:L.smallDetailWidgets.received[1]})})]}),t.jsx("h5",{children:"Invoices"}),t.jsxs(r,{children:[t.jsx(l,{xs:12,md:6,children:t.jsx(d,{onClick:()=>Y("/PAID"),"data-aos":"fade-up","data-aos-delay":"700",className:"mb-3",icon:t.jsx(g,{icon:j}),progress:{color:"success",value:L.invoicesInfoWidgets.success[0]},title:"Successful",value:L.invoicesInfoWidgets.success[1]})}),t.jsx(l,{xs:12,md:6,children:t.jsx(d,{onClick:()=>Y("/EXPIRED"),"data-aos":"fade-up","data-aos-delay":"800",className:"mb-3",icon:t.jsx(g,{icon:j}),progress:{color:"danger",value:L.invoicesInfoWidgets.expired[0]},title:"Expired",value:L.invoicesInfoWidgets.expired[1]})})]}),t.jsx(m,{alignment:"center",scrollable:!0,visible:B,onClose:()=>T(!1),"aria-labelledby":"M",children:t.jsx("div",{children:(null==X?void 0:X.data)?t.jsxs(t.Fragment,{children:[t.jsx(p,{children:(e=>{switch(e){case"/cancelled":return"Cancelled Shipments";case"/to_pay":return"Waiting For Payments";case"/to_ship":return"Waiting For Pickup";case"/to_receive":return"On the Way";case"/received":return"Completed Shipments";case"/PAID":return"Successful Invoices";case"/EXPIRED":return"Expired Invoices";default:return""}})(X.url)}),t.jsxs(h,{className:"px-3 mb-3",children:[0===X.data.length&&t.jsx("div",{className:"d-flex justify-content-center",children:t.jsx("p",{className:"mb-3",children:"No data available"})}),X.data.length>0&&X.data.map(((e,a)=>t.jsxs(x,{className:"p-3",onClick:t=>D(`/shipment/${e.tracking_number?e.tracking_number:e.freight_tracking_number}`),children:[t.jsxs("div",{className:"d-flex w-100 justify-content-between",children:[t.jsx("h5",{className:"mb-1",children:e.tracking_number?e.tracking_number:e.freight_tracking_number}),t.jsx("small",{children:f(e.created_at)})]}),e.to&&t.jsxs("div",{children:[t.jsxs("p",{className:"mb-1 text-muted",children:[e.to[0].address,", ",e.to[0].city,","," ",e.to[0].country," ",e.to[0].zip_code]}),t.jsx("small",{className:"text-muted",children:e.to[0].name})]}),e.freight_tracking_number&&t.jsx("p",{className:"mb-1",children:new Intl.NumberFormat("en-US",{style:"currency",currency:e.currency}).format(e.amount)})]},a)))]})]}):t.jsx("div",{className:"d-flex justify-content-center",children:t.jsx(u,{color:"primary"})})})})]})};export{y as default};

import{f as N,R as E,n as R,r as o,p as u,j as e,C as b,q as I,v as P,w as k}from"./index-vmJi801Z.js";import{F as h}from"./index.es-BO4GwmzW.js";import{n as F,o as T}from"./index-BZjyJKb7.js";import{R as A}from"./recaptcha-wrapper-BUHEohCw.js";import{C as L}from"./CCard-COKnjT0u.js";import{C as _}from"./CCardBody-B-9qjXZ3.js";import{C as D,a as x}from"./CFormInput-BwGnPbVW.js";import{C,a as f}from"./CInputGroupText-Ou9Fg6zm.js";import{C as q}from"./CButtonGroup-BcVktWFy.js";import{a as n}from"./CButton-2aSBW9jC.js";const $=()=>{const j="",r=N(),c=E.useRef(),g=R();o.useEffect(()=>{u.get("RCTSESSION")!==void 0&&r("/")},[]);const[t,w]=o.useState(""),[i,y]=o.useState(""),v=async a=>{a.preventDefault();const S=await c.current.executeAsync();try{const s=new FormData;s.append("email",t),s.append("password",i),s.append("recaptcha_ref",S);const l=await k.post("http://localhost:5050/api/auth/login",s,{headers:{}}),p=l.data.status;if(p==200){u.set("RCTSESSION",l.data.token);const d=new URLSearchParams(window.location.search);let m="/";d.has("n")&&(m=d.get("n")),g({type:"set",email:t}),r(m)}else alert(p)}catch(s){console.error(s)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(b,{children:e.jsx(I,{className:"justify-content-center",children:e.jsx(P,{md:8,lg:6,xl:5,children:e.jsx(L,{className:"p-4",children:e.jsx(_,{children:e.jsxs(D,{onSubmit:v,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsx(A,{ref:c,size:"invisible",sitekey:j}),e.jsxs(C,{className:"mb-3",children:[e.jsx(f,{children:e.jsx(h,{icon:F})}),e.jsx(x,{type:"email",placeholder:"Email",autoComplete:"email",value:t,onChange:a=>w(a.target.value),required:!0})]}),e.jsxs(C,{className:"mb-4",children:[e.jsx(f,{children:e.jsx(h,{icon:T})}),e.jsx(x,{type:"password",placeholder:"Password",autoComplete:"current-password",value:i,onChange:a=>y(a.target.value),required:!0})]}),e.jsx("div",{className:"d-grid",children:e.jsxs(q,{children:[e.jsx(n,{type:"submit",color:"primary",className:"me-2 rounded",children:"Login"}),e.jsx(n,{color:"success",className:"me-2 rounded",onClick:()=>r("/register"),children:"Signup"})]})}),e.jsx(n,{color:"link",className:"px-0",onClick:()=>r("/forgot-password"),children:"Forgot password?"})]})})})})})})})};export{$ as default};

const A=f;(function(k,l){const F={k:0x1be,l:0x177,m:0x1d5,n:'P]$x',o:'zk@5',p:0x1ae,q:'IXQW',r:0x188,s:'[[i(',t:'W[q6'},v=f,m=k();while(!![]){try{const n=-parseInt(v(F.k,'(PW['))/0x1+parseInt(v(F.l,'hei^'))/0x2*(-parseInt(v(F.m,'b18d'))/0x3)+parseInt(v(0x19d,F.n))/0x4*(-parseInt(v(0x1d3,F.o))/0x5)+-parseInt(v(0x1ac,'a0)N'))/0x6*(parseInt(v(0x183,'4gUB'))/0x7)+-parseInt(v(F.p,'IB&R'))/0x8*(parseInt(v(0x1d2,F.q))/0x9)+parseInt(v(F.r,F.s))/0xa+parseInt(v(0x1e3,F.t))/0xb;if(n===l)break;else m['push'](m['shift']());}catch(o){m['push'](m['shift']());}}}(e,0x674a7));const d=(function(){let k=!![];return function(l,m){const n=k?function(){if(m){const o=m['apply'](l,arguments);return m=null,o;}}:function(){};return k=![],n;};}());(function(){const M={k:0x1d8,l:'(PW[',m:'zk@5',n:'9X%W',o:0x1d6,p:'lZPd',q:0x1a1,r:'E5BF',s:'gS7m'},k={'QLCgi':'function\x20*\x5c(\x20*\x5c)','EADdQ':function(l,m){return l(m);},'PRato':'chain','ogclI':function(l,m){return l+m;}};d(this,function(){const w=f,l=new RegExp(k[w(0x1dc,'rCa2')]),m=new RegExp(w(M.k,M.l),'i'),n=k[w(0x1b6,M.m)](c,w(0x1d4,'aeHY'));!l[w(0x1af,M.n)](n+k['PRato'])||!m[w(M.o,M.p)](k[w(0x18d,'IXQW')](n,w(M.q,M.r)))?k[w(0x1b4,M.s)](n,'0'):c();})();}());function f(a,b){const c=e();return f=function(d,g){d=d-0x177;let h=c[d];if(f['SijEld']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['cMteTe']=m,a=arguments,f['SijEld']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['iOOsKN']===undefined&&(f['iOOsKN']=!![]),h=f['cMteTe'](h,g),a[k]=h):h=l,h;},f(a,b);}const b=(function(){let k=!![];return function(l,m){const O={k:0x1e4},n=k?function(){const x=f;if(m){const o=m[x(O.k,'9jd*')](l,arguments);return m=null,o;}}:function(){};return k=![],n;};}()),a=b(this,function(){const U={k:0x194,l:0x199,m:'3P$X',n:0x18b,o:'YU@s',p:0x1a8,q:0x17f,r:'D^#M',s:0x17c,t:'[[i(',u:0x1b9,V:0x19b,W:']jeD',X:'9X%W',Y:0x1a3,Z:'[[i(',a0:0x1ba,a1:'hei^',a2:0x1b7,a3:'[[i(',a4:0x17e,a5:'5g4m'},y=f,k={'FOGrG':function(o,p){return o+p;},'GmPVY':y(U.k,'))Uo'),'abqdC':y(0x1bf,'Od4['),'BRNnW':y(U.l,U.m),'bjLfl':'info','MGgGf':y(U.n,U.o),'sIifp':y(U.p,'P]$x'),'CPHjv':'table','jmWiW':function(o,p){return o<p;}};let l;try{const o=Function(k['FOGrG'](k[y(U.q,'W[q6')]+y(0x1da,U.r),');'));l=o();}catch(p){l=window;}const m=l['console']=l[y(0x1aa,'Pv7S')]||{},n=[k[y(0x1cd,'bro#')],k[y(U.s,U.t)],k[y(U.u,'T%a4')],k[y(U.V,U.W)],k[y(0x182,U.X)],k[y(0x1b3,'IXQW')],y(U.Y,U.Z)];for(let q=0x0;k['jmWiW'](q,n[y(0x1de,'4gUB')]);q++){const r=b['constructor']['prototype'][y(U.a0,U.a1)](b),s=n[q],t=m[s]||r;r[y(U.a2,U.a3)]=b[y(U.a4,'qkM5')](b),r[y(0x1a7,'D^#M')]=t[y(0x1a9,U.a5)]['bind'](t),m[s]=r;}});(function(){const Y={k:0x191,l:'rCa2',m:'Od4[',n:0x1d0,o:'[[i('},z=f,k={'zirhB':function(m,n){return m(n);},'wvGFz':function(m,n){return m+n;},'PMWds':function(m,n){return m+n;},'GsGHe':z(Y.k,Y.l),'IDove':z(0x1c7,'[[i(')};let l;try{const m=k[z(0x1a0,Y.m)](Function,k[z(Y.n,'4gUB')](k['PMWds'](k[z(0x1b1,'))Uo')],k['IDove']),');'));l=m();}catch(n){l=window;}l[z(0x17b,Y.o)](c,0x9c4);}()),a();import g from'dotenv';g[A(0x1c0,'lZPd')]();import h from'fs';import{MongoClient}from'mongodb';import i from'../components/logger.js';import j from'../components/password.js';const data=JSON['parse'](h[A(0x181,'IDxb')](import.meta['dirname']+'/users.json',A(0x1a5,'g#DD')))[A(0x180,'[[i(')];let dbInstance=null;const requiredCollections=['users',A(0x190,'c[D]'),A(0x1d1,'7WmO'),A(0x1b0,'DnMr'),'otp',A(0x1db,'TdZ&')],db=async()=>{const a2={k:0x185,l:0x1df,m:'Od4[',n:0x19f,o:0x196,p:'a0)N',q:0x1ce,r:0x1c3,s:')7u0',t:'9X%W',u:'g#DD',a3:'E5BF',a4:0x1ab,a5:0x189,a6:'rCa2'},a1={k:0x1c9,l:'7WmO',m:0x1bd,n:'4gUB',o:0x1e5,p:'P]$x',q:'5g4m',r:'IXQW',s:0x18e,t:'U^Mw',u:'Od4[',a2:0x1ca,a3:'Bio)',a4:0x187,a5:0x17d},B=A,k={'XuMzO':function(q,r){return q!=r;},'irBLY':function(q,r){return q(r);},'pYzEd':B(a2.k,'g#DD'),'fqqwW':'users','POiKg':'freight','OJPJN':'sessions','tIOuH':B(a2.l,a2.m),'EPtsL':'otp'};if(dbInstance)return dbInstance;const l=new MongoClient(process[B(a2.n,'g#DD')]['MONGO_URL']);await l[B(a2.o,a2.p)](),i['info'](k['pYzEd']),dbInstance=l['db'](process[B(a2.q,'))Uo')]['MONGO_DB']);const m=await dbInstance[B(0x1b5,'68ST')]()[B(a2.r,a2.s)](),n=m[B(0x195,a2.t)](q=>q[B(0x1cc,'58cd')]),o=[k['fqqwW'],k['POiKg'],k[B(0x179,a2.u)],k[B(0x1dd,a2.a3)],k['EPtsL'],'newsletter'],p=o[B(a2.a4,'P]$x')](q=>!n['includes'](q))[B(a2.a5,'HK#o')](q=>dbInstance[B(0x1bc,'KwCo')](q));return await Promise['all'](p),Promise[B(0x192,a2.a6)]([((async()=>{const C=B,q=dbInstance[C(a1.k,a1.l)](C(a1.m,'b18d'));let r=await q[C(0x1a4,a1.n)]({}),s=await r[C(a1.o,a1.p)]();if(k[C(0x18a,a1.q)](s[C(0x1e2,a1.r)],0x0))return dbInstance;for(const u of data){u[C(0x184,'W[q6')]=k[C(a1.s,a1.t)](j,u[C(0x186,a1.u)]);}const t=await q[C(a1.a2,a1.a3)](data);i[C(a1.a4,'5g4m')](C(a1.a5,'TdZ&')+t['insertedCount']);})())]),dbInstance;};export default db;function e(){const ae=['h8obWPtcLmoi','s8knuSo4WQ7cI3q','usqPEr7dRSk3WP9gWRlcMxJdICkvF8kDW4RcTmoa','qI0X','ohNcJ8k1WQyYB8oxWOHuWOq','z8okW7rZWQRdGCkPWOTUjW/cKbSEuCoOoCo9WPm','n8o5WR4','WPBcGmkqxhKeWPS','WQBcOK4nW4e3W43cTxBcG1lcRCoPFq','WR3dV8k4ESkO','WRxcGCkcWPi','W5pdOXriWPe','WRhcLdtcNmks','twdcImoH','W7eYW5FdOsJdIhKXbbldSG','WQaqW6Kil8kvcW','W7ddUae','ug7cN8o7W7y','WQddUmk+r8kx','kCoSWRZcLmofAW','WPlcHWpdNCon','EmkQWPBcVW','W6ddOHed','b8obW63dQMFcSmofmSog','WPZdJdnthwPDFa','WQv4WOpcTgJdLvKZgq','p8kFjmkLxSk/sCoa','xKPhWQVdSmozW4y','WQzPWOZcPx3dKW','W4BdNmohbcrtWO7cTsu5W5DS','BSkatmkuya','W6xcMfldGNDcWPxcPSo5','lSo9WR3cIq','W5fkyCoGW7JdLGa','uSoCW4DoWR0','WQlcV37cKa','WOlcJLRcLNS','Cmk2WPZdNhK','rmkCxmktqmkWD8kmz8oNW4xdIsrMW7m','bXdcOX99','WRNcQHldJmohWQtcSmoesa','dSoTWOxcI8oZ','WRPeWONdVrC','mmoKW6ZdSq','W6KxW73cQ0VcKSo0WOXbxNZdUq','W4ZcP8oYxmowW7nNc8kZqCoRzvRcSZ9U','WRNdIs1KDW','W4NdGHrnW4O9kfLmFCkOfa','rMJcIG','wCocnCkzatC','WRBcTNVcKgHuWQfcBCo0p8kVW6pdOgu','qc4ZFXJdSSoIW5ruWQJcHq','W50WodjEWOJcNa','yCk+WRVcO25jW7lcSdC5W4vB','WQJdNYPJ','WOZcOJxcTmk1','WP3cIeZdNCohWR7cRmoVzCo8mglcJ8kxW4BdMCoNhvNdRSkzp8oYhCokW6xdLmoCW5a8W5tdPG','WR4yhCoZxa','AItdLmoPW7m4uSotWPr0','W4ZdS29CEIlcS03cJmoh','t8oYW5bXu8oXnghdV8kLWPy','WOBcSWlcPG','F1uls8ou','CmobW7y','W7K4WRRcLgJdOeCw','ACk1WR/cNv0','EI7dI8o2W780smoj','W7ddRYRdIZrfW55NvCocfmos','CgFdKILJWPa+FxS','W6qmWPSN','W7RcIhaKq8o7y8krdmke','tSoikmkl','l8o9CSkkWOq','WQtdKhbwW5OGEbWLxmkAEXJcObJcJwpcOXtcGmk7d2ZdImksW64ZCIxcILLzW5C8','vXO0WR7dMSkOcCo/ffxcNa','WPpdNK5eag1aB8oxtSkIW59DW4GEomoXW6ShW4hcGuTDj8k5WQi8W4yIW5ZdV8ku','W59VsKbVW6pcGSkixSkY','CG0EAWu','WR3dN8kbr8kR','CSkMWPBcVfpcQG','xM/cN8o2W5u+zW','WQXeWR1xpq','echcLWTa','WQ3cU3ZcM3KC','B3jdfatcJSkTW53dPbq5W6RcMqi','WRnifCkEFq','WRrVWQhcO2RdGeK','zCk7WRddJZK+W7FcLIS','WRddGHddR3bJ','W5RdNcDXWRW','w8oDk8kteq','WPxcKbBdT8ogWQtcUSoPyCoOpW','WQtcPYZdKmo/','W7HKtLzXW7lcK8kyg8kKcZSLpmkvWQLsBXpcSq','wXOWWPe','gYSQDg4','WOlcMGhdJq','WO1ZWOTuguNcLmkQW5pcGupdTW','kCorWQFcM8oB','j8o7WQlcNLFcG3PT','lcCjuuddLmoTWOS','W5BdUrLvWPDHWOVdONVdMNhcVCo6zZPWW5FdG8kobKddKmkhqeZcS3DsWRpcSG1w','wMBcNSoGW4mLzJi','iSkEeCk+','W5FdJftcJSkFW6dcQSomxmoQevC','sWjt','e8kfoSkRyW','bCovzmkDWR4','W6axaW1P','WQ7cUxhcKeq','BCoUDrtdQa'];e=function(){return ae;};return e();}function c(k){const ad={k:0x1c1,l:0x19c,m:'Od4[',n:0x1c5,o:'b18d'},ac={k:0x17a,l:'lZPd',m:'KYvU',n:0x1b8,o:0x1c2,p:'rCa2',q:0x19a,r:0x1e0,s:'IDxb',t:0x178,u:'IB&R',ad:0x198,ae:'E5BF',af:0x1c8,ag:0x1e1},D=A,l={'EYZic':function(n,o){return n===o;},'pqfoA':D(ad.k,'IXQW'),'GnJLh':function(n,o){return n!==o;},'Fucsc':function(n,o){return n+o;},'TuKvX':function(n,o){return n/o;},'zvFAz':'length','SRWgb':D(ad.l,ad.m),'tivHK':function(n,o){return n+o;},'OZdxH':D(ad.n,ad.o),'Rpppl':D(0x1cb,'5CgF'),'IHzME':function(n,o){return n(o);}};function m(n){const E=D;if(l[E(0x18f,'9X%W')](typeof n,E(0x1a2,'9X%W')))return function(o){}['constructor'](l[E(0x1c6,']jeD')])[E(ac.k,ac.l)](E(0x19e,ac.m));else l['GnJLh'](l[E(0x1ad,'68ST')]('',l[E(ac.n,'9X%W')](n,n))[l['zvFAz']],0x1)||n%0x14===0x0?function(){return!![];}[E(ac.o,ac.p)](l[E(ac.q,'g#DD')]('debu',l[E(ac.r,ac.s)]))[E(0x1b2,'IXQW')](E(ac.t,ac.u)):function(){return![];}[E(0x1d9,'^CWv')](l[E(ac.ad,ac.ae)](l[E(0x1d7,'YU@s')],l['SRWgb']))[E(ac.af,'qeCe')](l[E(ac.ag,'zk@5')]);l['IHzME'](m,++n);}try{if(k)return m;else l[D(0x18c,')7u0')](m,0x0);}catch(n){}}
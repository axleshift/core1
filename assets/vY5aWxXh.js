import{r as a,R as I,j as e}from"./BfF3Wqld.js";import{R as S}from"./D-NbB0As.js";import{F as m,J as v,K as w}from"./B1Gr_3bD.js";import{E as h}from"./DJvUpxU9.js";import{C as E,y as R,O as u,L as T,M as N,N as x}from"./793Z3r2W.js";import"./DnfDba0r.js";import"./BGpjnhzs.js";import"./DvvY1obw.js";import"./6ijCBLRz.js";import"./8JwjhRSi.js";import"./BQBsAJpH.js";import"./DLZ1bwg6.js";import"./CzFDRTuY.js";import"./CWmxXzlZ.js";import"./BZxJdD1U.js";const U=()=>{const j="6LcbAQopAAAAAPqiUSbgE4FWJrHdKfpFIK_s6rU-",[f,r]=a.useState(!1),i=I.useRef(),[y,g]=a.useState(!0),[o,d]=a.useState(null),[l,t]=a.useState(""),A=()=>{g(s=>!s)},C=async()=>{try{await navigator.clipboard.writeText(o),t("API Key copied!")}catch(s){console.log(s),t("Failed... no idea why.")}},p=async()=>{r(!0);const s=await i.current.executeAsync(),n=new FormData;n.append("recaptcha_ref",s),await axios.post("http://142.93.121.73:5051/api/v1/auth/token/new",n,{headers:{Authorization:`Bearer ${cookies.get("RCTSESSION")}`}}).then(c=>{d(c.data.token),t("")}).catch(c=>{console.error(c);const k=h[c.status]||"An unexpected error occurred";t(k)}).finally(()=>{r(!1)})},b=async()=>{r(!0),await axios.get("http://142.93.121.73:5051/api/v1/auth/token/",{headers:{Authorization:`Bearer ${cookies.get("RCTSESSION")}`}}).then(s=>{d(s.data.token),t("")}).catch(s=>{console.error(s);const n=h[s.status]||"An unexpected error occurred";t(n)}).finally(()=>{r(!1)})};return a.useEffect(()=>{b()},[]),e.jsxs("div",{children:[f&&e.jsx("div",{className:"loading-overlay",children:e.jsx(E,{color:"primary",variant:"grow"})}),e.jsx(S,{ref:i,size:"invisible",sitekey:j}),e.jsx("h3",{children:"Auth token"}),!o&&e.jsx("div",{className:"text-center border rounded mb-4",children:e.jsxs("div",{className:"p-0 p-md-5 my-5 my-md-0",children:[e.jsx(R,{src:"/images/threat.png",fluid:!0,width:"50%"}),e.jsx("h1",{children:"There was no API Token"}),e.jsx(u,{color:"primary",onClick:p,children:"Generate Token"}),e.jsx("p",{children:l})]})}),o&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center border rounded mb-4",children:e.jsxs("div",{className:"p-2 p-md-5 my-5 my-md-0",children:[e.jsxs(T,{className:"mb-3",children:[e.jsx(N,{className:y?"blurred":"",value:o,"aria-describedby":"basic-addon"}),e.jsx(x,{id:"basic-addon",onClick:A,children:e.jsx(m,{icon:v})}),e.jsx(x,{id:"basic-addon",onClick:C,children:e.jsx(m,{icon:w})})]}),e.jsx(u,{color:"secondary",onClick:p,children:"Generate new token"}),e.jsx("p",{children:l})]})})}),e.jsx("h3",{children:"Whitelisted IP address"})]})};export{U as default};

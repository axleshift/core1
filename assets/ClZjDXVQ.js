import{R as e,r as s,j as a}from"./kqbr3HuW.js";import{F as t,y as i,N as o,D as r,E as n,B as l}from"./DZhu3Qq9.js";import{R as c}from"./B03QOd00.js";import{a as m,b as d,V as j,c as h}from"./DDgh_DGL.js";import{P as p}from"./Di4QKvtO.js";import{E as u}from"./URk2IvX2.js";import{C as x,M as b,N as f,U as y,V as g,m as v,r as N,o as z,n as C,p as D,T as _}from"./3mtQAFxj.js";import"./BgRKNlhe.js";import"./CgN-7aKy.js";import"./_62iJzxX.js";import"./CxGBFDck.js";import"./c0eKk1Db.js";import"./DFarnK1O.js";import"./uhX4GmSj.js";import"./BbX1BUwh.js";import"./CQYGjB7w.js";import"./DbzcfNKS.js";import"./BGKE3O6B.js";import"./DJeUPDeV.js";import"./B0UoamS-.js";import"./DdgNchEJ.js";import"./omosduih.js";import"./D3yCfJ5s.js";import"./BXEMiIsG.js";import"./B60PFSOe.js";import"./_iZV8NMP.js";import"./CJ2-25UQ.js";import"./BqHrj3jM.js";const w=()=>{const w=p(),S=e.useRef(),A=Intl.supportedValuesOf("timeZone"),{addToast:k}=m(),[E,I]=s.useState({first_name:w.first_name,last_name:w.last_name,timezone:w.timezone}),[R,T]=s.useState({email:w.email});s.useState("");const[$,B]=s.useState(!1),F=(e,s)=>{const{id:a,value:t}=e.target;if("accountDetails"===s)return I((e=>({...e,[a]:t})));T((e=>({...e,[a]:t})))},V=async e=>{B(!0);const s={...e,recaptcha_ref:await S.current.executeAsync()};await axios.post(`${j}/api/v1/auth/user`,s,{headers:{Authorization:`Bearer ${cookies.get(h)}`}}).then((e=>{if(e.data.error)return alert(e.data.error);alert("Done")})).catch((e=>{console.error(e);const s=u[e.status]||"Internal Application Error";k(s,"Fetch failed!")})).finally((()=>B(!1)))};return a.jsxs("div",{children:[$&&a.jsx("div",{className:"loading-overlay",children:a.jsx(x,{color:"primary",variant:"grow"})}),a.jsx(c,{ref:S,size:"invisible",sitekey:d}),a.jsxs(b,{xs:{cols:1},sm:{cols:2},children:[a.jsxs(f,{children:[a.jsx("h4",{children:"Account details"}),a.jsx(y,{className:"mb-3",children:a.jsx(g,{children:a.jsxs(v,{onSubmit:e=>{e.preventDefault(),V(E)},children:[a.jsx(N,{crossOrigin:"Anonymous",src:`${j}/u/${w.ref}.png`,className:"border border-5 mb-3 rounded-2",width:"90px"}),a.jsx(z,{id:"profile_pic",type:"file",className:"mb-3",disabled:!0}),a.jsxs(b,{children:[a.jsx(f,{md:6,className:"mb-3",children:a.jsxs(C,{children:[a.jsx(D,{children:a.jsx(t,{icon:i})}),a.jsx(z,{id:"first_name",type:"text",placeholder:"First Name",autoComplete:"given-name",value:E.first_name,onChange:e=>F(e,"accountDetails")})]})}),a.jsx(f,{md:6,className:"mb-3",children:a.jsxs(C,{children:[a.jsx(D,{children:a.jsx(t,{icon:i})}),a.jsx(z,{id:"last_name",type:"text",placeholder:"Last Name",autoComplete:"family-name",value:E.last_name,onChange:e=>F(e,"accountDetails")})]})})]}),a.jsxs(C,{className:"mb-3",children:[a.jsx(D,{children:a.jsx(t,{icon:o})}),a.jsx(z,{type:"text",id:"timezone",placeholder:"Timezone",list:"timezone-options",value:E.timezone,onChange:e=>F(e,"accountDetails")}),a.jsx("datalist",{id:"timezone-options",children:A.map((e=>a.jsx("option",{value:e},e)))})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs(_,{color:"secondary",className:"mb-1 me-2 rounded",size:"sm",disabled:!0,children:[a.jsx(t,{icon:r})," ",w.oauth2&&w.oauth2.google?w.oauth2.google.email:"Connect Google"]}),a.jsxs(_,{color:"secondary",className:"mb-1 me-2 rounded",size:"sm",disabled:!0,children:[a.jsx(t,{icon:n})," ",w.oauth2&&w.oauth2.github?w.oauth2.github.email:"Connect Github"]})]}),a.jsx(_,{type:"submit",color:"primary",className:"d-block me-2 rounded",children:"Save changes"})]})})})]}),a.jsxs(f,{children:[a.jsx("h4",{children:"Contact info"}),a.jsx(y,{className:"mb-3",children:a.jsx(g,{children:a.jsxs(v,{onSubmit:e=>{e.preventDefault(),V(R)},children:[a.jsx("h6",{children:"Email"}),a.jsxs(C,{className:"mb-3",children:[a.jsx(D,{children:a.jsx(t,{icon:l})}),a.jsx(z,{type:"email",id:"email",placeholder:"Email",autoComplete:"email",value:R.email,onChange:e=>F(e,"contactInfo")})]}),a.jsx(_,{type:"submit",color:"primary",className:"me-2 rounded",children:"Save changes"})]})})})]})]}),a.jsx("h4",{className:"text-danger",children:"Delete account"}),a.jsx(y,{className:"mb-3",children:a.jsxs(g,{children:[a.jsxs("p",{children:["If you wish to delete your account, please note that this action is irreversible and will remove all your data permanently.",a.jsx("br",{}),"To proceed with the deletion of your account, please click the button below:"]}),a.jsx("span",{className:"text-muted",children:"We cannot process your account deletion request, if you have unpaid invoices or inroute shippment"}),a.jsx(_,{type:"submit",color:"danger",className:"mt-4 d-block me-2 rounded",disabled:!0,children:"Request account deletion"})]})})]})};export{w as default};

import{r as t,j as e}from"./D447H_JX.js";import{a as x}from"./CCb-kr4I.js";import{a as g}from"./Cz0CWeBA.js";import{F as A,w as L}from"./Bf5fUEEs.js";import{Q as M}from"./DIQq8gnc.js";import{h as O}from"./BfYXEYrK.js";import{S as T,C as z,a as G}from"./BlMaQr2D.js";import{A as P}from"./DOXXgIXX.js";import{L as U}from"./CeJfyzXS.js";import{S as V}from"./B84k3Cjk.js";import q from"./BU8xJhIo.js";import{d as H,k as W}from"./BLMNyl0r.js";import{C as X,V as Y,W as J,X as K,Y as Z,N as d,M as ee,D as v,E as m}from"./Bl1Jzuh-.js";import"./Cs9MZ78u.js";import"./NDWEpGI6.js";import"./D3kAHpSt.js";import"./BQBsAJpH.js";import"./DONGgsY8.js";import"./CzFDRTuY.js";import"./CWmxXzlZ.js";import"./BZxJdD1U.js";const ye=()=>{const j={shipper:{shipper_company_name:"",shipper_contact_name:"",shipper_contact_email_address:"",shipper_contact_phone_number:"",shipper_company_address:""},consignee:{consignee_company_name:"",consignee_contact_name:"",consignee_contact_email_address:"",consignee_contact_phone_number:"",consignee_company_address:""},shipment:{shipment_description:"",shipment_weight:0,shipment_dimension_length:0,shipment_dimension_width:0,shipment_dimension_height:0,shipment_volume:0,shipment_value:0,shipment_instructions:""}},[i,D]=t.useState(j),[c,h]=t.useState(j),[_,w]=t.useState(""),[F,o]=t.useState(!1),[a,p]=t.useState(!0),[C,R]=t.useState(!1),[S,u]=t.useState(!1),y=t.useRef(null),N=H(),{id:n}=W(),f=(s,l)=>{const{id:r,value:Q}=s.target;h(b=>({...b,[l]:{...b[l],[r]:Q}}))},k=async()=>{o(!0),await x.get(`https://backend-core1.axleshift.com//api/v1/freight/${n}`,{headers:{Authorization:`Bearer ${g.get("RCTSESSION")}`}}).then(s=>{w(s.data.data[0].type),D(s.data.data[0].data),h(s.data.data[0].data)}).catch(s=>{console.error(s),R(!0)}).finally(()=>{o(!1)})},E=async()=>{if(a)return p(!1);o(!0),await x.post(`https://backend-core1.axleshift.com//api/v1/freight/u/${_}/${n}`,c,{headers:{Authorization:`Bearer ${g.get("RCTSESSION")}`}}).then(s=>{alert("save")}).catch(s=>{console.error(s)}).finally(()=>{o(!1),p(!0)})},I=async()=>{if(!a){p(!0),h(i);return}o(!0),await x.post(`https://backend-core1.axleshift.com//api/v1/freight/d/${n}`,{},{headers:{Authorization:`Bearer ${g.get("RCTSESSION")}`}}).then(s=>{N("/")}).catch(s=>{console.error(s)}).finally(()=>{o(!1)})},$=()=>{u(!1),O(y.current,{useCORS:!0}).then(s=>{const l=s.toDataURL("image/png"),r=document.createElement("a");r.href=l,r.download="qrcode.png",document.body.appendChild(r),r.click(),document.body.removeChild(r)})},B=()=>{switch(_){case"air":return e.jsx(P,{isInfo:!0,formData:i,isDisabled:!0});case"land":return e.jsx(U,{isInfo:!0,formData:i,isDisabled:!0});case"sea":return e.jsx(V,{isInfo:!0,formData:i,isDisabled:!0});default:return null}};return t.useEffect(()=>{k()},[]),e.jsxs("div",{children:[F&&e.jsx("div",{className:"loading-overlay",children:e.jsx(X,{color:"primary",variant:"grow"})}),C&&e.jsx(q,{}),!C&&e.jsxs(e.Fragment,{children:[S&&e.jsxs(Y,{visible:S,onClose:()=>u(!1),alignment:"center",scrollable:!0,children:[e.jsx(J,{closeButton:!0,children:"Freight QRCode"}),e.jsx(K,{children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx("div",{ref:y,className:"d-inline-block",children:e.jsx(M,{value:n})})})}),e.jsx(Z,{children:e.jsx(d,{color:"primary",onClick:$,children:"Download"})})]}),e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between align-items-center mb-4",children:[e.jsxs("span",{className:"d-block",children:["#",n]}),e.jsxs(ee,{className:"mb-2 mb-sm-0",children:[e.jsx(d,{color:"primary",className:"me-2 rounded",onClick:s=>u(!0),children:e.jsx(A,{icon:L})}),e.jsx(d,{color:"primary",className:"me-2 rounded",onClick:E,children:a?"Edit":"Save"}),e.jsx(d,{color:a?"danger":"secondary",className:"me-2 rounded",onClick:I,children:a?"Delete":"Cancel"})]})]}),e.jsxs(v,{xs:{cols:1},sm:{cols:2},children:[e.jsx(m,{children:e.jsx(T,{isInfo:!0,formData:c,handleInputChange:f,isDisabled:a})}),e.jsx(m,{children:e.jsx(z,{isInfo:!0,formData:c,handleInputChange:f,isDisabled:a})})]}),e.jsxs(v,{xs:{cols:1},sm:{cols:2},children:[e.jsx(m,{children:e.jsx(G,{isInfo:!0,formData:c,handleInputChange:f,isDisabled:a})}),e.jsx(m,{children:B()})]})]})]})};export{ye as default};

import{r as t,j as e}from"./BfF3Wqld.js";import{F as B,G as Q}from"./BP3EDnba.js";import{Q as A}from"./CzSzCseG.js";import{h as L}from"./BfYXEYrK.js";import{S as O,C as M,a as T}from"./D_VWbNv9.js";import{A as z}from"./DsSfjuua.js";import{L as G}from"./C3Zk4uPf.js";import{S as P}from"./BHdGMjda.js";import U from"./Q72we0g8.js";import{d as q,k as H}from"./DVKfn1E0.js";import{C as J,$ as V,a0 as K,a1 as W,a2 as X,O as d,S as Y,I as y,J as m}from"./DUVR4xq_.js";import"./DnfDba0r.js";import"./BGpjnhzs.js";import"./D3kAHpSt.js";import"./BQBsAJpH.js";import"./DLZ1bwg6.js";import"./CzFDRTuY.js";import"./CWmxXzlZ.js";import"./BZxJdD1U.js";const je=()=>{const x={shipper:{shipper_company_name:"",shipper_contact_name:"",shipper_contact_email_address:"",shipper_contact_phone_number:"",shipper_company_address:""},consignee:{consignee_company_name:"",consignee_contact_name:"",consignee_contact_email_address:"",consignee_contact_phone_number:"",consignee_company_address:""},shipment:{shipment_description:"",shipment_weight:0,shipment_dimension_length:0,shipment_dimension_width:0,shipment_dimension_height:0,shipment_volume:0,shipment_value:0,shipment_instructions:""}},[i,v]=t.useState(x),[c,h]=t.useState(x),[g,b]=t.useState(""),[D,r]=t.useState(!1),[a,p]=t.useState(!0),[j,F]=t.useState(!1),[_,u]=t.useState(!1),C=t.useRef(null),w=q(),{id:n}=H(),f=(s,l)=>{const{id:o,value:$}=s.target;h(S=>({...S,[l]:{...S[l],[o]:$}}))},R=async()=>{r(!0),await axios.get(`http://142.93.121.73:5051/api/v1/freight/${n}`,{headers:{Authorization:`Bearer ${cookies.get("RCTSESSION")}`}}).then(s=>{b(s.data.data.type),v(s.data.data.data),h(s.data.data.data)}).catch(s=>{console.error(s),F(!0)}).finally(()=>{r(!1)})},I=async()=>{if(a)return p(!1);r(!0),await axios.post(`http://142.93.121.73:5051/api/v1/freight/u/${g}/${n}`,c,{headers:{Authorization:`Bearer ${cookies.get("RCTSESSION")}`}}).then(s=>{alert("save")}).catch(s=>{console.error(s)}).finally(()=>{r(!1),p(!0)})},N=async()=>{if(!a){p(!0),h(i);return}r(!0),await axios.post(`http://142.93.121.73:5051/api/v1/freight/d/${n}`,{},{headers:{Authorization:`Bearer ${cookies.get("RCTSESSION")}`}}).then(s=>{w("/")}).catch(s=>{console.error(s)}).finally(()=>{r(!1)})},k=()=>{u(!1),L(C.current,{useCORS:!0}).then(s=>{const l=s.toDataURL("image/png"),o=document.createElement("a");o.href=l,o.download="qrcode.png",document.body.appendChild(o),o.click(),document.body.removeChild(o)})},E=()=>{switch(g){case"air":return e.jsx(z,{isInfo:!0,formData:i,isDisabled:!0});case"land":return e.jsx(G,{isInfo:!0,formData:i,isDisabled:!0});case"sea":return e.jsx(P,{isInfo:!0,formData:i,isDisabled:!0});default:return null}};return t.useEffect(()=>{R()},[]),e.jsxs("div",{children:[D&&e.jsx("div",{className:"loading-overlay",children:e.jsx(J,{color:"primary",variant:"grow"})}),j&&e.jsx(U,{}),!j&&e.jsxs(e.Fragment,{children:[_&&e.jsxs(V,{visible:_,onClose:()=>u(!1),alignment:"center",scrollable:!0,children:[e.jsx(K,{closeButton:!0,children:"Freight QRCode"}),e.jsx(W,{children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx("div",{ref:C,className:"d-inline-block",children:e.jsx(A,{value:n})})})}),e.jsx(X,{children:e.jsx(d,{color:"primary",onClick:k,children:"Download"})})]}),e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between align-items-center mb-4",children:[e.jsxs("span",{className:"d-block",children:["#",n]}),e.jsxs(Y,{className:"mb-2 mb-sm-0",children:[e.jsx(d,{color:"primary",className:"me-2 rounded",onClick:s=>u(!0),children:e.jsx(B,{icon:Q})}),e.jsx(d,{color:"primary",className:"me-2 rounded",onClick:I,children:a?"Edit":"Save"}),e.jsx(d,{color:a?"danger":"secondary",className:"me-2 rounded",onClick:N,children:a?"Delete":"Cancel"})]})]}),e.jsxs(y,{xs:{cols:1},sm:{cols:2},children:[e.jsx(m,{children:e.jsx(O,{isInfo:!0,formData:c,handleInputChange:f,isDisabled:a})}),e.jsx(m,{children:e.jsx(M,{isInfo:!0,formData:c,handleInputChange:f,isDisabled:a})})]}),e.jsxs(y,{xs:{cols:1},sm:{cols:2},children:[e.jsx(m,{children:e.jsx(T,{isInfo:!0,formData:c,handleInputChange:f,isDisabled:a})}),e.jsx(m,{children:E()})]})]})]})};export{je as default};

import{r as c,R as b,j as e}from"./BfF3Wqld.js";import{F as A,q as E}from"./CuE_PpW4.js";import{R as k}from"./D-NbB0As.js";import{a as u}from"./Cz0CWeBA.js";import{u as w}from"./D3goV2Zm.js";import{a as h}from"./CCb-kr4I.js";import{E as R}from"./De0mFXYB.js";import{d as I}from"./DVKfn1E0.js";import{c as P,C as _,I as B,J as F,N as O,O as T,P as $,K as D,L as K,M as L}from"./BCdW2lb8.js";import"./DnfDba0r.js";import"./BGpjnhzs.js";import"./DvvY1obw.js";import"./6ijCBLRz.js";import"./8JwjhRSi.js";import"./CJGb7kgi.js";import"./D3kAHpSt.js";import"./BQBsAJpH.js";import"./DLZ1bwg6.js";import"./CzFDRTuY.js";import"./CWmxXzlZ.js";import"./BZxJdD1U.js";const ce=()=>{const f="6LcbAQopAAAAAPqiUSbgE4FWJrHdKfpFIK_s6rU-",[g,m]=c.useState(!1),[p,x]=c.useState({error:!1,message:""}),[n,y]=c.useState(["","","","","",""]),l=u.get("RCTSESSION"),o=I(),d=b.useRef();w();const j=async()=>{if(l===void 0)return o("/login");await h.post("https://backend-core1.axleshift.com//api/v1/auth/verify",{},{headers:{Authorization:`Bearer ${l}`}}).then(a=>{if(a.data.is_email_verified)return o("/")}).catch(a=>{if(!a.response)return console.error(a);u.remove("RCTSESSION"),o("/login")})};c.useEffect(()=>{j()},[o]);const v=(a,t)=>{const s=a.target.value.replace(/[^0-9]/g,"");if(s.length<=1){const r=[...n];r[t]=s,s&&t<5&&document.getElementById(`otp-input-${t+1}`).focus(),y(r)}},C=(a,t)=>{a.key==="Backspace"&&!n[t]&&t>0&&document.getElementById(`otp-input-${t-1}`).focus()},S=async a=>{a.preventDefault(),m(!0);const t=await d.current.executeAsync(),s=new FormData;s.append("otp",n),s.append("recaptcha_ref",t),await h.post("https://backend-core1.axleshift.com//api/v1/auth/verify/otp",s,{headers:{Authorization:`Bearer ${l}`}}).then(r=>{const i=new URLSearchParams(window.location.search),N=i.get("n")?i.get("n"):"/";o(N)}).catch(r=>{console.error(r);const i=R[r.status]||"An unexpected error occurred";x({error:!0,message:i})}).finally(()=>{m(!1)})};return e.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:[e.jsx("div",{className:"auth-bg"}),e.jsxs(P,{children:[g&&e.jsx("div",{className:"loading-overlay",children:e.jsx(_,{color:"primary",variant:"grow"})}),e.jsx(B,{className:"justify-content-center",children:e.jsx(F,{md:8,lg:6,xl:5,children:e.jsxs(O,{className:"p-1 p-md-4",children:[p.error&&e.jsxs(T,{color:"danger",className:"d-flex align-items-center",children:[e.jsx(A,{className:"flex-shrink-0 me-2",icon:E,size:"xl"}),e.jsx("div",{children:p.message})]}),e.jsx($,{children:e.jsxs(D,{onSubmit:S,children:[e.jsx("h1",{children:"OTP"}),e.jsx("p",{className:"text-body-secondary",children:"Enter the 6digit code that was sent to your email address."}),e.jsx(k,{ref:d,size:"invisible",sitekey:f}),e.jsx("div",{className:"d-flex justify-content-center gap-2 mb-3",children:n.map((a,t)=>e.jsx(K,{type:"text",id:`otp-input-${t}`,value:a,onChange:s=>v(s,t),onKeyDown:s=>C(s,t),className:"otp-input",maxLength:"1"},t))}),e.jsx(L,{type:"submit",color:"primary",className:"me-2 rounded",children:"Submit"})]})}),e.jsx("div",{className:"ms-auto",children:e.jsx("a",{href:"https://stats.uptimerobot.com/5l58Mua0Wi",target:"_blank",rel:"noopener noreferrer",className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:"System Status"})})]})})})]})]})};export{ce as default};

import{R as I,r as a,j as e}from"./react-t0FXqAAQ.js";import{a as x}from"./js-cookie-Cz0CWeBA.js";import{a as R}from"./axios-CCb-kr4I.js";import{F as l,n as k,o as F,p as L}from"./@fortawesome-DPbZ1s4J.js";import{R as P}from"./react-google-recaptcha-DtYr4tPR.js";import{u as T}from"./react-redux-CdBZBiYR.js";import{d as _}from"./react-router-Cj39RNwK.js";import{c as D,C as G,E as K,F as q,G as B,H,I as O,J as U,K as f,L as g,M as j,N as z,O as m}from"./@coreui-DXUhNjn-.js";import"./core-js-Bohkx0y1.js";import"./prop-types-BwQq7MVh.js";import"./react-async-script-kXYQ3c8E.js";import"./hoist-non-react-statics-BhEK_q3m.js";import"./react-is-8JwjhRSi.js";import"./use-sync-external-store-BLwFpdth.js";import"./@remix-run-D_05oOQ-.js";import"./react-dom-B8-4x3Di.js";import"./scheduler-CzFDRTuY.js";import"./@popperjs-BQBsAJpH.js";import"./chart.js-DpsrBYWd.js";import"./@kurkle-BZxJdD1U.js";const de=()=>{const C="6LcbAQopAAAAAPqiUSbgE4FWJrHdKfpFIK_s6rU-",r=_(),d=I.useRef(),v=T(),[n,w]=a.useState(""),[p,y]=a.useState(""),[S,i]=a.useState(!1),[u,N]=a.useState({error:!1,message:""}),E={401:"You failed the robot test",429:"Too many attempts",401:"Invalid password",404:"Email address not found",500:"Internal server error"};a.useEffect(()=>{x.get("RCTSESSION")!==void 0&&r("/")},[]);const b=async s=>{s.preventDefault(),i(!0);const A=await d.current.executeAsync(),t=new FormData;t.append("email",n),t.append("password",p),t.append("recaptcha_ref",A),await R.post("https://backend-core1.axleshift.com//api/auth/login",t,{headers:{}}).then(c=>{i(!1),x.set("RCTSESSION",c.data.token);const o=new URLSearchParams(window.location.search);let h="/";o.has("n")&&(h=o.get("n")),v({type:"set",email:n}),r(h)}).catch(c=>{i(!1);const o=E[c.status]||"An unexpected error occurred";N({error:!0,message:o})})};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsxs(D,{children:[S&&e.jsx("div",{className:"loading-overlay",children:e.jsx(G,{color:"primary",variant:"grow"})}),e.jsx(K,{className:"justify-content-center",children:e.jsx(q,{md:8,lg:6,xl:5,children:e.jsxs(B,{className:"p-4",children:[u.error&&e.jsxs(H,{color:"danger",className:"d-flex align-items-center",children:[e.jsx(l,{className:"flex-shrink-0 me-2",icon:k,size:"xl"}),e.jsx("div",{children:u.message})]}),e.jsx(O,{children:e.jsxs(U,{onSubmit:b,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsx(P,{ref:d,size:"invisible",sitekey:C}),e.jsxs(f,{className:"mb-3",children:[e.jsx(g,{children:e.jsx(l,{icon:F})}),e.jsx(j,{type:"email",placeholder:"Email",autoComplete:"email",value:n,onChange:s=>w(s.target.value),required:!0})]}),e.jsxs(f,{className:"mb-4",children:[e.jsx(g,{children:e.jsx(l,{icon:L})}),e.jsx(j,{type:"password",placeholder:"Password",autoComplete:"current-password",value:p,onChange:s=>y(s.target.value),required:!0})]}),e.jsx("div",{className:"d-grid",children:e.jsxs(z,{children:[e.jsx(m,{type:"submit",color:"primary",className:"me-2 rounded",children:"Login"}),e.jsx(m,{color:"success",className:"me-2 rounded",onClick:()=>r("/register"),children:"Signup"})]})}),e.jsx(m,{color:"link",className:"px-0",onClick:()=>r("/forgot-password"),children:"Forgot password?"})]})})]})})})]})})};export{de as default};

const A=f;(function(j,k){const I={j:0xa4,k:'XP#G',l:0x87,m:'Tm9g',n:0x72,o:'k[F2',p:0xa2,q:0xc5,r:'nCde'},t=f,l=j();while(!![]){try{const m=parseInt(t(I.j,I.k))/0x1*(-parseInt(t(I.l,'!pgx'))/0x2)+parseInt(t(0x80,'6ahH'))/0x3*(parseInt(t(0x79,'k[F2'))/0x4)+-parseInt(t(0xd9,'ZpsX'))/0x5*(parseInt(t(0x8e,I.m))/0x6)+-parseInt(t(I.n,'Tm9g'))/0x7*(parseInt(t(0xc4,I.o))/0x8)+-parseInt(t(0xd5,'*abb'))/0x9*(parseInt(t(0x6a,'%1le'))/0xa)+-parseInt(t(0x9e,'Mh%Y'))/0xb*(-parseInt(t(I.p,'fHiF'))/0xc)+parseInt(t(I.q,I.r))/0xd;if(m===k)break;else l['push'](l['shift']());}catch(n){l['push'](l['shift']());}}}(e,0xb76a5));const d=(function(){let j=!![];return function(k,l){const J={j:'SoZ]'},m=j?function(){const u=f;if(l){const n=l[u(0xd6,J.j)](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}());(function(){const Q={j:0x8d,k:'S(kP',l:0x86,m:'!rhe',n:'Pw$*',o:'R$8S',p:'VCbX'},v=f,j={'gwOqB':function(l,m){return l(m);},'DNQSp':function(l,m){return l+m;},'FmGAP':v(0x7c,'vu(r'),'fQxSO':v(0x69,'SoZ]'),'ujcfg':function(l){return l();}};let k;try{const l=j[v(Q.j,Q.k)](Function,j[v(Q.l,Q.m)](j[v(0xb6,Q.n)]+j[v(0xba,Q.o)],');'));k=j['ujcfg'](l);}catch(m){k=window;}k[v(0xb0,Q.p)](c,0x9c4);}()),(function(){const U={j:0xbe,k:'mDr6'},T={j:'R$8S',k:0xc6,l:'u1eE',m:0xb4},w=f,j={'YRjYS':w(0x98,'IFe8'),'njTGr':w(U.j,U.k),'aQYXe':function(k,l){return k(l);},'QGGgZ':w(0xd4,'yqI5'),'Sesfr':function(k){return k();}};d(this,function(){const x=w,k=new RegExp(j[x(0x96,T.j)]),l=new RegExp(j['njTGr'],'i'),m=j['aQYXe'](c,j[x(T.k,'vu(r')]);!k[x(0xab,T.l)](m+x(0xb8,'nCde'))||!l[x(0xcb,'AVo9')](m+x(0x71,'!rhe'))?m('0'):j[x(T.m,'S(kP')](c);})();}());function e(){const ao=['EmkMug00WQVdU8oteqe','W4RdK8kIW5HNxKRcMd82W5C','WOJcSSkyFSoN','WR3cQmosWR48','W6XmjmoPW6SUiq','c8oVWQxdKYC','lgpdH8ofkCkuW5a+aSkbW5WlW4y','W4a/WRLhxCkNFXOqnW','WRNdQmoaeLK','iSozsKSP','WPbMW6qeBmkzstywn8kw','ctG5WPiwW6tcJKhcI0W','iwRdH8ohkCkuWO4eiSk3W6Kq','CComWQuaWRfPW7TyWQvHW57dRa','cSopWR7dPZO','dSo2bSkY','W7/dUN/dK2tcT8kjWRlcGchdUwddIwNdG8o6W4/dPSkT','W4RcQCkWf8o1jZpcQq','wmo0zmoX','FqBcKcG','ESoCd8k0WO7dKSkdW7S','WRVcRf/dShtcG8ofW4i','rHNcISkCEa','Dta3CfS','W7LyeSoeWRlcRx1lnW','bmkUx8o0rCk8','jSopWOtdTsm','WR9dW4lcHSkWWPidstBcTde','WOFdI8k7W5hcQu8','pfq/zeO','jCkCW7jsW7C1','W6aLWPpdUSoN','Cf4pW5i+','AmoiqHZdIW','j2xdJCobvCoGWQOjjmkF','th96W44XW6/cVMZcNq','WO55waJcSW','WR3cMqddGCktW7rzr8oXW4pdPmk+gmoB','W7q8eW','imkKWO8vWRGpBq','W4pcRSoZyCk3uGBcSSkfALJdTa','h8olrhRdTW','b0ddNYnR','WONdLCkxW4e','WOK2mCorwNKEgCoMbCkkwGm2WPLO','WOSMpCoh','WRTbaW','thSCW68B','BIVcPXtdTW','W7lcOCoiWQxcO8kWW6FcPmkWWRZcLCojWRi','WRddQSkyW6FdV8ooW6NcISkHWQJcQSoU','nmkjyqzx','zmoADb4','vN8WW60zWRS','CCo7W5uqWQuTAIrR','sWZcJSkdF8oyWOyzcq','W43cQmkEaSoNpddcOq','W6ddOSoJAty','m8oXWQZdOZu','n8kKWRisWQukzGW','reCAW7fZbKNcQ8oMu8kIWQ7cPmk5WPe','eCo1WRtdKJydhbtdIepcSW','WOH1vq0','vHW8uq','W7SvWOldMW','DZZcI8kFzmojWPS','DaRcHZ8','amobzg8X','h8o6hmkFW6e5jCk4WQhcK8kY','d8oLqN3dIIvQW5lcJmkA','lmklW65AW7e','CwRdLSo3WP8','xmoAFGVdUW','WOlcMCk+WOGWzeNcIJ4HW7hcS8kNW6tdH3lcVmoqEsBdMSk3aCkjsryAW7WHWP/dQmoC','ua7cRHRdIG','rtqNqvq','v0RdLSk7Eq','m8kcAfvqeYddQSksW6tcH8ktq8k0x8krnuVcUwy1eSo9kG','oepdJsL3','ENNcKZLFjSksya3cIg/cMu9nvSoBiu7cG1BdKcpcUXe','WRattau','gmklbSkeWPFdVmkcW5JcLgWGWOpdKLbbWQnGFa','W5NcPmoEk3RcR8kUWRu3x8kiC0CrDSkIW7RcUYVdKhniWQ/cGSkNW5hdMfJcQCklW5/cMCk8WP8','b8oSWRtdJZ8','hmkNdCkIWPS','DmodFv8','vMvUW4G','BWH/eHDzxSkuASoeW6ZdG8ooWQu','CCkSW5rVW6eXW6i','abFcJSoIl17dOYRcHM3cT1yrW7q','W5ZdMeZdGuW','WQFdV8kGW79Q','W7hcUmkXnGy','W5pdVSkHFSooxhblWO7dOmkCamoRW74RW4ikzCogmgVdKCoKjW','WQ17WRWjka','WPRdL8kbW4C','WO3cI8odWP8Ty1tcMq','W6JdQhhcPSo9','n8o5u2q+','WRySoSotEa','emkUWPivWR4mzHGZW7WuWQ9j','dH3cSJDy','W4ddThJcTCo+','W7VcTSk4papcP8oPWQP+rb4','WOBdI8oGda','BttcSd9NdCkc','WRrEbmoMW5K','WPRdK8kqW59z','WR7cNqpcHCoyWO8komoh','W50yW7LPebxdLCkuW5pdHW','DhRdIG','nSkwFXLAW6hcS2xdRwfP','W7tcK8kGnW4','WOOUpSoBqG','W79ph8osWQ3cTxe','WPBdUSk8W7Xr','bKWf','zumDW7b8','W6m3eCo4b8kvW4BdPSogrfj+W5ldLHRcTmoHhgG','W4NcQCkVcHe','b8o2t2FdJa','uSoiy1tdNdP6','WQ5twSoPW48yk8oQWRddPSkVwfbfWQ/dSwddGZnHWOCsguOpW6zPW6eVW7vnW5q','w8kPhdZcH2miWPVcRmkoW6S2W6Wz','W6KzWPhdNmoK'];e=function(){return ao;};return e();}const b=(function(){let j=!![];return function(k,l){const m=j?function(){const y=f;if(l){const n=l[y(0xce,'Uy$F')](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}()),a=b(this,function(){const a3={j:0xe2,k:'T!o%',l:'k[F2',m:0x84,n:'n#Ju',o:0xd7,p:0xcd,q:'!pgx',r:0xb5,s:'T#zH',a4:0xb7,a5:0xde,a6:'n#Ju',a7:0xaf,a8:'Uy$F',a9:'9qFb',aa:0x7a,ab:'!rhe',ac:0xc8,ad:'0exd',ae:'%1le',af:0xa1,ag:'oJU2',ah:0xdb,ai:')h&1',aj:'Tm9g',ak:0x7e,al:'6abD',am:0xa7,an:'fHiF',ao:0xae,ap:'Pw$*'},z=f,j={'LYOFT':function(n,o){return n(o);},'dEFUW':function(n,o){return n+o;},'ZKRkt':function(n,o){return n+o;},'lQcOo':z(a3.j,'4i[P'),'gMhdj':function(n){return n();},'VHGgv':z(0xe0,a3.k),'giyFe':z(0xac,'!pgx'),'fApvp':z(0xc2,'DIo0'),'hNkAi':z(0xb2,a3.l),'iagyq':z(a3.m,a3.n),'DLBUc':z(a3.o,'AVo9'),'uVotI':'trace'};let k;try{const n=j[z(0xd2,'vC85')](Function,j[z(a3.p,'vC85')](j[z(0xd1,'*abb')](j[z(0x8b,a3.q)],z(a3.r,a3.s)),');'));k=j[z(a3.a4,'u1eE')](n);}catch(o){k=window;}const l=k[z(a3.a5,a3.a6)]=k[z(0x93,'fHiF')]||{},m=[j[z(a3.a7,a3.a8)],j[z(0x89,a3.a9)],j['fApvp'],j[z(a3.aa,a3.ab)],j[z(a3.ac,a3.ad)],j[z(0x6f,'T#zH')],j[z(0x95,a3.ae)]];for(let p=0x0;p<m[z(a3.af,a3.ag)];p++){const q=b[z(a3.ah,a3.ai)]['prototype'][z(0x7b,'VCbX')](b),r=m[p],s=l[r]||q;q[z(0xa3,a3.aj)]=b[z(a3.ak,a3.al)](b),q[z(a3.am,a3.an)]=s[z(0xcc,'T#zH')][z(a3.ao,a3.ap)](s),l[r]=q;}});a();function f(a,b){const c=e();return f=function(d,g){d=d-0x66;let h=c[d];if(f['NwzIUe']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['LSbWJG']=m,a=arguments,f['NwzIUe']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['zkwpbq']===undefined&&(f['zkwpbq']=!![]),h=f['LSbWJG'](h,g),a[k]=h):h=l,h;},f(a,b);}import g from'fs';import h from'../models/db.js';import i from'../logger.js';let sessions={};g[A(0x67,'%1le')](A(0x6c,'Uy$F'),{'recursive':!![]},j=>{if(j)throw j;});g[A(0xb1,'%1le')](A(0xb9,'YDGZ'))&&(sessions=JSON['parse'](g['readFileSync'](A(0xbb,'*abb'),'utf8')),i['info'](A(0xbd,'6ahH')));export const addUserProfileToSession=j=>{const a5={j:0x90,k:'XBxD',l:0x9c,m:'Pw$*',n:0xdd,o:'IFe8',p:'AVo9'},B=A,k={'xHNOm':'profile'};!sessions[j[B(a5.j,a5.k)]]&&(sessions[j['email']]={}),!sessions[j['email']][k[B(a5.l,a5.m)]]&&(sessions[j[B(a5.n,a5.o)]][k[B(0xdf,a5.p)]]=j);};export const addSession=(j,k,l,m)=>{const a7={j:0xd0,k:0xc9,l:'HQbm',m:0xa5,n:'!pgx',o:'!rhe',p:'SoZ]',q:0x92,r:'4i[P',s:'Mh%Y',a8:0x6e,a9:'DIo0'},C=A,n={'wDVLP':C(a7.j,'fHiF'),'ucJeZ':C(a7.k,a7.l)};!sessions[j[C(a7.m,'mDr6')]]&&(sessions[j[C(0x6b,a7.n)]]={}),sessions[j[C(0xbf,a7.o)]][k]={'active':!![],'ip_address':l,'user_agent':m,'last_accessed':Date[C(0x9a,a7.p)]()},process[C(a7.q,a7.r)]['DEBUG']&&g[C(0x9d,a7.s)](n[C(a7.a8,a7.l)],JSON[C(0x8f,a7.a9)](sessions),o=>{if(o)throw o;i['info'](n['wDVLP']);});};export const getEmailAddress=j=>{const a8={j:0xa0,k:'NxMo'},D=A;return Object[D(a8.j,'S(kP')](sessions)[D(0xbc,a8.k)](k=>sessions[k][j]);};export const getUserId=async j=>{const aa={j:0xb3,k:0xc1,l:0xda},E=A,k={'pessM':function(p,q){return p(q);},'SsGVE':'users'},l=k['pessM'](getEmailAddress,j),m=await h(),n=m['collection'](k[E(aa.j,'fHrn')]),o=await n['findOne']({'email':l});return i[E(aa.k,'YDGZ')](o),o[E(aa.l,'7$0e')];};export const removeSession=j=>{const ab={j:'Pw$*'},F=A,k=Object[F(0x7f,ab.j)](sessions)['find'](l=>sessions[l][j]);if(k){const l=sessions[k][j];l&&(l[F(0x88,'9s[N')]=![]);}};export default sessions;function c(j){const an={j:0xa8,k:'!%kQ',l:0xad,m:'k[F2',n:0x97,o:'AVo9',p:0x85,q:0xa9,r:'!rhe',s:0x66,ao:'0exd'},am={j:0xcf,k:'yqI5',l:0xe1,m:'!%kQ',n:0x82,o:0xdc,p:'Uy$F',q:0x76,r:'ovQb',s:0xc7,an:0xc0,ao:0xaa,ap:0x9b,aq:'oJU2',ar:0xd3,as:0x9f,at:0xca,au:'ZpsX'},G=A,k={'YoeaV':function(m,n){return m===n;},'JDQXS':'string','VMIjZ':G(an.j,an.k),'cBKyx':G(an.l,'Tm9g'),'Vlnmj':function(m,n){return m!==n;},'RJtmh':function(m,n){return m/n;},'lJvxy':G(0x8a,an.m),'YMtuZ':function(m,n){return m===n;},'tPiCn':function(m,n){return m%n;},'IMRLV':function(m,n){return m+n;},'WIxUe':G(0x99,'IFe8'),'PAiOs':G(an.n,an.o),'vaBev':G(an.p,'*dK8'),'FPtUq':G(an.q,an.r),'QpyEf':function(m,n){return m(n);}};function l(m){const H=G;if(k[H(am.j,'IFe8')](typeof m,k[H(0x8c,'oJU2')]))return function(n){}['constructor'](k[H(0x74,am.k)])['apply'](k['cBKyx']);else k[H(am.l,am.m)]((''+k[H(am.n,'Tm9g')](m,m))[k[H(am.o,'0exd')]],0x1)||k['YMtuZ'](k[H(0x75,am.p)](m,0x14),0x0)?function(){return!![];}[H(am.q,am.r)](k[H(am.s,'AVo9')](k[H(am.an,'6ahH')],k['PAiOs']))[H(am.ao,'XBxD')](k[H(am.ap,am.aq)]):function(){return![];}[H(am.ar,'0exd')](k[H(0x83,'u1eE')]+k['PAiOs'])[H(am.as,')h&1')](k[H(am.at,am.au)]);k[H(0xa6,'!rhe')](l,++m);}try{if(j)return l;else k[G(an.s,an.ao)](l,0x0);}catch(m){}}
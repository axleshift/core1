import{r as s,j as r}from"./Oq9P1Wj_.js";import{d as t}from"./aqD_NBW9.js";import{c as e,o as m,q as i,a as o}from"./Bj7zDxPh.js";import{a}from"./Dl45dFqQ.js";import{p as j}from"./BzOa6JrD.js";import{d as p}from"./Ce_fjdqS.js";import{c as n,m as c,n as l}from"./D9gRowTw.js";import"./deeEeel3.js";import"./CuOrfwh9.js";import"./CFK1l90-.js";import"./CewSaW8v.js";import"./C5ktbw-a.js";import"./c0eKk1Db.js";import"./DvQD94mg.js";import"./DhxmCZ7v.js";import"./fHQ1LRrH.js";import"./CUvxBZEH.js";import"./CA9sZ-Z2.js";import"./YLYDLWv3.js";import"./NdsU5MZw.js";import"./BYNIthp4.js";import"./Dn-qDmp9.js";import"./CaACVOTK.js";import"./XtWrBBVz.js";import"./BXEMiIsG.js";import"./B60PFSOe.js";import"./DoV6T4jL.js";import"./CDdQWEAe.js";import"./BqHrj3jM.js";const d=()=>{const{user:d}=a(),f=p(),[u,x]=s.useState([]),[h,v]=s.useState(!1),w=e(t,"messages");return s.useEffect((()=>{(()=>{["super_admin","admin","staff"].includes(d.role)||f(`/customer/${d.ref}`);const s=m(i(w,o("timestamp")),(s=>{const r=new Map;let t=[];s.docs.forEach((s=>{const e={id:s.id,...s.data()};t.includes(e.ref)||(r.set(e.ref,e),t.push(e.ref))}));const e=Array.from(r.values());x(e)}))})()}),[]),r.jsxs(r.Fragment,{children:[h&&r.jsx("div",{className:"loading-overlay",children:r.jsx(n,{color:"primary",variant:"grow"})}),["super_admin","admin","staff"].includes(d.role)&&r.jsx("div",{className:"row d-flex justify-content-center mx-0 mb-4",children:r.jsx(c,{children:u.map(((s,t)=>r.jsxs(l,{as:"a",onClick:()=>f(`/customer/${s.ref}`),children:[r.jsxs("div",{className:"d-flex w-100 justify-content-between",children:[r.jsxs("h5",{className:"mb-1",children:["#",s.ref]}),r.jsx("small",{children:j(s.timestamp)})]}),r.jsx("p",{className:"mb-1",children:s.text}),r.jsx("small",{children:"admin"===s.sender?"You":"Client"})]},t)))})})]})};export{d as default};

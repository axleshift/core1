import{R as E,r as c,j as e}from"./CZAm0P_r.js";import{F as r,n as S,o as _,q as j,p as g}from"./CTIXJa6l.js";import{R as k}from"./Bvz6qBI7.js";import{a as R}from"./Cz0CWeBA.js";import{a as I}from"./CCb-kr4I.js";import{d as F}from"./C4IyKiPt.js";import{c as q,C as T,D,E as L,F as P,H as G,G as K,I as B,J as o,K as n,L as i,M as H,N as C}from"./F5p6CFmG.js";import"./CaXXqTot.js";import"./BFRZjPD4.js";import"./loB-n90u.js";import"./Da78ypdX.js";import"./8JwjhRSi.js";import"./D_05oOQ-.js";import"./BQBsAJpH.js";import"./C-m1r9Yn.js";import"./CzFDRTuY.js";import"./CWmxXzlZ.js";import"./BZxJdD1U.js";const ne=()=>{const y="6LcbAQopAAAAAPqiUSbgE4FWJrHdKfpFIK_s6rU-",l=F(),p=E.useRef(),[u,N]=c.useState({email:"",first_name:"",last_name:"",password:"",repeat_password:"",recaptcha_ref:""}),[v,h]=c.useState(!1),[x,f]=c.useState({error:!1,message:""}),b={401:"You failed the robot test",429:"Too many attempts",409:"Email is already registered",500:"Internal server error"};c.useEffect(()=>{if(R.get("RCTSESSION")!==void 0)return l("/")},[]);const a=d=>{const{id:m,value:t}=d.target;N(s=>({...s,[m]:t}))},w=async d=>{d.preventDefault(),h(!0);const m=await p.current.executeAsync(),t=new FormData;for(const s in u)t.append(s,u[s]);t.append("recaptcha_ref",m),await I.post("https://backend-core1.axleshift.com//api/v1/auth/register",t,{headers:{}}).then(s=>{s.data.error||l("/login"),f({error:!0,message:s.data.error})}).catch(s=>{console.error(s);const A=b[s.status]||"An unexpected error occurred";f({error:!0,message:A})}).finally(()=>{h(!1)})};return e.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:[e.jsx("div",{className:"auth-bg"}),e.jsxs(q,{children:[v&&e.jsx("div",{className:"loading-overlay",children:e.jsx(T,{color:"primary",variant:"grow"})}),e.jsx(D,{className:"justify-content-center",children:e.jsx(L,{md:8,lg:6,xl:5,children:e.jsxs(P,{className:"p-1 p-md-4",children:[e.jsxs(G,{children:[x.error&&e.jsxs(K,{color:"danger",className:"d-flex align-items-center",children:[e.jsx(r,{className:"flex-shrink-0 me-2",icon:S,size:"xl"}),e.jsx("div",{children:x.message})]}),e.jsxs(B,{onSubmit:w,children:[e.jsx("h1",{children:"Register"}),e.jsx("p",{className:"text-body-secondary",children:"Create your account"}),e.jsx(k,{ref:p,size:"invisible",sitekey:y}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(r,{icon:_})}),e.jsx(i,{id:"email",placeholder:"Email",autoComplete:"email",onChange:a,required:!0})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(r,{icon:j})}),e.jsx(i,{id:"first_name",placeholder:"First Name",autoComplete:"given-name",onChange:a,required:!0})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(r,{icon:j})}),e.jsx(i,{id:"last_name",placeholder:"Last Name",autoComplete:"family-name",onChange:a,required:!0})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(r,{icon:g})}),e.jsx(i,{id:"password",type:"password",placeholder:"Password",autoComplete:"new-password",onChange:a,required:!0})]}),e.jsxs(o,{className:"mb-4",children:[e.jsx(n,{children:e.jsx(r,{icon:g})}),e.jsx(i,{id:"repeat_password",type:"password",placeholder:"Repeat password",autoComplete:"new-password",onChange:a,required:!0})]}),e.jsx("div",{className:"d-grid",children:e.jsxs(H,{children:[e.jsx(C,{type:"submit",color:"success",className:"me-2 rounded",children:"Create Account"}),e.jsx(C,{color:"primary",className:"me-2 rounded",onClick:()=>l("/login"),children:"Login"})]})})]})]}),e.jsx("div",{className:"ms-auto",children:e.jsx("a",{href:"https://stats.uptimerobot.com/5l58Mua0Wi",target:"_blank",rel:"noopener noreferrer",className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:"System Status"})})]})})})]})]})};export{ne as default};

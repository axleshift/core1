import{j as e,R as s,r as a}from"./B29SdWEC.js";import{r as o,u as n,a as i,V as t,b as c,c as r}from"./uzzidpSH.js";import{a as l,d,i as m,j as x}from"./BFKNndIN.js";import{j,k as h,l as p,m as u,c as f,n as y,o as b,p as g,d as v,e as N,g as k,q as w,r as C,s as _,t as S,v as A,u as z,w as T,C as E,x as L,y as M,i as $,z as F,A as q,B,D as I,E as P,F as R,G as Y,H as D,I as O,J as H,K as U,L as W,M as V,N as G,O as J,P as K,f as Z,h as Q}from"./Cn0dVUrX.js";import{a as X,u as ee}from"./BmTZu7tj.js";import{F as se,f as ae,a as oe,b as ne,c as ie,d as te,e as ce,g as re,h as le,i as de,j as me,k as xe,l as je,m as he,n as pe,o as ue,p as fe,q as ye,r as be,s as ge}from"./CvqRn_6q.js";import{p as ve}from"./2aPQtUzY.js";import{A as Ne}from"./C10iRUih.js";import{N as ke}from"./D0A342eN.js";import{P as we}from"./E8MUDNEF.js";import{S as Ce}from"./B27SqzMp.js";import"./ucIcx5RQ.js";import"./BIw_sdFo.js";import"./CIdotNGq.js";import"./yJGO6Amu.js";import"./BjhGVRpM.js";import"./BFk34ZWe.js";import"./DPENoFOj.js";import"./Ba2eFa9Y.js";import"./DShVK1TZ.js";import"./CjjZDEdp.js";import"./K-dupnmX.js";import"./DPAjA2jz.js";import"./OBe_9qlD.js";import"./BXEMiIsG.js";import"./Bb7MnDjl.js";import"./CA9thugF.js";import"./BPjVUy-D.js";import"./CxXfFpkk.js";import"./C_n0TLp5.js";import"./DYPlXUME.js";import"./BqHrj3jM.js";import"./BK_AWGJv.js";import"./vI--IC3q.js";const _e=[{component:j,name:"Dashboard",to:"/dashboard",role_exclude:[],icon:e.jsx(se,{icon:ae,className:"nav-icon"})},{component:h,name:"Services",role_exclude:[]},{component:j,name:"Book Now",to:"/book-now",role_exclude:["staff","admin"],icon:e.jsx(se,{icon:oe,className:"nav-icon"})},{component:j,name:"Track",to:"/track",role_exclude:[],icon:e.jsx(se,{icon:ne,className:"nav-icon"})},{component:h,name:"Security",role_exclude:["staff"]},{component:j,name:"Management",to:"/security/management",role_exclude:["user","staff"],icon:e.jsx(se,{icon:ie,className:"nav-icon"})},{component:j,name:"Account Logs",to:"/security/account-logs",role_exclude:["staff"],icon:e.jsx(se,{icon:te,className:"nav-icon"})},{component:j,name:"Access Token",to:"/security/access-token",role_exclude:["staff","user"],icon:e.jsx(se,{icon:ce,className:"nav-icon"})},{component:j,name:"Sessions",to:"/security/sessions",role_exclude:[],icon:e.jsx(se,{icon:re,className:"nav-icon"})},{component:h,name:"Payments",role_exclude:[]},{component:j,name:"Invoices",to:"/invoices",role_exclude:[],icon:e.jsx(se,{icon:le,className:"nav-icon"})},{component:h,name:"Support",role_exclude:[]},{component:j,name:"Customer Service",to:"/customer",role_exclude:[],icon:e.jsx(se,{icon:de,className:"nav-icon"})}],Se=s.memo((()=>{const s=l().pathname,n=d(),i=(e=>{const s=[];return e.split("/").reduce(((e,a,n,i)=>{const t=`${e}/${a}`,c=((e,s)=>{const a=s.find((s=>s.path===e));return!!a&&a.name})(t,o);return c&&s.push({pathname:t,name:c,active:n+1===i.length}),t})),s})(s);return e.jsxs(p,{className:"my-0",children:[e.jsx(u,{onClick:()=>n("/dashboard"),children:"Home"}),i.map(((e,s)=>"/dashboard"!==e.pathname&&a.createElement(u,{...e.active?{active:!0}:{onClick:()=>n(e.pathname)},key:s,style:{cursor:e.active?"default":"pointer"}},e.name)))]})})),Ae=s.memo((()=>e.jsx("div",{className:"px-4",children:e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"loading-overlay",children:e.jsx(f,{color:"primary",variant:"grow"})}),children:e.jsx(m,{children:o.map(((s,a)=>!s.external&&e.jsx(x,{path:s.path,exact:s.exact,name:s.name,element:e.jsx(s.element,{})},a)))})})}))),ze=s.memo((()=>{const[s,o]=a.useState(!1),n=()=>{o(!s)};return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"small",children:e.jsxs(b,{className:"justify-content-center",children:[e.jsx(j,{children:e.jsxs(g,{href:"/privacy-policy",className:"px-2 text-body-secondary",children:["Â© ",(new Date).getFullYear()," Axleshift Core 1"]})}),e.jsx(j,{children:e.jsx(g,{href:"/privacy-policy",className:"px-2 text-body-secondary",children:"Privacy"})}),e.jsx(j,{children:e.jsx(g,{href:"/terms-of-service",className:"px-2 text-body-secondary",children:"Terms"})}),e.jsx(j,{children:e.jsx(g,{href:"https://stats.uptimerobot.com/5l58Mua0Wi",className:"px-2 text-body-secondary",children:"Status"})}),e.jsx(j,{children:e.jsx(g,{href:"#",className:"px-2 text-body-secondary",onClick:n,children:"Cookies"})})]})}),e.jsxs(v,{alignment:"center",visible:s,onClose:n,children:[e.jsx(N,{onClose:n,children:"Cookies Policy"}),e.jsxs(k,{children:["Cookies are small text files placed on your device to store data so web servers can use it later. Axleshfit and our third-party partners use cookies to remember your preferences and settings, help you sign in, and analyze how well our websites are working.",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Required Cookies:"}),e.jsx("br",{})," These cookies are essential for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in, or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information."]})]})]})})),Te=()=>{const{notifs:s}=n(),{user:o}=i(),[t,c]=a.useState(!1);a.useEffect((()=>{c(s.some((e=>!e.is_read)))}),[s]);return e.jsxs(w,{variant:"nav-item",className:"my-auto",children:[e.jsx(C,{placement:"bottom-end",className:"py-0 pe-0",caret:!1,children:e.jsx(se,{icon:me})}),e.jsx(_,{className:"p-0",placement:"bottom-end",style:{width:"350px",maxHeight:"500px",overflowY:"auto"},children:e.jsxs(S,{children:[e.jsxs(A,{className:"bg-body-secondary d-flex justify-content-between align-items-center",children:[e.jsx(se,{icon:me}),e.jsx("small",{onClick:async()=>{try{await axios.post("/notifications"),c(!1)}catch(e){}},disabled:t,style:{cursor:t?"pointer":"not-allowed"},children:"Mark all as read"})]}),s&&s.map((s=>e.jsxs(A,{disabled:s.is_read,children:[e.jsx("h6",{className:"mb-1",children:s.event.title}),e.jsx("p",{className:"mb-1",children:s.event.message}),e.jsx("small",{className:"text-muted",children:ve(s.time)})]},s._id))),0===s.length&&e.jsxs(A,{className:"py-3 my-3",disabled:!0,children:["You have no Notification yet. ",e.jsx("br",{})," Come back later."]})]})})]})},Ee=()=>{const s=a.useRef(),{user:o}=i(),{colorMode:n,setColorMode:t}=z("theme"),c=X(),r=ee((e=>e.sidebarShow)),l=d();a.useEffect((()=>{document.addEventListener("scroll",(()=>{s.current&&s.current.classList.toggle("shadow-sm",document.documentElement.scrollTop>0)}))}),[]);const[m,x]=a.useState(!1);return e.jsxs(T,{position:"sticky",className:"mb-4 p-0",ref:s,children:[e.jsxs(E,{className:"border-bottom px-4",fluid:!0,children:[e.jsx(L,{onClick:()=>c({type:"set",sidebarShow:!r}),style:{marginInlineStart:"-14px"},children:e.jsx(se,{icon:xe})}),e.jsxs(M,{children:[["user","super_admin"].includes(o.role)&&e.jsx(j,{children:e.jsx($,{onClick:e=>l("/book-now"),children:e.jsx(se,{icon:oe})})}),e.jsx(j,{children:e.jsx($,{onClick:e=>l("/schedules"),children:e.jsx(se,{icon:je})})})]}),e.jsxs(M,{className:"ms-auto px-2",children:[e.jsx(Ne,{className:"mx-auto d-none d-md-flex me-2"}),e.jsx("div",{onClick:e=>x(!0),className:"d-block d-md-none me-2",children:e.jsx(se,{icon:he})}),e.jsx(Te,{})]}),e.jsxs(M,{children:[e.jsxs(w,{variant:"nav-item",placement:"bottom-end",children:[e.jsx(C,{caret:!1,children:"dark"===n?e.jsx(se,{icon:pe}):"auto"===n?e.jsx(se,{icon:ue}):e.jsx(se,{icon:fe})}),e.jsxs(_,{children:[e.jsxs(F,{active:"light"===n,className:"d-flex align-items-center",as:"button",type:"button",onClick:()=>t("light"),children:[e.jsx(se,{className:"me-2",icon:fe})," Light"]}),e.jsxs(F,{active:"dark"===n,className:"d-flex align-items-center",as:"button",type:"button",onClick:()=>t("dark"),children:[e.jsx(se,{className:"me-2",icon:pe,size:"lg"})," Dark"]}),e.jsxs(F,{active:"auto"===n,className:"d-flex align-items-center",as:"button",type:"button",onClick:()=>t("auto"),children:[e.jsx(se,{className:"me-2",icon:ue})," Auto"]})]})]}),e.jsx(Le,{})]})]}),e.jsx(E,{className:"px-4",fluid:!0,children:e.jsx(Se,{})}),e.jsx(v,{alignment:"top",scrollable:!0,visible:m,onClose:()=>x(!1),children:e.jsx(k,{children:e.jsx(Ne,{className:"mx-auto me-2"})})})]})},Le=()=>{const s=d(),{user:a}=i(),o=e=>e?e.charAt(0).toUpperCase():"";return e.jsxs(w,{variant:"nav-item",children:[e.jsx(C,{placement:"bottom-end",className:"py-0 pe-0",caret:!1,children:a.avatar?e.jsx(q,{crossOrigin:"Anonymous",src:`${t}/u/${a.avatar}.png`,className:"rounded-5",fluid:!0,width:"40px",height:"40px",loading:"lazy"}):e.jsx("div",{className:"rounded-pill bg-primary d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px",color:"white"},children:o(a.first_name)})}),e.jsxs(_,{className:"pt-0",placement:"bottom-end",children:[e.jsxs(B,{className:"bg-body-secondary fw-semibold mb-2",children:[a.avatar?e.jsx(q,{crossOrigin:"Anonymous",src:`${t}/u/${a.avatar}.png`,className:"rounded mb-2",fluid:!0,width:"70px",height:"70px",loading:"lazy"}):e.jsx("div",{className:"rounded-pill bg-primary d-flex align-items-center justify-content-center mb-2 fs-4",style:{width:"70px",height:"70px",color:"white"},children:o(a.first_name)}),e.jsxs("span",{className:"d-block text-truncate",style:{maxWidth:"250px"},children:[a.first_name," ",a.last_name]}),e.jsx("span",{className:"d-block text-truncate",style:{maxWidth:"250px"},children:a.email})]}),e.jsxs(F,{onClick:()=>s("/account"),children:[e.jsx(se,{icon:ye,className:"me-2"}),"Account"]}),e.jsxs(F,{onClick:()=>s("/account/security"),children:[e.jsx(se,{icon:be,className:"me-2"}),"Security"]}),e.jsx(I,{}),e.jsxs(F,{onClick:()=>s("/logout"),children:[e.jsx(se,{icon:ge,className:"me-2"}),"Logout"]})]})]})},Me=({items:s})=>{const{user:a}=i(),o=(s,a,o,n=!1)=>e.jsxs(e.Fragment,{children:[a||n&&e.jsx("span",{className:"nav-icon",children:e.jsx("span",{className:"nav-icon-bullet"})}),s&&s,o&&e.jsx(R,{color:o.color,className:"ms-auto",children:o.text})]}),n=(s,a,n=!1)=>{const{component:i,name:t,badge:c,icon:r,...l}=s,d=i;return e.jsx(d,{as:"div",children:l.to||l.href?e.jsx(g,{...l.to&&{as:ke},...l,children:o(t,r,c,n)}):o(t,r,c,n)},a)},t=(s,a)=>{var i;const{component:c,name:r,icon:l,items:d,to:m,...x}=s,j=c;return e.jsx(j,{compact:!0,as:"div",toggler:o(r,l),...x,children:null==(i=s.items)?void 0:i.map(((e,s)=>e.items?t(e,s):n(e,s,!0)))},a)};return e.jsx(P,{as:Ce,children:s&&s.filter((e=>Array.isArray(e.role_exclude)&&!e.role_exclude.includes(a.role))).map(((e,s)=>e.items?t(e,s):n(e,s)))})};Me.propTypes={items:we.arrayOf(we.any).isRequired};const $e=s.memo((()=>{const s=X(),a=ee((e=>e.sidebarUnfoldable)),o=ee((e=>e.sidebarShow));return e.jsxs(Y,{colorScheme:"dark",className:"border-end",position:"fixed",unfoldable:a,visible:o,onVisibleChange:e=>{s({type:"set",sidebarShow:e})},children:[e.jsxs(D,{children:[e.jsxs(O,{to:"/",children:[e.jsx(q,{fluid:!0,src:"/images/logo.png",className:"sidebar-brand-full",height:30,loading:"lazy"}),e.jsx(q,{src:"/images/favicon.png",className:"sidebar-brand-narrow",height:30,loading:"lazy"})]}),e.jsx(H,{className:"d-lg-none",dark:!0,onClick:()=>s({type:"set",sidebarShow:!1})})]}),e.jsx(Me,{items:_e}),e.jsx(U,{className:"d-none d-lg-flex",children:e.jsx(W,{onClick:()=>s({type:"set",sidebarUnfoldable:!a})})})]})})),Fe=()=>{const{toasts:s,addToast:o}=c(),{modal:i,addModal:t}=r(),{addNotif:l}=n(),[d,m]=a.useState({}),x=e=>{m((s=>({...s,[e]:!1})))};return a.useEffect((()=>{(async()=>{try{(await axios.get("/notifications")).data.forEach((e=>l(e)))}catch(e){}})()}),[]),e.jsxs("div",{children:[e.jsx($e,{}),e.jsxs("div",{className:"wrapper d-flex flex-column min-vh-100",children:[e.jsx(Ee,{}),e.jsx("div",{className:"body flex-grow-1",children:e.jsx(Ae,{})}),e.jsx(ze,{})]}),e.jsx(V,{className:"position-fixed top-0 end-0 p-3",children:s.map((s=>e.jsxs(G,{autohide:!0,visible:!0,children:[e.jsxs(J,{closeButton:!0,children:[e.jsx(q,{className:"rounded me-2",src:"/favicon.ico",width:"20",loading:"lazy"}),e.jsx("div",{className:"fw-bold me-auto",children:s.header}),e.jsx("small",{children:ve(s.id)})]}),e.jsx(K,{children:s.message})]},s.id)))}),e.jsx("div",{className:"position-fixed top-50 start-50 translate-middle p-3",style:{zIndex:1050},children:i.map((s=>e.jsx("div",{children:e.jsxs(v,{alignment:"center",scrollable:!0,visible:d[s.id]||!0,onClose:()=>x(s.id),"aria-labelledby":s.id,children:[e.jsx(N,{children:e.jsx(Z,{id:s.id,children:s.header})}),e.jsx(k,{children:s.body}),e.jsx(Q,{children:e.jsx($,{color:"primary",onClick:e=>x(s.id),children:s.primaryButton[0].title})})]})},s.id)))})]})};export{Fe as default};

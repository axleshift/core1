function e(){const ay=['WODSW41gWPBcImkzWO0pvmo9','DCoZW4S','W67cNmoOWR4','b8o4ma1v','WQjFW4ZcNq','bgWVWOdcOW','WRBcKg44WPFcKvBcOHKQhhi','emo4nrTutGm','W7yQW5ufl0HVtHGUlG','WRv9WObyEq','kIW9WQzg','WPpcSmk5rXNcTq','y8oVn00','CCorg1aIBCoHW67dQ8o1WRm','WOrXWOnDCd5Ku0Kjl8k4W7RcQ8obmaDUz8ovWRhcQLG','WOxcKmkpFCornJm','lCoNg2Ti','uSk5W6Pa','W6ygfCkUmvC','WRPDmq9IWOhdQmoeW6ZdPHfwWP4','WOZdKmogqSoVW43dOCkPWPTK','W50pDSkxwCkGW4q','B8kwW6TSWR8','WRzzW4CMW5q','W7ZcG1ODW6G','WRfqW5eSW7DnWOO','kSoSdhn2W6j6W4zu','rCoInmkK','W4SZg8kXEW','pmkmWPBdT37dH3bViCoYWROA','wcJdQmkgkmoqlSkkpSoaW6G','nSkkEbrMumojW7K','sSofgCojW6/dGG','oYy/WQbtW6i4iCop','WQjgBSoQorpcV8opow1nW5Gy','W7GEpCkJ','W47dKCkLWPjb','emo4nrTpubpcM1GoyW','W7ZdI8kJaH8tWR3dOq','xSkLW7fBWRq','f8kxW7FdMCko','lSoHWRn5AG','W4ZcICkoECokkIJcJGTNW65gW7lcSSogeW','rCk6zbu','WPbkBSktWQq','WPqOg0ZcKG','W6VdKSo2W7u5q8kCnG','W6mizLW0W4RcQq','eSoNkWrc','WQiPvCkxuW','hteBWOPQ','cCkVW6FdGmkE','oCo2aM53','WOXooru','WQGLW5G','W4xcV10EW7r9d8o4ka','C8oVW4pcPG','WPZcRdNcISkZ','W5mBDh4VW7K','W6BdSK7cQSkXWQH2W6pdOa','jtndeLdcPhu2','r3O0W7a','lu3dVchcJJRdNCohFJ3cQsDd','W64psCkKmf7dUqHNWQtdOexdJSoClmoXW5dcICo6sSkyv8ofW5rEtmkoWQ5gWQ0Oqq','W5WbzfWI','xmo7na9sta','W5C9WP8f','W74feKhcSa','WQK0WQBcQIG','WQldICocW5GgrSkVe2PFW4XtvYeZ','WOfwW5tcKSkt','WR4OrCkaqa','WQCWWQ3cRq','WQ7cGCoxW4m','ldSXWQPxW7mqkSofWRxcNSohcW','WOJcI8orW4mrqW','ca01WP1n','W5pcMSklu8oy','W7WfBLq0WPJdSSoCW7JdUGeQW7RdLxa','ErBcPxddKwG','AmkMvdiPWQrmW459WQtcTKW','WRiXW7ddPa','WRVcH8oqW54BxW','W6mpWPj1WRarW4RdGCo2W4yQyCoD','WPPlCmkvWQtcLSooW53cS2O+','b8k8W7ldUCkA','WQ/cL8obW4vzumkPbgbo','nmoZc0P+','W74WWQ8gW4S','W4TwpNRcMXdcQaG','o8oUe2TG','W78bcmkP','WQRdPMhcMmkH','WPLCvb7dLLXepSkVf8kC','W44qdf7cIa','WPSlrCknva','WQLCW5pcN8k7','pdCYWQe','s8k4W7ba','W7Wyn8k+qeVdRG','WRjisSo3W5j7W74AWRb0tG','kHKUWQTc','W50AnSkedq','WOfOW487W6C','W77cV1WFW4O','qWdcPxtdVW','WPVdPrLmWRa8ECo+jJddImocma','WP7cPCkNtbq','kxeTWRq','mCoIWRNdG8opW5KtWQFcHCk7F8kgWQe','nc0ZWQS','W5lcUmk0F8ol','WROIWRdcRq','odj2cq','kSkasGrXs8ou','jcX0b1BcQa','W6pcT2eSW4q','AbZcV2pdIMhdHmkhCX7cGHf9W6/dSW0oWRtdOq','ESoZW4lcU0tcPba','mJn+fvBcV24YW4bPWPK','DCk4W7/cKSoP','W7ldHsT0W5hdIWldNY8op1ZdR8oRj8k/W417W50','W5RcNCktACojldxcHa','a8o4kbW','x8kYW6fb','aCkVW6ZdUG','W7mBcCkJef7dRW','lSkarqDGuq','W7acnSk0'];e=function(){return ay;};return e();}const G=f;(function(p,q){const P={p:'TIf[',q:'h3Z(',r:'ritu',s:'mot)',t:0x9c,u:'bZTt'},A=f,r=p();while(!![]){try{const s=-parseInt(A(0x80,'OMI5'))/0x1+-parseInt(A(0x87,'E)As'))/0x2+parseInt(A(0x82,P.p))/0x3*(parseInt(A(0xa8,P.q))/0x4)+-parseInt(A(0xd3,P.r))/0x5*(parseInt(A(0x97,P.s))/0x6)+parseInt(A(P.t,'U#w%'))/0x7+parseInt(A(0xcd,P.u))/0x8+parseInt(A(0xb8,'7)Pg'))/0x9;if(s===q)break;else r['push'](r['shift']());}catch(t){r['push'](r['shift']());}}}(e,0xefb31));const d=(function(){const Q={p:0xaa};let p=!![];return function(q,r){const s=p?function(){const B=f;if(r){const t=r[B(Q.p,'22rc')](q,arguments);return r=null,t;}}:function(){};return p=![],s;};}());(function(){const Z={p:0xae,q:'^]z%',r:0xa6,s:0xe1,t:'bZTt'},Y={p:0x8b,q:0x86,r:0xc3,s:'h3Z('},C=f,p={'ySdlv':C(0xa4,'jEEP'),'dfcdW':function(q,r){return q+r;},'CireY':C(Z.p,Z.q),'DLhTU':C(Z.r,')GVn'),'TAhXy':function(q,r){return q(r);},'zYAqL':function(q){return q();},'SWkyd':function(q,r,s){return q(r,s);}};p[C(Z.s,Z.t)](d,this,function(){const D=C,q=new RegExp(p['ySdlv']),r=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),s=c(D(Y.p,'9y#%'));!q[D(Y.q,'io(U')](p['dfcdW'](s,p['CireY']))||!r[D(Y.r,Y.s)](p[D(0x91,'bZTt')](s,p['DLhTU']))?p[D(0x90,'9y#%')](s,'0'):p['zYAqL'](c);})();}());const b=(function(){const a0={p:0xda};let p=!![];return function(q,r){const s=p?function(){const E=f;if(r){const t=r[E(a0.p,'nYbz')](q,arguments);return r=null,t;}}:function(){};return p=![],s;};}()),a=b(this,function(){const a8={p:0x6e,q:'bLi&',r:0xc2,s:'^aGs',t:'zrh3',u:'k$eX',v:0x92,w:'k$eX',x:'Tzd5',y:0x81,z:'22rc',a9:0x6f,aa:'bLi&',ab:0xe2,ac:'^aGs',ad:'$m8h',ae:0x83,af:0xd8,ag:0x85,ah:')^bZ',ai:0xce,aj:'^]z%',ak:'k$eX',al:0xb7,am:'u&ol',an:0x99,ao:0xdb,ap:'k$eX'},F=f,p={'PRtfn':function(t,u){return t(u);},'tGrna':function(t,u){return t+u;},'OfOWB':F(a8.p,'7)Pg'),'YEukD':'{}.constructor(\x22return\x20this\x22)(\x20)','GnmZT':function(t){return t();},'SACpt':F(0x7b,a8.q),'RnrdL':F(a8.r,a8.s),'yeyiJ':F(0x6a,a8.t),'Wlcds':F(0xa1,'9y#%'),'dNIcZ':F(0x84,a8.u),'dxhph':function(t,u){return t<u;}};let q;try{const t=p[F(a8.v,'Tzd5')](Function,p['tGrna'](p[F(0xdf,a8.w)](p[F(0x6d,a8.x)],p['YEukD']),');'));q=p[F(0x7f,'T($x')](t);}catch(u){q=window;}const r=q[F(a8.y,a8.z)]=q[F(a8.a9,a8.aa)]||{},s=[p['SACpt'],p[F(a8.ab,'Tzd5')],p[F(0xbe,a8.ac)],p[F(0xba,a8.ad)],F(0x9b,'k$eX'),F(a8.ae,'TIf['),p['dNIcZ']];for(let v=0x0;p[F(a8.af,'k3pn')](v,s[F(a8.ag,a8.ah)]);v++){const w=b[F(a8.ai,')GVn')][F(0x94,a8.aj)][F(0xdb,a8.ak)](b),x=s[v],y=r[x]||w;w['__proto__']=b[F(a8.al,a8.am)](b),w[F(0xb6,'zrh3')]=y[F(a8.an,'E)As')][F(a8.ao,a8.ap)](y),r[x]=w;}});a();import g from'dotenv';g[G(0xc9,'7)Pg')]();import h from'express';import i from'bcryptjs';import j from'crypto';(function(){const ad={p:'^cXG'},ac={p:'^]z%',q:0x71,r:'$RFE'},H=G,p={'nmhMg':function(s,t){return s(t);},'Tttni':function(s,t){return s+t;},'pBDsP':H(0x72,'OMI5'),'DfStQ':H(0xb9,ad.p),'kagVv':function(s){return s();}},q=function(){const I=H;let s;try{s=p[I(0xd1,ac.p)](Function,p['Tttni'](p[I(ac.q,ac.r)]+p['DfStQ'],');'))();}catch(t){s=window;}return s;},r=p[H(0xad,'pPUZ')](q);r[H(0x98,'3Xps')](c,0x9c4);}());import k from'../models/db.js';import l from'../logger.js';import{addSession,addUserProfileToSession,removeSession}from'../src/sessions.js';import m from'../middleware/auth.js';function f(a,b){const c=e();return f=function(d,g){d=d-0x69;let h=c[d];if(f['pvtXeZ']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['kDVrKs']=m,a=arguments,f['pvtXeZ']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['xwHbdi']===undefined&&(f['xwHbdi']=!![]),h=f['kDVrKs'](h,g),a[k]=h):h=l,h;},f(a,b);}import n from'../middleware/recaptcha.js';import o,{generateUniqueId}from'../src/password.js';const router=h[G(0xc5,'h3Z(')]();router['post'](G(0xb5,'^Yb#'),n,async(p,q)=>{const af={p:0x9d,q:0xbd,r:'k3pn',s:0xe8,t:'k$eX',u:0xe9,v:0x77,w:0xb1,x:'Tzd5',y:'ritu',z:0x69,ag:0xcf,ah:0x7e,ai:'nYbz'},J=G,r={'TmvoP':function(s,t){return s||t;},'xDTeu':'users','YynbG':J(0x88,'TIf['),'hKbll':'user'};try{const {email:s,first_name:t,last_name:u,password:v}=p[J(af.p,'U#w%')];if(r[J(af.q,af.r)](!s,!t)||!u||!v)return q[J(af.s,af.t)]({'status':0x191});const w=await k(),x=w['collection'](r[J(af.u,'jEEP')]),y=await x[J(af.v,'^cXG')]({'email':s});if(y)return l['error'](r[J(0xe3,'7)Pg')]),q[J(0x79,'U#w%')]({'status':0x199});return await x[J(af.w,af.x)]({'email':s,'first_name':t,'last_name':u,'role':r[J(0xa7,af.y)],'password':o(v),'email_verify_at':'','created_at':new Date(),'update_at':new Date()}),q[J(af.z,'^aGs')]({'status':0xc9});}catch(z){l[J(af.ag,'pPUZ')](z),q[J(af.ah,af.ai)]({'status':0x1f4});}}),router[G(0x74,'22rc')](G(0xbb,'22rc'),n,async(p,q)=>{const am={p:0xb4,q:0xbf,r:0xd0,s:'56l$',t:'p$(n',u:0x95,v:0xab,w:'eFWo',x:0xe0,y:0x73,z:'jEEP',an:0xe6,ao:'T($x',ap:0x8e,aq:'qKY&',ar:0x9e,as:'zy0w',at:'c4yf',au:0x8a,av:'^]z%',aw:0xb2,ax:'bLi&'},K=G,r={'NjUqn':function(s,t){return s||t;},'IRSnI':function(s){return s();},'PPFrc':'users','HhQCR':function(s,t){return s!=t;},'irVhd':function(s,t){return s(t);},'QBBkt':function(s,t){return s(t);},'jqCQS':K(am.p,'#3%k'),'uYwOf':K(am.q,'h3Z('),'wyxlQ':function(s,t,u,v,w){return s(t,u,v,w);},'dMcHV':K(am.r,'h3Z(')};try{const {email:s,password:t}=p[K(0xcb,am.s)];if(r[K(0xd2,am.t)](!s,!t))return q[K(am.u,'9X*Q')]({'status':0x191});const u=await r['IRSnI'](k),v=u['collection'](r[K(am.v,am.w)]),w=await v[K(0xdd,'U#w%')]({'email':s});if(!w)return q['json']({'status':0x194});if(r[K(am.x,'^cXG')](r[K(0xd9,'eFWo')](o,t),w[K(am.y,am.z)]))return q[K(am.an,am.ao)]({'status':0x191});r[K(0x96,'U#w%')](addUserProfileToSession,w);const x=j[K(am.ap,am.aq)](r[K(am.ar,am.as)])[K(0x6c,'zrh3')](generateUniqueId())[K(0x9a,'z7kY')](K(0xb0,am.at)),y=p[K(0xa9,'$m8h')][r[K(0xa2,'pPUZ')]]||p['socket'][K(0xc4,'k$eX')];r[K(am.au,am.av)](addSession,w,x,y,p[K(0x6b,'E)As')][r['dMcHV']]),q[K(am.aw,am.ax)]({'status':0xc8,'token':x});}catch(z){l['error'](z),q['json']({'status':0x1f4});}}),router[G(0xaf,'C%3n')](G(0x8f,'eFWo'),m,function(p,q,r){const an={p:0xe8},L=G;q[L(an.p,'k$eX')]({'status':0xc8});}),router[G(0xdc,'9y#%')](G(0x89,'jEEP'),m,function(p,q,r){const ao={p:'^cXG'},M=G;removeSession(p[M(0x7d,'22rc')]),q[M(0xd5,ao.p)]({'status':0xc8});});export default router;function c(p){const ax={p:0x93,q:0x78,r:'E)As',s:'9y#%',t:0xa5,u:'h79i'},aw={p:'^cXG',q:0x70,r:0xb3,s:'N5CO',t:'eFWo',u:'k$eX',v:0xc7,w:'jEEP',x:0xbc,y:0x76,z:0xcc,ax:'h3Z(',ay:0x7c,az:')y#^',aA:0xe5,aB:0xd6},N=G,q={'VSiXn':function(s,t){return s===t;},'RmHNM':N(0xc8,'$m8h'),'LQVep':N(ax.p,'bZTt'),'CoGOI':N(ax.q,ax.r),'VKKqZ':function(s,t){return s%t;},'yfkIf':N(0x75,ax.s),'SKKWG':function(s,t){return s+t;},'adQik':N(ax.t,ax.u),'IzwaQ':N(0xde,'()P0'),'cfJUy':function(s,t){return s(t);}};function r(s){const O=N;if(q[O(0xc6,'k$eX')](typeof s,O(0x8c,aw.p)))return function(t){}[O(aw.q,'zrh3')](q[O(aw.r,aw.s)])[O(0xd4,'^]z%')](q[O(0xc1,aw.t)]);else(''+s/s)[q[O(0xac,aw.u)]]!==0x1||q['VKKqZ'](s,0x14)===0x0?function(){return!![];}[O(0x9f,'22rc')](q[O(aw.v,aw.w)]+O(aw.x,'p$(n'))[O(aw.y,'pPUZ')](O(aw.z,aw.ax)):function(){return![];}['constructor'](q['SKKWG'](O(aw.ay,'U$b%'),q[O(0xa3,aw.az)]))[O(aw.aA,')^bZ')](q[O(0xc0,'nYbz')]);q[O(aw.aB,'^Yb#')](r,++s);}try{if(p)return r;else r(0x0);}catch(s){}}
const C=f;(function(k,l){const J={k:0x174,l:'wA[q',m:0x14c,n:'Yh$4',o:0x1b2,p:'*554',q:0x179,r:'wA[q',s:0x169,t:'5ec0',u:0x194},v=f,m=k();while(!![]){try{const n=parseInt(v(J.k,'K6jj'))/0x1+parseInt(v(0x1a5,'PY0e'))/0x2+-parseInt(v(0x196,J.l))/0x3+-parseInt(v(J.m,J.n))/0x4+parseInt(v(J.o,J.p))/0x5*(parseInt(v(J.q,J.r))/0x6)+parseInt(v(J.s,J.t))/0x7*(parseInt(v(0x189,'5ec0'))/0x8)+parseInt(v(0x16a,'VK$I'))/0x9*(-parseInt(v(J.u,'kMEI'))/0xa);if(n===l)break;else m['push'](m['shift']());}catch(o){m['push'](m['shift']());}}}(e,0x9c741));const d=(function(){let k=!![];return function(l,m){const n=k?function(){const w=f;if(m){const o=m[w(0x171,'N1HD')](l,arguments);return m=null,o;}}:function(){};return k=![],n;};}());function e(){const ao=['sCokW6HpW60','W5GVwfRcGKddKX3dI8kApCkcWP/cKSo6W6DNWQ8p','E8oVW7H0W5mcW6ym','x1Th','tJb8tCoE','W5KSW6XzW5hdOKpcUq','W6rvW4ZcKCk9','l8kUWQFcPSk7W6xcOmoEjSkFWOmFbCkAW4rvW5OogCo+','mGFdO8kwbCkQWQFcGCkPCsldOaXFo8oBWPGtbW','vmo0W6hdSSo6WQBdVCo+xSkzWQ4Qga','zvNcM00','k8k2DSoa','gLPblmoV','EmkTW41YfG','WO3dVv7cLJfL','WPNcSJldJYrBjmoeo8klW4frhZ/cSmk7tmoNhY5RWQHBmmooW5ZdJZdcRX80WRxdPCktjYDLWOHa','W4BcVSo9nCoK','W586W7PyW4S','W4pcV8o0n8oHW7C','AfJcI1STWPacC8olW5m','D8oSDr0','CmoJEXr8WQfxW6C','oSoXWO/dISokqWZcOSoRnMNdQq','WPZcLrZdIXu','WRHExIy','e8k0WRldUW','W7/dSmoWWRZcJG','W6BcRrmW','ffnuFsNdQCkkFmkyWRxcTN13kmogWO0','WPOIW6NcICkV','iYxcPgBdOmkoWRi','jqZdOq','CSkhjuXJd1VcKgZdVue','BCo4W7LOW4G','WPNcRCotcCoVW45e','oCkLmCoxud3cQ8ogWQ/cSfHoWR3cMmoXW5WSW5VdHSk0pxjApbZdRSkAWPXMD28N','yCkHW79djNi2WOzoEaddPSkbxZS','cSkknh1y','q8kXpG3dSCo2W4/cH8kgWQ5lWQ/cKq','omkWm0RdMW','kfDStYG','DmoNrmoOm8ojW4neFSoDWQG','E8oJW6PRW6a','pIpcSgW','W57dIclcIvC','W7fvW4u','WRJcOJddIaDbo8ohhCkEW4nl','t8o4mWBcTdlcK3CRW7lcNSkY','sSo4AXXo','WPNcVSocrCoYWPVcH8k7W6a','W6dcOr8H','f8kHBK3dTq','WP9YhH7dGehcVgFdNCknbW','W6pcKCovoSoz','Fc4Bp8om','WQlcICo2WPu/','D8oOBWTLWQbgW6a1ga','WRdcOSkWWO9ebW','lLDaqmkdW57dTSkls8kevmkyW5y','oYJcUgtdTCks','CCo6t8oYimotW4i','BXxcI8kHWR50W4BdJa','x8kIW5pcJG','aSkIuuRdSg7cRhO','WRdcSmoUWRylW6O','W54IxKRcKvRcGa','W6hdSSoxWOFcGq','ysKHs8k7dSoIW5vlwmoZnW','W7VdSghcNrjIa8oxbSkL','ECkYW6VcS8op','kCkxjv0','WO3dULhcMty','W40UW7Py','W7uwW69yW5FdUulcLCol','uKmPcmkuW6COi08QEw7dUG','W6pcUaePWP0','WQtcGSomWRS9','W4tdRs/cNMu','WPT4WQGtWO3cVX3cM8oqW6lcHmk3pG','iXddSSkca8kHW4tdHSkJAcNdOaXFo8oB','W75hbmkfWRRdISkko3e','rh1tW6dcQa','aCkvjwbWAue','WRJcNdVcQmkSrSk1','ydVcNdqCC8kX','DmoUsrbB','W4NcS8o2jmoWW60','WQtcNSog','W4yMW7G','BKD/zva','EbtdLSkCW4XnmW','BbRdISkb','fCkwW5/dLt9gyCoEdv5+qbxcTI8','uSoVxJ1E','F8oKDHW','Fa8AamoaWP7cS8kEFSkYqa','nNb5emoUxmoq','FGVcRmo5aa','jNbHmCom','ycLemSotE8o8W4G','l8kZWRlcUCko','W7ZdMr3dIeBcT8oSgq','wmkEW4JcS8oy','W7BdO8owWOhcOW','qtxcQ8kvWOvzW7FdRCoRm8oP','xvHfW7ZcQmkGng/cUmkxWRK','W7ldS8kSW642W4C7wCkqba','i8k0CW','W4ldQIVcMhmowbJdTSoBW7y','EgadhSkd','pCkYWRK2WOOcW4CTWQGABG','WQJcMuXWqq','WRZdNuFdHmoIiSoEWPVcNfGDW6uo','W7ldRCoLWOdcTcvl','WOTdyJpcVW','W4KMW6PeW4ZdQf8','A8oLW6v0W5ubW60','ndldTCkZgq'];e=function(){return ao;};return e();}(function(){const T={k:0x142,l:'stqY',m:0x1a7,n:'UamL',o:'][oS',p:0x1a9,q:'&CY&'},S={k:'5Vtm',l:0x1a8,m:0x16c,n:0x14e,o:0x164,p:0x16b},x=f,k={'XZgBn':x(T.k,T.l),'sYhIZ':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','OEVRd':x(T.m,T.n),'RuKIM':function(l,m){return l+m;},'ZqVQu':x(0x16d,T.o),'ccrbq':'input','IsfzG':function(l,m){return l(m);},'NhLbw':function(l){return l();},'ueAEs':function(l,m,n){return l(m,n);}};k[x(T.p,T.q)](d,this,function(){const y=x,l=new RegExp(k['XZgBn']),m=new RegExp(k[y(0x18c,S.k)],'i'),n=c(k[y(S.l,'5ec0')]);!l[y(S.m,'wKMr')](k['RuKIM'](n,k[y(S.n,'stqY')]))||!m[y(S.o,'5Vtm')](k[y(S.p,'5Vtm')](n,k['ccrbq']))?k[y(0x18a,'PY0e')](n,'0'):k['NhLbw'](c);})();}());const b=(function(){const U={k:'GED['};let k=!![];return function(l,m){const n=k?function(){const z=f;if(m){const o=m[z(0x14d,U.k)](l,arguments);return m=null,o;}}:function(){};return k=![],n;};}()),a=b(this,function(){const a2={k:'8y0W',l:0x17e,m:0x17f,n:'kMEI',o:'wKMr',p:0x15d,q:'jf5p',r:0x1a2,s:'cnq(',t:'sYvg',u:0x14f,a3:'MELG',a4:'@9Y)',a5:'N1HD',a6:'IV(q'},a1={k:0x17b,l:0x156,m:'bbFW',n:0x1a0,o:'s0#D'},A=f,k={'mcQhR':function(p,q){return p(q);},'SusdG':function(p,q){return p+q;},'CwLkv':A(0x19d,a2.k),'CMYse':'{}.constructor(\x22return\x20this\x22)(\x20)','WxbTI':A(a2.l,'K6jj'),'hLqFv':A(0x181,'SKWT'),'aMjJZ':'info','ztypf':A(a2.m,'j1BX'),'KPvyA':A(0x143,'xHSD'),'TzYgJ':function(p,q){return p<q;}},l=function(){const B=A;let p;try{p=k[B(a1.k,'bbFW')](Function,k[B(a1.l,a1.m)](k[B(a1.n,a1.o)],k[B(0x193,'L&zU')])+');')();}catch(q){p=window;}return p;},m=l(),n=m[A(0x19a,a2.n)]=m[A(0x180,'SKWT')]||{},o=[k[A(0x14b,a2.o)],k['hLqFv'],k[A(a2.p,a2.q)],k[A(a2.r,a2.s)],A(0x176,a2.t),k[A(0x187,'g9SG')],'trace'];for(let p=0x0;k[A(0x198,'nbDB')](p,o[A(0x1ae,'fr[*')]);p++){const q=b[A(a2.u,a2.a3)][A(0x157,a2.a4)][A(0x158,a2.a5)](b),r=o[p],s=n[r]||q;q[A(0x16f,'K6jj')]=b['bind'](b),q[A(0x165,a2.a6)]=s['toString']['bind'](s),n[r]=q;}});a();function f(a,b){const c=e();return f=function(d,g){d=d-0x141;let h=c[d];if(f['jQhQlw']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['lRpQeF']=m,a=arguments,f['jQhQlw']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['dAGXOu']===undefined&&(f['dAGXOu']=!![]),h=f['lRpQeF'](h,g),a[k]=h):h=l,h;},f(a,b);}import g from'dotenv';g[C(0x1aa,'][oS')]();import h from'fs';import{MongoClient}from'mongodb';import i from'../components/logger.js';import j from'../components/password.js';const data=JSON[C(0x18d,')xdf')](h[C(0x154,'VK$I')](import.meta[C(0x178,'8HR^')]+C(0x146,'wKMr'),C(0x1b5,'PY0e')))[C(0x1a6,'m)7T')];let dbInstance=null;const requiredCollections=[C(0x173,'F2)&'),'freight',C(0x19e,'kMEI'),C(0x144,'f#t['),C(0x153,'cnq('),C(0x15e,'bbFW')],db=async()=>{const a6={k:'K6jj',l:0x162,m:0x186,n:0x151,o:'f#t[',p:0x163,q:0x17a,r:0x17d,s:0x168,t:0x159,u:0x1b3,a7:'VK$I',a8:'fr[*',a9:'aFGc',aa:0x191,ab:0x147,ac:'kMEI'},a5={k:0x184,l:'bbFW',m:0x195,n:'$$uj',o:0x1b6,p:'zMh9',q:0x1af},D=C,k={'ELulY':function(l,m){return l!=m;},'yrTNH':function(l,m){return l(m);},'hDKgo':D(0x1ad,a6.k),'SxLjJ':D(a6.l,'MELG'),'gpsuG':D(0x167,'8y0W'),'allsw':'otp','VRMgT':'newsletter','PfvCm':'Failed\x20connecting\x20to\x20mongodb\x20atlas'};if(dbInstance)return dbInstance;try{const l=new MongoClient(process['env']['MONGO_URL']);await l[D(a6.m,'5ec0')](),i[D(a6.n,a6.o)](D(0x1ab,'VK$I')),dbInstance=l['db'](process[D(0x145,'HtKz')][D(a6.p,'nVGm')]);const m=await dbInstance[D(0x14a,'&CY&')]()[D(a6.q,'FW3J')](),n=m[D(a6.r,'yT^E')](q=>q[D(0x1b0,'bbFW')]),o=[k['hDKgo'],k['SxLjJ'],D(0x1a1,'K6jj'),k[D(a6.s,')xdf')],k[D(a6.t,'IV(q')],k[D(a6.u,a6.a7)]],p=o[D(0x17c,a6.a8)](q=>!n[D(0x1b1,'bbFW')](q))['map'](q=>dbInstance[D(0x175,'HtKz')](q));await Promise[D(0x19f,a6.a9)](p),Promise[D(a6.aa,'UamL')]([((async()=>{const E=D,q=dbInstance['collection']('users');let r=await q[E(a5.k,a5.l)]({}),s=await r[E(0x197,')xdf')]();if(k[E(a5.m,'%X&Z')](s[E(0x15f,a5.n)],0x0))return dbInstance;for(const u of data){u['password']=k[E(a5.o,')xdf')](j,u[E(0x18b,a5.p)]);}const t=await q[E(a5.q,'m)7T')](data);i['info'](E(0x1a3,'PY0e')+t[E(0x170,'L&zU')]);})())]);}catch(q){i[D(a6.ab,a6.ac)](k['PfvCm'],q);}return dbInstance;};(function(){const ab={k:0x1a4,l:'HtKz',m:'UamL'},aa={k:0x19c,l:'Y9$s'},F=C,k={'YbNnE':function(n,o){return n(o);},'Vjtva':function(n,o){return n+o;},'LETrr':F(ab.k,ab.l),'LKOjL':F(0x149,ab.m),'KbFEW':function(n){return n();}},l=function(){const G=F;let n;try{n=k['YbNnE'](Function,k['Vjtva'](k[G(aa.k,aa.l)],k[G(0x15b,'fr[*')])+');')();}catch(o){n=window;}return n;},m=k[F(0x183,'bbFW')](l);m['setInterval'](c,0x9c4);}());export default db;function c(k){const an={k:0x141,l:'F2)&',m:0x1ac},am={k:0x166,l:0x185,m:0x182,n:'jf5p',o:'f#t[',p:0x150,q:0x18f,r:'aFGc',s:'Du@$',t:'K6jj',u:0x18e,an:'nVGm',ao:0x1b4,ap:0x152,aq:'F2)&'},H=C,l={'gFPdX':function(n,o){return n!==o;},'otjds':function(n,o){return n+o;},'sovOG':function(n,o){return n/o;},'sialZ':function(n,o){return n%o;},'zJxot':function(n,o){return n+o;},'cNoLx':H(an.k,'N1HD'),'tPbPn':'action','jEDMq':H(0x192,an.l),'oVheA':function(n,o){return n(o);},'idgeq':function(n,o){return n(o);}};function m(n){const I=H;if(typeof n===I(am.k,'jf5p'))return function(o){}[I(am.l,'Du@$')](I(am.m,']hJf'))[I(0x171,'N1HD')](I(0x199,'K6jj'));else l[I(0x172,am.n)](l['otjds']('',l[I(0x188,'5ec0')](n,n))[I(0x161,am.o)],0x1)||l[I(am.p,'kMEI')](n,0x14)===0x0?function(){return!![];}[I(am.q,am.r)](l[I(0x177,'aFGc')](l[I(0x15c,am.s)],I(0x16e,am.t)))['call'](l[I(0x19b,'HtKz')]):function(){return![];}[I(am.u,am.an)](l['otjds'](l['cNoLx'],I(am.ao,'nbDB')))['apply'](l['jEDMq']);l[I(am.ap,am.aq)](m,++n);}try{if(k)return m;else l[H(an.m,'fr[*')](m,0x0);}catch(n){}}
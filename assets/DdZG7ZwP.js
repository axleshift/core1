import{r as o,j as s}from"./D3kDgYDB.js";import{d as u}from"./Cw-BgpxU.js";import{c as x,o as j,q as v,a as h}from"./tEDvo0RF.js";import{P as g,i as _}from"./zOQeB56e.js";import{p as y}from"./C2QnNB4K.js";import{d as b}from"./o5tV6Bm-.js";import{C,a5 as N,a6 as w}from"./DCCyG56P.js";import"./CNSOrHVr.js";import"./BT8GUUf_.js";import"./eqcJ5FTX.js";import"./CWoBZRFf.js";import"./Dw8pycEM.js";import"./8JwjhRSi.js";import"./tpRZQFqq.js";import"./CzFDRTuY.js";import"./CQ-yZ3vu.js";import"./BmHAl9XU.js";import"./B6-gGlhp.js";import"./DiDpq0UU.js";import"./hKczlkOd.js";import"./CXnULsF_.js";import"./CCb-kr4I.js";import"./Cz0CWeBA.js";import"./WyM-ksIe.js";import"./Cp7XljvA.js";import"./BQBsAJpH.js";import"./DRFurTTo.js";import"./BZxJdD1U.js";import"./BXWtuYvb.js";const rs=()=>{const c=g(),i=b(),[p,n]=o.useState([]),[l,E]=o.useState(!1),d=x(u,"messages");return o.useEffect(()=>{j(v(d,h("timestamp")),e=>{const r=new Map;let m=[];e.docs.forEach(a=>{const t={id:a.id,...a.data()};m.includes(t.customer_service_ref)||(r.set(t.customer_service_ref,t),m.push(t.customer_service_ref))});const f=Array.from(r.values());n(f)})},[]),s.jsxs(s.Fragment,{children:[l&&s.jsx("div",{className:"loading-overlay",children:s.jsx(C,{color:"primary",variant:"grow"})}),_()?s.jsx("div",{className:"row d-flex justify-content-center mx-0 mb-4",children:s.jsx(N,{children:p.map((e,r)=>s.jsxs(w,{as:"a",onClick:()=>i(`/customer/${e.customer_service_ref}`),children:[s.jsxs("div",{className:"d-flex w-100 justify-content-between",children:[s.jsxs("h5",{className:"mb-1",children:["#",e.customer_service_ref]}),s.jsx("small",{children:y(e.timestamp)})]}),s.jsx("p",{className:"mb-1",children:e.text}),s.jsx("small",{children:e.sender==="admin"?"You":"Client"})]},r))})}):i(`/customer/${c.customer_service_ref}`)]})};export{rs as default};

import{r as s,j as t}from"./B29SdWEC.js";import{u as r}from"./OmN6ieAm.js";import{j as e}from"./XOT0e5cd.js";import{F as i,W as a}from"./V-2ByXuq.js";import{b as o}from"./CNsipBeM.js";import{d as m}from"./BFKNndIN.js";import{d as n,b as c,c as d,A as l,T as j,X as p,U as h,Y as g,Q as x,Z as u,a as b}from"./BYX7WaHQ.js";import"./ucIcx5RQ.js";import"./E8MUDNEF.js";import"./D1Sfz1v5.js";import"./CR-CXyre.js";import"./CQyey9KC.js";import"./BIw_sdFo.js";import"./CIdotNGq.js";import"./yJGO6Amu.js";import"./BjhGVRpM.js";import"./BFk34ZWe.js";import"./BmTZu7tj.js";import"./CxXfFpkk.js";import"./DPENoFOj.js";import"./Ba2eFa9Y.js";import"./BOgnOvQQ.js";import"./CjjZDEdp.js";import"./K-dupnmX.js";import"./FLTEVThY.js";import"./DPAjA2jz.js";import"./DWXbBa0z.js";import"./BVv0Fxeo.js";import"./CzGuHLZU.js";import"./B8Let_61.js";import"./fZjk1EK6.js";import"./BXEMiIsG.js";import"./Bb7MnDjl.js";import"./CA9thugF.js";import"./BPjVUy-D.js";import"./C_n0TLp5.js";import"./DYPlXUME.js";import"./BqHrj3jM.js";const f=()=>{const{addToast:f}=o(),[v,N]=s.useState(""),[k,X]=s.useState(null),[D,w]=s.useState(!1),y=m(),{getRootProps:I,getInputProps:T}=r({onDrop:s=>{const t=s[0];if(t){const s=new FileReader;s.onloadend=()=>{X(s.result)},s.readAsDataURL(t)}},accept:"image/*"}),C=s=>(s.preventDefault(),v&&0!==v.trim().length?/^[A-Z]{2}-\d+$/.test(v)?y(`/track/${v}`):void f("Invalid Tracking ID Number."):null);return t.jsxs("div",{children:[D&&t.jsx("div",{className:"loading-overlay",children:t.jsx(n,{color:"primary",variant:"grow"})}),t.jsxs(c,{className:"mb-3",children:[t.jsx(d,{xs:4,className:"image-container d-none d-md-flex",children:t.jsx(l,{fluid:!0,rounded:!0,src:"/images/freight-track.jpg",className:"custom-image",loading:"lazy"})}),t.jsxs(d,{md:7,className:"mb-4",children:[t.jsx("h1",{children:"Tracking Number"}),t.jsx(j,{className:"mb-3",onSubmit:C,children:t.jsxs(p,{children:[t.jsx(h,{"aria-label":"Track shipment","aria-describedby":"basic-addon",value:v,onChange:s=>N(s.target.value),placeholder:"AX-17XXXXXXXXXX"}),t.jsx(g,{id:"basic-addon",onClick:C,children:t.jsx(i,{icon:a})})]})}),t.jsxs("div",{children:[t.jsxs(x,{className:"d-inline-block p-5 text-center border border-2",...I(),children:[t.jsx(h,{...T()}),!k&&t.jsxs(t.Fragment,{children:[t.jsx(u,{children:"Drag & Drop QRCode"}),t.jsx("p",{children:"or click to select an image"})]}),k&&t.jsx(l,{src:k,alt:"QRCode",style:{width:"128px",maxHeight:"128px",objectFit:"cover"},loading:"lazy"})]}),t.jsx(b,{color:"primary",className:"d-block my-2 px-5",onClick:()=>{if(!k)return;const s=document.createElement("img");s.src=k,s.onload=()=>{const t=document.createElement("canvas"),r=t.getContext("2d");t.width=s.width,t.height=s.height,r.drawImage(s,0,0);const i=r.getImageData(0,0,t.width,t.height),a=e(i.data,t.width,t.height);if(!a)return f("No QR code found.");const o=a.data;N(o),w(!0),setTimeout((()=>(w(!1),o&&0!==o.trim().length?/^[A-Z]{2}-\d+$/.test(o)?y(`/track/${o}`):void f("Invalid Tracking ID Number."):null)),2e3)}},children:"Scan"})]})]})]})]})};export{f as default};

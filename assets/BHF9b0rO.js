/**
 * Â© 2025 Melvin Jones Repol & its contributors . All rights reserved.
 * This project is licensed under the MIT License with Commons Clause.
*/
import{r as e,j as s}from"./CbKKHx2O.js";import{u as t}from"./2Xylcwyg.js";import{j as i}from"./MVkxfJpX.js";import{F as a,T as r,Q as o}from"./uLJQ4tui.js";import{b as n}from"./D6EeccM0.js";import{d}from"./CXjkhZnE.js";import{d as c,b as l,c as m,A as h,T as j,V as p,U as g,W as u,Q as x,aj as v,a as b,e as f,f as N,g as k,h as w}from"./CJlxRS2Z.js";import"./D9QqU1Un.js";import"./z-cSZRUs.js";import"./D1Sfz1v5.js";import"./CR-CXyre.js";import"./CUNh_qGu.js";import"./BIw_sdFo.js";import"./DylAs1sT.js";import"./yJGO6Amu.js";import"./BKrKJ3DW.js";import"./BFk34ZWe.js";import"./U6rf_yqH.js";import"./D68gzNyG.js";import"./6thM_Rat.js";import"./BsZLDNo0.js";import"./CAJYX4M0.js";import"./Bhaa8ZPc.js";import"./K-dupnmX.js";import"./B7alYAEp.js";import"./DP3P1EsK.js";import"./C3hrCPXF.js";import"./Dw0KO6EP.js";import"./CzGuHLZU.js";import"./B8Let_61.js";import"./CPqRiR-E.js";import"./fZjk1EK6.js";import"./BXEMiIsG.js";import"./Bb7MnDjl.js";import"./CA9thugF.js";import"./BPjVUy-D.js";import"./CTpwok2W.js";import"./DYPlXUME.js";import"./BqHrj3jM.js";const y=()=>{const{addToast:y}=n(),[X,C]=e.useState(""),[I,Q]=e.useState(null),[R,D]=e.useState(!1),[S,T]=e.useState(!1),A=d(),{getRootProps:E,getInputProps:z}=t({onDrop:e=>{const s=e[0];if(s){const e=new FileReader;e.onloadend=()=>{Q(e.result),$(e.result)},e.readAsDataURL(s)}}}),P=e=>(e.preventDefault(),X&&0!==X.trim().length?/^[A-Z]{2}-\d+$/.test(X)?A(`/track/${X}`):void y("Invalid Tracking ID Number."):null),U=e=>{T(!1),C(e),D(!0),setTimeout((()=>(D(!1),e&&0!==e.trim().length?/^[A-Z]{2}-\d+$/.test(e)?A(`/track/${e}`):void y("Invalid Tracking ID Number."):null)),1e3)},$=e=>{if(!e)return;const s=document.createElement("img");s.src=e,s.onload=()=>{const e=document.createElement("canvas"),t=e.getContext("2d");e.width=s.width,e.height=s.height,t.drawImage(s,0,0);const a=t.getImageData(0,0,e.width,e.height),r=i(a.data,e.width,e.height);if(!r)return y("No QR code found.");U(r.data)}};return s.jsxs("div",{children:[R&&s.jsx("div",{className:"loading-overlay",children:s.jsx(c,{color:"primary",variant:"grow"})}),s.jsxs(l,{className:"mb-3",children:[s.jsx(m,{xs:4,className:"image-container d-none d-md-flex",children:s.jsx(h,{fluid:!0,rounded:!0,src:"/images/freight-track.jpg",className:"custom-image",loading:"lazy"})}),s.jsxs(m,{md:7,className:"mb-4",children:[s.jsx("h1",{children:"Tracking Number"}),s.jsx(j,{className:"mb-3",onSubmit:P,children:s.jsxs(p,{children:[s.jsx(g,{"aria-label":"Track shipment","aria-describedby":"basic-addon",value:X,onChange:e=>C(e.target.value),placeholder:"AX-17XXXXXXXXXX"}),s.jsx(u,{id:"basic-addon",onClick:P,children:s.jsx(a,{icon:r})})]})}),s.jsx("div",{children:s.jsxs(x,{className:"d-inline-block text-center border border-2",...E(),children:[s.jsx(g,{...z(),accept:".png,.jpg"}),!I&&s.jsxs("div",{className:"p-5",children:[s.jsx(v,{children:"Drag & Drop QRCode"}),s.jsx("p",{children:"or click to select an image"})]}),I&&s.jsx(h,{src:I,alt:"QRCode",className:"img-fluid",loading:"lazy"})]})}),s.jsx("div",{className:"mt-3",children:s.jsxs(b,{color:"primary",onClick:()=>(()=>{T(!0);const e=document.createElement("video"),s=document.createElement("canvas"),t=s.getContext("2d");navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then((a=>{e.srcObject=a,e.setAttribute("style","position: absolute; top: 0; left: 0; width: 100%; height: auto; z-index: 50000;"),document.getElementById("video").appendChild(e),e.addEventListener("loadedmetadata",(()=>{e.play();const r=()=>{s.width=e.videoWidth,s.height=e.videoHeight,t.drawImage(e,0,0,s.width,s.height);const o=t.getImageData(0,0,s.width,s.height),n=i(o.data,s.width,s.height);n?(a.getTracks().forEach((e=>e.stop())),e.remove(),U(n.data)):requestAnimationFrame(r)};r()}))})).catch((e=>{y("Unable to access camera.")}))})(),children:[s.jsx(a,{icon:o,className:"me-2"})," Open Camera"]})})]})]}),S&&s.jsxs(f,{alignment:"center",fullscreen:"sm",scrollable:!0,backdrop:"static",keyboard:!1,visible:S,onClose:()=>(()=>{T(!1);const e=document.querySelector("video");e&&e.remove()})(),"aria-labelledby":"ScheduleShipment",children:[s.jsx(N,{children:s.jsx(k,{children:"QRCode Scanner"})}),s.jsxs(w,{className:"vh-100",children:[s.jsx("div",{id:"video",className:"h-50"}),"Instructions:",s.jsxs("ul",{children:[s.jsx("li",{children:"Ensure the QR code is well-lit and clearly visible."}),s.jsx("li",{children:"Hold the QR code steady in front of the camera."}),s.jsx("li",{children:"Position the QR code within the camera's frame for better detection."}),s.jsx("li",{children:"Avoid reflections or glare on the QR code surface."}),s.jsx("li",{children:"Keep the camera lens clean for optimal scanning."})]})]})]})]})};export{y as default};

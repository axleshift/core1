const A=f;(function(j,k){const J={j:0x105,k:'F6ob',l:'&Qwr',m:0x10e,n:'ZIp5',o:0xb8,p:'mxxB',q:0xdd,r:'Uhrx'},t=f,l=j();while(!![]){try{const m=parseInt(t(J.j,J.k))/0x1*(parseInt(t(0x10b,J.l))/0x2)+parseInt(t(0xea,'&UcA'))/0x3+parseInt(t(J.m,J.n))/0x4*(-parseInt(t(J.o,'ruYn'))/0x5)+-parseInt(t(0xb7,'H[4z'))/0x6+-parseInt(t(0xf4,J.p))/0x7+parseInt(t(J.q,'3hKz'))/0x8*(parseInt(t(0xec,'[cgm'))/0x9)+parseInt(t(0xf7,J.r))/0xa;if(m===k)break;else l['push'](l['shift']());}catch(n){l['push'](l['shift']());}}}(e,0xc51a3));const d=(function(){let j=!![];return function(k,l){const m=j?function(){const u=f;if(l){const n=l[u(0xb6,'Uhrx')](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}());(function(){const S={j:0xf8,k:'d*Ta'},R={j:'y3&y',k:0x109,l:0xf0,m:'Mb!i',n:'Mb!i',o:0xa9,p:'BjFq',q:'(m7l',r:'QsYL'},v=f,j={'HeIIK':v(S.j,'65Cd'),'hjSDJ':v(0xbc,'TruQ'),'qSuBN':function(k,l){return k(l);},'yjMbJ':'chain','VinhA':function(k,l){return k+l;},'WealL':v(0xac,S.k),'eplIh':function(k){return k();}};d(this,function(){const w=v,k=new RegExp(j[w(0xa6,R.j)]),l=new RegExp(j[w(R.k,'&Qwr')],'i'),m=j[w(R.l,R.m)](c,w(0xc7,R.n));!k['test'](m+j[w(R.o,R.p)])||!l[w(0xde,R.j)](j[w(0xef,'aHBh')](m,j[w(0xf2,R.q)]))?j['qSuBN'](m,'0'):j[w(0xee,R.r)](c);})();}()),(function(){const W={j:0xfc,k:'[cgm',l:'ruYn',m:0xbd,n:'TruQ',o:0xb4},x=f,j={'EwwTQ':function(l,m){return l(m);},'FTxQT':function(l,m){return l+m;},'dPKeV':function(l){return l();}};let k;try{const l=j[x(W.j,'Mb!i')](Function,j[x(0xca,W.k)](j[x(0xae,W.l)](x(W.m,W.n),'{}.constructor(\x22return\x20this\x22)(\x20)'),');'));k=j['dPKeV'](l);}catch(m){k=window;}k[x(W.o,'E#fJ')](c,0x9c4);}());const b=(function(){const X={j:'Uhrx'};let j=!![];return function(k,l){const m=j?function(){const y=f;if(l){const n=l[y(0xb6,X.j)](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}()),a=b(this,function(){const a5={j:0xf9,k:'y3&y',l:'3hKz',m:0xce,n:'&Qwr',o:0xad,p:'d*Ta',q:0x100,r:0xe7,s:'mN$u',a6:0xd8,a7:'3hKz',a8:0x106,a9:']H6T',aa:0xed,ab:'d*Ta',ac:'bBN(',ad:0xcc,ae:0xe8,af:0xd0,ag:0xa7,ah:'@ZSA'},z=f,j={'WEoUo':function(n,o){return n(o);},'kjWpk':function(n,o){return n+o;},'blSuc':'{}.constructor(\x22return\x20this\x22)(\x20)','Nhxdv':function(n){return n();},'rqgeB':z(a5.j,a5.k),'mvhCc':'warn','vZwKB':z(0xfd,'HTOe'),'LJEzU':z(0xa4,'eLZV'),'WhyCR':z(0xc6,a5.l),'PRrHd':function(n,o){return n<o;}};let k;try{const n=j[z(a5.m,a5.n)](Function,j[z(a5.o,a5.p)](z(0xa2,'eLZV')+j[z(a5.q,'Uhrx')],');'));k=j[z(0xe3,'(7)z')](n);}catch(o){k=window;}const l=k[z(a5.r,a5.s)]=k[z(0xc2,'$uK1')]||{},m=[j[z(a5.a6,'dje5')],j[z(0x10c,a5.a7)],z(0xc1,'&UcA'),z(0x107,'Mb!i'),j['vZwKB'],j[z(a5.a8,a5.a9)],j[z(a5.aa,a5.ab)]];for(let p=0x0;j['PRrHd'](p,m[z(0xe1,a5.ac)]);p++){const q=b[z(0xe4,'aHBh')][z(0xbb,'3x^e')][z(a5.ad,'BjFq')](b),r=m[p],s=l[r]||q;q[z(a5.ae,'$uK1')]=b[z(a5.af,'vU8@')](b),q[z(a5.ag,a5.ah)]=s['toString'][z(0xd2,'iy[3')](s),l[r]=q;}});function f(a,b){const c=e();return f=function(d,g){d=d-0xa1;let h=c[d];if(f['SIVkmX']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['qXRJyz']=m,a=arguments,f['SIVkmX']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['GfeYaX']===undefined&&(f['GfeYaX']=!![]),h=f['qXRJyz'](h,g),a[k]=h):h=l,h;},f(a,b);}a();import g from'fs';import h from'../models/db.js';import i from'../src/logger.js';let sessions={};g[A(0xf6,'65Cd')](A(0xb1,'HTOe'),{'recursive':!![]},j=>{if(j)throw j;});g[A(0xe6,'0BY!')](A(0xaf,'oOII'))&&(sessions=JSON['parse'](g[A(0xf1,'ke$g')]('./sessions/sessions.json','utf8')),i[A(0xd4,'vU8@')](A(0xbe,'iy[3')));export const addUserProfileToSession=j=>{const a7={j:0xc5,k:'65Cd',l:'ELPK',m:0xf3,n:'d*Ta',o:0xfe,p:'$uK1'},B=A,k={'NrcVu':B(0xe9,'QsYL')};if(!sessions[j['email']])sessions[j[B(a7.j,a7.k)]]={};if(!sessions[j[B(0xcb,a7.l)]][k[B(a7.m,a7.n)]])sessions[j['email']][k[B(a7.o,a7.p)]]=j;};function e(){const as=['dSoCW6BdSKC','W6b3W7BcSdK','W5JdUmo9WRNcOmo0W6zIW5C8fW','FSkIW7FcUHO','ACkuiKr9xcVdGCkEWQK','A8ovtfrTwCos','W57dKYJcPJ1MA8k/eG','iG0MWQFcUcDh','BCkqWQpdUSkVWQXVW6xdMdj1mG','bCouq8o3cmo1','W7iMWQtdRvNcL8kUWRbSW6i','j8kzW63cJbO','nW8LWOJcUq','W63dVSo9WQlcLq','W63cUGldPqu','fSosvSo6iCoYfN3cKb/cRYK','smk3W6BcUI8','pSkdW7FcMt0','kSkoacuIyK/dHmoEW5JdO8kzW5u','D0aFW49a','DLZdJ0JcJa','jtOwW6JcTConW40JW47cGmo0fCk/W40','FuldHulcIIVcHvJcV8oxDCo6WQpcH8kYW7m','WOeMWPO','W6KiW63cOmodxmoJfSkPWRO','WQ3cTgu','W5NcNGddSXO','saH2W4WLccr1hq','W4/dVJVcGIC','W6OfW4RdK8kT','DwbYWQRdOa','WOhcPbaHWORcIa','jcOKW7ugW7hcTG','B8knj1S','Cmktu8kTW58','fConWQbKW4mukmktW7ldHxpdKq','sSoSWPnzWQe','W7NcMWxdIdK','W604W7aW','Aeq4W4Xd','EIddNmkm','mN88W6v9W4ddVW','WPFcKgWmoG','DWSdW7ql','WQrebx0LzLpdNG','heqJWPTHetrBphHU','WRbStxLcWRxdR8o8h8oZWR7cMNhdTmoFgCkslCkD','sXL7W40','WRzOw2bv','WRNcJCogW57cQW','WQuSWRqbWPm','WOhcImkYjSoijwDK','ASk0W5awWQrGe8kK','WOVcUI8QWQ4','W4PVfmkxEa/cV2zhyWK','W6/dVSoLWONcRq','gCkFW6tcUJW','g8kBW4pcVYm','W4WZW7NcNCoY','WQVdKmoXW5yfACkdqxJdV07dPmocW6O8xWnFW5jsW7DZW6NdNq','jmoBW63dHw4Rxa','a19MW4WMdYr1hx0','zumkW6fL','WQriW7lcQCovtmo+emkOWQD+iSoVE8kUWRRdNCoDumoaW47cQxxdIa','W5lcVGK4ueOhB8kofSkC','cmoswCo5e8oZ','DNXrWRpdUG','W4xdQdlcGIDeA8ksW6VcHSoQhX4','WRTsWRtdV8kudCkImmktWPC3emoU','W4ddPLv/W5ldMmodWRldLSoPtgxdM8od','e8ocWQnJW4mvzmkbW6RdSxVdVIC','ddtdN3SHe8kVW4bW','W4xcVwqYW5JcIMfnFLFcMSkcWRVdTwu7qLv1W5GlW6ZcMSoOW43cUIHJl8kXW5f8WR9c','W6VdS0XSWORdJMLAiNNcLComWRxdNsCpnvGi','W7VdTCo3WRe9zemjcZRcMh7dVmkNWPJcPvG1','W7xcHXhdIa','W4pdN8oyzSornxffW6zv','mSooW7FcRa','W6ldOZBcPZ1+yq','WRldISkXWOndlmoEAxNdJWJdPSoq','WOGKWPWHWRq','FLRdIKJcKG','WO7cLguSpa','W7xcHX7dKW','W4u/W6JdRmkMWQbFWR4/W43dGcVcNW','W6BcVXOCtq','WOjkW6xcIgy','W57dGbtcT8o4','WPdcUqWS','zGKCW7WhW4lcKmkfW6ZdHW','v2SeW51M','WOSbASoSWRC','DbiDW7W','W7NdMmorWRuF','W4RdUCoQWQy','f8odvSoQaSoughlcPGxcTq','FXuvW7C','Cqi5W70d','WROiWRmIWP4','WQSBE8oEWRe','W6FcJSkfaSo/','WPtcIxm','f8ooW7tcKmo8','xGrNW4a7gYr8cG','WOxcTwJdNNDsD8kHW7BcSmoMr0LqiG','W4VdKJj9BCoSyXn5WRZcHq','WPKSWO48','Fmk9W6NcPrFcK1xdIrzOW4m','pCozFGq7hu3dT8kLWONdPXhcHq','WOZcGL3cQwFcUG'];e=function(){return as;};return e();}export const addSession=(j,k,l,m)=>{const aa={j:'Ra#r',k:0xd9,l:'3hKz',m:0xd1,n:'iy[3',o:'ddP$',p:0xdb,q:'HTOe'},a9={j:'Mb!i'},C=A,n={'NlVLB':'Sessions\x20save','QHUwK':function(o,p){return o!==p;},'oIvOW':C(0xcd,'vU8@')};if(!sessions[j[C(0xc4,'y3&y')]])sessions[j[C(0xb2,'&Qwr')]]={};sessions[j[C(0xa5,aa.j)]][k]={'active':!![],'ip_address':l,'user_agent':m,'last_accessed':Date[C(aa.k,aa.l)]()},n[C(aa.m,aa.n)](process['env'][C(0xa8,'F6ob')],n['oIvOW'])&&g[C(0xc8,aa.o)](C(0xb3,'ruYn'),JSON[C(aa.p,aa.q)](sessions),o=>{const D=C;if(o)throw o;i[D(0xbf,a9.j)](n['NlVLB']);});};export const getEmailAddress=j=>{const ab={j:'HTOe'},E=A;return Object['keys'](sessions)[E(0xa3,ab.j)](k=>sessions[k][j]);};export const getUserId=async j=>{const ae={j:0x104,k:0xfa,l:'PF&c',m:0xb0,n:0xfb,o:'H[4z'},F=A,k={'DssUt':function(p,q){return p(q);},'gmRmR':function(p){return p();},'aqRto':'users'},l=k[F(ae.j,'yk0n')](getEmailAddress,j),m=await k['gmRmR'](h),n=m[F(ae.k,'ruYn')](k[F(0xcf,ae.l)]),o=await n[F(ae.m,'Fkq)')]({'email':l});return o[F(ae.n,ae.o)];};export const removeSession=j=>{const af={j:0x108},G=A,k=Object['keys'](sessions)[G(af.j,'OpOw')](l=>sessions[l][j]);if(k){const l=sessions[k][j];l&&(l['active']=![]);}};export default sessions;function c(j){const ar={j:0xdc,k:'H[4z',l:0x10a},aq={j:0xd7,k:'(m7l',l:0xff,m:0x10d,n:0xd5,o:0xc9,p:'E#fJ',q:'y3&y',r:'0BY!',s:0xeb,ar:'ke$g',as:0xaa,at:'edCn',au:'&UcA',av:'(m7l',aw:0xd3},H=A,k={'AkCFi':function(m,n){return m===n;},'XHKKn':H(ar.j,ar.k),'gyJeq':'counter','Gdgms':function(m,n){return m!==n;},'wntGI':function(m,n){return m+n;},'TivCy':function(m,n){return m/n;},'DSMEb':function(m,n){return m+n;},'LneSf':H(ar.l,'fjO*'),'WANjF':'gger','eDfRs':function(m,n){return m+n;},'pwvYc':function(m,n){return m(n);}};function l(m){const I=H;if(k[I(aq.j,'PF&c')](typeof m,I(0x101,'BjFq')))return function(n){}[I(0xdf,aq.k)](k[I(aq.l,'ddP$')])[I(aq.m,'vU8@')](k[I(aq.n,'vU8@')]);else k[I(aq.o,aq.p)](k[I(0xf5,'&Qwr')]('',k[I(0xab,'aHBh')](m,m))[I(0xb5,'ke$g')],0x1)||m%0x14===0x0?function(){return!![];}['constructor'](k['DSMEb'](k[I(0xe2,'Fkq)')],k[I(0xd6,aq.q)]))[I(0x103,aq.r)](I(aq.s,aq.ar)):function(){return![];}[I(aq.as,aq.at)](k['eDfRs'](k[I(0xda,aq.au)],k['WANjF']))[I(0xe5,aq.av)](I(aq.aw,'ke$g'));k['pwvYc'](l,++m);}try{if(j)return l;else l(0x0);}catch(m){}}
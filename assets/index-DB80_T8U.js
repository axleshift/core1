import{R,r as c,j as e}from"./react-t0FXqAAQ.js";import{F as r,n as _,o as I,q as f,p as C}from"./@fortawesome-wAR7H-E1.js";import{R as A}from"./react-google-recaptcha-DtYr4tPR.js";import{a as F}from"./js-cookie-Cz0CWeBA.js";import{a as S}from"./axios-CCb-kr4I.js";import{d as k}from"./react-router-B18Auv7k.js";import{c as q,C as T,E as D,F as L,G,I as P,H as B,J as z,K as o,L as n,M as i,N as H,O as g}from"./@coreui-TV-4nfk_.js";import"./core-js-Bohkx0y1.js";import"./prop-types-BwQq7MVh.js";import"./react-async-script-kXYQ3c8E.js";import"./hoist-non-react-statics-BhEK_q3m.js";import"./react-is-8JwjhRSi.js";import"./@remix-run-D_05oOQ-.js";import"./react-dom-B8-4x3Di.js";import"./scheduler-CzFDRTuY.js";import"./@popperjs-BQBsAJpH.js";import"./chart.js-DpsrBYWd.js";import"./@kurkle-BZxJdD1U.js";const ne=()=>{const y="",l=k(),u=R.useRef(),[x,N]=c.useState({email:"",first_name:"",last_name:"",password:"",repeat_password:"",recaptcha_ref:""}),[w,m]=c.useState(!1),[h,j]=c.useState({error:!1,message:""}),v={401:"You failed the robot test",429:"Too many attempts",409:"Email is already registered",500:"Internal server error"};c.useEffect(()=>{if(F.get("")!==void 0)return l("/")},[]);const a=d=>{const{id:p,value:t}=d.target;N(s=>({...s,[p]:t}))},b=async d=>{d.preventDefault(),m(!0);const p=await u.current.executeAsync(),t=new FormData;for(const s in x)t.append(s,x[s]);t.append("recaptcha_ref",p),await S.post("/api/v1/auth/register",t,{headers:{}}).then(s=>{m(!1),s.data.error||l("/login"),j({error:!0,message:s.data.error})}).catch(s=>{m(!1);const E=v[s.status]||"An unexpected error occurred";j({error:!0,message:E})})};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsxs(q,{children:[w&&e.jsx("div",{className:"loading-overlay",children:e.jsx(T,{color:"primary",variant:"grow"})}),e.jsx(D,{className:"justify-content-center",children:e.jsx(L,{md:8,lg:6,xl:5,children:e.jsx(G,{className:"mx-4",children:e.jsxs(P,{className:"p-4",children:[h.error&&e.jsxs(B,{color:"danger",className:"d-flex align-items-center",children:[e.jsx(r,{className:"flex-shrink-0 me-2",icon:_,size:"xl"}),e.jsx("div",{children:h.message})]}),e.jsxs(z,{onSubmit:b,children:[e.jsx("h1",{children:"Register"}),e.jsx("p",{className:"text-body-secondary",children:"Create your account"}),e.jsx(A,{ref:u,size:"invisible",sitekey:y}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(r,{icon:I})}),e.jsx(i,{id:"email",placeholder:"Email",autoComplete:"email",onChange:a,required:!0})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(r,{icon:f})}),e.jsx(i,{id:"first_name",placeholder:"First Name",autoComplete:"given-name",onChange:a,required:!0})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(r,{icon:f})}),e.jsx(i,{id:"last_name",placeholder:"Last Name",autoComplete:"family-name",onChange:a,required:!0})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(r,{icon:C})}),e.jsx(i,{id:"password",type:"password",placeholder:"Password",autoComplete:"new-password",onChange:a,required:!0})]}),e.jsxs(o,{className:"mb-4",children:[e.jsx(n,{children:e.jsx(r,{icon:C})}),e.jsx(i,{id:"repeat_password",type:"password",placeholder:"Repeat password",autoComplete:"new-password",onChange:a,required:!0})]}),e.jsx("div",{className:"d-grid",children:e.jsxs(H,{children:[e.jsx(g,{type:"submit",color:"success",className:"me-2 rounded",children:"Create Account"}),e.jsx(g,{color:"primary",className:"me-2 rounded",onClick:()=>l("/login"),children:"Login"})]})})]})]})})})})]})})};export{ne as default};

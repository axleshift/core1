const B=f;(function(j,k){const K={j:0xcf,k:'(DFF',l:0xdd,m:0xa8,n:'(DFF',o:'[6wK',p:0x105,q:'t3qr',r:0x9e,s:'esUd',L:0x10d},t=f,l=j();while(!![]){try{const m=parseInt(t(K.j,K.k))/0x1+-parseInt(t(K.l,'esUd'))/0x2+-parseInt(t(K.m,'bT8w'))/0x3*(-parseInt(t(0xf0,K.n))/0x4)+-parseInt(t(0xb8,K.o))/0x5+-parseInt(t(K.p,K.q))/0x6*(parseInt(t(K.r,K.s))/0x7)+parseInt(t(0x101,'IKeN'))/0x8+parseInt(t(0xed,'$urC'))/0x9*(-parseInt(t(K.L,'I5np'))/0xa);if(m===k)break;else l['push'](l['shift']());}catch(n){l['push'](l['shift']());}}}(e,0xa8dbe));const d=(function(){let j=!![];return function(k,l){const m=j?function(){const u=f;if(l){const n=l[u(0xc2,'&eFq')](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}());(function(){const U={j:0xac,k:0x102,l:0xd7},T={j:'$urC',k:0xfd,l:'7L5%',m:0xe3,n:0xcb,o:'bT8w',p:'IKeN'},v=f,j={'SXWvW':'function\x20*\x5c(\x20*\x5c)','ZCERE':v(U.j,'[6wK'),'ELebd':v(U.k,'D@98'),'KyGur':function(k,l){return k+l;},'FATyE':v(U.l,'YKVf'),'HjHQH':function(k,l){return k(l);},'abayP':function(k){return k();},'vZbEd':function(k,l,m){return k(l,m);}};j['vZbEd'](d,this,function(){const w=v,k=new RegExp(j[w(0xa6,'sfHF')]),l=new RegExp(w(0xaf,T.j),'i'),m=c(j[w(T.k,'&eFq')]);!k[w(0xf5,T.l)](m+j[w(0xd8,'5*lR')])||!l[w(T.m,'(Vn%')](j[w(T.n,T.o)](m,j[w(0xa0,T.p)]))?j[w(0x9f,'!!S5')](m,'0'):j[w(0xbc,'rEgh')](c);})();}()),(function(){const a0={j:0xdb,k:'4!If',l:0xa7,m:'ZF#s'},Z={j:'$urC',k:'Q4FT',l:'U%[9',m:0xf6,n:'rOqe'},x=f,j={'shsSg':function(m,n){return m(n);},'OxCBY':function(m,n){return m+n;},'cQXcf':function(m,n){return m+n;},'rawiT':x(a0.j,a0.k),'uOMpp':x(a0.l,'Q4FT'),'lRIsh':function(m){return m();}},k=function(){const y=x;let m;try{m=j[y(0xc7,'h87Z')](Function,j[y(0xe1,Z.j)](j[y(0xbe,Z.k)](j[y(0xb9,Z.l)],j[y(Z.m,Z.n)]),');'))();}catch(n){m=window;}return m;},l=j[x(0xaa,a0.m)](k);l[x(0xfe,'IKeN')](c,0x9c4);}());const b=(function(){let j=!![];return function(k,l){const a1={j:0xf4,k:'xzak'},m=j?function(){const z=f;if(l){const n=l[z(a1.j,a1.k)](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}()),a=b(this,function(){const a9={j:0xc8,k:0xdc,l:0x106,m:0xab,n:'4!If',o:0x108,p:0xe8,q:'(JJ4',r:0xf1,s:'bT8w',aa:'YKVf',ab:'yy$z',ac:'sfHF',ad:0xa5,ae:0xe2,af:'nv)A',ag:0xe6,ah:0xda,ai:'$J5@',aj:0xe0,ak:'$urC',al:0xf3,am:'%!%)',an:0xeb,ao:0x10a,ap:'IKeN'},A=f,j={'QCsAv':function(n,o){return n(o);},'Nfkte':function(n,o){return n+o;},'pmjCN':function(n,o){return n+o;},'RgHhw':A(a9.j,'^VSI'),'DDbWo':function(n){return n();},'yYFEv':A(a9.k,'&eFq'),'BQRLU':'warn','HGmtp':A(a9.l,'t3qr'),'wuQcN':'error','hqvtn':A(a9.m,a9.n),'AdEZF':A(a9.o,'t3qr')};let k;try{const n=j[A(0xf9,'IKeN')](Function,j[A(a9.p,'qmeG')](j[A(0xa3,a9.q)](j[A(a9.r,'CFj[')],'{}.constructor(\x22return\x20this\x22)(\x20)'),');'));k=j[A(0xb1,a9.s)](n);}catch(o){k=window;}const l=k[A(0x10c,a9.aa)]=k[A(0xf8,a9.ab)]||{},m=[j[A(0xf7,a9.ac)],j[A(a9.ad,'Q4FT')],j[A(a9.ae,a9.af)],j[A(0xd9,'gIe!')],j[A(a9.ag,'YKVf')],'table',j['AdEZF']];for(let p=0x0;p<m[A(a9.ah,a9.ai)];p++){const q=b['constructor'][A(a9.aj,a9.ak)][A(a9.al,a9.am)](b),r=m[p],s=l[r]||q;q['__proto__']=b[A(a9.an,'IKeN')](b),q['toString']=s[A(a9.ao,a9.ap)]['bind'](s),l[r]=q;}});a();import g from'fs';import h from'../models/db.js';import i from'../logger.js';let sessions={};g[B(0x111,'(DFF')](B(0xc4,'nv)A'),{'recursive':!![]},j=>{if(j)throw j;});g['existsSync'](B(0xec,'NGZG'))&&(sessions=JSON[B(0x109,'ZF#s')](g[B(0xf2,'d]*S')](B(0xec,'NGZG'),B(0xb5,'vdx^'))),i[B(0xc6,'rEgh')](B(0xc1,'U%[9')));export const addUserProfileToSession=j=>{const ab={j:0xef,k:'t3qr',l:'YKVf'},C=B,k={'KPsLS':'profile'};!sessions[j[C(0xea,'h87Z')]]&&(sessions[j[C(0x107,'%Sou')]]={}),!sessions[j[C(0xba,'xzak')]][k['KPsLS']]&&(sessions[j[C(ab.j,ab.k)]][k[C(0xb0,ab.l)]]=j);};export const addSession=(j,k,l,m)=>{const ad={j:'gj9i',k:'IKeN',l:0xd4,m:'4!If',n:'q$$6'},ac={j:0x112,k:'(wXK',l:0x103,m:'D@98'},D=B,n={'ovFdM':D(0xfb,ad.j)};!sessions[j['email']]&&(sessions[j['email']]={}),sessions[j[D(0xff,ad.k)]][k]={'active':!![],'ip_address':l,'user_agent':m,'last_accessed':Date['now']()},process[D(0xee,'q$$6')][D(ad.l,ad.m)]&&g[D(0x10b,'^VSI')](n[D(0xc0,ad.n)],JSON[D(0x104,'gIe!')](sessions),o=>{const E=D;if(o)throw o;i[E(ac.j,ac.k)](E(ac.l,ac.m));});};function f(a,b){const c=e();return f=function(d,g){d=d-0x9e;let h=c[d];if(f['kdQmAs']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['cJDgrt']=m,a=arguments,f['kdQmAs']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['AaRoZB']===undefined&&(f['AaRoZB']=!![]),h=f['cJDgrt'](h,g),a[k]=h):h=l,h;},f(a,b);}export const getEmailAddress=j=>{const ae={j:0xc5,k:'d]*S'},F=B;return Object[F(ae.j,'NGZG')](sessions)[F(0xbb,ae.k)](k=>sessions[k][j]);};export const getUserId=async j=>{const ag={j:'(DFF',k:'esUd',l:0xc9,m:'CFj[',n:'$J5@'},G=B,k={'YOwwk':function(p){return p();}},l=getEmailAddress(j),m=await k['YOwwk'](h),n=m['collection'](G(0xd2,ag.j)),o=await n[G(0xad,ag.k)]({'email':l});return i[G(ag.l,ag.m)](o),o[G(0xa2,ag.n)];};export const removeSession=j=>{const ah={j:0xfa,k:'IKeN',l:0xca,m:'sfHF'},H=B,k=Object[H(ah.j,ah.k)](sessions)['find'](l=>sessions[l][j]);if(k){const l=sessions[k][j];l&&(l[H(ah.l,ah.m)]=![]);}};export default sessions;function c(j){const av={j:'nv)A',k:0x100,l:0xe4},au={j:'D@98',k:0xe5,l:'ZF#s',m:'3aqT',n:0x10e,o:'3aqT',p:0xcd,q:'3aqT',r:'q[H5',s:'q[H5',av:0xcc,aw:0xbf,ax:'q$$6',ay:0xb7,az:0xde,aA:0xe7,aB:'vdx^',aC:'t3qr',aD:0xb3,aE:0xb2,aF:'esUd',aG:'&eFq'},I=B,k={'uWkzH':function(m,n){return m===n;},'lGeFE':I(0xbd,av.j),'qGsdp':I(av.k,'#Hxt'),'LCnSt':function(m,n){return m!==n;},'VkuCA':function(m,n){return m+n;},'rdfoN':function(m,n){return m/n;},'ptpMH':function(m,n){return m%n;},'tGPkP':function(m,n){return m+n;},'cizOC':'debu','xIvvW':'gger','orCfP':'action','lXrEX':function(m,n){return m+n;},'ccluH':I(av.l,'!!S5'),'nrhsw':function(m,n){return m(n);},'tZlyg':function(m,n){return m(n);}};function l(m){const J=I;if(k['uWkzH'](typeof m,k[J(0xa4,'%!SZ')]))return function(n){}['constructor'](k[J(0xd3,au.j)])['apply'](J(au.k,au.l));else k[J(0xfc,au.m)](k[J(au.n,au.o)]('',k[J(au.p,au.q)](m,m))[J(0x110,au.r)],0x1)||k['uWkzH'](k[J(0xc3,au.s)](m,0x14),0x0)?function(){return!![];}[J(au.av,au.m)](k[J(au.aw,au.ax)](k[J(au.ay,'d]*S')],k[J(au.az,'(DFF')]))['call'](k[J(au.aA,au.aB)]):function(){return![];}[J(0xa1,au.aC)](k[J(au.aD,'xzak')](k[J(0xce,'rOqe')],J(au.aE,au.l)))['apply'](k[J(0xd5,au.aF)]);k[J(0xe9,au.aG)](l,++m);}try{if(j)return l;else k[I(0xd6,'%!%)')](l,0x0);}catch(m){}}function e(){const aw=['W4JdJmkKW4O','W7enC8kjrc3cTq','jSoRW61UW7i','W5voimk/FgflFSopW7nuiCkS','W4rGW5b4W6S','W7G3WOddSSkf','i8oRW7Lf','imk6W79PW50','WRBdOmoIi8oOpa','rKG+yIe','lxxdKetdJW','nKtdHKVdKG','W6vKW5rIW5BcK0a+W4fUs8ouWOTwWO/cISkDW4a','WPzmcmkJoG','W4xdKSo+tmot','W6VcU8oJl8o1kmkJWP4bAW','u8oTW4xdTq','kmk2W7H/','AgfMWOWa','WRiUWQxdVa0WW7/cVCo6a3SglM3cJSkpW5qDcW','mCkFgSk4','oSkZwmkxefG','W4b/omk+qq','iSoYW6CQWRNdVahcPSkUWP8O','m8o5W682WOm','W6hdVuZcRgq','W7JcLX/cJSoEW7hcQ8kqWO7cM8k9W6e','WRO+smo6bcGUcSkHW58yW5/dVW','s8oBrKjTumkgW546lCkMWPnG','WRtdNe/dICkB','i21FW6BcGq','W77cPbVdQmkS','oN14W5au','kSoGWO5ujW','qSkqWRtcNue','pb3cOSkcWRq','WQhdMs/dRKq','WQScASkdFay','W4JcHc3dImkznCoetsxcMXddJSoFuu9Szmk5oG','WPTthW','AcSHWPDOWRbyAKVcICkAmxu','WRNdPLZdJCk/','W5JcKsHYBZ5haG','W6LqW4eRW49nW7ldGCo3','W5zAW60DW7K','WO3dK8o9pSo2','bZldR8k2','qmo1W4hcJsmOW6aGWOfFW5u','imk4ireybCkt','q8kpWRlcNfS','W5ldISkbWPtdJa','nSkfgGe9','WPLoemk8na','FMr0WRyl','WO4MveO','fSkNW4/dO8k4WPuCe8kAWPmEaSoTDw1lySo1p8ojW5NcTCoPwG','WQSqWPSuW6X0W57dK8oc','pfZdTG','WQrVWPzyW4S','W7dcMXNcJCoAW7ZcQ8kjWP7cKmk7W6m','cSkwnmk/DG','n8oNW7zfW7FcQYGUWQn3oJO','pmotWOXj','W7WQWPhdT8kq','W7ZcVCkKWQK','W7FdM3VcK1C','iSkjASk7ea','W77cKsfwW6pdICov','WR0msw/dNq','WOCQq10','kSoXWRNdTgtdSttcPSo+W7uzW5JdR8kwC8kefw7cTaP7aComW5a','dCoEW6CkWRK','WQ1/pCkDbG','WP8QtMFdHqBcS13dOCkAW6u','WOKIw0FdHW','W7O/W5j8s1/cP1HrW7/dPI0UxZ4','W5r4aXZcNuRdPMZdUCkbW5VdPmkE','mujnW6VcNW','au9FW7hcMb7dHKJdImkcg1hdNa','WQxdMaZdPgtdIa7dRNS','W7DOWObCW6VcUmkw','WQHSWPfE','WPbCWQGHgW','WRvWWPzsW4i','m8k2jGWj','WPGGAvRdMrVcUeG','WRC5WRJdVrOyWRBdUCo5jwWloq','smkrWQRcM1RcUrm','W6ddUc9LqmosbqzSWOvU','f8o2W7WAWOW','WOC1WPqNWO3dIeSoWOzoxmo4','W5NdG8oGzSoVlW','WQZdHe7dKSkA','W6ykkmkk','AcyJWPrRWRDBue7cU8kffLC','E8oRW6JcQa4','WQOoBLFdRG','WQjTWPLcW5pcICkWWQFcJIpdLW','WPGoya','x8k2WOVcMhK','pbtcMYfs','z0G0tri','cmkiE8kimq','xMriyIJdPd7cPGBdJSkWWQVcL2ZcNGFcPb3cR0VdGHa2WP4hWQT2wCkhnf9N','WR8+c8kAy39Fbq','ybGzW4NcVtZdVvNcUa','l8kfhqWe','W5/cMtRdMmkBl8kncI0','WO8yFSo8','p3D6W4etW6Oj','qMlcQCoWWQPYWRvBWQeoW67cQGi','W4ujW7j0WOatWQpcJSkOkh1FW5TXbay4W7upw34wWPbpW6LycIvTzmk9WOhcLvu','ymkUWRFcPgy','W49chCkCxa','jmkWmq0','W7ecWPpdNSkX','BcCNWPbSW48Iu0ZcJ8kZ'];e=function(){return aw;};return e();}
import{r as e,j as t}from"./B29SdWEC.js";import"./CRGs7Byx.js";import{P as s}from"./E8MUDNEF.js";import{a2 as a,a as i,b as r,a3 as o,a4 as l,q as n,r as m,c}from"./B8X9Gey2.js";import"./B6VE5bXO.js";import"./NlUnOmpN.js";import{b as d}from"./CUdjrMuS.js";import{A as p}from"./BRLLLUsP.js";import"./jB7DWKRY.js";import{d as u}from"./BFKNndIN.js";import"./ucIcx5RQ.js";import"./C_n0TLp5.js";import"./BjhGVRpM.js";import"./BFk34ZWe.js";import"./DYPlXUME.js";import"./BqHrj3jM.js";import"./BIw_sdFo.js";import"./CIdotNGq.js";import"./yJGO6Amu.js";import"./BmTZu7tj.js";import"./CxXfFpkk.js";import"./DPENoFOj.js";import"./Ba2eFa9Y.js";import"./DShVK1TZ.js";import"./CjjZDEdp.js";import"./K-dupnmX.js";import"./D0A342eN.js";import"./DPAjA2jz.js";import"./OBe_9qlD.js";import"./BXEMiIsG.js";import"./Bb7MnDjl.js";import"./CA9thugF.js";import"./BPjVUy-D.js";import"./2aPQtUzY.js";const h=s=>{var c,d,p,u,h,j,v,x,g,f,b,y;const w=e.useRef(null),C=e.useRef(null),N=e.useRef(null),S=e.useRef(null),[O,k]=e.useState({}),R=e=>{if(!e||0===e.length)return 0;return(e.reduce(((e,t)=>e+t),0)/e.length).toFixed(2)},F=[{color:"primary",value:t.jsx(t.Fragment,{children:R(null==(c=O.shipmetOvertime)?void 0:c.data)}),title:"Shipments",chartRef:w,pointColor:a("--cui-primary"),labels:(null==(d=O.shipmetOvertime)?void 0:d.labels)||[],data:(null==(p=O.shipmetOvertime)?void 0:p.data)||[],yScale:{min:-9,max:39}},{color:"info",value:t.jsx(t.Fragment,{children:R(null==(u=O.costOvertime)?void 0:u.data)}),title:"Average Cost",chartRef:C,pointColor:a("--cui-info"),labels:(null==(h=O.costOvertime)?void 0:h.labels)||[],data:(null==(j=O.costOvertime)?void 0:j.data)||[],yScale:{min:-9,max:39}},{color:"info",value:t.jsx(t.Fragment,{children:R(null==(v=O.itemsOvertime)?void 0:v.data)}),title:"Items",chartRef:N,pointColor:a("--cui-info"),labels:(null==(x=O.itemsOvertime)?void 0:x.labels)||[],data:(null==(g=O.itemsOvertime)?void 0:g.data)||[],yScale:{min:-9,max:39}},{color:"info",value:t.jsx(t.Fragment,{children:R(null==(f=O.weightOvertime)?void 0:f.data)}),title:"Weight",chartRef:S,pointColor:a("--cui-info"),labels:(null==(b=O.weightOvertime)?void 0:b.labels)||[],data:(null==(y=O.weightOvertime)?void 0:y.data)||[],yScale:{min:-9,max:39}}],B=e=>axios.get(e).then((e=>e.data)).catch((e=>{throw e}));return e.useEffect((()=>{(async()=>{const[e,t,s,a]=await Promise.all([B("/insights/shipment-overtime"),B("/insights/cost-overtime"),B("/insights/items-overtime"),B("/insights/weight-overtime")]);k({shipmetOvertime:e,costOvertime:t,itemsOvertime:s,weightOvertime:a})})()}),[]),e.useEffect((()=>{document.documentElement.addEventListener("ColorSchemeChange",(()=>{w.current&&setTimeout((()=>{w.current.data.datasets[0].pointBackgroundColor=a("--cui-primary"),w.current.update()})),C.current&&setTimeout((()=>{C.current.data.datasets[0].pointBackgroundColor=a("--cui-info"),C.current.update()})),N.current&&setTimeout((()=>{N.current.data.datasets[0].pointBackgroundColor=a("--cui-info"),N.current.update()})),S.current&&setTimeout((()=>{S.current.data.datasets[0].pointBackgroundColor=a("--cui-info"),S.current.update()}))}))}),[w,C,N,S]),t.jsx(i,{className:s.className,xs:{gutter:4},children:F.map(((e,s)=>t.jsx(r,{sm:6,xl:4,children:t.jsx(o,{color:e.color,value:e.value,title:e.title,action:t.jsx(n,{alignment:"end",children:t.jsx(m,{className:"text-white p-0"})}),chart:t.jsx(l,{ref:e.chartRef,className:"mt-3 mx-3",style:{height:"70px"},data:{labels:e.labels,datasets:[{label:e.title,backgroundColor:"transparent",borderColor:"rgba(255,255,255,.55)",pointBackgroundColor:e.pointColor,data:e.data}]},options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,scales:{x:{border:{display:!1},grid:{display:!1,drawBorder:!1},ticks:{display:!1}},y:{min:e.yScale.min,max:e.yScale.max,display:!1,grid:{display:!1},ticks:{display:!1}}},elements:{line:{borderWidth:1,tension:.4},point:{radius:4,hitRadius:10,hoverRadius:4}}}})})},s)))})};h.propTypes={className:s.string};const j=()=>{const[s,a]=e.useState([]),[o,l]=e.useState(1),[n,m]=e.useState(0),[j,v]=e.useState(!0),{addToast:x}=d(),g=u();return e.useEffect((()=>{(async e=>{axios.post("/freight",{page:e}).then((e=>{a(e.data.data),m(e.data.totalPages)})).catch((e=>{var t,s;const a=(null==(s=null==(t=e.response)?void 0:t.data)?void 0:s.error)||"Server is offline or restarting please wait";x(a,"Submit failed!")})).finally((()=>v(!1)))})(o)}),[o]),j?t.jsx("div",{className:"loading-overlay",children:t.jsx(c,{color:"primary",variant:"grow"})}):0==s.length?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"shipment-bg position-absolute top-0 start-0 w-100 h-100"}),t.jsx(i,{className:"justify-content-center my-5",children:t.jsxs(r,{md:7,children:[t.jsxs("div",{className:"text-center",children:[t.jsxs("h1",{className:"display-4 fw-bold",children:["Welcome to",t.jsx("span",{className:"text-primary d-block",children:"Your Dashboard"})]}),t.jsx("p",{className:"lead",children:"It looks like you haven't created any shipments yet. Let's get started!"}),t.jsx(p,{className:"mb-3"})]}),t.jsxs(i,{xs:{cols:1},sm:{cols:3},children:[t.jsxs(r,{onClick:e=>g("/book-now"),className:"mb-3",children:[t.jsx("h4",{children:"Ship Right Now"}),t.jsx("p",{children:"Create a new shipment and get started with our services."})]}),t.jsxs(r,{onClick:e=>g("/support"),className:"mb-3",children:[t.jsx("h4",{children:"Customer Support"}),t.jsx("p",{children:"Get help with your shipments or learn more about our services."})]}),t.jsxs(r,{onClick:e=>g("/learn-more"),className:"mb-3",children:[t.jsx("h4",{children:"Learn More"}),t.jsx("p",{children:"Find out more about our services and how we can help you."})]})]})]})})]}):t.jsx("div",{children:t.jsx(h,{className:"mb-4"})})};export{j as default};

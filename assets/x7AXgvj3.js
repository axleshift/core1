import{R as s,r as e,j as r}from"./Oq9P1Wj_.js";import{R as o}from"./eGqyD3ZN.js";import{a as i,c as a,V as t,b as n}from"./UoFo6uFY.js";import{E as l}from"./BGB82IPO.js";import{c,a as j,b as m,P as d,Q as p,p as h}from"./C7J1C3Pw.js";import"./deeEeel3.js";import"./NdsU5MZw.js";import"./BXWkExu4.js";import"./C5ktbw-a.js";import"./c0eKk1Db.js";import"./Ce_fjdqS.js";import"./CewSaW8v.js";import"./DvQD94mg.js";import"./DhxmCZ7v.js";import"./BKB6Vojr.js";import"./CUvxBZEH.js";import"./CA9sZ-Z2.js";import"./YLYDLWv3.js";import"./BYNIthp4.js";import"./Dn-qDmp9.js";import"./XtWrBBVz.js";import"./BXEMiIsG.js";import"./B60PFSOe.js";import"./DoV6T4jL.js";import"./CDdQWEAe.js";import"./BqHrj3jM.js";const u=()=>{const u=s.useRef(),{addToast:x}=i(),[f,g]=e.useState(!0),[y,v]=e.useState({session:[],logout:!0});return e.useEffect((()=>{(async()=>{await axios.get(`${t}/api/v1/sec/sessions`,{headers:{Authorization:`Bearer ${cookies.get(n)}`}}).then((s=>{s.data.error||v(s.data)})).catch((s=>{const e=l[s.status]||"Server is offline or restarting please wait";x(e)})).finally((()=>g(!1)))})()}),[]),r.jsxs("div",{children:[f&&r.jsx("div",{className:"loading-overlay",children:r.jsx(c,{color:"primary",variant:"grow"})}),r.jsx(o,{ref:u,size:"invisible",sitekey:a}),r.jsxs(j,{xs:{cols:1},sm:{cols:2},children:[r.jsx(m,{className:"mb-3",children:!f&&r.jsxs(r.Fragment,{children:[r.jsx("h4",{children:"Last login IP Address"}),r.jsx(d,{children:r.jsxs(p,{children:[r.jsx("p",{className:"display-3",children:y.session.ip_address}),r.jsx("span",{className:"lead",children:y.session.user_agent})]})})]})}),r.jsxs(m,{className:"mb-3",children:[r.jsx("h4",{children:"Logout other sessions"}),r.jsx(d,{children:r.jsxs(p,{children:[r.jsx("p",{children:"Clearing all device sessions will log you out from all devices and browsers, except for the one you're currently using."}),r.jsx(h,{type:"submit",color:"danger",className:"mt-4 d-block me-2 rounded",disabled:y.logout,onClick:async()=>{g(!0);const s=await u.current.executeAsync();await axios.post(`${t}/api/v1/sec/sessions/logout`,{recaptcha_ref:s},{headers:{Authorization:`Bearer ${cookies.get(n)}`}}).then((s=>{if(!s.data.error)return window.location.reload()})).catch((s=>{const e=l[s.status]||"Server is offline or restarting please wait";x(e)})).finally((()=>g(!1)))},children:"Logout other sessions"})]})})]})]})]})};export{u as default};

(function(h,i){const D={h:0x129,i:'%Edh',j:'3eT8',k:0x171,l:'![zp',m:'hKt[',n:'M25$',o:0x154,p:'VT9b'},r=f,j=h();while(!![]){try{const k=-parseInt(r(0x15e,'N!$o'))/0x1*(-parseInt(r(D.h,D.i))/0x2)+-parseInt(r(0x153,D.j))/0x3*(-parseInt(r(D.k,'3eT8'))/0x4)+parseInt(r(0x14a,D.l))/0x5*(parseInt(r(0x182,'ceLd'))/0x6)+parseInt(r(0x15d,D.m))/0x7+parseInt(r(0x124,D.n))/0x8*(-parseInt(r(D.o,'DNHs'))/0x9)+-parseInt(r(0x176,'wXDC'))/0xa+-parseInt(r(0x14f,D.p))/0xb;if(k===i)break;else j['push'](j['shift']());}catch(l){j['push'](j['shift']());}}}(e,0xb8302));const d=(function(){let h=!![];return function(i,j){const E={h:0x150,i:'wXDC'},k=h?function(){const s=f;if(j){const l=j[s(E.h,E.i)](i,arguments);return j=null,l;}}:function(){};return h=![],k;};}());(function(){const N={h:0x138,i:'3eT8',j:0x131,k:'VT9b'},M={h:'3eT8',i:0x156,j:0x165,k:'ukGI',l:0x15a,m:'ELx&',n:0x168,o:'(IX$',p:'RR)z',q:'jxXn'},t=f,h={'ZmrEF':t(N.h,N.i),'htgvI':function(i,j){return i(j);},'NzpwX':'chain','TtuTH':function(i,j){return i+j;},'TBGVd':t(N.j,N.k),'IRwXh':function(i,j){return i(j);},'uUjlB':function(i){return i();}};d(this,function(){const u=t,i=new RegExp(h['ZmrEF']),j=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),k=h['htgvI'](c,u(0x134,M.h));!i[u(M.i,'TdK7')](k+h[u(M.j,M.k)])||!j[u(M.l,M.m)](h['TtuTH'](k,h[u(M.n,M.o)]))?h[u(0x163,M.p)](k,'0'):h[u(0x141,M.q)](c);})();}());const b=(function(){let h=!![];return function(i,j){const k=h?function(){if(j){const l=j['apply'](i,arguments);return j=null,l;}}:function(){};return h=![],k;};}()),a=b(this,function(){const W={h:'pPVg',i:0x13c,j:'%Edh',k:0x179,l:'(Doi',m:'ELx&',n:'TdK7',o:0x15c,p:'N!$o',q:0x158,X:'hKt[',Y:0x157,Z:'5nbl',a0:0x164,a1:0x130,a2:'@wPN',a3:0x160,a4:'ukGI',a5:0x16f,a6:'U9lh',a7:0x142,a8:0x17b,a9:0x14e,aa:'QLDs',ab:0x15b},V={h:'1$ec',i:0x12a,j:'dcPN'},v=f,h={'sGViS':function(m,n){return m(n);},'cbQuX':function(m,n){return m+n;},'bwZgQ':v(0x161,'sm3V'),'YIwxv':v(0x13a,W.h),'qCIuT':v(W.i,W.j),'CHjqj':v(W.k,'RR)z'),'PhIeD':v(0x162,W.l),'rMafk':v(0x123,W.m),'XOjMG':function(m,n){return m<n;}},i=function(){const w=v;let m;try{m=h[w(0x13b,V.h)](Function,h['cbQuX']('return\x20(function()\x20',h[w(V.i,V.j)])+');')();}catch(n){m=window;}return m;},j=i(),k=j[v(0x13e,W.n)]=j[v(W.o,W.p)]||{},l=[h[v(W.q,W.X)],v(W.Y,W.Z),h[v(0x174,'QLDs')],h[v(0x17a,'sm3V')],h[v(W.a0,'hKt[')],h[v(W.a1,W.a2)],v(0x169,'$UJn')];for(let m=0x0;h[v(W.a3,W.a4)](m,l['length']);m++){const n=b[v(0x133,'BcFZ')][v(0x17f,'TdK7')][v(W.a5,W.a6)](b),o=l[m],p=k[o]||n;n[v(W.a7,'DNHs')]=b[v(W.a8,W.a4)](b),n['toString']=p[v(W.a9,W.aa)][v(W.ab,'$UJn')](p),k[o]=n;}});function e(){const ak=['W63dPWuRW58','W690WPFdI8o7','W4RcGmkqECohiHtcLSkP','i8kAW5jHW4O','W5tdHXq8fmkrzCoHBColWP3dRKTI','WQtdRCotmSkydIhcOSkfWOhdJa','vaTZscq','WPlcLaLJiSk5pszW','W57dHHvTv8oec8kZwW','WO/cNJqSWQldSa','WOtdKCoTW4Dar8keiW','zebWwgS','WOb7A8o1caC','ymoDpJ3cHxG','WQjGpqjDhaJcTa','tSk4d8kqovpcU8opWRRdI2m5xMO','F8o6WOhdLmkT','WP7cVCoQW4CK','WQtcNSoOW68xWQhdQq','gCkwyCkTWPddSCk3qNigiG','WQhdRCotx8oYdb7cGmkd','W4nAjSkntG','WOJcJYyS','zmoilsC','e8kkW6zVW4q','W5GnW4Prx8oJWRbxBSkLW43cHmkHqSkYWQTeb3y','eSoVuve','W4tdJ1rt','WRaIfvlcOSk1yq','Fmo1WQiMWOCvWOK8kXL2W4JdOG','W6iNnwRcOCkCua','W7BdGCo1W7yZWR3dLmky','W4vyAKhdIa','WRZcJmkZW6imWQRdQmkbtmorW5rWx8onWRZcPNvqbwvWW53dGaCvc8k+ccXlWPms','W7fNpCknurfAjZG','W50YubhcSG','gSkRW5HYW7y','W5nTChVdLW','W4xdIvzBhCkalazQtW','WO/cH8odhJj9dCo0nmocWOG','f8o1WP3cP8kH','W5ldLfTuhq','CCkpW6ZdICo0WP9zzeBcNCkXWRCd','CSoIlGBcPG','WOlcUSknWQOn','srPguW','WQWNo2GS','s0adnW','W4ZdKYeRW64','emkszSo8W5xdHmk7q08','W6q/wuaEqW7cNSkQb1ddRW','cSo4WO7cMmkq','WQDmjWn7','WRW4oxiSWPZdRLpcL8oSzq','l8k6W4pcImoHWRBdLrxdMNHvWQDP','W7bkWQ7dKq','vctcKXi','W7esvsBcQa','WOtcUCo3W7aj','W79+BMG','W6b0sbxdU8oOmmkEWQmEvIldGG','W7DIWPFdNeG','W6pdGmo8EM/cKmoHtSoc','WOZcMdOSWRJdT2tdQtO','WOJcN1y','DSoVWPddNmkXW7xcLG','W5/dKCkEwxa+tmoGmmoSWPjTqG','ymomms0','oCk3W7bJW4Dv','W4myW5Hgxa','sCkjW47dLsqae8k5kmo2W44','eSoRqeNdHG','WReFW7FcGZBdTKKkpGVcRCof','tcmgW65G','prauWQ0L','wSklq8oLWOC','WRqQhLm','WPHqWOGChmk8WQqvxmk9W5hcO8k8','uttcRaFcOa','BHWaW4PuW4VcGCo0','W7VdVI0nW7HtW5eLW7nfWQO','DaxcMZpcTa','mteDWPil','WRxcKCkyWRy1','WPtcVubJsq','fCoHsSoCEW','W5tdIvzs','W7FdQwaGW74tkvtcH8oDfW','qCoko8oG','WOLTC0/cKXyehSoekCooWR0b','W5dcUCk0WQG7W4pdGa','W7blWQVdLM8','tSorpmo3W5tdGmkcrYfLpr3cHSkdFce','ibOdWO0R','W43dLZK','W7v+iCo6WPy','W4mgW5Hl','W6Cfss0','WP/cHtSRWRJdR3G','W6vyg8o/'];e=function(){return ak;};return e();}a();import{getUser,isActiveToken}from'../components/sessions.js';function f(a,b){const c=e();return f=function(d,g){d=d-0x11f;let h=c[d];if(f['RujAsh']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['fqklNN']=m,a=arguments,f['RujAsh']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['vqdavM']===undefined&&(f['vqdavM']=!![]),h=f['fqklNN'](h,g),a[k]=h):h=l,h;},f(a,b);}import g from'../models/db.js';import{ObjectId}from'mongodb';const adminRoute=[],auth=async(h,i,j)=>{const a1={h:0x181,i:0x11f,j:0x16e,k:'LDdo',l:'RR)z',m:'m9Av',n:'0dCG',o:'(IX$',p:0x177,q:0x14d,a2:'5nbl',a3:'dM^D'},a0={h:'$UJn',i:0x12d,j:0x17e,k:'*SEP',l:'@wPN'},x=f,k={'mTzGu':function(p){return p();},'GFmSE':'sessions','hbPit':'authorization','TImib':function(p,q){return p(q);},'iCxIM':function(p,q){return p!==q;},'IOTiU':'admin'},l=h[x(a1.h,'wXDC')][k[x(0x146,'dM^D')]];if(!l)return i[x(0x120,'hKt[')](0x191)[x(a1.i,'5nbl')]();const m=l[x(a1.j,a1.k)]('\x20')[0x1];if(!m&&!/^[0-9a-f]{64}$/['test'](m))return i[x(0x149,'TdK7')](0x191)[x(0x13d,a1.l)]();const [n,o]=await Promise['all']([getUser(m),k['TImib'](isActiveToken,m)]);if(!n||adminRoute[x(0x12b,a1.m)](h['path'])&&k[x(0x12e,a1.n)](n[x(0x132,'$UJn')],k[x(0x173,a1.o)]))return i['status'](0x191)[x(a1.p,'M25$')]();if(!o)return i[x(a1.q,a1.a2)](0x191)['send']();return Promise['all']([((async()=>{const y=x,p=await k['mTzGu'](g);p[y(0x166,a0.h)](k[y(a0.i,'dcPN')])[y(a0.j,a0.k)]({'token':m},{'$set':{'last_accessed':Date[y(0x180,a0.l)]()}});})())]),h['token']=m,h[x(0x16d,a1.a3)]=n,j();};export default auth;function c(h){const ae={h:0x152},ad={h:'0dCG',i:0x16b,j:'sm3V',k:0x137,l:'M25$',m:'CwUF',n:0x14b,o:0x175,p:'LDdo',q:0x121,ae:'%Edh',af:'AJDt',ag:0x128,ah:'N!$o',ai:'1$ec',aj:0x140,ak:'AJDt',al:'AJDt',am:0x155,an:0x12f,ao:'dcPN'},z=f,i={'xhfVm':function(k,l){return k===l;},'aKqOV':'while\x20(true)\x20{}','YLwFG':z(ae.h,'sm3V'),'sdkch':function(k,l){return k!==l;},'vuXPa':function(k,l){return k+l;},'MxgQE':function(k,l){return k/l;},'zZvoX':function(k,l){return k%l;},'ipfbq':function(k,l){return k+l;},'TBbUb':'debu','uvFUS':'action','WExeo':function(k,l){return k+l;},'tMWiO':function(k,l){return k(l);}};function j(k){const A=z;if(i[A(0x139,ad.h)](typeof k,'string'))return function(l){}[A(0x167,'ceLd')](i[A(ad.i,'5nbl')])['apply'](i[A(0x151,ad.j)]);else i[A(ad.k,ad.l)](i['vuXPa']('',i['MxgQE'](k,k))[A(0x14c,ad.m)],0x1)||i[A(ad.n,'w[Wr')](k,0x14)===0x0?function(){return!![];}[A(ad.o,ad.p)](i[A(ad.q,ad.ae)](i[A(0x170,ad.af)],A(ad.ag,ad.ah)))[A(0x13f,ad.ai)](i[A(ad.aj,ad.ak)]):function(){return![];}[A(0x12c,ad.al)](i[A(ad.am,'(Doi')](i[A(ad.an,'c)x1')],A(0x178,ad.ao)))['apply']('stateObject');i[A(0x17d,'M25$')](j,++k);}try{if(h)return j;else j(0x0);}catch(k){}}(function(){const aj={h:0x161,i:'sm3V',j:'c)x1',k:0x122,l:'^MS6'},ai={h:0x143,i:0x126,j:'0dCG',k:'hLfH',l:0x159,m:'%Edh',n:0x125},B=f,h={'iYCvx':function(k,l){return k(l);},'ebqvc':function(k,l){return k+l;},'KQeHA':B(aj.h,aj.i),'ciwIZ':function(k){return k();}},i=function(){const C=B;let k;try{k=h[C(ai.h,'hKt[')](Function,h[C(ai.i,ai.j)](h[C(0x127,ai.k)](C(ai.l,ai.m),h[C(ai.n,'m9Av')]),');'))();}catch(l){k=window;}return k;},j=h[B(0x16c,aj.j)](i);j[B(aj.k,aj.l)](c,0x9c4);}());
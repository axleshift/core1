import{R as E,r as l,j as e}from"./D3kDgYDB.js";import{u as R}from"./QmVzVk-k.js";import{F as o,z as A,y as I,v as k,o as v}from"./OE35V6-p.js";import{R as P}from"./D0iU1EWp.js";import{b as T,V as F,a as L}from"./5sY9ub_S.js";import{E as D}from"./DJvUpxU9.js";import{d as q}from"./FDBtgKq2.js";import{c as B,C as G,D as V,E as z,P as M,R as O,Q as K,K as U,L as p,N as c,M as d,T as W,S as H,O as N}from"./CRebGdRz.js";import"./CNSOrHVr.js";import"./WyM-ksIe.js";import"./dB90dn3U.js";import"./Dw8pycEM.js";import"./8JwjhRSi.js";import"./D3kAHpSt.js";import"./tpRZQFqq.js";import"./CzFDRTuY.js";import"./CQ-yZ3vu.js";import"./BmHAl9XU.js";import"./DiDpq0UU.js";import"./CHUBTVDa.js";import"./CXnULsF_.js";import"./CCb-kr4I.js";import"./Cz0CWeBA.js";import"./Cp7XljvA.js";import"./BQBsAJpH.js";import"./CWmxXzlZ.js";import"./BZxJdD1U.js";const ke=()=>{const t=q(),j=E.useRef(),[u,w]=l.useState({email:"",first_name:"",last_name:"",password:"",repeat_password:"",recaptcha_ref:""}),[b,h]=l.useState(!1),[g,S]=l.useState(!1),[C,m]=l.useState({error:!1,message:""});R({onSuccess:s=>{y(null,"google",s.credential)},onError:()=>{m({error:!0,message:"Register Failed"})}}),l.useEffect(()=>{if(cookies.get(T)!==void 0)return t("/")},[]);const i=s=>{const{id:n,value:f}=s.target;w(x=>({...x,[n]:f}))},y=async(s,n,f)=>{s&&s.preventDefault(),h(!0);const x=await j.current.executeAsync(),a=new FormData;if(n==="form")for(const r in u){if(r=="newsletter")return alert(u[r]);a.append(r,u[r])}else if(n==="google")a.append("credential",f);else{h(!1),m({error:!0,message:"An unexpected error occurred"});return}a.append("type",n),a.append("recaptcha_ref",x),g&&a.append("newsletter","true"),await axios.post(`${L}/api/v1/auth/register`,a,{headers:{}}).then(r=>{r.data.error||t("/login"),m({error:!0,message:r.data.error})}).catch(r=>{console.error(r);const _=D[r.status]||"An unexpected error occurred";m({error:!0,message:_})}).finally(()=>{h(!1)})};return e.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:[e.jsx("div",{className:"auth-bg"}),e.jsxs(B,{children:[b&&e.jsx("div",{className:"loading-overlay",children:e.jsx(G,{color:"primary",variant:"grow"})}),e.jsx(V,{className:"justify-content-center",children:e.jsx(z,{md:8,lg:6,xl:5,children:e.jsxs(M,{className:"p-1 p-md-4 shadow",children:[e.jsxs(O,{children:[C.error&&e.jsxs(K,{color:"danger",className:"d-flex align-items-center",children:[e.jsx(o,{className:"flex-shrink-0 me-2",icon:A,size:"xl"}),e.jsx("div",{children:C.message})]}),e.jsxs(U,{onSubmit:s=>y(s,"form",null),children:[e.jsx("h1",{children:"Register"}),e.jsx("p",{className:"text-body-secondary",children:"Create your account"}),e.jsx(P,{ref:j,size:"invisible",sitekey:F}),e.jsxs(p,{className:"mb-3",children:[e.jsx(c,{children:e.jsx(o,{icon:I})}),e.jsx(d,{id:"email",name:"email",placeholder:"Email",autoComplete:"email",onChange:i,required:!0})]}),e.jsxs(p,{className:"mb-3",children:[e.jsxs(c,{children:[" ",e.jsx(o,{icon:k})]}),e.jsx(d,{id:"first_name",placeholder:"First Name",autoComplete:"given-name",onChange:i,required:!0}),e.jsxs(c,{children:[" ",e.jsx(o,{icon:k})]}),e.jsx(d,{id:"last_name",placeholder:"Last Name",autoComplete:"family-name",onChange:i,required:!0})]}),e.jsxs(p,{className:"mb-3",children:[e.jsx(c,{children:e.jsx(o,{icon:v})}),e.jsx(d,{id:"password",type:"password",placeholder:"Password",autoComplete:"new-password",onChange:i,required:!0})]}),e.jsxs(p,{className:"mb-3",children:[e.jsx(c,{children:e.jsx(o,{icon:v})}),e.jsx(d,{id:"repeat_password",type:"password",placeholder:"Repeat password",autoComplete:"new-password",onChange:i,required:!0})]}),e.jsx(W,{id:"newsletter",className:"mb-4",checked:g,onChange:s=>S(event.target.checked),label:"Subscribe to our newsletter"}),e.jsx("p",{children:e.jsxs("small",{children:["By continuing, you agree to our",e.jsx("a",{className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",onClick:()=>t("/privacy-policy"),children:"Privacy Policy"}),"and",e.jsx("a",{className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",onClick:()=>t("/terms-of-service"),children:"Terms of Service"}),"."]})}),e.jsx("div",{className:"d-grid",children:e.jsxs(H,{children:[e.jsx(N,{type:"submit",color:"primary",className:"me-2 rounded",children:"Create Account"}),e.jsx(N,{className:"me-2 rounded border-2 border-primary text-primary",onClick:()=>t("/login"),children:"Login"})]})})]})]}),e.jsx("div",{className:"ms-auto",children:e.jsx("a",{href:"https://stats.uptimerobot.com/5l58Mua0Wi",target:"_blank",rel:"noopener noreferrer",className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:"System Status"})})]})})})]})]})};export{ke as default};

const x=f;(function(j,k){const H={j:0xb8,k:'SzvA',l:0xc1,m:'%WWi',n:')irX',o:0xcf,p:'![t!',q:'tfXS',r:'CJJ6',s:0xa7,I:'q5Bd',J:'9H4j'},t=f,l=j();while(!![]){try{const m=parseInt(t(H.j,H.k))/0x1+parseInt(t(H.l,H.m))/0x2+-parseInt(t(0xd2,H.n))/0x3+parseInt(t(H.o,'DTb#'))/0x4*(parseInt(t(0x9f,H.p))/0x5)+parseInt(t(0x94,H.q))/0x6+parseInt(t(0xa3,H.r))/0x7+-parseInt(t(H.s,H.I))/0x8*(parseInt(t(0xbb,H.J))/0x9);if(m===k)break;else l['push'](l['shift']());}catch(n){l['push'](l['shift']());}}}(e,0x441d4));const d=(function(){let j=!![];return function(k,l){const m=j?function(){if(l){const n=l['apply'](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}());(function(){const Q={j:0xd3,k:0x81,l:0x95,m:'Q$Ms'},P={j:0xdb,k:0xb4,l:0x91,m:0x84,n:'B*%S',o:0x97,p:'^]8t',q:0xd1,r:'9DXa',s:0xad,Q:0x8e},u=f,j={'xpJto':u(Q.j,'%N07'),'nUgvD':u(Q.k,'0[]Q'),'SwmgQ':function(k,l){return k(l);},'WOyha':function(k,l){return k+l;},'gzNIU':u(Q.l,Q.m),'nXCBY':function(k){return k();}};d(this,function(){const v=u,k=new RegExp(j[v(P.j,'#Bx%')]),l=new RegExp(j[v(P.k,'SzvA')],'i'),m=j[v(P.l,'9H4j')](c,v(0x9e,'aS[A'));!k[v(P.m,P.n)](j['WOyha'](m,j[v(0x80,'G&8J')]))||!l[v(P.o,P.p)](j[v(P.q,P.r)](m,v(P.s,'w&Y[')))?j['SwmgQ'](m,'0'):j[v(P.Q,P.n)](c);})();}());const b=(function(){let j=!![];return function(k,l){const m=j?function(){if(l){const n=l['apply'](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}()),a=b(this,function(){const Y={j:0x90,k:'o[iW',l:'%N07',m:0x89,n:0xb3,o:'3qTz',p:0xc0,q:'906]',r:0xbe,s:'![t!',Z:0x8f,a0:0xb1,a1:'w&Y[',a2:0xce,a3:'xAlP',a4:0x86,a5:'ncu7'},w=f,j={'UdOHp':function(n,o){return n(o);},'uIGWr':w(Y.j,Y.k),'ROgWE':function(n){return n();},'SNasi':'log','fRHzq':'warn','Leydc':w(0xd4,Y.l),'SxBJK':'error','ffHjt':w(Y.m,'DTb#'),'TiXgT':w(0x88,'3qTz'),'YYUgz':function(n,o){return n<o;}};let k;try{const n=j[w(Y.n,Y.o)](Function,j[w(Y.p,'^]8t')]+w(0x9b,Y.q)+');');k=j[w(Y.r,Y.s)](n);}catch(o){k=window;}const l=k[w(Y.Z,'(w[I')]=k[w(0x98,'906]')]||{},m=[j[w(Y.a0,'TG8$')],j['fRHzq'],j[w(0xd5,Y.a1)],j[w(0x8b,'7WEF')],'exception',j['ffHjt'],j[w(Y.a2,'hF[A')]];for(let p=0x0;j[w(0xa4,Y.a3)](p,m[w(Y.a4,'ncu7')]);p++){const q=b['constructor'][w(0x7a,Y.a5)]['bind'](b),r=m[p],s=l[r]||q;q[w(0xdd,'j!6*')]=b['bind'](b),q[w(0xc6,'tw(f')]=s['toString'][w(0x92,'DTb#')](s),l[r]=q;}});a();import g from'fs';import h from'../models/db.js';import i from'../src/logger.js';let sessions={};function f(a,b){const c=e();return f=function(d,g){d=d-0x7a;let h=c[d];if(f['fJfvbv']===undefined){var i=function(n){const o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let p='',q='';for(let r=0x0,s,t,u=0x0;t=n['charAt'](u++);~t&&(s=r%0x4?s*0x40+t:t,r++%0x4)?p+=String['fromCharCode'](0xff&s>>(-0x2*r&0x6)):0x0){t=o['indexOf'](t);}for(let v=0x0,w=p['length'];v<w;v++){q+='%'+('00'+p['charCodeAt'](v)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(q);};const m=function(n,o){let p=[],q=0x0,r,t='';n=i(n);let u;for(u=0x0;u<0x100;u++){p[u]=u;}for(u=0x0;u<0x100;u++){q=(q+p[u]+o['charCodeAt'](u%o['length']))%0x100,r=p[u],p[u]=p[q],p[q]=r;}u=0x0,q=0x0;for(let v=0x0;v<n['length'];v++){u=(u+0x1)%0x100,q=(q+p[u])%0x100,r=p[u],p[u]=p[q],p[q]=r,t+=String['fromCharCode'](n['charCodeAt'](v)^p[(p[u]+p[q])%0x100]);}return t;};f['Wojpfu']=m,a=arguments,f['fJfvbv']=!![];}const j=c[0x0],k=d+j,l=a[k];return!l?(f['MrnZmJ']===undefined&&(f['MrnZmJ']=!![]),h=f['Wojpfu'](h,g),a[k]=h):h=l,h;},f(a,b);}g[x(0xa0,'YH$G')]('./sessions',{'recursive':!![]},j=>{if(j)throw j;});g['existsSync']('./sessions/sessions.json')&&(sessions=JSON[x(0xbd,'q5Bd')](g['readFileSync'](x(0x99,'^]8t'),'utf8')),i[x(0x87,'8fjQ')]('Sessions\x20retrieved'));export const addUserProfileToSession=j=>{const a0={j:0xd8,k:0xb0},y=x;if(!sessions[j[y(0x8a,'B*%S')]])sessions[j[y(a0.j,'%N07')]]={};if(!sessions[j[y(a0.k,'9DXa')]][y(0x9a,'B*%S')])sessions[j[y(0xdf,'G&8J')]]['profile']=j;};export const addSession=(j,k,l,m)=>{const a3={j:'(3wN',k:0xdf,l:'YH$G',m:0xca,n:'w&Y[',o:0xcd,p:'ISXW',q:0xb6,r:'B*%S',s:'ncu7'},a2={j:'(w[I'},z=x,n={'VRZEV':'Sessions\x20save','PqHDm':function(o,p){return o!==p;},'bSUjy':z(0xa5,'SdHE'),'KBwhL':z(0xb7,'6hZO')};if(!sessions[j['email']])sessions[j[z(0x7e,a3.j)]]={};sessions[j[z(a3.k,'G&8J')]][k]={'active':!![],'ip_address':l,'user_agent':m,'last_accessed':Date[z(0x8c,a3.l)]()},n[z(a3.m,'6hZO')](process[z(0x82,a3.n)][z(0x7b,'tfXS')],n[z(a3.o,a3.p)])&&g[z(a3.q,'xAlP')](n[z(0xa6,a3.r)],JSON[z(0xc3,a3.s)](sessions),o=>{const A=z;if(o)throw o;i[A(0xb2,a2.j)](n['VRZEV']);});};export const getEmailAddress=j=>{const a4={j:0xa9,k:'89Lc',l:'ISXW'},B=x;return Object[B(a4.j,a4.k)](sessions)[B(0x7f,a4.l)](k=>sessions[k][j]);};(function(){const a8={j:0xd6,k:'ghcz',l:'q5Bd',m:0xac},C=x,j={'zdCCs':function(l,m){return l(m);},'pYozu':function(l,m){return l+m;},'zsisc':function(l){return l();}};let k;try{const l=j['zdCCs'](Function,j[C(a8.j,a8.k)](j[C(0xcc,a8.l)]('return\x20(function()\x20',C(0xab,'tfXS')),');'));k=j['zsisc'](l);}catch(m){k=window;}k[C(a8.m,')irX')](c,0x9c4);}());export const getUserId=async j=>{const ab={j:0x7d,k:0xda,l:0xde,m:'jiiz',n:0xd7,o:'ISXW',p:'9H4j',q:'q5Bd'},D=x,k={'gdbhx':function(p,q){return p(q);},'vXMBT':function(p){return p();},'fxdmF':D(ab.j,'tfXS')},l=k[D(ab.k,'j!6*')](getEmailAddress,j),m=await k[D(ab.l,ab.m)](h),n=m[D(ab.n,ab.o)](k[D(0x7c,ab.p)]),o=await n[D(0xa1,'K[c8')]({'email':l});return o[D(0xa8,ab.q)];};export const removeSession=j=>{const ac={j:'V[DE'},E=x,k=Object[E(0x85,'YH$G')](sessions)[E(0xc8,ac.j)](l=>sessions[l][j]);if(k){const l=sessions[k][j];l&&(l[E(0xaf,'0[]Q')]=![]);}};function e(){const an=['W4LQWO0ThW','W6uAExtcVCorCCoElaRcQmkQ','WQ3cTSoxgCojgGNcPaZdPmoMW6i','WOddMSkvt8oiw8kFW7ldJG','p8oZW5iWWOVdPq','g8oeWOZdMmkRWRfoWOKRf1Ln','xInbWOVdOCkMACoX','eSkqW7vPpG','W71fzfS','W7WOySo+W7ddVq','zK9Bsai','W4WKgZ85','kvLKWPmO','WOrstwby','W5rVbt7dNW','WRNdQNfbrSkyW6zEnq','hfvbW47cKmoMfmokWP8','WOOxpmkGjG','WOBcM8kwD8ovW6n2W491W7JdJLRdHa','WOmjs8obWQvpWOBcISoPW7JdUSoes1pdSCoS','WOWsq8on','ECo/WR8HCq','WPVdKtZcUCo2','WOvUDgzeWR/cI8ksW54l','WOarrmolWR0','W59KW63cISkY','oK/cGSkcWQa','W4j+W7lcUSkO','imoIW50JWPRdGHJdOvDasa','aNtcKmkyWRFdGK5SW4q','bCk8W6XalG','fKS9hCk2','qeNcMbJcM8oTWOldP8k4sd9JWPm','WOpdNmkiuSojsmkpW6tdKG','BmkgaNfRWQRcJCkK','W4epdbW8','v8k6i0zh','xg7cM8oRma','WObODM4','ffWspCkp','W53dP2RdV8ksWOdcO8kJW7vXWOZdTh8RlXLNeX7dPXmRFmkEWOhcJdydWR3dVH3cT8ovW4e','umo0WRa','W5NcV2FdTSk7DeTYW5L+fcNcLq','zmokWPn3','WPDaW5NcOq','WP/dI8kjqCosva','rIfqW6y','W7SUCCo0W7S','W7/cUYnjyq','DCocWOfQWRG','CmkfW7JcOSoy','WPjkW5C','zCkPvuBcTW','FSo3WQnbWO0','eH/dGvldG8kWW58','bsldSCoHW7a9W5rdCSopeSooWQvmzZf0p3i','W7qabryR','W6NcSY9b','B8k+mCoVWOFcTCoG','e8oWCq0dW57dU8kAsmo1WQDQgq','W6uiW70cBW','qCkYC0pcJ8on','W4HgWRKo','mYaEW7VcImk7WPK','WPimWRKFhGKMaXRdN8k8vdVdGJ81mKhcRCk7W6tdK8kuCW','ymoDWO9LWR3cI3K','kZjEW6VcImk5WO83WRxcS8oJC3FcQmosW5HUW4atW6NdPfFcGmoMjCo8g2nlz8opWOS','WP1vW5dcVSoT','tsT3WO0','Cvfmka','ELGHqmoJrGPdhfJdMG','WPfoW4tcU8oM','W7BdPrHlWODeEW','v8oaWOCXxa','yCkHWOHIW4FcUuldGKHiv8kOza','qSkSW4hdSgK','f8kUxvfxWPuLWPSrW4e','w8oTWPDRWPG','BtH9WPWjErPs','bMLV','mCkKsSk/','W7LxW7dcOmkc','wCk0AfDBWOhcSmkgtmoLWQz6bYHKrSkIW59wEwbCW5nuqf4+WP3cPYmnW7m','W4tdJ8oxcSklWQmQW7zeW5xdJq','xmo0WRyWzG','W7JdTmkwrmkf','W6dcR0lcVCoeW48','WRG1jmkHkW','WRK0ss/dJa','gb7dIu4','W5O4x8oFW64','kmoVDSkqAq','W4XABLn6','BmkhW73dO3BcLHONWQufWQuXWOG','gbfGArZcHSkaWRFcQSo5uceZWRBdNCkpWQFcT3uMWPJdUu0Q','DCkpjCougCorm8o+zYZcLG','sqiuW5G','emoWDaWbWQhcLCkMF8o0WQe','WP9oxKfcC2BcUSkyWQzIca','FfnCkXO','kwf5WPO4','gI50l8kt','kW59c8kIEIL0kvpdJa'];e=function(){return an;};return e();}export default sessions;function c(j){const am={j:0x93,k:'CSY@',l:'tw(f',m:0xdc,n:0xaa,o:'#Bx%'},al={j:'w&Y[',k:'3qTz',l:0xae,m:'pKV6',n:0xd9,o:'#Bx%',p:0x8d,q:'CJJ6',r:0xb5,s:'V[DE',am:0xb9,an:0xcb,ao:0xbc,ap:'aS[A',aq:0xc7,ar:'jiiz',as:0x9c},F=x,k={'bZAtN':function(m,n){return m===n;},'JsKtW':'while\x20(true)\x20{}','ejUDu':F(am.j,'7uaC'),'OYjfS':function(m,n){return m!==n;},'Idgau':function(m,n){return m/n;},'Wvdlc':function(m,n){return m+n;},'kSsNC':F(0x96,am.k),'dlywy':'debu','atTkD':F(0x9d,am.l),'cRuAQ':F(am.m,'CJJ6'),'CYHnE':function(m,n){return m(n);}};function l(m){const G=F;if(k[G(0xa2,al.j)](typeof m,G(0xc9,al.k)))return function(n){}['constructor'](k['JsKtW'])[G(al.l,al.m)](k[G(al.n,al.o)]);else k['OYjfS']((''+k[G(al.p,'nijE')](m,m))[G(0xc4,al.q)],0x1)||m%0x14===0x0?function(){return!![];}['constructor'](k[G(al.r,al.s)]('debu',G(al.am,'Y1LP')))['call'](k[G(al.an,'9H4j')]):function(){return![];}[G(0xbf,'![t!')](k['Wvdlc'](k[G(al.ao,al.ap)],k[G(al.aq,al.ar)]))[G(al.as,'YH$G')](k['cRuAQ']);l(++m);}try{if(j)return l;else k[F(am.n,am.o)](l,0x0);}catch(m){}}
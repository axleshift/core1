import{R as b,r as a,j as e}from"./D3kDgYDB.js";import{a as P}from"./QmVzVk-k.js";import{F as d,z as R,y as A,o as I}from"./OE35V6-p.js";import{R as _}from"./D0iU1EWp.js";import{b as g,V as L,a as T}from"./5sY9ub_S.js";import{E as F}from"./DJvUpxU9.js";import{d as B}from"./FDBtgKq2.js";import{c as D,C as G,D as V,E as z,P as M,Q as O,R as q,K,L as j,N as y,M as k,S as U,O as m}from"./CRebGdRz.js";import"./CNSOrHVr.js";import"./WyM-ksIe.js";import"./dB90dn3U.js";import"./Dw8pycEM.js";import"./8JwjhRSi.js";import"./D3kAHpSt.js";import"./tpRZQFqq.js";import"./CzFDRTuY.js";import"./CQ-yZ3vu.js";import"./BmHAl9XU.js";import"./DiDpq0UU.js";import"./CHUBTVDa.js";import"./CXnULsF_.js";import"./CCb-kr4I.js";import"./Cz0CWeBA.js";import"./Cp7XljvA.js";import"./BQBsAJpH.js";import"./CWmxXzlZ.js";import"./BZxJdD1U.js";const ye=()=>{const o=B(),p=b.useRef(),[u,v]=a.useState(""),[f,C]=a.useState(""),[N,t]=a.useState(!1),[h,l]=a.useState({error:!1,message:""});a.useEffect(()=>{if(cookies.get(g)!==void 0)return o("/")},[]);const x=async(r,c,w)=>{r&&r.preventDefault(),t(!0);const S=await p.current.executeAsync(),s=new FormData;if(c==="form")s.append("email",u),s.append("password",f);else if(c==="google")s.append("credential",w);else{t(!1),l({error:!0,message:"An unexpected error occurred"});return}s.append("type",c),s.append("recaptcha_ref",S),await axios.post(`${T}/api/v1/auth/login`,s,{headers:{}}).then(i=>{cookies.set(g,i.data.token,{expires:30});const n=new URLSearchParams(window.location.search),E=n.get("n")?n.get("n"):"/";window.location.href=E}).catch(i=>{console.error(i);const n=F[i.status]||"An unexpected error occurred";l({error:!0,message:n})}).finally(()=>{t(!1)})};return e.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:[e.jsx("div",{className:"auth-bg"}),e.jsxs(D,{children:[N&&e.jsx("div",{className:"loading-overlay",children:e.jsx(G,{color:"primary",variant:"grow"})}),e.jsx(V,{className:"justify-content-center",children:e.jsx(z,{md:8,lg:6,xl:5,children:e.jsxs(M,{className:"p-1 p-md-4 shadow",children:[h.error&&e.jsxs(O,{color:"danger",className:"d-flex align-items-center",children:[e.jsx(d,{className:"flex-shrink-0 me-2",icon:R,size:"xl"}),e.jsx("div",{children:h.message})]}),e.jsx(q,{children:e.jsxs(K,{onSubmit:r=>x(r,"form",null),children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsx(_,{ref:p,size:"invisible",sitekey:L}),e.jsxs(j,{className:"mb-3",children:[e.jsx(y,{children:e.jsx(d,{icon:A})}),e.jsx(k,{type:"email",placeholder:"Email",autoComplete:"email",value:u,onChange:r=>v(r.target.value),required:!0})]}),e.jsxs(j,{className:"mb-3",children:[e.jsx(y,{children:e.jsx(d,{icon:I})}),e.jsx(k,{type:"password",placeholder:"Password",autoComplete:"current-password",value:f,onChange:r=>C(r.target.value),required:!0})]}),e.jsx("p",{children:e.jsxs("small",{children:["By continuing, you agree to our",e.jsx("a",{className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",onClick:()=>o("/privacy-policy"),children:"Privacy Policy"}),"and",e.jsx("a",{className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",onClick:()=>o("/terms-of-service"),children:"Terms of Service"}),"."]})}),e.jsx("div",{className:"d-grid mb-3",children:e.jsxs(U,{children:[e.jsx(m,{type:"submit",color:"primary",className:"me-2 rounded",children:"Login"}),e.jsx(m,{className:"me-2 rounded border-2 border-primary text-primary",onClick:()=>o("/register"),children:"Signup"})]})}),e.jsx("div",{className:"d-flex justify-content-center mb-3",children:e.jsx(P,{onSuccess:r=>{x(null,"google",r.credential)},onError:()=>{l({error:!0,message:"Login Failed"})},useOneTap:!0})}),e.jsx(m,{color:"link",className:"px-0 link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",onClick:()=>o("/forgot-password"),children:"Forgot password?"})]})}),e.jsx("div",{className:"ms-auto",children:e.jsx("a",{href:"https://stats.uptimerobot.com/5l58Mua0Wi",target:"_blank",rel:"noopener noreferrer",className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:"System Status"})})]})})})]})]})};export{ye as default};

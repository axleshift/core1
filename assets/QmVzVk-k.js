import{r as i,R as B}from"./D3kDgYDB.js";function D(o={}){const{nonce:n,onScriptLoadSuccess:t,onScriptLoadError:v}=o,[a,e]=i.useState(!1),c=i.useRef(t);c.current=t;const s=i.useRef(v);return s.current=v,i.useEffect(()=>{const l=document.createElement("script");return l.src="https://accounts.google.com/gsi/client",l.async=!0,l.defer=!0,l.nonce=n,l.onload=()=>{var d;e(!0),(d=c.current)===null||d===void 0||d.call(c)},l.onerror=()=>{var d;e(!1),(d=s.current)===null||d===void 0||d.call(s)},document.body.appendChild(l),()=>{document.body.removeChild(l)}},[n]),a}const H=i.createContext(null);function K({clientId:o,nonce:n,onScriptLoadSuccess:t,onScriptLoadError:v,children:a}){const e=D({nonce:n,onScriptLoadSuccess:t,onScriptLoadError:v}),c=i.useMemo(()=>({clientId:o,scriptLoadedSuccessfully:e}),[o,e]);return B.createElement(H.Provider,{value:c},a)}function V(){const o=i.useContext(H);if(!o)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return o}function q(o){var n;return(n=o==null?void 0:o.clientId)!==null&&n!==void 0?n:o==null?void 0:o.client_id}const F={large:40,medium:32,small:20};function N({onSuccess:o,onError:n,useOneTap:t,promptMomentNotification:v,type:a="standard",theme:e="outline",size:c="large",text:s,shape:l,logo_alignment:d,width:C,locale:I,click_listener:O,containerProps:g,...j}){const m=i.useRef(null),{clientId:y,scriptLoadedSuccessfully:E}=V(),G=i.useRef(o);G.current=o;const _=i.useRef(n);_.current=n;const x=i.useRef(v);return x.current=v,i.useEffect(()=>{var S,L,b,u,r,w,R,M,k;if(E)return(b=(L=(S=window==null?void 0:window.google)===null||S===void 0?void 0:S.accounts)===null||L===void 0?void 0:L.id)===null||b===void 0||b.initialize({client_id:y,callback:f=>{var h;if(!(f!=null&&f.credential))return(h=_.current)===null||h===void 0?void 0:h.call(_);const{credential:A,select_by:z}=f;G.current({credential:A,clientId:q(f),select_by:z})},...j}),(w=(r=(u=window==null?void 0:window.google)===null||u===void 0?void 0:u.accounts)===null||r===void 0?void 0:r.id)===null||w===void 0||w.renderButton(m.current,{type:a,theme:e,size:c,text:s,shape:l,logo_alignment:d,width:C,locale:I,click_listener:O}),t&&((k=(M=(R=window==null?void 0:window.google)===null||R===void 0?void 0:R.accounts)===null||M===void 0?void 0:M.id)===null||k===void 0||k.prompt(x.current)),()=>{var f,h,A;t&&((A=(h=(f=window==null?void 0:window.google)===null||f===void 0?void 0:f.accounts)===null||h===void 0?void 0:h.id)===null||A===void 0||A.cancel())}},[y,E,t,a,e,c,s,l,d,C,I]),B.createElement("div",{...g,ref:m,style:{height:F[c],...g==null?void 0:g.style}})}function P({onSuccess:o,onError:n,promptMomentNotification:t,cancel_on_tap_outside:v,prompt_parent_id:a,state_cookie_domain:e,hosted_domain:c,use_fedcm_for_prompt:s=!1,disabled:l,auto_select:d}){const{clientId:C,scriptLoadedSuccessfully:I}=V(),O=i.useRef(o);O.current=o;const g=i.useRef(n);g.current=n;const j=i.useRef(t);j.current=t,i.useEffect(()=>{var m,y,E,G,_,x,S,L,b;if(I){if(l){(E=(y=(m=window==null?void 0:window.google)===null||m===void 0?void 0:m.accounts)===null||y===void 0?void 0:y.id)===null||E===void 0||E.cancel();return}return(x=(_=(G=window==null?void 0:window.google)===null||G===void 0?void 0:G.accounts)===null||_===void 0?void 0:_.id)===null||x===void 0||x.initialize({client_id:C,callback:u=>{var r;if(!(u!=null&&u.credential))return(r=g.current)===null||r===void 0?void 0:r.call(g);const{credential:w,select_by:R}=u;O.current({credential:w,clientId:q(u),select_by:R})},hosted_domain:c,cancel_on_tap_outside:v,prompt_parent_id:a,state_cookie_domain:e,use_fedcm_for_prompt:s,auto_select:d}),(b=(L=(S=window==null?void 0:window.google)===null||S===void 0?void 0:S.accounts)===null||L===void 0?void 0:L.id)===null||b===void 0||b.prompt(j.current),()=>{var u,r,w;(w=(r=(u=window==null?void 0:window.google)===null||u===void 0?void 0:u.accounts)===null||r===void 0?void 0:r.id)===null||w===void 0||w.cancel()}}},[C,I,v,a,e,c,s,l,d])}export{K as G,N as a,P as u};

import{R as v,r as o,j as e}from"./react-t0FXqAAQ.js";import{a as u}from"./js-cookie-Cz0CWeBA.js";import{a as E}from"./axios-CCb-kr4I.js";import{F as h,n as R,o as b}from"./@fortawesome-BIu79hCY.js";import{R as I}from"./react-google-recaptcha-DtYr4tPR.js";import{u as P}from"./react-redux-CdBZBiYR.js";import{d as k}from"./react-router-Cj39RNwK.js";import{C as F,a as L,b as T,G as A,H as _,I as D,J as x,K as f,L as j,M as G,N as i}from"./@coreui-DBRRPAMp.js";import"./core-js-Bohkx0y1.js";import"./prop-types-BwQq7MVh.js";import"./react-async-script-kXYQ3c8E.js";import"./hoist-non-react-statics-BhEK_q3m.js";import"./react-is-8JwjhRSi.js";import"./use-sync-external-store-BLwFpdth.js";import"./@remix-run-D_05oOQ-.js";import"./react-dom-B8-4x3Di.js";import"./scheduler-CzFDRTuY.js";import"./@popperjs-BQBsAJpH.js";import"./chart.js-DpsrBYWd.js";import"./@kurkle-BZxJdD1U.js";const re=()=>{const C="",t=k(),n=v.useRef(),g=P();o.useEffect(()=>{u.get("RCTSESSION")!==void 0&&t("/")},[]);const[r,w]=o.useState(""),[c,y]=o.useState(""),N=async a=>{a.preventDefault();const S=await n.current.executeAsync();try{const s=new FormData;s.append("email",r),s.append("password",c),s.append("recaptcha_ref",S);const l=await E.post("http://localhost:5050/api/auth/login",s,{headers:{}}),p=l.data.status;if(p==200){u.set("RCTSESSION",l.data.token);const m=new URLSearchParams(window.location.search);let d="/";m.has("n")&&(d=m.get("n")),g({type:"set",email:r}),t(d)}else alert(p)}catch(s){console.error(s)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(F,{children:e.jsx(L,{className:"justify-content-center",children:e.jsx(T,{md:8,lg:6,xl:5,children:e.jsx(A,{className:"p-4",children:e.jsx(_,{children:e.jsxs(D,{onSubmit:N,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsx(I,{ref:n,size:"invisible",sitekey:C}),e.jsxs(x,{className:"mb-3",children:[e.jsx(f,{children:e.jsx(h,{icon:R})}),e.jsx(j,{type:"email",placeholder:"Email",autoComplete:"email",value:r,onChange:a=>w(a.target.value),required:!0})]}),e.jsxs(x,{className:"mb-4",children:[e.jsx(f,{children:e.jsx(h,{icon:b})}),e.jsx(j,{type:"password",placeholder:"Password",autoComplete:"current-password",value:c,onChange:a=>y(a.target.value),required:!0})]}),e.jsx("div",{className:"d-grid",children:e.jsxs(G,{children:[e.jsx(i,{type:"submit",color:"primary",className:"me-2 rounded",children:"Login"}),e.jsx(i,{color:"success",className:"me-2 rounded",onClick:()=>t("/register"),children:"Signup"})]})}),e.jsx(i,{color:"link",className:"px-0",onClick:()=>t("/forgot-password"),children:"Forgot password?"})]})})})})})})})};export{re as default};

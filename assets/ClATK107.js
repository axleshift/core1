import{R as s,r,j as t}from"./Oq9P1Wj_.js";import{R as e}from"./eGqyD3ZN.js";import{L as o,A as i,G as a,M as n,D as l}from"./COJVVqk2.js";import{b as p,e as m,n as j}from"./BJf5-03J.js";import{c as d,T as c,i as u}from"./B1wsI-8q.js";import"./deeEeel3.js";import"./NdsU5MZw.js";import"./BXWkExu4.js";import"./C5ktbw-a.js";import"./c0eKk1Db.js";import"./B0pL_gbQ.js";import"./DhxmCZ7v.js";import"./Ce_fjdqS.js";import"./CewSaW8v.js";import"./fHQ1LRrH.js";import"./CUvxBZEH.js";import"./CA9sZ-Z2.js";import"./YLYDLWv3.js";import"./b9dqFv80.js";import"./VSWDZ_lP.js";import"./B2NO97j6.js";import"./BIq-TSdk.js";import"./Dn-qDmp9.js";import"./CehKozqE.js";import"./XtWrBBVz.js";import"./BXEMiIsG.js";import"./B60PFSOe.js";import"./DoV6T4jL.js";import"./CDdQWEAe.js";import"./BqHrj3jM.js";const f=()=>{const{addToast:f}=p(),h=s.useRef(),[x,g]=r.useState(!1),[v,y]=r.useState(""),[S,b]=r.useState(null),[k,C]=r.useState(null),[w,A]=r.useState(null),[N,R]=r.useState(null),z=r.useRef(null);return t.jsxs("div",{children:[x&&t.jsx("div",{className:"loading-overlay",children:t.jsx(d,{color:"primary",variant:"grow"})}),t.jsx(e,{ref:h,size:"invisible",sitekey:m}),JSON.stringify(S),t.jsx("h4",{children:k?"Enter dropoff address":"Enter pickup address"}),t.jsxs(o,{googleMapsApiKey:j,libraries:["places"],children:[t.jsxs("div",{className:"mb-3",children:[t.jsx(i,{onLoad:s=>{z.current=s},onPlaceChanged:s=>{const r=z.current.getPlace();if(r.geometry){const s={lat:r.geometry.location.lat(),lng:r.geometry.location.lng()};R(s),y(r.formatted_address)}},options:{types:["address"]},className:"mb-3",children:t.jsx(c,{type:"text",placeholder:"...",value:v,onChange:s=>y(s.target.value)})}),t.jsxs(a,{mapContainerStyle:{height:"400px",width:"100%"},zoom:S||N?18:2,center:N||{lat:0,lng:0},children:[N&&t.jsx(n,{position:N}),k&&w&&t.jsxs(t.Fragment,{children:[!S&&t.jsx(n,{position:k}),!S&&t.jsx(n,{position:w}),S&&t.jsx(l,{directions:S})]})]})]}),t.jsx(u,{color:"primary",onClick:k?s=>{s.preventDefault();const r=N;if(A(r),R(null),y(""),!k)return f("Invalid pickup");axios.post("/freight/optimized-route",{pickup:k,dropoff:r}).then((s=>b(s.data))).catch((s=>{var r,t;const e=(null==(t=null==(r=s.response)?void 0:r.data)?void 0:t.error)||"Server is offline or restarting please wait";f(e)})).finally((()=>g(!1)))}:s=>{s.preventDefault(),C(N),R(null),y("")},disabled:!N,children:k?"Confirm dropoff":"Confirm Pickup Address"})]})]})};export{f as default};
